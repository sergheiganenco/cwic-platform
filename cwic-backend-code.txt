

========================================================================================================================
  CWIC PLATFORM - BACKEND SERVICES CODE
========================================================================================================================

Generated on: 09/13/2025 15:13:26
Backend services only - excluding frontend


========================================================================================================================
  ROOT CONFIGURATION FILES
========================================================================================================================


--------------------------------------------------------------------------------
FILE: docker-compose.yml
--------------------------------------------------------------------------------
name: cwic-platform

services:
  # ---------- FRONTEND ----------
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile
    command: npm run dev
    ports:
      - "5173:5173"
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      VITE_API_URL: http://localhost:8000
    depends_on:
      api-gateway:
        condition: service_started
    networks:
      - cwic-network
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:5173/',r=>{process.exit(r.statusCode>=200 && r.statusCode<500?0:1)}).on('error',()=>process.exit(1))\""
        ]
      interval: 30s
      timeout: 10s
      retries: 3

  # ---------- API GATEWAY ----------
  api-gateway:
    build:
      context: ./backend/api-gateway
      dockerfile: Dockerfile.dev
    ports: ["8000:8000"]
    environment:
      NODE_ENV: development
      PORT: 8000
      DATA_SERVICE_URL: http://data-service:3002   # resolvable on the same network
      AI_SERVICE_URL: http://ai-service:3003
      AUTH_SERVICE_URL: http://auth-service:8001
      CORS_ORIGIN: http://localhost:5173,http://localhost:3000
      DEV_BEARER: ${DEV_BEARER}
      NO_PROXY: "localhost,127.0.0.1,api-gateway,data-service,ai-service,auth-service,pipeline-service,notification-service,integration-service,db,redis"
      no_proxy: "localhost,127.0.0.1,api-gateway,data-service,ai-service,auth-service,pipeline-service,notification-service,integration-service,db,redis"
    volumes:
      - ./backend/api-gateway:/app
      - /app/node_modules
    depends_on:
      data-service:
        condition: service_healthy
      ai-service:
        condition: service_healthy
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:8000/health',r=>process.exit(r.statusCode===200?0:1)).on('error',()=>process.exit(1))\""
        ]
      interval: 10s
      timeout: 3s
      start_period: 15s
      retries: 3
    networks:
      - cwic-network


  # ---------- AUTH SERVICE ----------
  auth-service:
    build:
      context: ./backend/auth-service
      dockerfile: Dockerfile
    ports:
      - "8001:8001"
    environment:
      NODE_ENV: production
      HOST: 0.0.0.0
      PORT: 8001
      DATABASE_URL: postgresql://${DB_USER:-cwic_user}:${DB_PASSWORD:-cwic_secure_pass}@db:5432/${DB_NAME:-cwic_platform}
      REDIS_URL: redis://redis:6379/0
      JWT_SECRET: devsecret
      ENCRYPTION_KEY: ${ENCRYPTION_KEY}
    depends_on:
      db:
        condition: service_healthy
      redis:
        condition: service_healthy
    networks:
      - cwic-network
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:8001/health',r=>{process.exit(r.statusCode===200?0:1)}).on('error',()=>process.exit(1))\""
        ]
      interval: 30s
      timeout: 10s
      retries: 3

  # ---------- DATA SERVICE ----------
  # ---------- DATA SERVICE ----------
  data-service:
    build:
      context: ./backend/data-service
      dockerfile: Dockerfile.dev
    command: ["npm","run","dev"]         # <<< keep this
    ports: ["3002:3002"]
    environment:
      NODE_ENV: development
      SKIP_AUTH: "true"
      JWT_SECRET: devsecret
      PORT: 3002
      HOST: 0.0.0.0
      DATABASE_URL: ${DATABASE_URL:-postgresql://cwic_user:cwic_secure_pass@db:5432/cwic_platform}
      ENABLE_FILE_LOGGING: "false"
      CORS_ORIGIN: http://localhost:5173,http://localhost:3000
      # Windows/WSL file watching (optional but helpful)
      CHOKIDAR_USEPOLLING: "1"
      CHOKIDAR_INTERVAL: "300"
      REDIS_URL: redis://redis:6379
    volumes:
      - ./backend/data-service:/app
      - /app/node_modules
    depends_on:
      db:
        condition: service_healthy
    healthcheck:
      test: ["CMD","node","-e","require('http').get('http://127.0.0.1:3002/health',r=>process.exit(r.statusCode===200?0:1)).on('error',()=>process.exit(1))"]
      interval: 10s
      timeout: 3s
      start_period: 15s
      retries: 3
    networks:               
      - cwic-network


    # ---------- AI SERVICE ----------

  ai-service:
    build:
      context: ./backend/ai-service
      dockerfile: Dockerfile.dev
    ports: ["3003:3003"]
    environment:
      NODE_ENV: development
      PORT: 3003
      HOST: 0.0.0.0
      OPENAI_API_KEY: ${OPENAI_API_KEY}
    volumes:
      - ./backend/ai-service:/app
      - /app/node_modules
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:3003/health',r=>process.exit(r.statusCode===200?0:1)).on('error',()=>process.exit(1))\""
        ]
      interval: 10s
      timeout: 3s
      start_period: 15s
      retries: 3
    networks:
      - cwic-network


  # ---------- PIPELINE SERVICE ----------
  pipeline-service:
    build:
      context: ./backend/pipeline-service
      dockerfile: Dockerfile.dev
    command: ["npm","run","dev"]
    environment:
      NODE_ENV: development
      HOST: 0.0.0.0
      PORT: 3004
      CORS_ORIGIN: http://localhost:5173,http://localhost:3000
    ports:
      - "3004:3004"
    volumes:
      - ./backend/pipeline-service:/app
      - /app/node_modules
    networks:
      - cwic-network
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:3004/health',r=>{process.exit(r.statusCode===200?0:1)}).on('error',()=>process.exit(1))\""
        ]
      interval: 30s
      timeout: 10s
      retries: 3

  # ---------- NOTIFICATION SERVICE ----------
  notification-service:
    build:
      context: ./backend/notification-service
      dockerfile: Dockerfile.dev
    command: ["npm","run","dev"]
    environment:
      NODE_ENV: development
      HOST: 0.0.0.0
      PORT: 3005
      CORS_ORIGIN: http://localhost:5173,http://localhost:3000
    ports:
      - "3005:3005"
    volumes:
      - ./backend/notification-service:/app
      - /app/node_modules
    networks:
      - cwic-network
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:3005/health',r=>{process.exit(r.statusCode===200?0:1)}).on('error',()=>process.exit(1))\""
        ]
      interval: 30s
      timeout: 10s
      retries: 3

  # ---------- INTEGRATION SERVICE ----------
  integration-service:
    build:
      context: ./backend/integration-service
      dockerfile: Dockerfile.dev
    command: ["npm","run","dev"]
    environment:
      NODE_ENV: development
      HOST: 0.0.0.0
      PORT: 3006
      CORS_ORIGIN: http://localhost:5173,http://localhost:3000
    ports:
      - "3006:3006"
    volumes:
      - ./backend/integration-service:/app
      - /app/node_modules
    networks:
      - cwic-network
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:3006/health',r=>{process.exit(r.statusCode===200?0:1)}).on('error',()=>process.exit(1))\""
        ]
      interval: 30s
      timeout: 10s
      retries: 3

  # ---------- POSTGRES ----------
  db:
    image: postgres:15
    ports:
      - "${DB_PORT:-5432}:5432"
    environment:
      POSTGRES_DB: ${DB_NAME:-cwic_platform}
      POSTGRES_USER: ${DB_USER:-cwic_user}
      POSTGRES_PASSWORD: ${DB_PASSWORD:-cwic_secure_pass}
    volumes:
      - pgdata:/var/lib/postgresql/data
    healthcheck:
      test: ["CMD-SHELL", "pg_isready -U ${DB_USER:-cwic_user} -d ${DB_NAME:-cwic_platform} -h localhost || exit 1"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - cwic-network
    restart: unless-stopped

  # ---------- REDIS ----------
  redis:
    image: redis:7-alpine
    ports:
      - "6379:6379"
    command: ["redis-server", "--appendonly", "yes"]
    volumes:
      - redisdata:/data
    healthcheck:
      test: ["CMD", "redis-cli", "ping"]
      interval: 10s
      timeout: 5s
      retries: 5
    networks:
      - cwic-network
    restart: unless-stopped

  # ---------- OPTIONAL: ELASTICSEARCH ----------
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.13.4
    profiles: ["search"]
    environment:
      discovery.type: single-node
      xpack.security.enabled: "false"
      ES_JAVA_OPTS: -Xms512m -Xmx512m
    ports:
      - "9200:9200"
    ulimits:
      memlock:
        soft: -1
        hard: -1
    networks:
      - cwic-network
    restart: unless-stopped
    healthcheck:
      test:
        [
          "CMD-SHELL",
          "node -e \"require('http').get('http://127.0.0.1:9200/_cluster/health?wait_for_status=yellow&timeout=1s',r=>{process.exit(r.statusCode===200?0:1)}).on('error',()=>process.exit(1))\""
        ]
      interval: 30s
      timeout: 10s
      retries: 10

networks:
  cwic-network:
    driver: bridge

volumes:
  pgdata:
  redisdata:



--------------------------------------------------------------------------------
FILE: .env
--------------------------------------------------------------------------------
JWT_SECRET=devsecret
ENCRYPTION_KEY=dev_encryption_key_please_change
DEV_BEARER=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1MSIsImVtYWlsIjoiZGV2QGN3aWMubG9jYWwiLCJyb2xlIjoiYWRtaW4iLCJwZXJtaXNzaW9ucyI6WyIqIl0sImlhdCI6MTc1NzE1ODU4OSwiZXhwIjoxNzU3NzYzMzg5LCJhdWQiOiJjd2ljLXVpIiwiaXNzIjoiY3dpYyJ9.Gqtm-Ll77DVwUOHQ0GEmTKZ8r2PuB3C5T32w1toU7GQ

# Database configuration
POSTGRES_DB=cwic_platform
POSTGRES_USER=cwic_user
POSTGRES_PASSWORD=cwic_secure_pass
POSTGRES_PORT=5432

# Network configuration
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# Docker configuration
COMPOSE_BAKE=false


--------------------------------------------------------------------------------
FILE: .env.example
--------------------------------------------------------------------------------
# ==============================================
# CWIC Platform Environment Configuration
# ==============================================

# Application
NODE_ENV=development
APP_NAME=CWIC Platform
APP_VERSION=1.0.0
APP_URL=http://localhost:3000
API_URL=http://localhost:8000

# Database Configuration
DATABASE_HOST=localhost
DATABASE_PORT=5432
DATABASE_USER=postgres
DATABASE_PASSWORD=password
DATABASE_NAME=cwic_platform

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# JWT Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=24h
JWT_REFRESH_EXPIRES_IN=7d

# AI Service Configuration
OPENAI_API_KEY=your-openai-api-key
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-azure-openai-key
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4

# External Integrations
SERVICENOW_INSTANCE=your-instance.service-now.com
SERVICENOW_USERNAME=your-username
SERVICENOW_PASSWORD=your-password

JIRA_URL=https://your-company.atlassian.net
JIRA_USERNAME=your-email@company.com
JIRA_API_TOKEN=your-jira-api-token

AZURE_DEVOPS_ORGANIZATION=your-organization
AZURE_DEVOPS_PROJECT=your-project
AZURE_DEVOPS_TOKEN=your-personal-access-token

# GitHub Integration
GITHUB_TOKEN=your-github-token
GITHUB_WEBHOOK_SECRET=your-webhook-secret

# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Monitoring & Logging
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true
SENTRY_DSN=your-sentry-dsn

# Security
CORS_ORIGIN=http://localhost:3000
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# Storage
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin123
MINIO_BUCKET=cwic-storage

# Search
ELASTICSEARCH_HOST=localhost:9200
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# Message Queue
KAFKA_BROKERS=localhost:9092
KAFKA_CLIENT_ID=cwic-platform


--------------------------------------------------------------------------------
FILE: package.json
--------------------------------------------------------------------------------
{
  "name": "cwic-platform",
  "version": "1.0.0",
  "description": "Complete Workflow Intelligence & Control Platform",
  "private": true,
  "workspaces": [
    "frontend",
    "backend/*"
  ],
  "scripts": {
    "dev": "./scripts/development/start-dev.sh",
    "build": "./scripts/development/build.sh",
    "test": "./scripts/development/test.sh",
    "lint": "./scripts/development/lint.sh",
    "setup": "./scripts/setup/init-project.sh",
    "deploy:staging": "./scripts/deployment/deploy-staging.sh",
    "deploy:prod": "./scripts/deployment/deploy-production.sh",
    "docker:up": "docker-compose up -d",
    "docker:down": "docker-compose down",
    "db:migrate": "./scripts/database/migrate.sh",
    "db:seed": "./scripts/database/seed.sh",
    "clean": "./scripts/maintenance/cleanup.sh"
  },
  "keywords": [
    "data-governance",
    "ai-assistant",
    "ci-cd",
    "workflow-automation",
    "data-platform"
  ],
  "author": "Your Company",
  "license": "MIT",
  "devDependencies": {
    "@types/express": "^4.17.23",
    "@types/express-serve-static-core": "^4.19.6",
    "concurrently": "^8.2.0",
    "cross-env": "^7.0.3",
    "cross-env-shell": "^7.0.3"
  },
  "dependencies": {
    "bullmq": "^5.58.5",
    "ioredis": "^5.7.0"
  }
}



========================================================================================================================
  BACKEND SERVICE: API-GATEWAY
========================================================================================================================


--------------------------------------------------------------------------------
FILE: backend\api-gateway\.env
--------------------------------------------------------------------------------
# backend/api-gateway/.env  (DOCKER COMPOSE)
SERVICE_NAME=api-gateway
PORT=8000
NODE_ENV=development

CORS_ORIGIN=http://localhost:3000,http://localhost:5173,http://localhost:4173

# Internal DNS via compose service names
DATA_SERVICE_URL=http://data-service:3002/api
AI_SERVICE_URL=http://ai-service:3003
AUTH_SERVICE_URL=http://auth-service:3001
PIPELINE_SERVICE_URL=http://pipeline-service:3004
INTEGRATION_SERVICE_URL=http://integration-service:3006
NOTIFICATION_SERVICE_URL=http://notification-service:3007
# Security
DEV_BEARER=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ1MSIsImVtYWlsIjoiZGV2QGN3aWMubG9jYWwiLCJyb2xlIjoiYWRtaW4iLCJwZXJtaXNzaW9ucyI6WyIqIl0sImlhdCI6MTc1NzE1ODU4OSwiZXhwIjoxNzU3NzYzMzg5LCJhdWQiOiJjd2ljLXVpIiwiaXNzIjoiY3dpYyJ9.Gqtm-Ll77DVwUOHQ0GEmTKZ8r2PuB3C5T32w1toU7GQ
JWT_SECRET=devsecret
TRUST_PROXY=1
BODY_LIMIT=10mb


--------------------------------------------------------------------------------
FILE: backend\api-gateway\.env.docker
--------------------------------------------------------------------------------
SERVICE_NAME=api-gateway
PORT=8000
TRUST_PROXY=1
JWT_SECRET=devsecret
BODY_LIMIT=10mb

# Docker DNS names (matches compose services)
DATA_SERVICE_URL=http://data-service:3002
AI_SERVICE_URL=http://ai-service:3003
AUTH_SERVICE_URL=http://auth-service:3001
PIPELINE_SERVICE_URL=http://pipeline-service:3004
INTEGRATION_SERVICE_URL=http://integration-service:3006
NOTIFICATION_SERVICE_URL=http://notification-service:3007

# Frontend dev origins
CORS_ORIGIN=http://localhost:3000,http://localhost:5173,http://localhost:4173

# Dev token (optional)
DEV_BEARER=



--------------------------------------------------------------------------------
FILE: backend\api-gateway\Dockerfile
--------------------------------------------------------------------------------
# backend/api-gateway/Dockerfile
FROM node:18-alpine AS deps
WORKDIR /app
COPY package*.json ./
RUN npm ci

FROM node:18-alpine AS build
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY tsconfig.json ./
COPY src ./src
RUN npm run build

FROM node:18-alpine AS runtime
WORKDIR /app
ENV NODE_ENV=production
COPY --from=build /app/dist ./dist
COPY package*.json ./
RUN npm ci --omit=dev && npm cache clean --force
EXPOSE 8000
CMD ["node","dist/server.js"]



--------------------------------------------------------------------------------
FILE: backend\api-gateway\Dockerfile.dev
--------------------------------------------------------------------------------
# Dev image for api-gateway
FROM node:20-alpine

WORKDIR /app

RUN apk add --no-cache curl

COPY package*.json ./
RUN if [ -f package-lock.json ]; then npm ci; else npm install; fi

COPY . .

USER node

EXPOSE 8000

HEALTHCHECK --interval=10s --timeout=3s --start-period=10s --retries=3 \
    CMD curl -fsS http://127.0.0.1:8000/health || exit 1

CMD ["npm","run","dev"]



--------------------------------------------------------------------------------
FILE: backend\api-gateway\package.json
--------------------------------------------------------------------------------
{
  "name": "cwic-api-gateway",
  "version": "1.0.0",
  "type": "module",
  "main": "dist/server.js",
  "scripts": {
    "dev": "nodemon --watch src --ext ts --exec \"npx tsx src/server.ts\"",
    "build": "tsc",
    "start": "node dist/server.js",
    "typecheck": "tsc --noEmit"
  },
  "engines": {
    "node": ">=18"
  },
  "dependencies": {
    "compression": "^1.8.1",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.21.2",
    "express-rate-limit": "^8.0.1",
    "helmet": "^7.2.0",
    "http-proxy-middleware": "^3.0.5",
    "jsonwebtoken": "^9.0.2",
    "morgan": "^1.10.1"
  },
  "devDependencies": {
    "@types/express": "^4.17.23",
    "@types/node": "^20.19.11",
    "nodemon": "^3.1.0",
    "tsx": "^4.20.4",
    "typescript": "^5.9.2"
  }
}



--------------------------------------------------------------------------------
FILE: backend\api-gateway\package-lock.json
--------------------------------------------------------------------------------
{
  "name": "cwic-api-gateway",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "cwic-api-gateway",
      "version": "1.0.0",
      "dependencies": {
        "compression": "^1.7.4",
        "cors": "^2.8.5",
        "dotenv": "^16.4.5",
        "express": "^4.19.2",
        "express-rate-limit": "^8.0.1",
        "helmet": "^7.1.0",
        "http-proxy-middleware": "^3.0.5",
        "jsonwebtoken": "^9.0.2",
        "morgan": "^1.10.0"
      },
      "devDependencies": {
        "@types/express": "^4.17.21",
        "@types/node": "^20.12.7",
        "nodemon": "^3.1.0",
        "tsx": "^4.20.4",
        "typescript": "^5.4.5"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@esbuild/linux-x64": {
      "version": "0.25.9",
      "cpu": [
        "x64"
      ],
      "dev": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "linux"
      ],
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/@types/body-parser": {
      "version": "1.19.6",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/connect": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/connect": {
      "version": "3.4.38",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/express": {
      "version": "4.17.23",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/body-parser": "*",
        "@types/express-serve-static-core": "^4.17.33",
        "@types/qs": "*",
        "@types/serve-static": "*"
      }
    },
    "node_modules/@types/express-serve-static-core": {
      "version": "4.19.6",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "@types/qs": "*",
        "@types/range-parser": "*",
        "@types/send": "*"
      }
    },
    "node_modules/@types/http-errors": {
      "version": "2.0.5",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/http-proxy": {
      "version": "1.17.16",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/mime": {
      "version": "1.3.5",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node": {
      "version": "20.19.11",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/qs": {
      "version": "6.14.0",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/range-parser": {
      "version": "1.2.7",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/send": {
      "version": "0.17.5",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/mime": "^1",
        "@types/node": "*"
      }
    },
    "node_modules/@types/serve-static": {
      "version": "1.15.8",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/http-errors": "*",
        "@types/node": "*",
        "@types/send": "*"
      }
    },
    "node_modules/accepts": {
      "version": "1.3.8",
      "license": "MIT",
      "dependencies": {
        "mime-types": "~2.1.34",
        "negotiator": "0.6.3"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/accepts/node_modules/negotiator": {
      "version": "0.6.3",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/array-flatten": {
      "version": "1.1.1",
      "license": "MIT"
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/basic-auth": {
      "version": "2.0.1",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.1.2"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/basic-auth/node_modules/safe-buffer": {
      "version": "5.1.2",
      "license": "MIT"
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/body-parser": {
      "version": "1.20.3",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "content-type": "~1.0.5",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "on-finished": "2.4.1",
        "qs": "6.13.0",
        "raw-body": "2.5.2",
        "type-is": "~1.6.18",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/brace-expansion": {
      "version": "1.1.12",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/buffer-equal-constant-time": {
      "version": "1.0.1",
      "license": "BSD-3-Clause"
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/compressible": {
      "version": "2.0.18",
      "license": "MIT",
      "dependencies": {
        "mime-db": ">= 1.43.0 < 2"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/compression": {
      "version": "1.8.1",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "compressible": "~2.0.18",
        "debug": "2.6.9",
        "negotiator": "~0.6.4",
        "on-headers": "~1.1.0",
        "safe-buffer": "5.2.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/content-disposition": {
      "version": "0.5.4",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie": {
      "version": "0.7.1",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.6",
      "license": "MIT"
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/debug": {
      "version": "2.6.9",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/destroy": {
      "version": "1.2.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/dotenv": {
      "version": "16.6.1",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/ecdsa-sig-formatter": {
      "version": "1.0.11",
      "license": "Apache-2.0",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "license": "MIT"
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/esbuild": {
      "version": "0.25.9",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "bin": {
        "esbuild": "bin/esbuild"
      },
      "engines": {
        "node": ">=18"
      },
      "optionalDependencies": {
        "@esbuild/aix-ppc64": "0.25.9",
        "@esbuild/android-arm": "0.25.9",
        "@esbuild/android-arm64": "0.25.9",
        "@esbuild/android-x64": "0.25.9",
        "@esbuild/darwin-arm64": "0.25.9",
        "@esbuild/darwin-x64": "0.25.9",
        "@esbuild/freebsd-arm64": "0.25.9",
        "@esbuild/freebsd-x64": "0.25.9",
        "@esbuild/linux-arm": "0.25.9",
        "@esbuild/linux-arm64": "0.25.9",
        "@esbuild/linux-ia32": "0.25.9",
        "@esbuild/linux-loong64": "0.25.9",
        "@esbuild/linux-mips64el": "0.25.9",
        "@esbuild/linux-ppc64": "0.25.9",
        "@esbuild/linux-riscv64": "0.25.9",
        "@esbuild/linux-s390x": "0.25.9",
        "@esbuild/linux-x64": "0.25.9",
        "@esbuild/netbsd-arm64": "0.25.9",
        "@esbuild/netbsd-x64": "0.25.9",
        "@esbuild/openbsd-arm64": "0.25.9",
        "@esbuild/openbsd-x64": "0.25.9",
        "@esbuild/openharmony-arm64": "0.25.9",
        "@esbuild/sunos-x64": "0.25.9",
        "@esbuild/win32-arm64": "0.25.9",
        "@esbuild/win32-ia32": "0.25.9",
        "@esbuild/win32-x64": "0.25.9"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "license": "MIT"
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/eventemitter3": {
      "version": "4.0.7",
      "license": "MIT"
    },
    "node_modules/express": {
      "version": "4.21.2",
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.8",
        "array-flatten": "1.1.1",
        "body-parser": "1.20.3",
        "content-disposition": "0.5.4",
        "content-type": "~1.0.4",
        "cookie": "0.7.1",
        "cookie-signature": "1.0.6",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "finalhandler": "1.3.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "merge-descriptors": "1.0.3",
        "methods": "~1.1.2",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "path-to-regexp": "0.1.12",
        "proxy-addr": "~2.0.7",
        "qs": "6.13.0",
        "range-parser": "~1.2.1",
        "safe-buffer": "5.2.1",
        "send": "0.19.0",
        "serve-static": "1.16.2",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "type-is": "~1.6.18",
        "utils-merge": "1.0.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/express-rate-limit": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/express-rate-limit/-/express-rate-limit-8.0.1.tgz",
      "integrity": "sha512-aZVCnybn7TVmxO4BtlmnvX+nuz8qHW124KKJ8dumsBsmv5ZLxE0pYu7S2nwyRBGHHCAzdmnGyrc5U/rksSPO7Q==",
      "license": "MIT",
      "dependencies": {
        "ip-address": "10.0.1"
      },
      "engines": {
        "node": ">= 16"
      },
      "funding": {
        "url": "https://github.com/sponsors/express-rate-limit"
      },
      "peerDependencies": {
        "express": ">= 4.11"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/finalhandler": {
      "version": "1.3.1",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "statuses": "2.0.1",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fresh": {
      "version": "0.5.2",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-tsconfig": {
      "version": "4.10.1",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-pkg-maps": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/privatenumber/get-tsconfig?sponsor=1"
      }
    },
    "node_modules/glob-parent": {
      "version": "5.1.2",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "3.0.0",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/helmet": {
      "version": "7.2.0",
      "license": "MIT",
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/http-proxy": {
      "version": "1.18.1",
      "license": "MIT",
      "dependencies": {
        "eventemitter3": "^4.0.0",
        "follow-redirects": "^1.0.0",
        "requires-port": "^1.0.0"
      },
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/http-proxy-middleware": {
      "version": "3.0.5",
      "license": "MIT",
      "dependencies": {
        "@types/http-proxy": "^1.17.15",
        "debug": "^4.3.6",
        "http-proxy": "^1.18.1",
        "is-glob": "^4.0.3",
        "is-plain-object": "^5.0.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/http-proxy-middleware/node_modules/debug": {
      "version": "4.4.1",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/http-proxy-middleware/node_modules/ms": {
      "version": "2.1.3",
      "license": "MIT"
    },
    "node_modules/iconv-lite": {
      "version": "0.4.24",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ignore-by-default": {
      "version": "1.0.1",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "license": "ISC"
    },
    "node_modules/ip-address": {
      "version": "10.0.1",
      "resolved": "https://registry.npmjs.org/ip-address/-/ip-address-10.0.1.tgz",
      "integrity": "sha512-NWv9YLW4PoW2B7xtzaS3NCot75m6nK7Icdv0o3lfMceJVRfSoQwqD4wEH5rLwoKJwUiZ/rfpiVBhnaF0FK4HoA==",
      "license": "MIT",
      "engines": {
        "node": ">= 12"
      }
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-plain-object": {
      "version": "5.0.0",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/jsonwebtoken": {
      "version": "9.0.2",
      "license": "MIT",
      "dependencies": {
        "jws": "^3.2.2",
        "lodash.includes": "^4.3.0",
        "lodash.isboolean": "^3.0.3",
        "lodash.isinteger": "^4.0.4",
        "lodash.isnumber": "^3.0.3",
        "lodash.isplainobject": "^4.0.6",
        "lodash.isstring": "^4.0.1",
        "lodash.once": "^4.0.0",
        "ms": "^2.1.1",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      }
    },
    "node_modules/jsonwebtoken/node_modules/ms": {
      "version": "2.1.3",
      "license": "MIT"
    },
    "node_modules/jwa": {
      "version": "1.4.2",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jws": {
      "version": "3.2.2",
      "license": "MIT",
      "dependencies": {
        "jwa": "^1.4.1",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/lodash.includes": {
      "version": "4.3.0",
      "license": "MIT"
    },
    "node_modules/lodash.isboolean": {
      "version": "3.0.3",
      "license": "MIT"
    },
    "node_modules/lodash.isinteger": {
      "version": "4.0.4",
      "license": "MIT"
    },
    "node_modules/lodash.isnumber": {
      "version": "3.0.3",
      "license": "MIT"
    },
    "node_modules/lodash.isplainobject": {
      "version": "4.0.6",
      "license": "MIT"
    },
    "node_modules/lodash.isstring": {
      "version": "4.0.1",
      "license": "MIT"
    },
    "node_modules/lodash.once": {
      "version": "4.1.1",
      "license": "MIT"
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/media-typer": {
      "version": "0.3.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/merge-descriptors": {
      "version": "1.0.3",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/methods": {
      "version": "1.1.2",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime": {
      "version": "1.6.0",
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.54.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types/node_modules/mime-db": {
      "version": "1.52.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/minimatch": {
      "version": "3.1.2",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/morgan": {
      "version": "1.10.1",
      "license": "MIT",
      "dependencies": {
        "basic-auth": "~2.0.1",
        "debug": "2.6.9",
        "depd": "~2.0.0",
        "on-finished": "~2.3.0",
        "on-headers": "~1.1.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/morgan/node_modules/on-finished": {
      "version": "2.3.0",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/ms": {
      "version": "2.0.0",
      "license": "MIT"
    },
    "node_modules/negotiator": {
      "version": "0.6.4",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/nodemon": {
      "version": "3.1.10",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chokidar": "^3.5.2",
        "debug": "^4",
        "ignore-by-default": "^1.0.1",
        "minimatch": "^3.1.2",
        "pstree.remy": "^1.1.8",
        "semver": "^7.5.3",
        "simple-update-notifier": "^2.0.0",
        "supports-color": "^5.5.0",
        "touch": "^3.1.0",
        "undefsafe": "^2.0.5"
      },
      "bin": {
        "nodemon": "bin/nodemon.js"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/nodemon"
      }
    },
    "node_modules/nodemon/node_modules/debug": {
      "version": "4.4.1",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/nodemon/node_modules/ms": {
      "version": "2.1.3",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/on-headers": {
      "version": "1.1.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-to-regexp": {
      "version": "0.1.12",
      "license": "MIT"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/pstree.remy": {
      "version": "1.1.8",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/qs": {
      "version": "6.13.0",
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.0.6"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "2.5.2",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/requires-port": {
      "version": "1.0.0",
      "license": "MIT"
    },
    "node_modules/resolve-pkg-maps": {
      "version": "1.0.0",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "7.7.2",
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/send": {
      "version": "0.19.0",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/send/node_modules/encodeurl": {
      "version": "1.0.2",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/send/node_modules/ms": {
      "version": "2.1.3",
      "license": "MIT"
    },
    "node_modules/serve-static": {
      "version": "1.16.2",
      "license": "MIT",
      "dependencies": {
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "parseurl": "~1.3.3",
        "send": "0.19.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "license": "ISC"
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/simple-update-notifier": {
      "version": "2.0.0",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.5.3"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.1",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/supports-color": {
      "version": "5.5.0",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^3.0.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/touch": {
      "version": "3.1.1",
      "dev": true,
      "license": "ISC",
      "bin": {
        "nodetouch": "bin/nodetouch.js"
      }
    },
    "node_modules/tsx": {
      "version": "4.20.4",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "esbuild": "~0.25.0",
        "get-tsconfig": "^4.7.5"
      },
      "bin": {
        "tsx": "dist/cli.mjs"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.3"
      }
    },
    "node_modules/type-is": {
      "version": "1.6.18",
      "license": "MIT",
      "dependencies": {
        "media-typer": "0.3.0",
        "mime-types": "~2.1.24"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/typescript": {
      "version": "5.9.2",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/undefsafe": {
      "version": "2.0.5",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "license": "MIT"
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/utils-merge": {
      "version": "1.0.1",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    }
  }
}



--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\app.ts
--------------------------------------------------------------------------------
﻿// src/app.ts
import compression from "compression";
import cors from "cors";
import "dotenv/config";
import express, {
  type NextFunction,
  type Request,
  type RequestHandler,
  type Response,
} from "express";
import rateLimit from "express-rate-limit";
import helmet from "helmet";
import morgan from "morgan";
import { randomUUID } from "node:crypto";

import { resolveUpstreams } from "./config/upstreams.js";
import aiServiceProxy from "./proxy/aiServiceProxy.js";
import authServiceProxy from "./proxy/authServiceProxy.js";
import dataServiceProxy from "./proxy/dataServiceProxy.js";

const app = express();

const NODE_ENV = process.env.NODE_ENV || "development";
const isProd = NODE_ENV === "production";
const isDev = !isProd;

const bodyLimit = process.env.BODY_LIMIT || "1mb";
const DEV_BEARER = process.env.DEV_BEARER ?? "";

/** Parse comma-separated CORS origins from env */
function parseOrigins(val?: string): string[] {
  if (!val) return [];
  return val.split(",").map((s) => s.trim()).filter(Boolean);
}

// Allow explicit env origins; in dev, default to localhost ports if none provided
const origins = parseOrigins(
  process.env.CORS_ORIGIN ||
    (isDev
      ? "http://localhost:3000,http://localhost:5173,http://localhost:4173"
      : "")
);
/** If no origins provided or '*' present, reflect any origin */
const allowAll = origins.length === 0 || origins.includes("*");

// ────────────────────────── App hardening & basics ──────────────────────────
app.disable("x-powered-by");

// Accept a numeric hop count or boolean "true"
const trustProxy = process.env.TRUST_PROXY ?? (isProd ? "1" : "true");
app.set("trust proxy", trustProxy);

app.use(
  helmet({
    contentSecurityPolicy: false,
    crossOriginEmbedderPolicy: false,
    hsts: isProd ? undefined : false,
  })
);

// ──────────────────────── BULLETPROOF CORS PRE-FLIGHT ───────────────────────
app.use((req: Request, res: Response, next: NextFunction) => {
  if (req.method !== "OPTIONS") return next();

  const origin = (req.headers.origin as string) || "";
  const isAllowedOrigin = allowAll || origins.includes(origin);

  if (!isAllowedOrigin) return next();

  // Reflect origin (credentials-compatible)
  res.setHeader("Access-Control-Allow-Origin", origin);
  res.setHeader("Vary", "Origin");
  res.setHeader("Access-Control-Allow-Credentials", "true");

  // Reflect requested methods/headers so *any* custom headers are accepted
  const reqMethods =
    (req.headers["access-control-request-method"] as string) ||
    "GET,POST,PUT,PATCH,DELETE,OPTIONS";
  const reqHeaders =
    (req.headers["access-control-request-headers"] as string) ||
    "authorization,content-type";

  res.setHeader("Access-Control-Allow-Methods", reqMethods);
  res.setHeader("Access-Control-Allow-Headers", reqHeaders);
  res.setHeader("Access-Control-Max-Age", "86400"); // 24h

  return res.status(204).end();
});

// Standard CORS for non-OPTIONS requests
const corsOptions: cors.CorsOptions = {
  origin: allowAll ? true : origins,
  credentials: true,
  methods: ["GET", "POST", "PUT", "PATCH", "DELETE", "OPTIONS"],
  exposedHeaders: ["X-Request-Id"],
  maxAge: 86400,
  optionsSuccessStatus: 204,
};
app.use(cors(corsOptions));

// ─────────────────────────── Rate limit (prod only) ─────────────────────────
const limiter = rateLimit({
  windowMs: 60_000,
  max: 300,
  standardHeaders: true,
  legacyHeaders: false,
  skip: (req) => req.method === "OPTIONS" || !isProd,
}) as unknown as RequestHandler;
app.use(limiter);

// ─────────────────────────── Parsers & logging ──────────────────────────────
app.use(compression());
app.use(express.json({ limit: bodyLimit }));
app.use(express.urlencoded({ extended: true, limit: bodyLimit }));
app.use(morgan(isDev ? "dev" : "combined"));

// Request ID (echo/propagate downstream)
app.use((req: Request, res: Response, next: NextFunction) => {
  const rid = (req.headers["x-request-id"] as string) || randomUUID();
  req.headers["x-request-id"] = rid;
  res.setHeader("X-Request-Id", rid);
  next();
});

// ───────────────────────────── Health & debug ───────────────────────────────
app.get("/health", (_req, res) =>
  res.json({ ok: true, service: "api-gateway", env: NODE_ENV })
);
app.get("/ready", (_req, res) => res.json({ ready: true }));
app.get("/upstreams", (_req, res) =>
  res.json({ env: NODE_ENV, upstreams: resolveUpstreams() })
);

// ─────────────────────────── Dev stubs (before proxies) ─────────────────────
// NOTE: These must be registered BEFORE the proxies below.
if (isDev) {
  // Refresh endpoint stub for dev: UI posts here; we return a token
  app.post("/api/auth/refresh", (_req, res) => {
    if (!DEV_BEARER) return res.status(500).json({ error: "DEV_BEARER not set" });
    const raw = DEV_BEARER.startsWith("Bearer ") ? DEV_BEARER.slice(7) : DEV_BEARER;
    return res.json({ token: raw });
  });

  // Optional: AI health stub so UI stops 502’ing when ai-service is down
  app.get("/api/ai/health", (_req, res) => {
    res.json({ status: "ok", stub: true });
  });
}

// ───────────────────────── Dev bearer injection block ───────────────────────
// In dev, if no Authorization header, attach DEV_BEARER (do not overwrite a real one)
if (isDev) {
  app.use(["/api", "/api/ai", "/api/auth"], (req, _res, next) => {
    if (!req.headers.authorization && DEV_BEARER) {
      req.headers.authorization = DEV_BEARER.startsWith("Bearer ")
        ? DEV_BEARER
        : `Bearer ${DEV_BEARER}`;
    }
    next();
  });
}

// ──────────────────────────────── Proxies ───────────────────────────────────
// IMPORTANT: Do NOT strip the /api prefix when forwarding to the data-service.
// The data-service mounts its routes under /api/* (e.g., /api/data-sources).
// Order matters: specific first.
app.use("/api/ai", aiServiceProxy);     // rewrites ^/api/ai → /api on upstream (see file)
app.use("/api/auth", authServiceProxy); // rewrites ^/api/auth → /auth on upstream (see file)
app.use("/api", dataServiceProxy);      // forwards /api/* intact to data-service

// ───────────────────────────── 404 + error handling ─────────────────────────
app.use((req, res) => {
  res.status(404).json({
    success: false,
    error: "NOT_FOUND",
    message: `Route ${req.method} ${req.originalUrl} not found`,
  });
});

// Centralized JSON error handler
// eslint-disable-next-line @typescript-eslint/no-unused-vars
app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {
  const status = err.status || err.statusCode || 500;
  const code = err.code || "INTERNAL_SERVER_ERROR";
  const publicMessage =
    isProd ? err.publicMessage || "Internal server error" : err.message || "Internal server error";

  if (!res.headersSent) {
    res.status(status).json({
      success: false,
      error: { code, message: publicMessage },
    });
  }
});

export default app;


--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\config\upstreams.ts
--------------------------------------------------------------------------------
// backend/api-gateway/src/config/upstreams.ts
import fs from "node:fs";
import { URL } from "node:url";

export interface Upstreams {
  dataService: string;
  aiService: string;
  authService: string;
}

function inDocker(): boolean {
  try {
    if (fs.existsSync("/.dockerenv")) return true;
    if (process.env.KUBERNETES_SERVICE_HOST) return true;
  } catch {}
  return false;
}

function sanitizeBase(u: string): string {
  try {
    const url = new URL(u);
    url.pathname = url.pathname.replace(/\/+$/, "");
    return url.toString().replace(/\/+$/, "");
  } catch {
    return (u || "").replace(/\/+$/, "");
  }
}

function normalizeServiceBase(raw: string | undefined, fallback: string) {
  let url = (raw || fallback).trim().replace(/\/+$/, "");
  if (url.endsWith("/api")) url = url.slice(0, -4);
  return sanitizeBase(url);
}

function maybeLocalize(u: string, local: string): string {
  if (inDocker()) return u;
  try {
    const url = new URL(u);
    const dockerNames = new Set([
      "data-service",
      "ai-service",
      "auth-service",
      "pipeline-service",
      "notification-service",
      "integration-service",
    ]);
    if (dockerNames.has(url.hostname)) {
      return `${url.protocol}//localhost${url.port ? ":" + url.port : ""}`;
    }
    return u;
  } catch {
    return u;
  }
}

export function resolveUpstreams(): Upstreams {
  const dataService = maybeLocalize(
    normalizeServiceBase(process.env.DATA_SERVICE_URL, "http://data-service:3002"),
    "http://localhost:3002"
  );
  const aiService = maybeLocalize(
    normalizeServiceBase(process.env.AI_SERVICE_URL, "http://ai-service:3003"),
    "http://localhost:3003"
  );
  const authService = maybeLocalize(
    normalizeServiceBase(process.env.AUTH_SERVICE_URL, "http://auth-service:8001"),
    "http://localhost:8001"
  );
  return { dataService, aiService, authService };
}



--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\middleware\healthCheck.ts
--------------------------------------------------------------------------------
import { Request, Response } from 'express';
// These clients come from @cwic/shared (weâ€™ll wire them as simple axios wrappers)
import { AIServiceClient, AuthServiceClient, DataServiceClient } from '@cwic/shared';

const serviceClients = {
  auth: new AuthServiceClient(),
  data: new DataServiceClient(),
  ai: new AIServiceClient()
};

export const healthCheck = async (req: Request, res: Response): Promise<void> => {
  const startTime = Date.now();
  try {
    const serviceChecks = await Promise.allSettled([
      checkServiceHealth('auth', serviceClients.auth),
      checkServiceHealth('data', serviceClients.data),
      checkServiceHealth('ai', serviceClients.ai)
    ]);

    const services = serviceChecks.reduce((acc, result, index) => {
      const serviceName = ['auth', 'data', 'ai'][index];
      acc[serviceName] = result.status === 'fulfilled'
        ? result.value
        : { status: 'unhealthy', error: (result as any).reason?.message };
      return acc;
    }, {} as any);

    const allHealthy = Object.values(services).every((s: any) => s.status === 'healthy');

    res.status(allHealthy ? 200 : 503).json({
      status: allHealthy ? 'healthy' : 'degraded',
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      responseTime: Date.now() - startTime,
      version: process.env.npm_package_version || '1.0.0',
      environment: process.env.NODE_ENV || 'development',
      services
    });
  } catch (error) {
    res.status(503).json({
      status: 'unhealthy',
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      responseTime: Date.now() - startTime,
      error: error instanceof Error ? error.message : 'Unknown error'
    });
  }
};

async function checkServiceHealth(_name: string, client: any): Promise<any> {
  try {
    const start = Date.now();
    await client.get('/health');
    return { status: 'healthy', responseTime: Date.now() - start };
  } catch (error) {
    return { status: 'unhealthy', error: error instanceof Error ? error.message : 'Unknown error' };
  }
}



--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\proxy\aiServiceProxy.ts
--------------------------------------------------------------------------------
// backend/api-gateway/src/proxy/aiServiceProxy.ts
import type { Request, Response } from "express";
import { createProxyMiddleware, type Options } from "http-proxy-middleware";
import type { Socket } from "node:net";
import { resolveUpstreams } from "../config/upstreams.js";

const { aiService: target } = resolveUpstreams();
const isDev = process.env.NODE_ENV !== "production";
const devBearer = process.env.DEV_BEARER ?? "";

/**
 * Mount path: /api/ai
 * Upstream exposes /api/* â†’ trim the /api/ai prefix down to /api
 *   req.url:          '/health'
 *   originalUrl:      '/api/ai/health'
 *   proxied path ->   '/api/health'
 */
const options: Options<Request, Response> = {
  target,
  changeOrigin: true,
  xfwd: true,
  secure: !isDev,
  proxyTimeout: 30_000,
  timeout: 30_000,
  pathRewrite: (_path, req) => `/api${req.url}`,

  on: {
    proxyReq: (proxyReq: any, req: Request) => {
      if (isDev && devBearer && !req.headers.authorization) {
        proxyReq.setHeader(
          "authorization",
          devBearer.startsWith("Bearer ") ? devBearer : `Bearer ${devBearer}`
        );
        proxyReq.setHeader("x-dev-auth", "gateway");
      } else if (req.headers.authorization) {
        proxyReq.setHeader("authorization", req.headers.authorization);
      }

      const rid = (req.headers["x-request-id"] as string) || "";
      if (rid) proxyReq.setHeader("x-request-id", rid);

      if (isDev) {
        // eslint-disable-next-line no-console
        console.debug(
          `[proxyâ†’ai] ${req.method} ${req.originalUrl} â†’ ${target}/api${req.url}`
        );
      }
    },

    proxyRes: (proxyRes, req: Request) => {
      const origin = req.headers.origin as string | undefined;
      if (origin) {
        proxyRes.headers["access-control-allow-origin"] = origin;
        proxyRes.headers["access-control-allow-credentials"] = "true";
      }
      if (isDev) {
        // eslint-disable-next-line no-console
        console.debug(
          `[proxyâ†’ai] ${req.method} ${req.originalUrl} â‡ ${proxyRes.statusCode}`
        );
      }
    },

    error: (err: Error, req: Request, res: Response | Socket) => {
      if (typeof (res as Socket).destroy === "function" && !(res as any).setHeader) {
        try {
          (res as Socket).destroy();
        } catch {}
        return;
      }
      const r = res as Response;
      if (!r.headersSent) {
        r.status(502).json({
          success: false,
          error: "AI_SERVICE_UNAVAILABLE",
          message: "AI service is currently unavailable",
          details: err.message,
          upstream: target,
          timestamp: new Date().toISOString(),
        });
      }
    },
  },
};

export default createProxyMiddleware(options);



--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\proxy\authServiceProxy.ts
--------------------------------------------------------------------------------
// backend/api-gateway/src/proxy/authServiceProxy.ts
import type { Request, Response } from "express";
import { createProxyMiddleware, type Options } from "http-proxy-middleware";
import type { Socket } from "node:net";
import { resolveUpstreams } from "../config/upstreams.js";

const { authService: target } = resolveUpstreams();
const isDev = process.env.NODE_ENV !== "production";

const options: Options<Request, Response> = {
  target,
  changeOrigin: true,
  xfwd: true,
  secure: !isDev,
  proxyTimeout: 30_000,
  timeout: 30_000,
  // Gateway mount: /api/auth â†’ upstream exposes /auth/*
  pathRewrite: (_path, req) => `/auth${req.url}`,

  on: {
    proxyReq: (_proxyReq: any, req: Request) => {
      if (isDev) {
        // eslint-disable-next-line no-console
        console.debug(
          `[proxyâ†’auth] ${req.method} ${req.originalUrl} â†’ ${target}/auth${req.url}`
        );
      }
    },

    error: (err: Error, req: Request, res: Response | Socket) => {
      if (typeof (res as Socket).destroy === "function" && !(res as any).setHeader) {
        try {
          (res as Socket).destroy();
        } catch {}
        return;
      }
      const r = res as Response;
      if (!r.headersSent) {
        r.status(502).json({
          success: false,
          error: "AUTH_SERVICE_UNAVAILABLE",
          message: "Auth service is currently unavailable",
          details: err.message,
          upstream: target,
          timestamp: new Date().toISOString(),
        });
      }
    },
  },
};

export default createProxyMiddleware(options);



--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\proxy\dataServiceProxy.ts
--------------------------------------------------------------------------------
import type { Request, Response } from "express";
import { createProxyMiddleware, type Options } from "http-proxy-middleware";
import type { Socket } from "node:net";
import { resolveUpstreams } from "../config/upstreams.js";

const { dataService: upstreamBase } = resolveUpstreams(); // e.g. http://localhost:3002
const isDev = process.env.NODE_ENV !== "production";
const devBearer = process.env.DEV_BEARER ?? "";

/**
 * We STRIP the /api prefix here because the data-service mounts routes WITHOUT /api.
 * FE â†’ Gateway:        /api/data-sources
 * Gateway â†’ data-svc:  /data-sources
 */
const options: Options<Request, Response> = {
  target: upstreamBase,
  changeOrigin: true,
  xfwd: true,
  secure: !isDev,
  proxyTimeout: 30_000,
  timeout: 30_000,

  // ðŸ”‘ KEY FIX: remove `/api` before forwarding
  pathRewrite: { "^/api": "" },

  on: {
    proxyReq: (proxyReq: any, req: Request) => {
      // Dev bearer injection (only if client didnâ€™t send one)
      if (!req.headers.authorization && isDev && devBearer) {
        proxyReq.setHeader(
          "authorization",
          devBearer.startsWith("Bearer ") ? devBearer : `Bearer ${devBearer}`
        );
        proxyReq.setHeader("x-dev-auth", "gateway");
      } else if (req.headers.authorization) {
        proxyReq.setHeader("authorization", req.headers.authorization);
      }

      // Trace headers
      const rid = (req.headers["x-request-id"] as string) || "";
      if (rid) proxyReq.setHeader("x-request-id", rid);

      // Forward cookies if present
      const cookie = req.headers["cookie"];
      if (cookie) proxyReq.setHeader("cookie", cookie);

      // Reflect request body for non-GET
      if (req.method !== "GET" && req.method !== "HEAD" && (req as any).body) {
        const ct =
          String(
            proxyReq.getHeader("content-type") ||
              proxyReq.getHeader("Content-Type") ||
              ""
          ).toLowerCase();

        if (ct.includes("application/json")) {
          const body = JSON.stringify((req as any).body);
          proxyReq.setHeader("content-length", Buffer.byteLength(body));
          proxyReq.write(body);
        } else if (ct.includes("application/x-www-form-urlencoded")) {
          const body = new URLSearchParams(
            (req as any).body as Record<string, string>
          ).toString();
          proxyReq.setHeader("content-length", Buffer.byteLength(body));
          proxyReq.write(body);
        }
      }

      if (isDev) {
        // proxyReq.path is AFTER pathRewrite; helpful to see final upstream URL
        console.debug(
          `[proxyâ†’data] ${req.method} ${req.originalUrl} â†’ ${upstreamBase}${proxyReq.path}`
        );
      }
    },

    proxyRes: (proxyRes, req: Request) => {
      // Keep CORS aligned with gateway decision (reflect the Origin)
      const origin = req.headers.origin;
      if (origin) {
        proxyRes.headers["access-control-allow-origin"] = origin;
        proxyRes.headers["access-control-allow-credentials"] = "true";
      }

      if (isDev) {
        console.debug(
          `[proxyâ†’data] ${req.method} ${req.originalUrl} â‡ ${proxyRes.statusCode}`
        );
      }
    },

    error: (err: Error, req: Request, res: Response | Socket) => {
      console.error(
        `[proxyâ†’data] Error for ${req.method} ${req.originalUrl}:`,
        err.message
      );

      // If it's a raw socket (e.g., WS) just destroy
      if (typeof (res as Socket).destroy === "function" && !(res as any).setHeader) {
        try {
          (res as Socket).destroy();
        } catch {}
        return;
      }

      const r = res as Response;
      if (!r.headersSent) {
        const origin = req.headers.origin;
        if (origin) {
          r.setHeader("Access-Control-Allow-Origin", origin);
          r.setHeader("Access-Control-Allow-Credentials", "true");
        }
        r.status(502).json({
          success: false,
          error: "DATA_SERVICE_UNAVAILABLE",
          message: "Data service is currently unavailable",
          details: err.message,
          upstream: upstreamBase,
          timestamp: new Date().toISOString(),
        });
      }
    },
  },
};

export default createProxyMiddleware(options);


--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\routes\data-proxy.ts
--------------------------------------------------------------------------------
import { Request, Response, Router } from 'express';
import { createProxyMiddleware, type Options } from 'http-proxy-middleware';

const router = Router();

// Compose sets DATA_SERVICE_URL=http://data-service:3002
const base = (process.env.DATA_SERVICE_URL || 'http://data-service:3002').replace(/\/+$/, '');
const target = `${base}/api`; // upstream base includes /api

function attachBody(proxyReq: any, req: Request): void {
  const ct = String(proxyReq.getHeader('Content-Type') || '');
  if (!req.body || req.method === 'GET' || req.method === 'HEAD') return;

  if (ct.includes('application/json')) {
    const body = JSON.stringify(req.body);
    proxyReq.setHeader('Content-Length', Buffer.byteLength(body));
    proxyReq.write(body);
  } else if (ct.includes('application/x-www-form-urlencoded')) {
    const body = new URLSearchParams(req.body as Record<string, string>).toString();
    proxyReq.setHeader('Content-Length', Buffer.byteLength(body));
    proxyReq.write(body);
  }
}

const options: Options<Request, Response> = {
  target,
  changeOrigin: true,
  on: {
    proxyReq: (proxyReq, req) => attachBody(proxyReq, req as Request),
    error: (err, _req, res) => {
      const r = res as Response;
      if (!r.headersSent) {
        r.status(502).json({
          success: false,
          error: 'BAD_GATEWAY',
          message: (err as Error).message,
          upstream: target,
        });
      }
    },
    proxyRes: (_proxyRes, req, _res) => {
      // lightweight trace in your logs
      (req as any).log?.debug?.(`Proxied ${req.method} ${req.originalUrl} -> ${target}${req.url}`);
    },
  },
};

// Handle both /api and /api/*
const proxyMw = createProxyMiddleware(options);
router.all('/', proxyMw as any);
router.all('/*', proxyMw as any);

export default router;



--------------------------------------------------------------------------------
FILE: backend\api-gateway\src\server.ts
--------------------------------------------------------------------------------
// src/server.ts
import "dotenv/config";
import app from "./app.js";

const PORT = Number(process.env.PORT ?? 8000);
const HOST = process.env.HOST ?? "0.0.0.0";

const DATA_SERVICE_URL = process.env.DATA_SERVICE_URL ?? "http://localhost:3002";
const AI_SERVICE_URL = process.env.AI_SERVICE_URL ?? "http://localhost:8003";

const server = app.listen(PORT, HOST, () => {
  console.log(`🚀 API Gateway listening on ${HOST}:${PORT}`);
  console.log(`📊 Health:           http://localhost:${PORT}/health`);
  console.log(`🔄 Proxy /api/*  →   ${DATA_SERVICE_URL}`);
  console.log(`🤖 Proxy /api/ai/* → ${AI_SERVICE_URL}`);
});

function shutdown(signal: string) {
  console.log(`[gateway] ${signal} received → closing server...`);
  server.close((err?: Error) => {
    if (err) {
      console.error("[gateway] Error during close:", err);
      process.exit(1);
    }
    console.log("[gateway] Closed cleanly.");
    process.exit(0);
  });
  // Force-exit if something hangs (open sockets, etc.)
  setTimeout(() => {
    console.warn("[gateway] Forced shutdown after 10s");
    process.exit(1);
  }, 10_000).unref();
}

process.on("SIGINT", () => shutdown("SIGINT"));
process.on("SIGTERM", () => shutdown("SIGTERM"));
process.on("unhandledRejection", (reason) => {
  console.error("[gateway] Unhandled Rejection:", reason);
});
process.on("uncaughtException", (err) => {
  console.error("[gateway] Uncaught Exception:", err);
  // In prod you may decide to exit(1); keeping alive here for dev.
  // if (process.env.NODE_ENV === "production") process.exit(1);
});

export default server;



--------------------------------------------------------------------------------
FILE: backend\api-gateway\tsconfig.json
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "outDir": "dist",
    "rootDir": "src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "forceConsistentCasingInFileNames": true
  },
  "include": ["src"]
}



========================================================================================================================
  BACKEND SERVICE: AUTH-SERVICE
========================================================================================================================


--------------------------------------------------------------------------------
FILE: backend\auth-service\.env
--------------------------------------------------------------------------------
SERVICE_NAME=auth-service
PORT=3001
CORS_ORIGIN=http://localhost:5173

DATABASE_URL=postgresql://cwic:cwic@localhost:5432/cwic   # or your compose conn string
REDIS_URL=redis://localhost:6379/0

JWT_ACCESS_SECRET=change_me_access_32chars_min
JWT_REFRESH_SECRET=change_me_refresh_32chars_min
ACCESS_TTL=15m
REFRESH_TTL=7d



--------------------------------------------------------------------------------
FILE: backend\auth-service\Dockerfile
--------------------------------------------------------------------------------
# ---------- deps ----------
FROM node:20-alpine AS deps
WORKDIR /app
# Copy ONLY manifests first for better caching
COPY package*.json ./
# Lockfile may not exist in dev â€” fall back to npm i
RUN if [ -f package-lock.json ]; then \
    npm ci --no-audit --no-fund; \
    else \
    npm i --no-audit --no-fund; \
    fi

# ---------- build ----------
FROM node:20-alpine AS build
WORKDIR /app
# Bring node_modules from deps layer (already installed)
COPY --from=deps /app/node_modules ./node_modules
# Copy manifests + tsconfig for build metadata
COPY package*.json tsconfig.json ./
# Copy source
COPY src ./src
# Build: use script if present, otherwise fallback to tsc
RUN npm run build || npx tsc -p tsconfig.json

# ---------- runtime ----------
FROM node:20-alpine AS runtime
WORKDIR /app
ENV NODE_ENV=production
# Minimal utilities (init + health probe)
RUN apk add --no-cache dumb-init curl
# Non-root user for safety
USER node
# Copy runtime bits
COPY --from=deps  /app/node_modules ./node_modules
COPY --from=build /app/dist        ./dist
EXPOSE 8001
HEALTHCHECK --interval=30s --timeout=5s --retries=3 \
    CMD curl -fsS http://localhost:8001/health || exit 1
ENTRYPOINT ["dumb-init","--"]
CMD ["node","--enable-source-maps","dist/server.js"]



--------------------------------------------------------------------------------
FILE: backend\auth-service\Dockerfile.dev
--------------------------------------------------------------------------------
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD [ "npm", "run", "dev" ]



--------------------------------------------------------------------------------
FILE: backend\auth-service\package.json
--------------------------------------------------------------------------------
{
  "name": "cwic-auth-service",
  "version": "1.0.0",
  "type": "module",
  "main": "dist/server.js",
  "scripts": {
    "dev": "nodemon --watch src --ext ts --exec \"npx tsx src/server.ts\"",
    "build": "tsc",
    "start": "node dist/server.js",
    "typecheck": "tsc --noEmit"
  },
  "engines": {
    "node": ">=18"
  },
  "dependencies": {
    "bcryptjs": "^2.4.3",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "dotenv": "^16.4.5",
    "express": "^4.19.2",
    "helmet": "^7.1.0",
    "jsonwebtoken": "^9.0.2",
    "pg": "^8.12.0",
    "redis": "^4.7.0",
    "zod": "^3.23.8"
  },
  "devDependencies": {
    "@types/bcryptjs": "^2.4.6",
    "@types/express": "^4.17.21",
    "@types/jsonwebtoken": "^9.0.5",
    "@types/ms": "^2.1.0",
    "@types/node": "^20.19.10",
    "nodemon": "^3.1.0",
    "tsx": "^4.20.4",
    "typescript": "^5.4.5"
  }
}



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\app.ts
--------------------------------------------------------------------------------
import compression from 'compression';
import cors from 'cors';
import express from 'express';
import helmet from 'helmet';

export const app = express();

app.use(helmet());
app.use(cors());
app.use(compression());
app.use(express.json());

// Health endpoint for Docker HEALTHCHECK
app.get('/health', (_req, res) => {
  res.status(200).json({ status: 'ok', service: 'auth-service' });
});



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\config\env.ts
--------------------------------------------------------------------------------
import 'dotenv/config';
import { z } from 'zod';

const Env = z.object({
  NODE_ENV: z.enum(['development','test','production']).default('development'),
  PORT: z.coerce.number().default(3001),
  CORS_ORIGIN: z.string().default('http://localhost:5173'),

  DATABASE_URL: z.string(),
  REDIS_URL: z.string(),

  JWT_ACCESS_SECRET: z.string().min(16),
  JWT_REFRESH_SECRET: z.string().min(16),
  ACCESS_TTL: z.string().default('15m'),
  REFRESH_TTL: z.string().default('7d'),
});

export const env = Env.parse(process.env);
export const corsOrigins = env.CORS_ORIGIN.split(',').map(s => s.trim());



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\db.ts
--------------------------------------------------------------------------------
import { Pool } from 'pg';
import { env } from './config/env.js';

export const pool = new Pool({
  connectionString: env.DATABASE_URL,
  max: 15,
  idleTimeoutMillis: 30_000,
  statement_timeout: 60_000,
});



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\middleware\error.ts
--------------------------------------------------------------------------------
import type { NextFunction, Request, Response } from 'express';

export class HttpError extends Error {
  status: number; code?: string;
  constructor(status: number, message: string, code?: string) {
    super(message); this.status = status; this.code = code;
  }
}
export function errorHandler(err: any, _req: Request, res: Response, _next: NextFunction) {
  const status = err.status || 500;
  res.status(status).json({
    type: 'about:blank',
    title: err.code || 'ServerError',
    status,
    detail: err.message || 'Unexpected error'
  });
}



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\middleware\requireAuth.ts
--------------------------------------------------------------------------------
import type { NextFunction, Request, Response } from 'express';
import jwt from 'jsonwebtoken';
import { env } from '../config/env.js';

export function requireAuth(roles?: string[]) {
  return (req: Request, res: Response, next: NextFunction) => {
    const h = req.headers.authorization || '';
    const token = h.startsWith('Bearer ') ? h.slice(7) : null;
    if (!token) return res.status(401).json({ detail: 'Missing token' });
    try {
      const decoded: any = jwt.verify(token, env.JWT_ACCESS_SECRET);
      (req as any).user = decoded;
      if (roles && !roles.some(r => (decoded.roles || []).includes(r))) {
        return res.status(403).json({ detail: 'Forbidden' });
      }
      next();
    } catch { return res.status(401).json({ detail: 'Invalid token' }); }
  };
}



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\redis.ts
--------------------------------------------------------------------------------
import { createClient } from 'redis';
import { env } from './config/env.js';

export const redis = createClient({ url: env.REDIS_URL });

export async function initRedis() {
  redis.on('error', (e) => console.error('[redis] error', e));
  if (!redis.isOpen) {
    await redis.connect();
  }
}



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\routes\auth.ts
--------------------------------------------------------------------------------
import { randomUUID } from 'crypto';
import { Router } from 'express';
import { z } from 'zod';
import { pool } from '../db.js';
import { HttpError } from '../middleware/error.js';
import { redis } from '../redis.js';
import { signAccess, signRefresh, verifyRefresh } from '../utils/jwt.js';
import { hashPassword, verifyPassword } from '../utils/password.js';

export const authRouter = Router();

const RegisterSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8),
  display_name: z.string().min(2).max(100)
});

const LoginSchema = z.object({
  email: z.string().email(),
  password: z.string().min(8)
});

/** POST /auth/register */
authRouter.post('/register', async (req, res, next) => {
  try {
    const { email, password, display_name } = RegisterSchema.parse(req.body);
    const pwHash = await hashPassword(password);

    const { rows } = await pool.query(
      `INSERT INTO users (email, password_hash, display_name, roles, is_verified)
       VALUES ($1, $2, $3, ARRAY['user'], false)
       ON CONFLICT (email) DO NOTHING
       RETURNING id, email, display_name, roles, is_verified, created_at`,
      [email, pwHash, display_name]
    );
    const user = rows[0];
    if (!user) throw new HttpError(409, 'Email already registered', 'EmailTaken');

    const sid = randomUUID();
    const access = signAccess({ sub: user.id, roles: user.roles, sid });
    const refresh = signRefresh({ sub: user.id, sid });
    res.status(201).json({ user, tokens: { access, refresh } });
  } catch (e) { next(e); }
});

/** POST /auth/login */
authRouter.post('/login', async (req, res, next) => {
  try {
    const { email, password } = LoginSchema.parse(req.body);
    const { rows } = await pool.query(
      'SELECT id, email, password_hash, display_name, roles, is_verified FROM users WHERE email=$1',
      [email]
    );
    const u = rows[0];
    if (!u || !(await verifyPassword(password, u.password_hash))) {
      throw new HttpError(401, 'Invalid credentials', 'AuthFailed');
    }
    const sid = randomUUID();
    const access = signAccess({ sub: u.id, roles: u.roles, sid });
    const refresh = signRefresh({ sub: u.id, sid });
    res.json({ user: { id: u.id, email: u.email, display_name: u.display_name, roles: u.roles }, tokens: { access, refresh } });
  } catch (e) { next(e); }
});

/** POST /auth/refresh */
authRouter.post('/refresh', async (req, res, next) => {
  try {
    const { refresh } = (req.body || {}) as { refresh?: string };
    if (!refresh) throw new HttpError(400, 'Missing refresh token', 'BadRequest');

    let decoded: any;
    try { decoded = verifyRefresh(refresh); }
    catch { throw new HttpError(401, 'Invalid refresh token', 'InvalidRefresh'); }

    // revoked?
    const revoked = await redis.get(`revoked:${decoded.sid}`);
    if (revoked) throw new HttpError(401, 'Refresh revoked', 'TokenRevoked');

    // rotate: revoke old session id
    await redis.setEx(`revoked:${decoded.sid}`, 60 * 60 * 24 * 8, '1');
    const newSid = randomUUID();

    // fetch roles to embed (optional)
    const { rows } = await pool.query('SELECT roles FROM users WHERE id=$1', [decoded.sub]);
    const roles = rows[0]?.roles || ['user'];

    const access = signAccess({ sub: decoded.sub, roles, sid: newSid });
    const newRefresh = signRefresh({ sub: decoded.sub, sid: newSid });
    res.json({ access, refresh: newRefresh });
  } catch (e) { next(e); }
});

/** POST /auth/logout */
authRouter.post('/logout', async (req, res, _next) => {
  try {
    const { refresh } = (req.body || {}) as { refresh?: string };
    if (refresh) {
      try {
        const decoded: any = verifyRefresh(refresh);
        await redis.setEx(`revoked:${decoded.sid}`, 60 * 60 * 24 * 8, '1');
      } catch { /* ignore */ }
    }
    res.status(204).send();
  } catch { res.status(204).send(); }
});

/** GET /auth/me (requires Authorization: Bearer <access>) */
authRouter.get('/me', async (req, res, next) => {
  try {
    const h = req.headers.authorization || '';
    const token = h.startsWith('Bearer ') ? h.slice(7) : '';
    if (!token) throw new HttpError(401, 'Missing token', 'AuthRequired');

    // Verify access; we donâ€™t need roles here
    const jwt = await import('jsonwebtoken');
    const { env } = await import('../config/env.js');
    const decoded: any = jwt.default.verify(token, env.JWT_ACCESS_SECRET);

    const { rows } = await pool.query(
      'SELECT id, email, display_name, roles, is_verified, created_at FROM users WHERE id=$1',
      [decoded.sub]
    );
    const u = rows[0];
    if (!u) throw new HttpError(404, 'User not found', 'NotFound');
    res.json(u);
  } catch (e) { next(e); }
});



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\server.ts
--------------------------------------------------------------------------------
import 'dotenv/config'; // load env early
import process from 'node:process';
import { app } from './app.js'; // NodeNext: use .js for relative import

const port = Number(process.env.PORT) || 8001;
app.listen(port, () => {
  console.log(`auth-service listening on :${port}`);
});



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\utils\jwt.ts
--------------------------------------------------------------------------------
import jwt, { type JwtPayload, type Secret, type SignOptions } from 'jsonwebtoken';
import type { StringValue } from 'ms';
import { env } from '../config/env.js';

const accessOpts: SignOptions = { expiresIn: env.ACCESS_TTL as StringValue };
const refreshOpts: SignOptions = { expiresIn: env.REFRESH_TTL as StringValue };

export function signAccess(payload: JwtPayload | string | object) {
  return jwt.sign(payload as any, env.JWT_ACCESS_SECRET as Secret, accessOpts);
}

export function signRefresh(payload: JwtPayload | string | object) {
  return jwt.sign(payload as any, env.JWT_REFRESH_SECRET as Secret, refreshOpts);
}

export function verifyAccess(token: string) {
  return jwt.verify(token, env.JWT_ACCESS_SECRET as Secret);
}

export function verifyRefresh(token: string) {
  return jwt.verify(token, env.JWT_REFRESH_SECRET as Secret);
}



--------------------------------------------------------------------------------
FILE: backend\auth-service\src\utils\password.ts
--------------------------------------------------------------------------------
import bcrypt from 'bcryptjs';
export async function hashPassword(pw: string) { return bcrypt.hash(pw, 12); }
export async function verifyPassword(pw: string, hash: string) { return bcrypt.compare(pw, hash); }



--------------------------------------------------------------------------------
FILE: backend\auth-service\tsconfig.json
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    "target": "ES2021",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "outDir": "dist",
    "rootDir": "src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "resolveJsonModule": true,
    "sourceMap": true,
    "types": ["node"]
  },
  "include": ["src"]
}



========================================================================================================================
  BACKEND SERVICE: DATA-SERVICE
========================================================================================================================


--------------------------------------------------------------------------------
FILE: backend\data-service\.env
--------------------------------------------------------------------------------
SERVICE_NAME=data-service
PORT=3002
HOST=0.0.0.0
NODE_ENV=development

# Frontend + Gateway (for browser)
CORS_ORIGIN=http://localhost:5173,http://localhost:3000,http://localhost:8000

# Local DB/Redis on your machine
DATABASE_URL=postgresql://cwic_user:cwic_secure_pass@localhost:5432/cwic_platform
REDIS_URL=redis://localhost:6379/0

DB_POOL_MAX=20
DB_POOL_MIN=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000
DB_SSL=false

JWT_SECRET=devsecret
JWT_EXPIRES_IN=7d

LOG_LEVEL=debug
ENABLE_FILE_LOGGING=false

ENABLE_METRICS=true
ENABLE_HEALTH_CHECK=true

RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

ENABLE_ASSET_DISCOVERY=true
ENABLE_LINEAGE_TRACKING=true
ENABLE_QUALITY_SCORING=true
ENABLE_COMPLIANCE_CHECKS=true

DEBUG_SQL=false
ENABLE_QUERY_LOGGING=false
MOCK_EXTERNAL_SERVICES=false
SKIP_AUTH=true



--------------------------------------------------------------------------------
FILE: backend\data-service\.env.docker
--------------------------------------------------------------------------------
SERVICE_NAME=data-service
PORT=3002
HOST=0.0.0.0
NODE_ENV=development

CORS_ORIGIN=http://localhost:5173,http://localhost:3000,http://localhost:8000

# Docker DNS names
DATABASE_URL=postgresql://cwic_user:cwic_secure_pass@db:5432/cwic_platform
REDIS_URL=redis://redis:6379/0

DB_POOL_MAX=20
DB_POOL_MIN=2
DB_IDLE_TIMEOUT=30000
DB_CONNECTION_TIMEOUT=10000
DB_SSL=false

JWT_SECRET=devsecret
JWT_EXPIRES_IN=7d

LOG_LEVEL=debug
ENABLE_FILE_LOGGING=false

ENABLE_METRICS=true
ENABLE_HEALTH_CHECK=true



--------------------------------------------------------------------------------
FILE: backend\data-service\Dockerfile
--------------------------------------------------------------------------------
# ---------- base versions ----------
ARG NODE_VERSION=20.15.1

# ---------- deps: install dev deps using lockfile ----------
FROM node:${NODE_VERSION}-alpine AS deps
WORKDIR /app

# Make sure OS has openssl for pg and friends
RUN apk add --no-cache libc6-compat

# Copy only what npm needs to resolve dependencies
COPY package.json package-lock.json ./

# Use npm ci because we have a lockfile
RUN npm ci

# ---------- builder: compile TS ----------
FROM node:${NODE_VERSION}-alpine AS builder
WORKDIR /app
COPY --from=deps /app/node_modules ./node_modules
COPY . .

# Build Typescript -> dist
RUN npm run build

# ---------- prod-deps: prune to production only ----------
FROM node:${NODE_VERSION}-alpine AS prod-deps
WORKDIR /app
COPY package.json package-lock.json ./
RUN npm ci --omit=dev

# ---------- runner: minimal image ----------
FROM node:${NODE_VERSION}-alpine AS runner
WORKDIR /app

ENV NODE_ENV=production \
    PORT=3002 \
    TZ=UTC

# Add a non-root user
RUN addgroup -S nodegrp && adduser -S nodeusr -G nodegrp

# Copy compiled code and production deps
COPY --from=prod-deps /app/node_modules ./node_modules
COPY --from=builder   /app/dist ./dist
COPY package.json ./

USER nodeusr

EXPOSE 3002
HEALTHCHECK --interval=15s --timeout=3s --start-period=20s --retries=3 \
    CMD wget -qO- http://127.0.0.1:${PORT}/health || exit 1

CMD ["node", "dist/server.js"]



--------------------------------------------------------------------------------
FILE: backend\data-service\Dockerfile.dev
--------------------------------------------------------------------------------
FROM node:20-alpine
WORKDIR /app
RUN apk add --no-cache curl
COPY package*.json ./
RUN if [ -f package-lock.json ]; then npm ci; else npm install; fi
COPY . .
USER node
EXPOSE 3002
HEALTHCHECK --interval=10s --timeout=3s --start-period=10s --retries=3 \
    CMD curl -fsS http://127.0.0.1:3002/health || exit 1
CMD ["npm","run","dev"]



--------------------------------------------------------------------------------
FILE: backend\data-service\openapi\catalog.yml
--------------------------------------------------------------------------------
openapi: 3.0.3
info: { title: CWIC Data Catalog, version: "1.0.0" }
servers: [{ url: /api }]
paths:
  /catalog/assets:
    get:
      summary: List assets
      parameters:
        - { in: query, name: search, schema: { type: string } }
        - {
            in: query,
            name: type,
            schema:
              {
                type: string,
                enum: [table, view, file, api, dashboard, report],
              },
          }
        - { in: query, name: owner, schema: { type: string } }
        - {
            in: query,
            name: quality,
            schema: { type: string, enum: [high, medium, low] },
          }
        - {
            in: query,
            name: classification,
            schema:
              {
                type: string,
                enum: [public, internal, confidential, restricted],
              },
          }
        - {
            in: query,
            name: dataSourceId,
            schema: { type: string, format: uuid },
          }
        - {
            in: query,
            name: tags,
            schema: { type: string, description: "Comma-separated" },
          }
        - {
            in: query,
            name: sortBy,
            schema:
              {
                type: string,
                enum: [name, updatedAt, createdAt, quality, owner],
              },
          }
        - {
            in: query,
            name: sortOrder,
            schema: { type: string, enum: [asc, desc], default: asc },
          }
        - {
            in: query,
            name: page,
            schema: { type: integer, minimum: 1, default: 1 },
          }
        - {
            in: query,
            name: limit,
            schema: { type: integer, minimum: 1, maximum: 200, default: 50 },
          }
      responses: { "200": { description: OK } }
  /catalog/assets/{id}:
    get:
      {
        summary: Get asset details,
        parameters:
          [{ in: path, name: id, required: true, schema: { type: string } }],
        responses: { "200": { description: OK } },
      }
  /catalog/metrics:
    get:
      {
        summary: Catalog summary metrics,
        responses: { "200": { description: OK } },
      }
  /data-sources/{id}/sync:
    post:
      {
        summary: Trigger sync,
        parameters:
          [
            {
              in: path,
              name: id,
              required: true,
              schema: { type: string, format: uuid },
            },
          ],
        responses: { "202": { description: Accepted } },
      }



--------------------------------------------------------------------------------
FILE: backend\data-service\package.json
--------------------------------------------------------------------------------
{
  "name": "cwic-data-service",
  "version": "1.0.0",
  "description": "CWIC Data Governance Service - Data Source and Asset Management",
  "main": "dist/server.js",
  "scripts": {
    "build": "tsc -b",
    "postbuild": "tsc-alias -p tsconfig.json",
    "start": "node dist/server.js",
    "dev": "ts-node-dev --respawn --transpile-only --ignore-watch node_modules --ignore-watch dist -r tsconfig-paths/register src/server.ts",
    "dev:watch": "nodemon --exec ts-node src/server.ts",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "lint": "eslint src/**/*.ts",
    "lint:fix": "eslint src/**/*.ts --fix",
    "format": "prettier --write src/**/*.ts",
    "migrate": "ts-node src/scripts/migrate.ts",
    "migrate:rollback": "ts-node src/scripts/migrate.ts --rollback",
    "seed": "ts-node src/scripts/seed.ts",
    "docker:build": "docker build -t cwic-data-service .",
    "docker:run": "docker run -p 8002:8002 --env-file .env cwic-data-service"
  },
  "keywords": [
    "data-governance",
    "data-management",
    "typescript",
    "nodejs",
    "postgresql",
    "rest-api"
  ],
  "author": "CWIC Team",
  "license": "MIT",
  "dependencies": {
    "@aws-sdk/client-s3": "^3.465.0",
    "axios": "^1.6.2",
    "bcryptjs": "^2.4.3",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "csv-parser": "^3.0.0",
    "cwic-platform": "file:../..",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "express-rate-limit": "^7.1.5",
    "express-validator": "^7.0.1",
    "helmet": "^7.1.0",
    "ioredis": "^5.7.0",
    "joi": "^17.11.0",
    "jsonwebtoken": "^9.0.2",
    "mongodb": "^6.3.0",
    "mssql": "^10.0.4",
    "multer": "^1.4.5-lts.1",
    "mysql2": "^3.6.5",
    "nanoid": "^4.0.2",
    "pg": "^8.16.3",
    "pg-copy-streams": "^7.0.0",
    "redis": "^4.6.10",
    "uuid": "^9.0.1",
    "winston": "^3.11.0",
    "xlsx": "^0.18.5",
    "zod": "^4.1.8",
    "bullmq": "^5.7.0"
  },
  "devDependencies": {
    "@types/bcryptjs": "^2.4.6",
    "@types/compression": "^1.7.5",
    "@types/cors": "^2.8.17",
    "@types/express": "^4.17.21",
    "@types/jest": "^29.5.8",
    "@types/jsonwebtoken": "^9.0.5",
    "@types/mssql": "^9.1.7",
    "@types/multer": "^1.4.11",
    "@types/node": "^20.10.4",
    "@types/pg": "^8.10.9",
    "@types/supertest": "^2.0.16",
    "@types/uuid": "^9.0.7",
    "@typescript-eslint/eslint-plugin": "^6.13.1",
    "@typescript-eslint/parser": "^6.13.1",
    "eslint": "^8.55.0",
    "jest": "^29.7.0",
    "nodemon": "^3.0.2",
    "prettier": "^3.1.0",
    "supertest": "^6.3.3",
    "ts-jest": "^29.1.1",
    "ts-node": "^10.9.1",
    "ts-node-dev": "^2.0.0",
    "tsc-alias": "^1.8.16",
    "tsconfig-paths": "^4.2.0",
    "typescript": "^5.3.3"
  },
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=8.0.0"
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\package-lock.json
--------------------------------------------------------------------------------
{
  "name": "cwic-data-service",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "cwic-data-service",
      "version": "1.0.0",
      "license": "MIT",
      "dependencies": {
        "@aws-sdk/client-s3": "^3.465.0",
        "axios": "^1.6.2",
        "bcryptjs": "^2.4.3",
        "compression": "^1.7.4",
        "cors": "^2.8.5",
        "csv-parser": "^3.0.0",
        "cwic-platform": "file:../..",
        "dotenv": "^16.3.1",
        "express": "^4.18.2",
        "express-rate-limit": "^7.1.5",
        "express-validator": "^7.0.1",
        "helmet": "^7.1.0",
        "joi": "^17.11.0",
        "jsonwebtoken": "^9.0.2",
        "mongodb": "^6.3.0",
        "mssql": "^10.0.4",
        "multer": "^1.4.5-lts.1",
        "mysql2": "^3.6.5",
        "nanoid": "^4.0.2",
        "pg": "^8.11.3",
        "redis": "^4.6.10",
        "uuid": "^9.0.1",
        "winston": "^3.11.0",
        "xlsx": "^0.18.5",
        "zod": "^4.1.5"
      },
      "devDependencies": {
        "@types/bcryptjs": "^2.4.6",
        "@types/compression": "^1.7.5",
        "@types/cors": "^2.8.17",
        "@types/express": "^4.17.21",
        "@types/jest": "^29.5.8",
        "@types/jsonwebtoken": "^9.0.5",
        "@types/mssql": "^9.1.7",
        "@types/multer": "^1.4.11",
        "@types/node": "^20.10.4",
        "@types/pg": "^8.10.9",
        "@types/supertest": "^2.0.16",
        "@types/uuid": "^9.0.7",
        "@typescript-eslint/eslint-plugin": "^6.13.1",
        "@typescript-eslint/parser": "^6.13.1",
        "eslint": "^8.55.0",
        "jest": "^29.7.0",
        "nodemon": "^3.0.2",
        "prettier": "^3.1.0",
        "supertest": "^6.3.3",
        "ts-jest": "^29.1.1",
        "ts-node": "^10.9.1",
        "ts-node-dev": "^2.0.0",
        "tsc-alias": "^1.8.16",
        "tsconfig-paths": "^4.2.0",
        "typescript": "^5.3.3"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      }
    },
    "../..": {
      "version": "1.0.0",
      "license": "MIT",
      "workspaces": [
        "frontend",
        "backend/*"
      ],
      "devDependencies": {
        "@types/express": "^4.17.23",
        "@types/express-serve-static-core": "^4.19.6",
        "concurrently": "^8.2.0",
        "cross-env": "^7.0.3",
        "cross-env-shell": "^7.0.3"
      }
    },
    "node_modules/@aws-crypto/crc32": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/crc32/-/crc32-5.2.0.tgz",
      "integrity": "sha512-nLbCWqQNgUiwwtFsen1AdzAtvuLRsQS8rYgMuxCrdKf9kOssamGLuPwyTY9wyYblNr9+1XM8v6zoDTPPSIeANg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/util": "^5.2.0",
        "@aws-sdk/types": "^3.222.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/@aws-crypto/crc32c": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/crc32c/-/crc32c-5.2.0.tgz",
      "integrity": "sha512-+iWb8qaHLYKrNvGRbiYRHSdKRWhto5XlZUEBwDjYNf+ly5SVYG6zEoYIdxvf5R3zyeP16w4PLBn3rH1xc74Rag==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/util": "^5.2.0",
        "@aws-sdk/types": "^3.222.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/sha1-browser": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/sha1-browser/-/sha1-browser-5.2.0.tgz",
      "integrity": "sha512-OH6lveCFfcDjX4dbAvCFSYUjJZjDr/3XJ3xHtjn3Oj5b9RjojQo8npoLeA/bNwkOkrSQ0wgrHzXk4tDRxGKJeg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/supports-web-crypto": "^5.2.0",
        "@aws-crypto/util": "^5.2.0",
        "@aws-sdk/types": "^3.222.0",
        "@aws-sdk/util-locate-window": "^3.0.0",
        "@smithy/util-utf8": "^2.0.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/sha1-browser/node_modules/@smithy/is-array-buffer": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/is-array-buffer/-/is-array-buffer-2.2.0.tgz",
      "integrity": "sha512-GGP3O9QFD24uGeAXYUjwSTXARoqpZykHadOmA8G5vfJPK0/DC67qa//0qvqrJzL1xc8WQWX7/yc7fwudjPHPhA==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha1-browser/node_modules/@smithy/util-buffer-from": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-buffer-from/-/util-buffer-from-2.2.0.tgz",
      "integrity": "sha512-IJdWBbTcMQ6DA0gdNhh/BwrLkDR+ADW5Kr1aZmd4k3DIF6ezMV4R2NIAmT08wQJ3yUK82thHWmC/TnK/wpMMIA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha1-browser/node_modules/@smithy/util-utf8": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-utf8/-/util-utf8-2.3.0.tgz",
      "integrity": "sha512-R8Rdn8Hy72KKcebgLiv8jQcQkXoLMOGGv5uI1/k0l+snqkOzQ1R0ChUBCxWMlBsFMekWjq0wRudIweFs7sKT5A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha256-browser": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/sha256-browser/-/sha256-browser-5.2.0.tgz",
      "integrity": "sha512-AXfN/lGotSQwu6HNcEsIASo7kWXZ5HYWvfOmSNKDsEqC4OashTp8alTmaz+F7TC2L083SFv5RdB+qU3Vs1kZqw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha256-js": "^5.2.0",
        "@aws-crypto/supports-web-crypto": "^5.2.0",
        "@aws-crypto/util": "^5.2.0",
        "@aws-sdk/types": "^3.222.0",
        "@aws-sdk/util-locate-window": "^3.0.0",
        "@smithy/util-utf8": "^2.0.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/sha256-browser/node_modules/@smithy/is-array-buffer": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/is-array-buffer/-/is-array-buffer-2.2.0.tgz",
      "integrity": "sha512-GGP3O9QFD24uGeAXYUjwSTXARoqpZykHadOmA8G5vfJPK0/DC67qa//0qvqrJzL1xc8WQWX7/yc7fwudjPHPhA==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha256-browser/node_modules/@smithy/util-buffer-from": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-buffer-from/-/util-buffer-from-2.2.0.tgz",
      "integrity": "sha512-IJdWBbTcMQ6DA0gdNhh/BwrLkDR+ADW5Kr1aZmd4k3DIF6ezMV4R2NIAmT08wQJ3yUK82thHWmC/TnK/wpMMIA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha256-browser/node_modules/@smithy/util-utf8": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-utf8/-/util-utf8-2.3.0.tgz",
      "integrity": "sha512-R8Rdn8Hy72KKcebgLiv8jQcQkXoLMOGGv5uI1/k0l+snqkOzQ1R0ChUBCxWMlBsFMekWjq0wRudIweFs7sKT5A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/sha256-js": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/sha256-js/-/sha256-js-5.2.0.tgz",
      "integrity": "sha512-FFQQyu7edu4ufvIZ+OadFpHHOt+eSTBaYaki44c+akjg7qZg9oOQeLlk77F6tSYqjDAFClrHJk9tMf0HdVyOvA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/util": "^5.2.0",
        "@aws-sdk/types": "^3.222.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/@aws-crypto/supports-web-crypto": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/supports-web-crypto/-/supports-web-crypto-5.2.0.tgz",
      "integrity": "sha512-iAvUotm021kM33eCdNfwIN//F77/IADDSs58i+MDaOqFrVjZo9bAal0NK7HurRuWLLpF1iLX7gbWrjHjeo+YFg==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/util": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@aws-crypto/util/-/util-5.2.0.tgz",
      "integrity": "sha512-4RkU9EsI6ZpBve5fseQlGNUWKMa1RLPQ1dnjnQoe07ldfIzcsGb5hC5W0Dm7u423KWzawlrpbjXBrXCEv9zazQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "^3.222.0",
        "@smithy/util-utf8": "^2.0.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-crypto/util/node_modules/@smithy/is-array-buffer": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/is-array-buffer/-/is-array-buffer-2.2.0.tgz",
      "integrity": "sha512-GGP3O9QFD24uGeAXYUjwSTXARoqpZykHadOmA8G5vfJPK0/DC67qa//0qvqrJzL1xc8WQWX7/yc7fwudjPHPhA==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/util/node_modules/@smithy/util-buffer-from": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-buffer-from/-/util-buffer-from-2.2.0.tgz",
      "integrity": "sha512-IJdWBbTcMQ6DA0gdNhh/BwrLkDR+ADW5Kr1aZmd4k3DIF6ezMV4R2NIAmT08wQJ3yUK82thHWmC/TnK/wpMMIA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-crypto/util/node_modules/@smithy/util-utf8": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-utf8/-/util-utf8-2.3.0.tgz",
      "integrity": "sha512-R8Rdn8Hy72KKcebgLiv8jQcQkXoLMOGGv5uI1/k0l+snqkOzQ1R0ChUBCxWMlBsFMekWjq0wRudIweFs7sKT5A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^2.2.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/@aws-sdk/client-s3": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/client-s3/-/client-s3-3.883.0.tgz",
      "integrity": "sha512-+l/p5G/bbobzcils5wKSV1vQEITvJIXDkLfkMWLpF6CC3YfdSDlVn1VOD+NcfuOuVGv4UkwcJzWuC6eaX6t8jg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha1-browser": "5.2.0",
        "@aws-crypto/sha256-browser": "5.2.0",
        "@aws-crypto/sha256-js": "5.2.0",
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/credential-provider-node": "3.883.0",
        "@aws-sdk/middleware-bucket-endpoint": "3.873.0",
        "@aws-sdk/middleware-expect-continue": "3.873.0",
        "@aws-sdk/middleware-flexible-checksums": "3.883.0",
        "@aws-sdk/middleware-host-header": "3.873.0",
        "@aws-sdk/middleware-location-constraint": "3.873.0",
        "@aws-sdk/middleware-logger": "3.876.0",
        "@aws-sdk/middleware-recursion-detection": "3.873.0",
        "@aws-sdk/middleware-sdk-s3": "3.883.0",
        "@aws-sdk/middleware-ssec": "3.873.0",
        "@aws-sdk/middleware-user-agent": "3.883.0",
        "@aws-sdk/region-config-resolver": "3.873.0",
        "@aws-sdk/signature-v4-multi-region": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@aws-sdk/util-endpoints": "3.879.0",
        "@aws-sdk/util-user-agent-browser": "3.873.0",
        "@aws-sdk/util-user-agent-node": "3.883.0",
        "@aws-sdk/xml-builder": "3.873.0",
        "@smithy/config-resolver": "^4.1.5",
        "@smithy/core": "^3.9.2",
        "@smithy/eventstream-serde-browser": "^4.0.5",
        "@smithy/eventstream-serde-config-resolver": "^4.1.3",
        "@smithy/eventstream-serde-node": "^4.0.5",
        "@smithy/fetch-http-handler": "^5.1.1",
        "@smithy/hash-blob-browser": "^4.0.5",
        "@smithy/hash-node": "^4.0.5",
        "@smithy/hash-stream-node": "^4.0.5",
        "@smithy/invalid-dependency": "^4.0.5",
        "@smithy/md5-js": "^4.0.5",
        "@smithy/middleware-content-length": "^4.0.5",
        "@smithy/middleware-endpoint": "^4.1.21",
        "@smithy/middleware-retry": "^4.1.22",
        "@smithy/middleware-serde": "^4.0.9",
        "@smithy/middleware-stack": "^4.0.5",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/node-http-handler": "^4.1.1",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/smithy-client": "^4.5.2",
        "@smithy/types": "^4.3.2",
        "@smithy/url-parser": "^4.0.5",
        "@smithy/util-base64": "^4.0.0",
        "@smithy/util-body-length-browser": "^4.0.0",
        "@smithy/util-body-length-node": "^4.0.0",
        "@smithy/util-defaults-mode-browser": "^4.0.29",
        "@smithy/util-defaults-mode-node": "^4.0.29",
        "@smithy/util-endpoints": "^3.0.7",
        "@smithy/util-middleware": "^4.0.5",
        "@smithy/util-retry": "^4.0.7",
        "@smithy/util-stream": "^4.2.4",
        "@smithy/util-utf8": "^4.0.0",
        "@smithy/util-waiter": "^4.0.7",
        "@types/uuid": "^9.0.1",
        "tslib": "^2.6.2",
        "uuid": "^9.0.1"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/client-sso": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/client-sso/-/client-sso-3.883.0.tgz",
      "integrity": "sha512-Ybjw76yPceEBO7+VLjy5+/Gr0A1UNymSDHda5w8tfsS2iHZt/vuD6wrYpHdLoUx4H5la8ZhwcSfK/+kmE+QLPw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha256-browser": "5.2.0",
        "@aws-crypto/sha256-js": "5.2.0",
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/middleware-host-header": "3.873.0",
        "@aws-sdk/middleware-logger": "3.876.0",
        "@aws-sdk/middleware-recursion-detection": "3.873.0",
        "@aws-sdk/middleware-user-agent": "3.883.0",
        "@aws-sdk/region-config-resolver": "3.873.0",
        "@aws-sdk/types": "3.862.0",
        "@aws-sdk/util-endpoints": "3.879.0",
        "@aws-sdk/util-user-agent-browser": "3.873.0",
        "@aws-sdk/util-user-agent-node": "3.883.0",
        "@smithy/config-resolver": "^4.1.5",
        "@smithy/core": "^3.9.2",
        "@smithy/fetch-http-handler": "^5.1.1",
        "@smithy/hash-node": "^4.0.5",
        "@smithy/invalid-dependency": "^4.0.5",
        "@smithy/middleware-content-length": "^4.0.5",
        "@smithy/middleware-endpoint": "^4.1.21",
        "@smithy/middleware-retry": "^4.1.22",
        "@smithy/middleware-serde": "^4.0.9",
        "@smithy/middleware-stack": "^4.0.5",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/node-http-handler": "^4.1.1",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/smithy-client": "^4.5.2",
        "@smithy/types": "^4.3.2",
        "@smithy/url-parser": "^4.0.5",
        "@smithy/util-base64": "^4.0.0",
        "@smithy/util-body-length-browser": "^4.0.0",
        "@smithy/util-body-length-node": "^4.0.0",
        "@smithy/util-defaults-mode-browser": "^4.0.29",
        "@smithy/util-defaults-mode-node": "^4.0.29",
        "@smithy/util-endpoints": "^3.0.7",
        "@smithy/util-middleware": "^4.0.5",
        "@smithy/util-retry": "^4.0.7",
        "@smithy/util-utf8": "^4.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/core": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/core/-/core-3.883.0.tgz",
      "integrity": "sha512-FmkqnqBLkXi4YsBPbF6vzPa0m4XKUuvgKDbamfw4DZX2CzfBZH6UU4IwmjNV3ZM38m0xraHarK8KIbGSadN3wg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@aws-sdk/xml-builder": "3.873.0",
        "@smithy/core": "^3.9.2",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/signature-v4": "^5.1.3",
        "@smithy/smithy-client": "^4.5.2",
        "@smithy/types": "^4.3.2",
        "@smithy/util-base64": "^4.0.0",
        "@smithy/util-body-length-browser": "^4.0.0",
        "@smithy/util-middleware": "^4.0.5",
        "@smithy/util-utf8": "^4.0.0",
        "fast-xml-parser": "5.2.5",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-env": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-env/-/credential-provider-env-3.883.0.tgz",
      "integrity": "sha512-Z6tPBXPCodfhIF1rvQKoeRGMkwL6TK0xdl1UoMIA1x4AfBpPICAF77JkFBExk/pdiFYq1d04Qzddd/IiujSlLg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-http": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-http/-/credential-provider-http-3.883.0.tgz",
      "integrity": "sha512-P589ug1lMOOEYLTaQJjSP+Gee34za8Kk2LfteNQfO9SpByHFgGj++Sg8VyIe30eZL8Q+i4qTt24WDCz1c+dgYg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/fetch-http-handler": "^5.1.1",
        "@smithy/node-http-handler": "^4.1.1",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/smithy-client": "^4.5.2",
        "@smithy/types": "^4.3.2",
        "@smithy/util-stream": "^4.2.4",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-ini": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-ini/-/credential-provider-ini-3.883.0.tgz",
      "integrity": "sha512-n6z9HTzuDEdugXvPiE/95VJXbF4/gBffdV/SRHDJKtDHaRuvp/gggbfmfVSTFouGVnlKPb2pQWQsW3Nr/Y3Lrw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/credential-provider-env": "3.883.0",
        "@aws-sdk/credential-provider-http": "3.883.0",
        "@aws-sdk/credential-provider-process": "3.883.0",
        "@aws-sdk/credential-provider-sso": "3.883.0",
        "@aws-sdk/credential-provider-web-identity": "3.883.0",
        "@aws-sdk/nested-clients": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/credential-provider-imds": "^4.0.7",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/shared-ini-file-loader": "^4.0.5",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-node": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-node/-/credential-provider-node-3.883.0.tgz",
      "integrity": "sha512-QIUhsatsrwfB9ZsKpmi0EySSfexVP61wgN7hr493DOileh2QsKW4XATEfsWNmx0dj9323Vg1Mix7bXtRfl9cGg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/credential-provider-env": "3.883.0",
        "@aws-sdk/credential-provider-http": "3.883.0",
        "@aws-sdk/credential-provider-ini": "3.883.0",
        "@aws-sdk/credential-provider-process": "3.883.0",
        "@aws-sdk/credential-provider-sso": "3.883.0",
        "@aws-sdk/credential-provider-web-identity": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/credential-provider-imds": "^4.0.7",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/shared-ini-file-loader": "^4.0.5",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-process": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-process/-/credential-provider-process-3.883.0.tgz",
      "integrity": "sha512-m1shbHY/Vppy4EdddG9r8x64TO/9FsCjokp5HbKcZvVoTOTgUJrdT8q2TAQJ89+zYIJDqsKbqfrmfwJ1zOdnGQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/shared-ini-file-loader": "^4.0.5",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-sso": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-sso/-/credential-provider-sso-3.883.0.tgz",
      "integrity": "sha512-37ve9Tult08HLXrJFHJM/sGB/vO7wzI6v1RUUfeTiShqx8ZQ5fTzCTNY/duO96jCtCexmFNSycpQzh7lDIf0aA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/client-sso": "3.883.0",
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/token-providers": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/shared-ini-file-loader": "^4.0.5",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/credential-provider-web-identity": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/credential-provider-web-identity/-/credential-provider-web-identity-3.883.0.tgz",
      "integrity": "sha512-SL82K9Jb0vpuTadqTO4Fpdu7SKtebZ3Yo4LZvk/U0UauVMlJj5ZTos0mFx1QSMB9/4TpqifYrSZcdnxgYg8Eqw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/nested-clients": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-bucket-endpoint": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-bucket-endpoint/-/middleware-bucket-endpoint-3.873.0.tgz",
      "integrity": "sha512-b4bvr0QdADeTUs+lPc9Z48kXzbKHXQKgTvxx/jXDgSW9tv4KmYPO1gIj6Z9dcrBkRWQuUtSW3Tu2S5n6pe+zeg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@aws-sdk/util-arn-parser": "3.873.0",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/types": "^4.3.2",
        "@smithy/util-config-provider": "^4.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-expect-continue": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-expect-continue/-/middleware-expect-continue-3.873.0.tgz",
      "integrity": "sha512-GIqoc8WgRcf/opBOZXFLmplJQKwOMjiOMmDz9gQkaJ8FiVJoAp8EGVmK2TOWZMQUYsavvHYsHaor5R2xwPoGVg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-flexible-checksums": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-flexible-checksums/-/middleware-flexible-checksums-3.883.0.tgz",
      "integrity": "sha512-EloU4ZjkH+CXCHJcYElXo5nZ1vK6Miam/S02YSHk5JTrJkm4RV478KXXO29TIIAwZXcLT/FEQOZ9ZH/JHFFCFQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/crc32": "5.2.0",
        "@aws-crypto/crc32c": "5.2.0",
        "@aws-crypto/util": "5.2.0",
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/is-array-buffer": "^4.0.0",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/types": "^4.3.2",
        "@smithy/util-middleware": "^4.0.5",
        "@smithy/util-stream": "^4.2.4",
        "@smithy/util-utf8": "^4.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-host-header": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-host-header/-/middleware-host-header-3.873.0.tgz",
      "integrity": "sha512-KZ/W1uruWtMOs7D5j3KquOxzCnV79KQW9MjJFZM/M0l6KI8J6V3718MXxFHsTjUE4fpdV6SeCNLV1lwGygsjJA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-location-constraint": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-location-constraint/-/middleware-location-constraint-3.873.0.tgz",
      "integrity": "sha512-r+hIaORsW/8rq6wieDordXnA/eAu7xAPLue2InhoEX6ML7irP52BgiibHLpt9R0psiCzIHhju8qqKa4pJOrmiw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-logger": {
      "version": "3.876.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-logger/-/middleware-logger-3.876.0.tgz",
      "integrity": "sha512-cpWJhOuMSyz9oV25Z/CMHCBTgafDCbv7fHR80nlRrPdPZ8ETNsahwRgltXP1QJJ8r3X/c1kwpOR7tc+RabVzNA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-recursion-detection": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-recursion-detection/-/middleware-recursion-detection-3.873.0.tgz",
      "integrity": "sha512-OtgY8EXOzRdEWR//WfPkA/fXl0+WwE8hq0y9iw2caNyKPtca85dzrrZWnPqyBK/cpImosrpR1iKMYr41XshsCg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-sdk-s3": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-sdk-s3/-/middleware-sdk-s3-3.883.0.tgz",
      "integrity": "sha512-i4sGOj9xhSN6/LkYj3AJ2SRWENnpN9JySwNqIoRqO1Uon8gfyNLJd1yV+s43vXQsU5wbKWVXK8l9SRo+vNTQwg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@aws-sdk/util-arn-parser": "3.873.0",
        "@smithy/core": "^3.9.2",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/signature-v4": "^5.1.3",
        "@smithy/smithy-client": "^4.5.2",
        "@smithy/types": "^4.3.2",
        "@smithy/util-config-provider": "^4.0.0",
        "@smithy/util-middleware": "^4.0.5",
        "@smithy/util-stream": "^4.2.4",
        "@smithy/util-utf8": "^4.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-ssec": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-ssec/-/middleware-ssec-3.873.0.tgz",
      "integrity": "sha512-AF55J94BoiuzN7g3hahy0dXTVZahVi8XxRBLgzNp6yQf0KTng+hb/V9UQZVYY1GZaDczvvvnqC54RGe9OZZ9zQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/middleware-user-agent": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/middleware-user-agent/-/middleware-user-agent-3.883.0.tgz",
      "integrity": "sha512-q58uLYnGLg7hsnWpdj7Cd1Ulsq1/PUJOHvAfgcBuiDE/+Fwh0DZxZZyjrU+Cr+dbeowIdUaOO8BEDDJ0CUenJw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@aws-sdk/util-endpoints": "3.879.0",
        "@smithy/core": "^3.9.2",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/nested-clients": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/nested-clients/-/nested-clients-3.883.0.tgz",
      "integrity": "sha512-IhzDM+v0ga53GOOrZ9jmGNr7JU5OR6h6ZK9NgB7GXaa+gsDbqfUuXRwyKDYXldrTXf1sUR3vy1okWDXA7S2ejQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/sha256-browser": "5.2.0",
        "@aws-crypto/sha256-js": "5.2.0",
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/middleware-host-header": "3.873.0",
        "@aws-sdk/middleware-logger": "3.876.0",
        "@aws-sdk/middleware-recursion-detection": "3.873.0",
        "@aws-sdk/middleware-user-agent": "3.883.0",
        "@aws-sdk/region-config-resolver": "3.873.0",
        "@aws-sdk/types": "3.862.0",
        "@aws-sdk/util-endpoints": "3.879.0",
        "@aws-sdk/util-user-agent-browser": "3.873.0",
        "@aws-sdk/util-user-agent-node": "3.883.0",
        "@smithy/config-resolver": "^4.1.5",
        "@smithy/core": "^3.9.2",
        "@smithy/fetch-http-handler": "^5.1.1",
        "@smithy/hash-node": "^4.0.5",
        "@smithy/invalid-dependency": "^4.0.5",
        "@smithy/middleware-content-length": "^4.0.5",
        "@smithy/middleware-endpoint": "^4.1.21",
        "@smithy/middleware-retry": "^4.1.22",
        "@smithy/middleware-serde": "^4.0.9",
        "@smithy/middleware-stack": "^4.0.5",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/node-http-handler": "^4.1.1",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/smithy-client": "^4.5.2",
        "@smithy/types": "^4.3.2",
        "@smithy/url-parser": "^4.0.5",
        "@smithy/util-base64": "^4.0.0",
        "@smithy/util-body-length-browser": "^4.0.0",
        "@smithy/util-body-length-node": "^4.0.0",
        "@smithy/util-defaults-mode-browser": "^4.0.29",
        "@smithy/util-defaults-mode-node": "^4.0.29",
        "@smithy/util-endpoints": "^3.0.7",
        "@smithy/util-middleware": "^4.0.5",
        "@smithy/util-retry": "^4.0.7",
        "@smithy/util-utf8": "^4.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/region-config-resolver": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/region-config-resolver/-/region-config-resolver-3.873.0.tgz",
      "integrity": "sha512-q9sPoef+BBG6PJnc4x60vK/bfVwvRWsPgcoQyIra057S/QGjq5VkjvNk6H8xedf6vnKlXNBwq9BaANBXnldUJg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/types": "^4.3.2",
        "@smithy/util-config-provider": "^4.0.0",
        "@smithy/util-middleware": "^4.0.5",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/signature-v4-multi-region": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/signature-v4-multi-region/-/signature-v4-multi-region-3.883.0.tgz",
      "integrity": "sha512-86PO7+xhuQ48cD3xlZgEpRxVP1lBarWAJy23sB6zZLHgZSbnYXYjRFuyxX4PlFzqllM3PDKJvq3WnXeqSXeNsg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/middleware-sdk-s3": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/protocol-http": "^5.1.3",
        "@smithy/signature-v4": "^5.1.3",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/token-providers": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/token-providers/-/token-providers-3.883.0.tgz",
      "integrity": "sha512-tcj/Z5paGn9esxhmmkEW7gt39uNoIRbXG1UwJrfKu4zcTr89h86PDiIE2nxUO3CMQf1KgncPpr5WouPGzkh/QQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/core": "3.883.0",
        "@aws-sdk/nested-clients": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/property-provider": "^4.0.5",
        "@smithy/shared-ini-file-loader": "^4.0.5",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/types": {
      "version": "3.862.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/types/-/types-3.862.0.tgz",
      "integrity": "sha512-Bei+RL0cDxxV+lW2UezLbCYYNeJm6Nzee0TpW0FfyTRBhH9C1XQh4+x+IClriXvgBnRquTMMYsmJfvx8iyLKrg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-arn-parser": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-arn-parser/-/util-arn-parser-3.873.0.tgz",
      "integrity": "sha512-qag+VTqnJWDn8zTAXX4wiVioa0hZDQMtbZcGRERVnLar4/3/VIKBhxX2XibNQXFu1ufgcRn4YntT/XEPecFWcg==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-endpoints": {
      "version": "3.879.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-endpoints/-/util-endpoints-3.879.0.tgz",
      "integrity": "sha512-aVAJwGecYoEmbEFju3127TyJDF9qJsKDUUTRMDuS8tGn+QiWQFnfInmbt+el9GU1gEJupNTXV+E3e74y51fb7A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/types": "^4.3.2",
        "@smithy/url-parser": "^4.0.5",
        "@smithy/util-endpoints": "^3.0.7",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-locate-window": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-locate-window/-/util-locate-window-3.873.0.tgz",
      "integrity": "sha512-xcVhZF6svjM5Rj89T1WzkjQmrTF6dpR2UvIHPMTnSZoNe6CixejPZ6f0JJ2kAhO8H+dUHwNBlsUgOTIKiK/Syg==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@aws-sdk/util-user-agent-browser": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-user-agent-browser/-/util-user-agent-browser-3.873.0.tgz",
      "integrity": "sha512-AcRdbK6o19yehEcywI43blIBhOCSo6UgyWcuOJX5CFF8k39xm1ILCjQlRRjchLAxWrm0lU0Q7XV90RiMMFMZtA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/types": "3.862.0",
        "@smithy/types": "^4.3.2",
        "bowser": "^2.11.0",
        "tslib": "^2.6.2"
      }
    },
    "node_modules/@aws-sdk/util-user-agent-node": {
      "version": "3.883.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/util-user-agent-node/-/util-user-agent-node-3.883.0.tgz",
      "integrity": "sha512-28cQZqC+wsKUHGpTBr+afoIdjS6IoEJkMqcZsmo2Ag8LzmTa6BUWQenFYB0/9BmDy4PZFPUn+uX+rJgWKB+jzA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-sdk/middleware-user-agent": "3.883.0",
        "@aws-sdk/types": "3.862.0",
        "@smithy/node-config-provider": "^4.1.4",
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      },
      "peerDependencies": {
        "aws-crt": ">=1.0.0"
      },
      "peerDependenciesMeta": {
        "aws-crt": {
          "optional": true
        }
      }
    },
    "node_modules/@aws-sdk/xml-builder": {
      "version": "3.873.0",
      "resolved": "https://registry.npmjs.org/@aws-sdk/xml-builder/-/xml-builder-3.873.0.tgz",
      "integrity": "sha512-kLO7k7cGJ6KaHiExSJWojZurF7SnGMDHXRuQunFnEoD0n1yB6Lqy/S/zHiQ7oJnBhPr9q0TW9qFkrsZb1Uc54w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.3.2",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@azure-rest/core-client": {
      "version": "2.5.0",
      "resolved": "https://registry.npmjs.org/@azure-rest/core-client/-/core-client-2.5.0.tgz",
      "integrity": "sha512-KMVIPxG6ygcQ1M2hKHahF7eddKejYsWTjoLIfTWiqnaj42dBkYzj4+S8rK9xxmlOaEHKZHcMrRbm0NfN4kgwHw==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-auth": "^1.9.0",
        "@azure/core-rest-pipeline": "^1.5.0",
        "@azure/core-tracing": "^1.0.1",
        "@typespec/ts-http-runtime": "^0.3.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/abort-controller": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/@azure/abort-controller/-/abort-controller-2.1.2.tgz",
      "integrity": "sha512-nBrLsEWm4J2u5LpAPjxADTlq3trDgVZZXHNKabeXZtpq3d3AbN/KGO82R87rdDz5/lYB024rtEf10/q0urNgsA==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@azure/core-auth": {
      "version": "1.10.0",
      "resolved": "https://registry.npmjs.org/@azure/core-auth/-/core-auth-1.10.0.tgz",
      "integrity": "sha512-88Djs5vBvGbHQHf5ZZcaoNHo6Y8BKZkt3cw2iuJIQzLEgH4Ox6Tm4hjFhbqOxyYsgIG/eJbFEHpxRIfEEWv5Ow==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-util": "^1.11.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/core-client": {
      "version": "1.10.0",
      "resolved": "https://registry.npmjs.org/@azure/core-client/-/core-client-1.10.0.tgz",
      "integrity": "sha512-O4aP3CLFNodg8eTHXECaH3B3CjicfzkxVtnrfLkOq0XNP7TIECGfHpK/C6vADZkWP75wzmdBnsIA8ksuJMk18g==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-auth": "^1.4.0",
        "@azure/core-rest-pipeline": "^1.20.0",
        "@azure/core-tracing": "^1.0.0",
        "@azure/core-util": "^1.6.1",
        "@azure/logger": "^1.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/core-http-compat": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/@azure/core-http-compat/-/core-http-compat-2.3.0.tgz",
      "integrity": "sha512-qLQujmUypBBG0gxHd0j6/Jdmul6ttl24c8WGiLXIk7IHXdBlfoBqW27hyz3Xn6xbfdyVSarl1Ttbk0AwnZBYCw==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-client": "^1.3.0",
        "@azure/core-rest-pipeline": "^1.20.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@azure/core-lro": {
      "version": "2.7.2",
      "resolved": "https://registry.npmjs.org/@azure/core-lro/-/core-lro-2.7.2.tgz",
      "integrity": "sha512-0YIpccoX8m/k00O7mDDMdJpbr6mf1yWo2dfmxt5A8XVZVVMz2SSKaEbMCeJRvgQ0IaSlqhjT47p4hVIRRy90xw==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-util": "^1.2.0",
        "@azure/logger": "^1.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@azure/core-paging": {
      "version": "1.6.2",
      "resolved": "https://registry.npmjs.org/@azure/core-paging/-/core-paging-1.6.2.tgz",
      "integrity": "sha512-YKWi9YuCU04B55h25cnOYZHxXYtEvQEbKST5vqRga7hWY9ydd3FZHdeQF8pyh+acWZvppw13M/LMGx0LABUVMA==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@azure/core-rest-pipeline": {
      "version": "1.22.0",
      "resolved": "https://registry.npmjs.org/@azure/core-rest-pipeline/-/core-rest-pipeline-1.22.0.tgz",
      "integrity": "sha512-OKHmb3/Kpm06HypvB3g6Q3zJuvyXcpxDpCS1PnU8OV6AJgSFaee/covXBcPbWc6XDDxtEPlbi3EMQ6nUiPaQtw==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-auth": "^1.8.0",
        "@azure/core-tracing": "^1.0.1",
        "@azure/core-util": "^1.11.0",
        "@azure/logger": "^1.0.0",
        "@typespec/ts-http-runtime": "^0.3.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/core-tracing": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@azure/core-tracing/-/core-tracing-1.3.0.tgz",
      "integrity": "sha512-+XvmZLLWPe67WXNZo9Oc9CrPj/Tm8QnHR92fFAFdnbzwNdCH1h+7UdpaQgRSBsMY+oW1kHXNUZQLdZ1gHX3ROw==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/core-util": {
      "version": "1.13.0",
      "resolved": "https://registry.npmjs.org/@azure/core-util/-/core-util-1.13.0.tgz",
      "integrity": "sha512-o0psW8QWQ58fq3i24Q1K2XfS/jYTxr7O1HRcyUE9bV9NttLU+kYOH82Ixj8DGlMTOWgxm1Sss2QAfKK5UkSPxw==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@typespec/ts-http-runtime": "^0.3.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/identity": {
      "version": "4.11.1",
      "resolved": "https://registry.npmjs.org/@azure/identity/-/identity-4.11.1.tgz",
      "integrity": "sha512-0ZdsLRaOyLxtCYgyuqyWqGU5XQ9gGnjxgfoNTt1pvELGkkUFrMATABZFIq8gusM7N1qbqpVtwLOhk0d/3kacLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-auth": "^1.9.0",
        "@azure/core-client": "^1.9.2",
        "@azure/core-rest-pipeline": "^1.17.0",
        "@azure/core-tracing": "^1.0.0",
        "@azure/core-util": "^1.11.0",
        "@azure/logger": "^1.0.0",
        "@azure/msal-browser": "^4.2.0",
        "@azure/msal-node": "^3.5.0",
        "open": "^10.1.0",
        "tslib": "^2.2.0"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/keyvault-common": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@azure/keyvault-common/-/keyvault-common-2.0.0.tgz",
      "integrity": "sha512-wRLVaroQtOqfg60cxkzUkGKrKMsCP6uYXAOomOIysSMyt1/YM0eUn9LqieAWM8DLcU4+07Fio2YGpPeqUbpP9w==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^2.0.0",
        "@azure/core-auth": "^1.3.0",
        "@azure/core-client": "^1.5.0",
        "@azure/core-rest-pipeline": "^1.8.0",
        "@azure/core-tracing": "^1.0.0",
        "@azure/core-util": "^1.10.0",
        "@azure/logger": "^1.1.4",
        "tslib": "^2.2.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@azure/keyvault-keys": {
      "version": "4.10.0",
      "resolved": "https://registry.npmjs.org/@azure/keyvault-keys/-/keyvault-keys-4.10.0.tgz",
      "integrity": "sha512-eDT7iXoBTRZ2n3fLiftuGJFD+yjkiB1GNqzU2KbY1TLYeXeSPVTVgn2eJ5vmRTZ11978jy2Kg2wI7xa9Tyr8ag==",
      "license": "MIT",
      "dependencies": {
        "@azure-rest/core-client": "^2.3.3",
        "@azure/abort-controller": "^2.1.2",
        "@azure/core-auth": "^1.9.0",
        "@azure/core-http-compat": "^2.2.0",
        "@azure/core-lro": "^2.7.2",
        "@azure/core-paging": "^1.6.2",
        "@azure/core-rest-pipeline": "^1.19.0",
        "@azure/core-tracing": "^1.2.0",
        "@azure/core-util": "^1.11.0",
        "@azure/keyvault-common": "^2.0.0",
        "@azure/logger": "^1.1.4",
        "tslib": "^2.8.1"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@azure/logger": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@azure/logger/-/logger-1.3.0.tgz",
      "integrity": "sha512-fCqPIfOcLE+CGqGPd66c8bZpwAji98tZ4JI9i/mlTNTlsIWslCfpg48s/ypyLxZTump5sypjrKn2/kY7q8oAbA==",
      "license": "MIT",
      "dependencies": {
        "@typespec/ts-http-runtime": "^0.3.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@azure/msal-browser": {
      "version": "4.22.0",
      "resolved": "https://registry.npmjs.org/@azure/msal-browser/-/msal-browser-4.22.0.tgz",
      "integrity": "sha512-JLWHzAW1aZ/L190Th56jN+2t3T1dMvXOs1obXYLEr3ZWi81vVmBCt0di3mPvTTOiWoE0Cf/4hVQ/LINilqjObA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@azure/msal-common": "15.12.0"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/@azure/msal-common": {
      "version": "15.12.0",
      "resolved": "https://registry.npmjs.org/@azure/msal-common/-/msal-common-15.12.0.tgz",
      "integrity": "sha512-4ucXbjVw8KJ5QBgnGJUeA07c8iznwlk5ioHIhI4ASXcXgcf2yRFhWzYOyWg/cI49LC9ekpFJeQtO3zjDTbl6TQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/@azure/msal-node": {
      "version": "3.7.3",
      "resolved": "https://registry.npmjs.org/@azure/msal-node/-/msal-node-3.7.3.tgz",
      "integrity": "sha512-MoJxkKM/YpChfq4g2o36tElyzNUMG8mfD6u8NbuaPAsqfGpaw249khAcJYNoIOigUzRw45OjXCOrexE6ImdUxg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@azure/msal-common": "15.12.0",
        "jsonwebtoken": "^9.0.0",
        "uuid": "^8.3.0"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/@azure/msal-node/node_modules/uuid": {
      "version": "8.3.2",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-8.3.2.tgz",
      "integrity": "sha512-+NYs2QeMWy+GWFOEm9xnn6HCDp0l7QBD7ml8zLUmJ+93Q5NF0NocErnwkTkXVFNiX3/fpC6afS8Dhb/gz7R7eg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.4.tgz",
      "integrity": "sha512-YsmSKC29MJwf0gF8Rjjrg5LQCmyh+j/nD8/eP7f+BeoQTKYqs9RoWbjGOdy0+1Ekr68RJZMUOPVQaQisnIo4Rw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.4.tgz",
      "integrity": "sha512-2BCOP7TN8M+gVDj7/ht3hsaO/B/n5oDbiAyyvnRlNOs+u1o+JWNYTQrmpuNp1/Wq2gcFrI01JAW+paEKDMx/CA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.4",
        "@babel/types": "^7.28.4",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/core/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.3.tgz",
      "integrity": "sha512-3lSpxGgvnmZznmBkCRnVREPUFJv2wrv9iAoFDvADJc0ypmdOxdUtcLeBgBJ6zE0PMeTKnxeQzyk0xTBq4Ep7zw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.3",
        "@babel/types": "^7.28.2",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.27.1.tgz",
      "integrity": "sha512-D2hP9eA+Sqx1kBZgzxZh0y1trbuU+JoDkiEwqhQ36nodYqJwyEIhPSdMNd7lOm/4io72luTPWH20Yda0xOuUow==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.4.tgz",
      "integrity": "sha512-yZbBqeM6TkpP9du/I2pUZnJsRMGGvOuIrhjzC1AwHwW+6he4mni6Bp/m8ijn0iOuZuPI2BfkCoSRunpyjnrQKg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.4"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-syntax-async-generators": {
      "version": "7.8.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-async-generators/-/plugin-syntax-async-generators-7.8.4.tgz",
      "integrity": "sha512-tycmZxkGfZaxhMRbXlPXuVFpdWlXpir2W4AMhSJgRKzk/eDlIXOhb2LHWoLpDF7TEHylV5zNhykX6KAgHJmTNw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-bigint": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-bigint/-/plugin-syntax-bigint-7.8.3.tgz",
      "integrity": "sha512-wnTnFlG+YxQm3vDxpGE57Pj0srRU4sHE/mDkt1qv2YJJSeUAec2ma4WLUnUPeKjyrfntVwe/N6dCXpU+zL3Npg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-class-properties": {
      "version": "7.12.13",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-class-properties/-/plugin-syntax-class-properties-7.12.13.tgz",
      "integrity": "sha512-fm4idjKla0YahUNgFNLCB0qySdsoPiZP3iQE3rky0mBUtMZ23yDJ9SJdg6dXTSDnulOVqiF3Hgr9nbXvXTQZYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.12.13"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-class-static-block": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-class-static-block/-/plugin-syntax-class-static-block-7.14.5.tgz",
      "integrity": "sha512-b+YyPmr6ldyNnM6sqYeMWE+bgJcJpO6yS4QD7ymxgH34GBPNDM/THBh8iunyvKIZztiwLH4CJZ0RxTk9emgpjw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-attributes": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-attributes/-/plugin-syntax-import-attributes-7.27.1.tgz",
      "integrity": "sha512-oFT0FrKHgF53f4vOsZGi2Hh3I35PfSmVs4IBFLFj4dnafP+hIWDLg3VyKmUHfLoLHlyxY4C7DGtmHuJgn+IGww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-meta": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-meta/-/plugin-syntax-import-meta-7.10.4.tgz",
      "integrity": "sha512-Yqfm+XDx0+Prh3VSeEQCPU81yC+JWZ2pDPFSS4ZdpfZhp4MkFMaDC1UqseovEKwSUpnIL7+vK+Clp7bfh0iD7g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-json-strings": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-json-strings/-/plugin-syntax-json-strings-7.8.3.tgz",
      "integrity": "sha512-lY6kdGpWHvjoe2vk4WrAapEuBR69EMxZl+RoGRhrFGNYVK8mOPAW8VfbT/ZgrFbXlDNiiaxQnAtgVCZ6jv30EA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-jsx": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-jsx/-/plugin-syntax-jsx-7.27.1.tgz",
      "integrity": "sha512-y8YTNIeKoyhGd9O0Jiyzyyqk8gdjnumGTQPsz0xOZOQ2RmkVJeZ1vmmfIvFEKqucBG6axJGBZDE/7iI5suUI/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-logical-assignment-operators": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-logical-assignment-operators/-/plugin-syntax-logical-assignment-operators-7.10.4.tgz",
      "integrity": "sha512-d8waShlpFDinQ5MtvGU9xDAOzKH47+FFoney2baFIoMr952hKOLp1HR7VszoZvOsV/4+RRszNY7D17ba0te0ig==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-nullish-coalescing-operator": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-nullish-coalescing-operator/-/plugin-syntax-nullish-coalescing-operator-7.8.3.tgz",
      "integrity": "sha512-aSff4zPII1u2QD7y+F8oDsz19ew4IGEJg9SVW+bqwpwtfFleiQDMdzA/R+UlWDzfnHFCxxleFT0PMIrR36XLNQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-numeric-separator": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-numeric-separator/-/plugin-syntax-numeric-separator-7.10.4.tgz",
      "integrity": "sha512-9H6YdfkcK/uOnY/K7/aA2xpzaAgkQn37yzWUMRK7OaPOqOpGS1+n0H5hxT9AUw9EsSjPW8SVyMJwYRtWs3X3ug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-object-rest-spread": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-object-rest-spread/-/plugin-syntax-object-rest-spread-7.8.3.tgz",
      "integrity": "sha512-XoqMijGZb9y3y2XskN+P1wUGiVwWZ5JmoDRwx5+3GmEplNyVM2s2Dg8ILFQm8rWM48orGy5YpI5Bl8U1y7ydlA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-optional-catch-binding": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-optional-catch-binding/-/plugin-syntax-optional-catch-binding-7.8.3.tgz",
      "integrity": "sha512-6VPD0Pc1lpTqw0aKoeRTMiB+kWhAoT24PA+ksWSBrFtl5SIRVpZlwN3NNPQjehA2E/91FV3RjLWoVTglWcSV3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-optional-chaining": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-optional-chaining/-/plugin-syntax-optional-chaining-7.8.3.tgz",
      "integrity": "sha512-KoK9ErH1MBlCPxV0VANkXW2/dw4vlbGDrFgz8bmUsBGYkFRcbRwMh6cIJubdPrkxRwuGdtCk0v/wPTKbQgBjkg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-private-property-in-object": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-private-property-in-object/-/plugin-syntax-private-property-in-object-7.14.5.tgz",
      "integrity": "sha512-0wVnp9dxJ72ZUJDV27ZfbSj6iHLoytYZmh3rFcxNnvsJF3ktkzLDZPy/mA17HGsaQT3/DQsWYX1f1QGWkCoVUg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-top-level-await": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-top-level-await/-/plugin-syntax-top-level-await-7.14.5.tgz",
      "integrity": "sha512-hx++upLv5U1rgYfwe1xBQUhRmU41NEvpUvrp8jkrSCdvGSnM5/qdRMtylJ6PG5OFkBaHkbTAKTnd3/YyESRHFw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-typescript": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-typescript/-/plugin-syntax-typescript-7.27.1.tgz",
      "integrity": "sha512-xfYCBMxveHrRMnAWl1ZlPXOZjzkN82THFvLhQhFXFt81Z5HnN+EtUkZhv/zcKpmT3fzmWZB0ywiBrbC3vogbwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.4.tgz",
      "integrity": "sha512-YEzuboP2qvQavAcjgQNVgsvHIDv6ZpwXvcvjmyySP2DIMuByS/6ioU5G9pYrWHM6T2YDfc7xga9iNzYOs12CFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.4.tgz",
      "integrity": "sha512-bkFqkLhh3pMBUQQkpVgWDWq/lqzc2678eUyDlTBhRqhCHFguYYGM0Efga7tYk4TogG/3x0EEl66/OQ+WGbWB/Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@bcoe/v8-coverage": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@bcoe/v8-coverage/-/v8-coverage-0.2.3.tgz",
      "integrity": "sha512-0hYQ8SB4Db5zvZB4axdMHGwEaQjkZzFjQiN9LVYvIFB2nSUHW9tYpxWriPrWDASIxiaXax83REcLxuSdnGPZtw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@colors/colors": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/@colors/colors/-/colors-1.6.0.tgz",
      "integrity": "sha512-Ir+AOibqzrIsL6ajt3Rz3LskB7OiMVHqltZmspbW/TJuTVuyOMirVqAkjfY6JISiLHgyNqicAC8AyHHGzNd/dA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.1.90"
      }
    },
    "node_modules/@cspotcode/source-map-support": {
      "version": "0.8.1",
      "resolved": "https://registry.npmjs.org/@cspotcode/source-map-support/-/source-map-support-0.8.1.tgz",
      "integrity": "sha512-IchNf6dN4tHoMFIn/7OE8LWZ19Y6q/67Bmf6vnGREv8RSbBVb9LPJxEcnwrcwX6ixSvaiGoomAUvu4YSxXrVgw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/trace-mapping": "0.3.9"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@cspotcode/source-map-support/node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.9.tgz",
      "integrity": "sha512-3Belt6tdc8bPgAtbcmdtNJlirVoTmEb5e2gC94PnkwEW9jI6CAHUeoG85tjWP5WquqfavoMtMwiG4P926ZKKuQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.0.3",
        "@jridgewell/sourcemap-codec": "^1.4.10"
      }
    },
    "node_modules/@dabh/diagnostics": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@dabh/diagnostics/-/diagnostics-2.0.3.tgz",
      "integrity": "sha512-hrlQOIi7hAfzsMqlGSFyVucrx38O+j6wiGOf//H2ecvIEqYN4ADBSS2iLMh5UFyDunCNniUIPk/q3riFv45xRA==",
      "license": "MIT",
      "dependencies": {
        "colorspace": "1.1.x",
        "enabled": "2.0.x",
        "kuler": "^2.0.0"
      }
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.8.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.8.0.tgz",
      "integrity": "sha512-MJQFqrZgcW0UNYLGOuQpey/oTN59vyWwplvCGZztn1cKz9agZPPYpJB7h2OMmuu7VLqkvEjN8feFZJmxNF9D+Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.1",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
      "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-2.1.4.tgz",
      "integrity": "sha512-269Z39MS6wVJtsoUl10L60WdkhJVdPG24Q4eZTH3nnF6lpvSShEK3wQjDX9JRWAUPvPh7COouPpU9IrqaZFvtQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^9.6.0",
        "globals": "^13.19.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/js": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-8.57.1.tgz",
      "integrity": "sha512-d9zaMRSTIKDLhctzH12MtXvJKSSUhaHcjV+2Z+GK+EEY7XKpP5yR4x+N3TAcHTcu963nIr+TMcCb4DBCYX1z6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/@hapi/hoek": {
      "version": "9.3.0",
      "resolved": "https://registry.npmjs.org/@hapi/hoek/-/hoek-9.3.0.tgz",
      "integrity": "sha512-/c6rf4UJlmHlC9b5BaNvzAcFv7HZ2QHaV0D4/HNlBdvFnvQq8RI4kYdhyPCl7Xj+oWvTWQ8ujhqS53LIgAe6KQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@hapi/topo": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/@hapi/topo/-/topo-5.1.0.tgz",
      "integrity": "sha512-foQZKJig7Ob0BMAYBfcJk8d77QtOe7Wo4ox7ff1lQYoNNAb6jwcY1ncdoy2e9wQZzvNy7ODZCYJkK8kzmcAnAg==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@hapi/hoek": "^9.0.0"
      }
    },
    "node_modules/@humanwhocodes/config-array": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/config-array/-/config-array-0.13.0.tgz",
      "integrity": "sha512-DZLEEqFWQFiyK6h5YIeynKx7JlvCYWL0cImfSRXZ9l4Sg2efkFGTuFf6vzXjK1cq6IYkU+Eg/JizXw+TD2vRNw==",
      "deprecated": "Use @eslint/config-array instead",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanwhocodes/object-schema": "^2.0.3",
        "debug": "^4.3.1",
        "minimatch": "^3.0.5"
      },
      "engines": {
        "node": ">=10.10.0"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/object-schema": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/object-schema/-/object-schema-2.0.3.tgz",
      "integrity": "sha512-93zYdMES/c1D69yZiKDBj0V24vqNzB/koF26KPaagAfd3P/4gUlh3Dys5ogAK+Exi9QyzlD8x/08Zt7wIKcDcA==",
      "deprecated": "Use @eslint/object-schema instead",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@istanbuljs/load-nyc-config": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@istanbuljs/load-nyc-config/-/load-nyc-config-1.1.0.tgz",
      "integrity": "sha512-VjeHSlIzpv/NyD3N0YuHfXOPDIixcA1q2ZV98wsMqcYlPmv2n3Yb2lYP9XMElnaFVXg5A7YLTeLu6V84uQDjmQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "camelcase": "^5.3.1",
        "find-up": "^4.1.0",
        "get-package-type": "^0.1.0",
        "js-yaml": "^3.13.1",
        "resolve-from": "^5.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/argparse": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-1.0.10.tgz",
      "integrity": "sha512-o5Roy6tNG4SL/FOkCAN6RzjiakZS25RLYFrcMttJqbdd8BWrnA+fGz57iN5Pb06pvBGvl5gQ0B48dJlslXvoTg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "sprintf-js": "~1.0.2"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/find-up": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-4.1.0.tgz",
      "integrity": "sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^5.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/js-yaml": {
      "version": "3.14.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-3.14.1.tgz",
      "integrity": "sha512-okMH7OXXJ7YrN9Ok3/SXrnu4iX9yOk+25nqX4imS2npuvTYDmo/QEZoqwZkYaIDk3jVvBOTOIEgEhaLOynBS9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^1.0.7",
        "esprima": "^4.0.0"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/locate-path": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-5.0.0.tgz",
      "integrity": "sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^4.1.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/p-limit": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-2.3.0.tgz",
      "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-try": "^2.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/p-locate": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-4.1.0.tgz",
      "integrity": "sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^2.2.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/resolve-from": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
      "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/sprintf-js": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/sprintf-js/-/sprintf-js-1.0.3.tgz",
      "integrity": "sha512-D9cPgkvLlV3t3IzL0D0YLvGA9Ahk4PcvVwUbN0dSGr1aP0Nrt4AEnTUbuGvquEC0mA64Gqt1fzirlRs5ibXx8g==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@istanbuljs/schema": {
      "version": "0.1.3",
      "resolved": "https://registry.npmjs.org/@istanbuljs/schema/-/schema-0.1.3.tgz",
      "integrity": "sha512-ZXRY4jNvVgSVQ8DL3LTcakaAtXwTVUxE81hslsyD2AtoXW/wVob10HkOJ1X/pAlcI7D+2YoZKg5do8G/w6RYgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@jest/console": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/console/-/console-29.7.0.tgz",
      "integrity": "sha512-5Ni4CU7XHQi32IJ398EEP4RrB8eV09sXP2ROqD4bksHrnTree52PsxvX8tpL8LvTZ3pFzXyPbNQReSN41CAhOg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/core": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/core/-/core-29.7.0.tgz",
      "integrity": "sha512-n7aeXWKMnGtDA48y8TLWJPJmLmmZ642Ceo78cYWEpiD7FzDgmNDV/GCVRorPABdXLJZ/9wzzgZAlHjXjxDHGsg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/reporters": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "ansi-escapes": "^4.2.1",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "exit": "^0.1.2",
        "graceful-fs": "^4.2.9",
        "jest-changed-files": "^29.7.0",
        "jest-config": "^29.7.0",
        "jest-haste-map": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-resolve-dependencies": "^29.7.0",
        "jest-runner": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "jest-watcher": "^29.7.0",
        "micromatch": "^4.0.4",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/@jest/environment": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/environment/-/environment-29.7.0.tgz",
      "integrity": "sha512-aQIfHDq33ExsN4jP1NWGXhxgQ/wixs60gDiKO+XVMd8Mn0NWPWgc34ZQDTb2jKaUWQ7MuwoitXAsN2XVXNMpAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/fake-timers": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-mock": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/expect": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/expect/-/expect-29.7.0.tgz",
      "integrity": "sha512-8uMeAMycttpva3P1lBHB8VciS9V0XAr3GymPpipdyQXbBcuhkLQOSe8E/p92RyAdToS6ZD1tFkX+CkhoECE0dQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "expect": "^29.7.0",
        "jest-snapshot": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/expect-utils": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/expect-utils/-/expect-utils-29.7.0.tgz",
      "integrity": "sha512-GlsNBWiFQFCVi9QVSx7f5AgMeLxe9YCCs5PuP2O2LdjDAA8Jh9eX7lA1Jq/xdXw3Wb3hyvlFNfZIfcRetSzYcA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-get-type": "^29.6.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/fake-timers": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/fake-timers/-/fake-timers-29.7.0.tgz",
      "integrity": "sha512-q4DH1Ha4TTFPdxLsqDXK1d3+ioSL7yL5oCMJZgDYm6i+6CygW5E5xVr/D1HdsGxjt1ZWSfUAs9OxSB/BNelWrQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@sinonjs/fake-timers": "^10.0.2",
        "@types/node": "*",
        "jest-message-util": "^29.7.0",
        "jest-mock": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/globals": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/globals/-/globals-29.7.0.tgz",
      "integrity": "sha512-mpiz3dutLbkW2MNFubUGUEVLkTGiqW6yLVTA+JbP6fI6J5iL9Y0Nlg8k95pcF8ctKwCS7WVxteBs29hhfAotzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/expect": "^29.7.0",
        "@jest/types": "^29.6.3",
        "jest-mock": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/reporters": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/reporters/-/reporters-29.7.0.tgz",
      "integrity": "sha512-DApq0KJbJOEzAFYjHADNNxAE3KbhxQB1y5Kplb5Waqw6zVbuWatSnMjE5gs8FUgEPmNsnZA3NCWl9NG0ia04Pg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@bcoe/v8-coverage": "^0.2.3",
        "@jest/console": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@jridgewell/trace-mapping": "^0.3.18",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "collect-v8-coverage": "^1.0.0",
        "exit": "^0.1.2",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "istanbul-lib-coverage": "^3.0.0",
        "istanbul-lib-instrument": "^6.0.0",
        "istanbul-lib-report": "^3.0.0",
        "istanbul-lib-source-maps": "^4.0.0",
        "istanbul-reports": "^3.1.3",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-worker": "^29.7.0",
        "slash": "^3.0.0",
        "string-length": "^4.0.1",
        "strip-ansi": "^6.0.0",
        "v8-to-istanbul": "^9.0.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/@jest/schemas": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/schemas/-/schemas-29.6.3.tgz",
      "integrity": "sha512-mo5j5X+jIZmJQveBKeS/clAueipV7KgiX1vMgCxam1RNYiqE1w62n0/tJJnHtjW8ZHcQco5gY85jA3mi0L+nSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@sinclair/typebox": "^0.27.8"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/source-map": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/source-map/-/source-map-29.6.3.tgz",
      "integrity": "sha512-MHjT95QuipcPrpLM+8JMSzFx6eHp5Bm+4XeFDJlwsvVBjmKNiIAvasGK2fxz2WbGRlnvqehFbh07MMa7n3YJnw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/trace-mapping": "^0.3.18",
        "callsites": "^3.0.0",
        "graceful-fs": "^4.2.9"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/test-result": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/test-result/-/test-result-29.7.0.tgz",
      "integrity": "sha512-Fdx+tv6x1zlkJPcWXmMDAG2HBnaR9XPSd5aDWQVsfrZmLVT3lU1cwyxLgRmXR9yrq4NBoEm9BMsfgFzTQAbJYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/istanbul-lib-coverage": "^2.0.0",
        "collect-v8-coverage": "^1.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/test-sequencer": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/test-sequencer/-/test-sequencer-29.7.0.tgz",
      "integrity": "sha512-GQwJ5WZVrKnOJuiYiAF52UNUJXgTZx1NHjFSEB0qEMmSZKAkdMoIzw/Cj6x6NF4AvV23AUqDpFzQkN/eYCYTxw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/test-result": "^29.7.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/transform": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/transform/-/transform-29.7.0.tgz",
      "integrity": "sha512-ok/BTPFzFKVMwO5eOHRrvnBVHdRy9IrsrW1GpMaQ9MCnilNLXQKmAX8s1YXDFaai9xJpac2ySzV0YeRRECr2Vw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@jest/types": "^29.6.3",
        "@jridgewell/trace-mapping": "^0.3.18",
        "babel-plugin-istanbul": "^6.1.1",
        "chalk": "^4.0.0",
        "convert-source-map": "^2.0.0",
        "fast-json-stable-stringify": "^2.1.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-util": "^29.7.0",
        "micromatch": "^4.0.4",
        "pirates": "^4.0.4",
        "slash": "^3.0.0",
        "write-file-atomic": "^4.0.2"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/types": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/types/-/types-29.6.3.tgz",
      "integrity": "sha512-u3UPsIilWKOM3F9CXtrG8LEJmNxwoCQC/XVj4IKYXvvpx7QIi/Kg1LI5uDmDpKlac62NUtX7eLjRh+jVZcLOzw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/schemas": "^29.6.3",
        "@types/istanbul-lib-coverage": "^2.0.0",
        "@types/istanbul-reports": "^3.0.0",
        "@types/node": "*",
        "@types/yargs": "^17.0.8",
        "chalk": "^4.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.30",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.30.tgz",
      "integrity": "sha512-GQ7Nw5G2lTu/BtHTKfXhKHok2WGetd4XYcVKGx00SjAk8GMwgJM3zr6zORiPGuOE+/vkc90KtTosSSvaCjKb2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@js-joda/core": {
      "version": "5.6.5",
      "resolved": "https://registry.npmjs.org/@js-joda/core/-/core-5.6.5.tgz",
      "integrity": "sha512-3zwefSMwHpu8iVUW8YYz227sIv6UFqO31p1Bf1ZH/Vom7CmNyUsXjDBlnNzcuhmOL1XfxZ3nvND42kR23XlbcQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@mongodb-js/saslprep": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@mongodb-js/saslprep/-/saslprep-1.3.0.tgz",
      "integrity": "sha512-zlayKCsIjYb7/IdfqxorK5+xUMyi4vOKcFy10wKJYc63NSdKI8mNME+uJqfatkPmOSMMUiojrL58IePKBm3gvQ==",
      "license": "MIT",
      "dependencies": {
        "sparse-bitfield": "^3.0.3"
      }
    },
    "node_modules/@noble/hashes": {
      "version": "1.8.0",
      "resolved": "https://registry.npmjs.org/@noble/hashes/-/hashes-1.8.0.tgz",
      "integrity": "sha512-jCs9ldd7NwzpgXDIf6P3+NrHh9/sD6CQdxHyjQI+h/6rDNo88ypBxxz45UDuZHz9r3tNz7N/VInSVoVdtXEI4A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.21.3 || >=16"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@paralleldrive/cuid2": {
      "version": "2.2.2",
      "resolved": "https://registry.npmjs.org/@paralleldrive/cuid2/-/cuid2-2.2.2.tgz",
      "integrity": "sha512-ZOBkgDwEdoYVlSeRbYYXs0S9MejQofiVYoTbKzy/6GQa39/q5tQU2IX46+shYnUkpEl3wc+J6wRlar7r2EK2xA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@noble/hashes": "^1.1.5"
      }
    },
    "node_modules/@redis/bloom": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@redis/bloom/-/bloom-1.2.0.tgz",
      "integrity": "sha512-HG2DFjYKbpNmVXsa0keLHp/3leGJz1mjh09f2RLGGLQZzSHpkmZWuwJbAvo3QcRY8p80m5+ZdXZdYOSBLlp7Cg==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/client": {
      "version": "1.6.1",
      "resolved": "https://registry.npmjs.org/@redis/client/-/client-1.6.1.tgz",
      "integrity": "sha512-/KCsg3xSlR+nCK8/8ZYSknYxvXHwubJrU82F3Lm1Fp6789VQ0/3RJKfsmRXjqfaTA++23CvC3hqmqe/2GEt6Kw==",
      "license": "MIT",
      "dependencies": {
        "cluster-key-slot": "1.1.2",
        "generic-pool": "3.9.0",
        "yallist": "4.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@redis/client/node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "license": "ISC"
    },
    "node_modules/@redis/graph": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@redis/graph/-/graph-1.1.1.tgz",
      "integrity": "sha512-FEMTcTHZozZciLRl6GiiIB4zGm5z5F3F6a6FZCyrfxdKOhFlGkiAqlexWMBzCi4DcRoyiOsuLfW+cjlGWyExOw==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/json": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/@redis/json/-/json-1.0.7.tgz",
      "integrity": "sha512-6UyXfjVaTBTJtKNG4/9Z8PSpKE6XgSyEb8iwaqDcy+uKrd/DGYHTWkUdnQDyzm727V7p21WUMhsqz5oy65kPcQ==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/search": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@redis/search/-/search-1.2.0.tgz",
      "integrity": "sha512-tYoDBbtqOVigEDMAcTGsRlMycIIjwMCgD8eR2t0NANeQmgK/lvxNAvYyb6bZDD4frHRhIHkJu2TBRvB0ERkOmw==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/time-series": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@redis/time-series/-/time-series-1.1.0.tgz",
      "integrity": "sha512-c1Q99M5ljsIuc4YdaCwfUEXsofakb9c8+Zse2qxTadu8TalLXuAESzLvFAvNVbkmSlvlzIQOLpBCmWI9wTOt+g==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@sideway/address": {
      "version": "4.1.5",
      "resolved": "https://registry.npmjs.org/@sideway/address/-/address-4.1.5.tgz",
      "integrity": "sha512-IqO/DUQHUkPeixNQ8n0JA6102hT9CmaljNTPmQ1u8MEhBo/R4Q8eKLN/vGZxuebwOroDB4cbpjheD4+/sKFK4Q==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@hapi/hoek": "^9.0.0"
      }
    },
    "node_modules/@sideway/formula": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/@sideway/formula/-/formula-3.0.1.tgz",
      "integrity": "sha512-/poHZJJVjx3L+zVD6g9KgHfYnb443oi7wLu/XKojDviHy6HOEOA6z1Trk5aR1dGcmPenJEgb2sK2I80LeS3MIg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@sideway/pinpoint": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@sideway/pinpoint/-/pinpoint-2.0.0.tgz",
      "integrity": "sha512-RNiOoTPkptFtSVzQevY/yWtZwf/RxyVnPy/OcA9HBM3MlGDnBEYL5B41H0MTn0Uec8Hi+2qUtTfG2WWZBmMejQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@sinclair/typebox": {
      "version": "0.27.8",
      "resolved": "https://registry.npmjs.org/@sinclair/typebox/-/typebox-0.27.8.tgz",
      "integrity": "sha512-+Fj43pSMwJs4KRrH/938Uf+uAELIgVBmQzg/q1YG10djyfA3TnrU8N8XzqCh/okZdszqBQTZf96idMfE5lnwTA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@sinonjs/commons": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/@sinonjs/commons/-/commons-3.0.1.tgz",
      "integrity": "sha512-K3mCHKQ9sVh8o1C9cxkwxaOmXoAMlDxC1mYyHrjqOWEcBjYr76t96zL2zlj5dUGZ3HSw240X1qgH3Mjf1yJWpQ==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "type-detect": "4.0.8"
      }
    },
    "node_modules/@sinonjs/fake-timers": {
      "version": "10.3.0",
      "resolved": "https://registry.npmjs.org/@sinonjs/fake-timers/-/fake-timers-10.3.0.tgz",
      "integrity": "sha512-V4BG07kuYSUkTCSBHG8G8TNhM+F19jXFWnQtzj+we8DrkpSBCee9Z3Ms8yiGer/dlmhe35/Xdgyo3/0rQKg7YA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@sinonjs/commons": "^3.0.0"
      }
    },
    "node_modules/@smithy/abort-controller": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/abort-controller/-/abort-controller-4.1.0.tgz",
      "integrity": "sha512-wEhSYznxOmx7EdwK1tYEWJF5+/wmSFsff9BfTOn8oO/+KPl3gsmThrb6MJlWbOC391+Ya31s5JuHiC2RlT80Zg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/chunked-blob-reader": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/chunked-blob-reader/-/chunked-blob-reader-5.1.0.tgz",
      "integrity": "sha512-a36AtR7Q7XOhRPt6F/7HENmTWcB8kN7mDJcOFM/+FuKO6x88w8MQJfYCufMWh4fGyVkPjUh3Rrz/dnqFQdo6OQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/chunked-blob-reader-native": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/chunked-blob-reader-native/-/chunked-blob-reader-native-4.1.0.tgz",
      "integrity": "sha512-Bnv0B3nSlfB2mPO0WgM49I/prl7+kamF042rrf3ezJ3Z4C7csPYvyYgZfXTGXwXfj1mAwDWjE/ybIf49PzFzvA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-base64": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/config-resolver": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/config-resolver/-/config-resolver-4.2.0.tgz",
      "integrity": "sha512-FA10YhPFLy23uxeWu7pOM2ctlw+gzbPMTZQwrZ8FRIfyJ/p8YIVz7AVTB5jjLD+QIerydyKcVMZur8qzzDILAQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-config-provider": "^4.1.0",
        "@smithy/util-middleware": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/core": {
      "version": "3.10.0",
      "resolved": "https://registry.npmjs.org/@smithy/core/-/core-3.10.0.tgz",
      "integrity": "sha512-bXyD3Ij6b1qDymEYlEcF+QIjwb9gObwZNaRjETJsUEvSIzxFdynSQ3E4ysY7lUFSBzeWBNaFvX+5A0smbC2q6A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/middleware-serde": "^4.1.0",
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-body-length-browser": "^4.1.0",
        "@smithy/util-middleware": "^4.1.0",
        "@smithy/util-stream": "^4.3.0",
        "@smithy/util-utf8": "^4.1.0",
        "@types/uuid": "^9.0.1",
        "tslib": "^2.6.2",
        "uuid": "^9.0.1"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/credential-provider-imds": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/credential-provider-imds/-/credential-provider-imds-4.1.0.tgz",
      "integrity": "sha512-iVwNhxTsCQTPdp++4C/d9xvaDmuEWhXi55qJobMp9QMaEHRGH3kErU4F8gohtdsawRqnUy/ANylCjKuhcR2mPw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.0",
        "@smithy/property-provider": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "@smithy/url-parser": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/eventstream-codec": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/eventstream-codec/-/eventstream-codec-4.1.0.tgz",
      "integrity": "sha512-MSOb6pwG3Tss1UwlZMHC+rYergWCo4fwep3Y1fJxwdLLxReSaKFfXxPQhEHi/8LSNQFEcBYBxybgjXjw4jJWqQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@aws-crypto/crc32": "5.2.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-hex-encoding": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/eventstream-serde-browser": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/eventstream-serde-browser/-/eventstream-serde-browser-4.1.0.tgz",
      "integrity": "sha512-VvHXoBoLos2OCdMtUvKWK7ckcvun6ZP4KBYhf38+kszk6BEuK9k8c3xbIMIpC6K4vTK72qHlHAdBoR9qU+F7xw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/eventstream-serde-universal": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/eventstream-serde-config-resolver": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/eventstream-serde-config-resolver/-/eventstream-serde-config-resolver-4.2.0.tgz",
      "integrity": "sha512-T7YlcU0cP2bjAC4eXo9E6puqrrmqv5VHBL8bPMOMgEE1p4m+bwkDWRQpeiXqn/idoKM1qwXq8PvRLYmpbYB6uw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/eventstream-serde-node": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/eventstream-serde-node/-/eventstream-serde-node-4.1.0.tgz",
      "integrity": "sha512-WlIKVRkcPjwuN3x+e8+5KOI9nL6s93bxgWH+39VwwQMl+4FagKPtTM3VCumSoZJ9qn/CNl4W5mVdFFRkDF84lQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/eventstream-serde-universal": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/eventstream-serde-universal": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/eventstream-serde-universal/-/eventstream-serde-universal-4.1.0.tgz",
      "integrity": "sha512-GjMezHHd0xrjJcWLAcnXlVePe7PY8KsdxzKeXcMn7V3vfIScGUpKQJrlSmEXwzFH9Mjl0G0EdOS5GzewZEwtxg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/eventstream-codec": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/fetch-http-handler": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/fetch-http-handler/-/fetch-http-handler-5.2.0.tgz",
      "integrity": "sha512-VZenjDdVaUGiy3hwQtxm75nhXZrhFG+3xyL93qCQAlYDyhT/jeDWM8/3r5uCFMlTmmyrIjiDyiOynVFchb0BSg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/querystring-builder": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-base64": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/hash-blob-browser": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/hash-blob-browser/-/hash-blob-browser-4.1.0.tgz",
      "integrity": "sha512-brRgh2qEYPHYImfqoQB/xfcT/CjSz9Z/dH2vURSS0lIw3bImFK5t15l4iypwRw4GtZlZTK/VsLqsR54OJWRerg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/chunked-blob-reader": "^5.1.0",
        "@smithy/chunked-blob-reader-native": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/hash-node": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/hash-node/-/hash-node-4.1.0.tgz",
      "integrity": "sha512-mXkJQ/6lAXTuoSsEH+d/fHa4ms4qV5LqYoPLYhmhCRTNcMMdg+4Ya8cMgU1W8+OR40eX0kzsExT7fAILqtTl2w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "@smithy/util-buffer-from": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/hash-stream-node": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/hash-stream-node/-/hash-stream-node-4.1.0.tgz",
      "integrity": "sha512-9TToqq62msanK/L6pV1ZAOm2+1VgCz9gE6/TVJhZXV352DnAItaO9jx6FFGujUDXrRJV0lpwe4c0vymz/vXMUQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/invalid-dependency": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/invalid-dependency/-/invalid-dependency-4.1.0.tgz",
      "integrity": "sha512-4/FcV6aCMzgpM4YyA/GRzTtG28G0RQJcWK722MmpIgzOyfSceWcI9T9c8matpHU9qYYLaWtk8pSGNCLn5kzDRw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/is-array-buffer": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/is-array-buffer/-/is-array-buffer-4.1.0.tgz",
      "integrity": "sha512-ePTYUOV54wMogio+he4pBybe8fwg4sDvEVDBU8ZlHOZXbXK3/C0XfJgUCu6qAZcawv05ZhZzODGUerFBPsPUDQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/md5-js": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/md5-js/-/md5-js-4.1.0.tgz",
      "integrity": "sha512-RW1+/E3rv80254ekFqiUTM8ExtN0dG9dkUwU2x17rxS4Mn2ib3SrTCdayCiNbfj6xWHupzgOJB6iNoXiOzNe6g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-content-length": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-content-length/-/middleware-content-length-4.1.0.tgz",
      "integrity": "sha512-x3dgLFubk/ClKVniJu+ELeZGk4mq7Iv0HgCRUlxNUIcerHTLVmq7Q5eGJL0tOnUltY6KFw5YOKaYxwdcMwox/w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-endpoint": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-endpoint/-/middleware-endpoint-4.2.0.tgz",
      "integrity": "sha512-J1eCF7pPDwgv7fGwRd2+Y+H9hlIolF3OZ2PjptonzzyOXXGh/1KGJAHpEcY1EX+WLlclKu2yC5k+9jWXdUG4YQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/core": "^3.10.0",
        "@smithy/middleware-serde": "^4.1.0",
        "@smithy/node-config-provider": "^4.2.0",
        "@smithy/shared-ini-file-loader": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "@smithy/url-parser": "^4.1.0",
        "@smithy/util-middleware": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-retry": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-retry/-/middleware-retry-4.2.0.tgz",
      "integrity": "sha512-raL5oWYf5ALl3jCJrajE8enKJEnV/2wZkKS6mb3ZRY2tg3nj66ssdWy5Ps8E6Yu8Wqh3Tt+Sb9LozjvwZupq+A==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.0",
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/service-error-classification": "^4.1.0",
        "@smithy/smithy-client": "^4.6.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-middleware": "^4.1.0",
        "@smithy/util-retry": "^4.1.0",
        "@types/uuid": "^9.0.1",
        "tslib": "^2.6.2",
        "uuid": "^9.0.1"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-serde": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-serde/-/middleware-serde-4.1.0.tgz",
      "integrity": "sha512-CtLFYlHt7c2VcztyVRc+25JLV4aGpmaSv9F1sPB0AGFL6S+RPythkqpGDa2XBQLJQooKkjLA1g7Xe4450knShg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/middleware-stack": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/middleware-stack/-/middleware-stack-4.1.0.tgz",
      "integrity": "sha512-91Fuw4IKp0eK8PNhMXrHRcYA1jvbZ9BJGT91wwPy3bTQT8mHTcQNius/EhSQTlT9QUI3Ki1wjHeNXbWK0tO8YQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/node-config-provider": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/node-config-provider/-/node-config-provider-4.2.0.tgz",
      "integrity": "sha512-8/fpilqKurQ+f8nFvoFkJ0lrymoMJ+5/CQV5IcTv/MyKhk2Q/EFYCAgTSWHD4nMi9ux9NyBBynkyE9SLg2uSLA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/property-provider": "^4.1.0",
        "@smithy/shared-ini-file-loader": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/node-http-handler": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/node-http-handler/-/node-http-handler-4.2.0.tgz",
      "integrity": "sha512-G4NV70B4hF9vBrUkkvNfWO6+QR4jYjeO4tc+4XrKCb4nPYj49V9Hu8Ftio7Mb0/0IlFyEOORudHrm+isY29nCA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/abort-controller": "^4.1.0",
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/querystring-builder": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/property-provider": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/property-provider/-/property-provider-4.1.0.tgz",
      "integrity": "sha512-eksMjMHUlG5PwOUWO3k+rfLNOPVPJ70mUzyYNKb5lvyIuAwS4zpWGsxGiuT74DFWonW0xRNy+jgzGauUzX7SyA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/protocol-http": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/protocol-http/-/protocol-http-5.2.0.tgz",
      "integrity": "sha512-bwjlh5JwdOQnA01be+5UvHK4HQz4iaRKlVG46hHSJuqi0Ribt3K06Z1oQ29i35Np4G9MCDgkOGcHVyLMreMcbg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/querystring-builder": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/querystring-builder/-/querystring-builder-4.1.0.tgz",
      "integrity": "sha512-JqTWmVIq4AF8R8OK/2cCCiQo5ZJ0SRPsDkDgLO5/3z8xxuUp1oMIBBjfuueEe+11hGTZ6rRebzYikpKc6yQV9Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "@smithy/util-uri-escape": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/querystring-parser": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/querystring-parser/-/querystring-parser-4.1.0.tgz",
      "integrity": "sha512-VgdHhr8YTRsjOl4hnKFm7xEMOCRTnKw3FJ1nU+dlWNhdt/7eEtxtkdrJdx7PlRTabdANTmvyjE4umUl9cK4awg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/service-error-classification": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/service-error-classification/-/service-error-classification-4.1.0.tgz",
      "integrity": "sha512-UBpNFzBNmS20jJomuYn++Y+soF8rOK9AvIGjS9yGP6uRXF5rP18h4FDUsoNpWTlSsmiJ87e2DpZo9ywzSMH7PQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/shared-ini-file-loader": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/shared-ini-file-loader/-/shared-ini-file-loader-4.1.0.tgz",
      "integrity": "sha512-W0VMlz9yGdQ/0ZAgWICFjFHTVU0YSfGoCVpKaExRM/FDkTeP/yz8OKvjtGjs6oFokCRm0srgj/g4Cg0xuHu8Rw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/signature-v4": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/@smithy/signature-v4/-/signature-v4-5.2.0.tgz",
      "integrity": "sha512-ObX1ZqG2DdZQlXx9mLD7yAR8AGb7yXurGm+iWx9x4l1fBZ8CZN2BRT09aSbcXVPZXWGdn5VtMuupjxhOTI2EjA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^4.1.0",
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-hex-encoding": "^4.1.0",
        "@smithy/util-middleware": "^4.1.0",
        "@smithy/util-uri-escape": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/smithy-client": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/@smithy/smithy-client/-/smithy-client-4.6.0.tgz",
      "integrity": "sha512-TvlIshqx5PIi0I0AiR+PluCpJ8olVG++xbYkAIGCUkByaMUlfOXLgjQTmYbr46k4wuDe8eHiTIlUflnjK2drPQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/core": "^3.10.0",
        "@smithy/middleware-endpoint": "^4.2.0",
        "@smithy/middleware-stack": "^4.1.0",
        "@smithy/protocol-http": "^5.2.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-stream": "^4.3.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/types": {
      "version": "4.4.0",
      "resolved": "https://registry.npmjs.org/@smithy/types/-/types-4.4.0.tgz",
      "integrity": "sha512-4jY91NgZz+ZnSFcVzWwngOW6VuK3gR/ihTwSU1R/0NENe9Jd8SfWgbhDCAGUWL3bI7DiDSW7XF6Ui6bBBjrqXw==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/url-parser": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/url-parser/-/url-parser-4.1.0.tgz",
      "integrity": "sha512-/LYEIOuO5B2u++tKr1NxNxhZTrr3A63jW8N73YTwVeUyAlbB/YM+hkftsvtKAcMt3ADYo0FsF1GY3anehffSVQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/querystring-parser": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-base64": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-base64/-/util-base64-4.1.0.tgz",
      "integrity": "sha512-RUGd4wNb8GeW7xk+AY5ghGnIwM96V0l2uzvs/uVHf+tIuVX2WSvynk5CxNoBCsM2rQRSZElAo9rt3G5mJ/gktQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-body-length-browser": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-body-length-browser/-/util-body-length-browser-4.1.0.tgz",
      "integrity": "sha512-V2E2Iez+bo6bUMOTENPr6eEmepdY8Hbs+Uc1vkDKgKNA/brTJqOW/ai3JO1BGj9GbCeLqw90pbbH7HFQyFotGQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-body-length-node": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-body-length-node/-/util-body-length-node-4.1.0.tgz",
      "integrity": "sha512-BOI5dYjheZdgR9XiEM3HJcEMCXSoqbzu7CzIgYrx0UtmvtC3tC2iDGpJLsSRFffUpy8ymsg2ARMP5fR8mtuUQQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-buffer-from": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-buffer-from/-/util-buffer-from-4.1.0.tgz",
      "integrity": "sha512-N6yXcjfe/E+xKEccWEKzK6M+crMrlwaCepKja0pNnlSkm6SjAeLKKA++er5Ba0I17gvKfN/ThV+ZOx/CntKTVw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/is-array-buffer": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-config-provider": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-config-provider/-/util-config-provider-4.1.0.tgz",
      "integrity": "sha512-swXz2vMjrP1ZusZWVTB/ai5gK+J8U0BWvP10v9fpcFvg+Xi/87LHvHfst2IgCs1i0v4qFZfGwCmeD/KNCdJZbQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-defaults-mode-browser": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-defaults-mode-browser/-/util-defaults-mode-browser-4.1.0.tgz",
      "integrity": "sha512-D27cLtJtC4EEeERJXS+JPoogz2tE5zeE3zhWSSu6ER5/wJ5gihUxIzoarDX6K1U27IFTHit5YfHqU4Y9RSGE0w==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/property-provider": "^4.1.0",
        "@smithy/smithy-client": "^4.6.0",
        "@smithy/types": "^4.4.0",
        "bowser": "^2.11.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-defaults-mode-node": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-defaults-mode-node/-/util-defaults-mode-node-4.1.0.tgz",
      "integrity": "sha512-gnZo3u5dP1o87plKupg39alsbeIY1oFFnCyV2nI/++pL19vTtBLgOyftLEjPjuXmoKn2B2rskX8b7wtC/+3Okg==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/config-resolver": "^4.2.0",
        "@smithy/credential-provider-imds": "^4.1.0",
        "@smithy/node-config-provider": "^4.2.0",
        "@smithy/property-provider": "^4.1.0",
        "@smithy/smithy-client": "^4.6.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-endpoints": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-endpoints/-/util-endpoints-3.1.0.tgz",
      "integrity": "sha512-5LFg48KkunBVGrNs3dnQgLlMXJLVo7k9sdZV5su3rjO3c3DmQ2LwUZI0Zr49p89JWK6sB7KmzyI2fVcDsZkwuw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/node-config-provider": "^4.2.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-hex-encoding": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-hex-encoding/-/util-hex-encoding-4.1.0.tgz",
      "integrity": "sha512-1LcueNN5GYC4tr8mo14yVYbh/Ur8jHhWOxniZXii+1+ePiIbsLZ5fEI0QQGtbRRP5mOhmooos+rLmVASGGoq5w==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-middleware": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-middleware/-/util-middleware-4.1.0.tgz",
      "integrity": "sha512-612onNcKyxhP7/YOTKFTb2F6sPYtMRddlT5mZvYf1zduzaGzkYhpYIPxIeeEwBZFjnvEqe53Ijl2cYEfJ9d6/Q==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-retry": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-retry/-/util-retry-4.1.0.tgz",
      "integrity": "sha512-5AGoBHb207xAKSVwaUnaER+L55WFY8o2RhlafELZR3mB0J91fpL+Qn+zgRkPzns3kccGaF2vy0HmNVBMWmN6dA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/service-error-classification": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-stream": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-stream/-/util-stream-4.3.0.tgz",
      "integrity": "sha512-ZOYS94jksDwvsCJtppHprUhsIscRnCKGr6FXCo3SxgQ31ECbza3wqDBqSy6IsAak+h/oAXb1+UYEBmDdseAjUQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/fetch-http-handler": "^5.2.0",
        "@smithy/node-http-handler": "^4.2.0",
        "@smithy/types": "^4.4.0",
        "@smithy/util-base64": "^4.1.0",
        "@smithy/util-buffer-from": "^4.1.0",
        "@smithy/util-hex-encoding": "^4.1.0",
        "@smithy/util-utf8": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-uri-escape": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-uri-escape/-/util-uri-escape-4.1.0.tgz",
      "integrity": "sha512-b0EFQkq35K5NHUYxU72JuoheM6+pytEVUGlTwiFxWFpmddA+Bpz3LgsPRIpBk8lnPE47yT7AF2Egc3jVnKLuPg==",
      "license": "Apache-2.0",
      "dependencies": {
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-utf8": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-utf8/-/util-utf8-4.1.0.tgz",
      "integrity": "sha512-mEu1/UIXAdNYuBcyEPbjScKi/+MQVXNIuY/7Cm5XLIWe319kDrT5SizBE95jqtmEXoDbGoZxKLCMttdZdqTZKQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/util-buffer-from": "^4.1.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@smithy/util-waiter": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/@smithy/util-waiter/-/util-waiter-4.1.0.tgz",
      "integrity": "sha512-IUuj2zpGdeKaY5OdGnU83BUJsv7OA9uw3rNVSOuvzLMXMpBTU+W6V0SsQh6iI32lKUJArlnEU4BIzp83hghR/g==",
      "license": "Apache-2.0",
      "dependencies": {
        "@smithy/abort-controller": "^4.1.0",
        "@smithy/types": "^4.4.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=18.0.0"
      }
    },
    "node_modules/@tediousjs/connection-string": {
      "version": "0.5.0",
      "resolved": "https://registry.npmjs.org/@tediousjs/connection-string/-/connection-string-0.5.0.tgz",
      "integrity": "sha512-7qSgZbincDDDFyRweCIEvZULFAw5iz/DeunhvuxpL31nfntX3P4Yd4HkHBRg9H8CdqY1e5WFN1PZIz/REL9MVQ==",
      "license": "MIT"
    },
    "node_modules/@tsconfig/node10": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@tsconfig/node10/-/node10-1.0.11.tgz",
      "integrity": "sha512-DcRjDCujK/kCk/cUe8Xz8ZSpm8mS3mNNpta+jGCA6USEDfktlNvm1+IuZ9eTcDbNk41BHwpHHeW+N1lKCz4zOw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node12": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@tsconfig/node12/-/node12-1.0.11.tgz",
      "integrity": "sha512-cqefuRsh12pWyGsIoBKJA9luFu3mRxCA+ORZvA4ktLSzIuCUtWVxGIuXigEwO5/ywWFMZ2QEGKWvkZG1zDMTag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node14": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/@tsconfig/node14/-/node14-1.0.3.tgz",
      "integrity": "sha512-ysT8mhdixWK6Hw3i1V2AeRqZ5WfXg1G43mqoYlM2nc6388Fq5jcXyr5mRsqViLx/GJYdoL0bfXD8nmF+Zn/Iow==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node16": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/@tsconfig/node16/-/node16-1.0.4.tgz",
      "integrity": "sha512-vxhUy4J8lyeyinH7Azl1pdd43GJhZH/tP2weN8TntQblOY+A0XbT8DJk1/oCPuOOyg/Ja757rG0CgHcWC8OfMA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/bcryptjs": {
      "version": "2.4.6",
      "resolved": "https://registry.npmjs.org/@types/bcryptjs/-/bcryptjs-2.4.6.tgz",
      "integrity": "sha512-9xlo6R2qDs5uixm0bcIqCeMCE6HiQsIyel9KQySStiyqNl2tnj2mP3DX1Nf56MD6KMenNNlBBsy3LJ7gUEQPXQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/body-parser": {
      "version": "1.19.6",
      "resolved": "https://registry.npmjs.org/@types/body-parser/-/body-parser-1.19.6.tgz",
      "integrity": "sha512-HLFeCYgz89uk22N5Qg3dvGvsv46B8GLvKKo1zKG4NybA8U2DiEO3w9lqGg29t/tfLRJpJ6iQxnVw4OnB7MoM9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/connect": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/compression": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/@types/compression/-/compression-1.8.1.tgz",
      "integrity": "sha512-kCFuWS0ebDbmxs0AXYn6e2r2nrGAb5KwQhknjSPSPgJcGd8+HVSILlUyFhGqML2gk39HcG7D1ydW9/qpYkN00Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/express": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/connect": {
      "version": "3.4.38",
      "resolved": "https://registry.npmjs.org/@types/connect/-/connect-3.4.38.tgz",
      "integrity": "sha512-K6uROf1LD88uDQqJCktA4yzL1YYAK6NgfsI0v/mTgyPKWsX1CnJ0XPSDhViejru1GcRkLWb8RlzFYJRqGUbaug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/cookiejar": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@types/cookiejar/-/cookiejar-2.1.5.tgz",
      "integrity": "sha512-he+DHOWReW0nghN24E1WUqM0efK4kI9oTqDm6XmK8ZPe2djZ90BSNdGnIyCLzCPw7/pogPlGbzI2wHGGmi4O/Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/cors": {
      "version": "2.8.19",
      "resolved": "https://registry.npmjs.org/@types/cors/-/cors-2.8.19.tgz",
      "integrity": "sha512-mFNylyeyqN93lfe/9CSxOGREz8cpzAhH+E93xJ4xWQf62V8sQ/24reV2nyzUWM6H6Xji+GGHpkbLe7pVoUEskg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/express": {
      "version": "4.17.23",
      "resolved": "https://registry.npmjs.org/@types/express/-/express-4.17.23.tgz",
      "integrity": "sha512-Crp6WY9aTYP3qPi2wGDo9iUe/rceX01UMhnF1jmwDcKCFM6cx7YhGP/Mpr3y9AASpfHixIG0E6azCcL5OcDHsQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/body-parser": "*",
        "@types/express-serve-static-core": "^4.17.33",
        "@types/qs": "*",
        "@types/serve-static": "*"
      }
    },
    "node_modules/@types/express-serve-static-core": {
      "version": "4.19.6",
      "resolved": "https://registry.npmjs.org/@types/express-serve-static-core/-/express-serve-static-core-4.19.6.tgz",
      "integrity": "sha512-N4LZ2xG7DatVqhCZzOGb1Yi5lMbXSZcmdLDe9EzSndPV2HpWYWzRbaerl2n27irrm94EPpprqa8KpskPT085+A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "@types/qs": "*",
        "@types/range-parser": "*",
        "@types/send": "*"
      }
    },
    "node_modules/@types/graceful-fs": {
      "version": "4.1.9",
      "resolved": "https://registry.npmjs.org/@types/graceful-fs/-/graceful-fs-4.1.9.tgz",
      "integrity": "sha512-olP3sd1qOEe5dXTSaFvQG+02VdRXcdytWLAZsAq1PecU8uqQAhkrnbli7DagjtXKW/Bl7YJbUsa8MPcuc8LHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/http-errors": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@types/http-errors/-/http-errors-2.0.5.tgz",
      "integrity": "sha512-r8Tayk8HJnX0FztbZN7oVqGccWgw98T/0neJphO91KkmOzug1KkofZURD4UaD5uH8AqcFLfdPErnBod0u71/qg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/istanbul-lib-coverage": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/@types/istanbul-lib-coverage/-/istanbul-lib-coverage-2.0.6.tgz",
      "integrity": "sha512-2QF/t/auWm0lsy8XtKVPG19v3sSOQlJe/YHZgfjb/KBBHOGSV+J2q/S671rcq9uTBrLAXmZpqJiaQbMT+zNU1w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/istanbul-lib-report": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/@types/istanbul-lib-report/-/istanbul-lib-report-3.0.3.tgz",
      "integrity": "sha512-NQn7AHQnk/RSLOxrBbGyJM/aVQ+pjj5HCgasFxc0K/KhoATfQ/47AyUl15I2yBUpihjmas+a+VJBOqecrFH+uA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/istanbul-lib-coverage": "*"
      }
    },
    "node_modules/@types/istanbul-reports": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@types/istanbul-reports/-/istanbul-reports-3.0.4.tgz",
      "integrity": "sha512-pk2B1NWalF9toCRu6gjBzR69syFjP4Od8WRAX+0mmf9lAjCRicLOWc+ZrxZHx/0XRjotgkF9t6iaMJ+aXcOdZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/istanbul-lib-report": "*"
      }
    },
    "node_modules/@types/jest": {
      "version": "29.5.14",
      "resolved": "https://registry.npmjs.org/@types/jest/-/jest-29.5.14.tgz",
      "integrity": "sha512-ZN+4sdnLUbo8EVvVc2ao0GFW6oVrQRPn4K2lglySj7APvSrgzxHiNNK99us4WDMi57xxA2yggblIAMNhXOotLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "expect": "^29.0.0",
        "pretty-format": "^29.0.0"
      }
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/jsonwebtoken": {
      "version": "9.0.10",
      "resolved": "https://registry.npmjs.org/@types/jsonwebtoken/-/jsonwebtoken-9.0.10.tgz",
      "integrity": "sha512-asx5hIG9Qmf/1oStypjanR7iKTv0gXQ1Ov/jfrX6kS/EO0OFni8orbmGCn0672NHR3kXHwpAwR+B368ZGN/2rA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/ms": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/methods": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/@types/methods/-/methods-1.1.4.tgz",
      "integrity": "sha512-ymXWVrDiCxTBE3+RIrrP533E70eA+9qu7zdWoHuOmGujkYtzf4HQF96b8nwHLqhuf4ykX61IGRIB38CC6/sImQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/mime": {
      "version": "1.3.5",
      "resolved": "https://registry.npmjs.org/@types/mime/-/mime-1.3.5.tgz",
      "integrity": "sha512-/pyBZWSLD2n0dcHE3hq8s8ZvcETHtEuF+3E7XVt0Ig2nvsVQXdghHVcEkIWjy9A0wKfTn97a/PSDYohKIlnP/w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/ms": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@types/ms/-/ms-2.1.0.tgz",
      "integrity": "sha512-GsCCIZDE/p3i96vtEqx+7dBUGXrc7zeSK3wwPHIaRThS+9OhWIXRqzs4d6k1SVU8g91DrNRWxWUGhp5KXQb2VA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/mssql": {
      "version": "9.1.8",
      "resolved": "https://registry.npmjs.org/@types/mssql/-/mssql-9.1.8.tgz",
      "integrity": "sha512-mt9h5jWj+DYE5jxnKaWSV/GqDf9FV52XYVk6T3XZF69noEe+JJV6MKirii48l81+cjmAkSq+qeKX+k61fHkYrQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "tarn": "^3.0.1",
        "tedious": "*"
      }
    },
    "node_modules/@types/multer": {
      "version": "1.4.13",
      "resolved": "https://registry.npmjs.org/@types/multer/-/multer-1.4.13.tgz",
      "integrity": "sha512-bhhdtPw7JqCiEfC9Jimx5LqX9BDIPJEh2q/fQ4bqbBPtyEZYr3cvF22NwG0DmPZNYA0CAf2CnqDB4KIGGpJcaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/express": "*"
      }
    },
    "node_modules/@types/node": {
      "version": "20.19.13",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-20.19.13.tgz",
      "integrity": "sha512-yCAeZl7a0DxgNVteXFHt9+uyFbqXGy/ShC4BlcHkoE0AfGXYv/BUiplV72DjMYXHDBXFjhvr6DD1NiRVfB4j8g==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/pg": {
      "version": "8.15.5",
      "resolved": "https://registry.npmjs.org/@types/pg/-/pg-8.15.5.tgz",
      "integrity": "sha512-LF7lF6zWEKxuT3/OR8wAZGzkg4ENGXFNyiV/JeOt9z5B+0ZVwbql9McqX5c/WStFq1GaGso7H1AzP/qSzmlCKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "pg-protocol": "*",
        "pg-types": "^2.2.0"
      }
    },
    "node_modules/@types/qs": {
      "version": "6.14.0",
      "resolved": "https://registry.npmjs.org/@types/qs/-/qs-6.14.0.tgz",
      "integrity": "sha512-eOunJqu0K1923aExK6y8p6fsihYEn/BYuQ4g0CxAAgFc4b/ZLN4CrsRZ55srTdqoiLzU2B2evC+apEIxprEzkQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/range-parser": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/@types/range-parser/-/range-parser-1.2.7.tgz",
      "integrity": "sha512-hKormJbkJqzQGhziax5PItDUTMAM9uE2XXQmM37dyd4hVM+5aVl7oVxMVUiVQn2oCQFN/LKCZdvSM0pFRqbSmQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/readable-stream": {
      "version": "4.0.21",
      "resolved": "https://registry.npmjs.org/@types/readable-stream/-/readable-stream-4.0.21.tgz",
      "integrity": "sha512-19eKVv9tugr03IgfXlA9UVUVRbW6IuqRO5B92Dl4a6pT7K8uaGrNS0GkxiZD0BOk6PLuXl5FhWl//eX/pzYdTQ==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/semver": {
      "version": "7.7.1",
      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.7.1.tgz",
      "integrity": "sha512-FmgJfu+MOcQ370SD0ev7EI8TlCAfKYU+B4m5T3yXc1CiRN94g/SZPtsCkk506aUDtlMnFZvasDwHHUcZUEaYuA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/send": {
      "version": "0.17.5",
      "resolved": "https://registry.npmjs.org/@types/send/-/send-0.17.5.tgz",
      "integrity": "sha512-z6F2D3cOStZvuk2SaP6YrwkNO65iTZcwA2ZkSABegdkAh/lf+Aa/YQndZVfmEXT5vgAp6zv06VQ3ejSVjAny4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/mime": "^1",
        "@types/node": "*"
      }
    },
    "node_modules/@types/serve-static": {
      "version": "1.15.8",
      "resolved": "https://registry.npmjs.org/@types/serve-static/-/serve-static-1.15.8.tgz",
      "integrity": "sha512-roei0UY3LhpOJvjbIP6ZZFngyLKl5dskOtDhxY5THRSpO+ZI+nzJ+m5yUMzGrp89YRa7lvknKkMYjqQFGwA7Sg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/http-errors": "*",
        "@types/node": "*",
        "@types/send": "*"
      }
    },
    "node_modules/@types/stack-utils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@types/stack-utils/-/stack-utils-2.0.3.tgz",
      "integrity": "sha512-9aEbYZ3TbYMznPdcdr3SmIrLXwC/AKZXQeCf9Pgao5CKb8CyHuEX5jzWPTkvregvhRJHcpRO6BFoGW9ycaOkYw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/strip-bom": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/@types/strip-bom/-/strip-bom-3.0.0.tgz",
      "integrity": "sha512-xevGOReSYGM7g/kUBZzPqCrR/KYAo+F0yiPc85WFTJa0MSLtyFTVTU6cJu/aV4mid7IffDIWqo69THF2o4JiEQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/strip-json-comments": {
      "version": "0.0.30",
      "resolved": "https://registry.npmjs.org/@types/strip-json-comments/-/strip-json-comments-0.0.30.tgz",
      "integrity": "sha512-7NQmHra/JILCd1QqpSzl8+mJRc8ZHz3uDm8YV1Ks9IhK0epEiTw8aIErbvH9PI+6XbqhyIQy3462nEsn7UVzjQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/superagent": {
      "version": "8.1.9",
      "resolved": "https://registry.npmjs.org/@types/superagent/-/superagent-8.1.9.tgz",
      "integrity": "sha512-pTVjI73witn+9ILmoJdajHGW2jkSaOzhiFYF1Rd3EQ94kymLqB9PjD9ISg7WaALC7+dCHT0FGe9T2LktLq/3GQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/cookiejar": "^2.1.5",
        "@types/methods": "^1.1.4",
        "@types/node": "*",
        "form-data": "^4.0.0"
      }
    },
    "node_modules/@types/supertest": {
      "version": "2.0.16",
      "resolved": "https://registry.npmjs.org/@types/supertest/-/supertest-2.0.16.tgz",
      "integrity": "sha512-6c2ogktZ06tr2ENoZivgm7YnprnhYE4ZoXGMY+oA7IuAf17M8FWvujXZGmxLv8y0PTyts4x5A+erSwVUFA8XSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/superagent": "*"
      }
    },
    "node_modules/@types/triple-beam": {
      "version": "1.3.5",
      "resolved": "https://registry.npmjs.org/@types/triple-beam/-/triple-beam-1.3.5.tgz",
      "integrity": "sha512-6WaYesThRMCl19iryMYP7/x2OVgCtbIVflDGFpWnb9irXI3UjYE4AzmYuiUKY1AJstGijoY+MgUszMgRxIYTYw==",
      "license": "MIT"
    },
    "node_modules/@types/uuid": {
      "version": "9.0.8",
      "resolved": "https://registry.npmjs.org/@types/uuid/-/uuid-9.0.8.tgz",
      "integrity": "sha512-jg+97EGIcY9AGHJJRaaPVgetKDsrTgbRjQ5Msgjh/DQKEFl0DtyRr/VCOyD1T2R1MNeWPK/u7JoGhlDZnKBAfA==",
      "license": "MIT"
    },
    "node_modules/@types/webidl-conversions": {
      "version": "7.0.3",
      "resolved": "https://registry.npmjs.org/@types/webidl-conversions/-/webidl-conversions-7.0.3.tgz",
      "integrity": "sha512-CiJJvcRtIgzadHCYXw7dqEnMNRjhGZlYK05Mj9OyktqV8uVT8fD2BFOB7S1uwBE3Kj2Z+4UyPmFw/Ixgw/LAlA==",
      "license": "MIT"
    },
    "node_modules/@types/whatwg-url": {
      "version": "11.0.5",
      "resolved": "https://registry.npmjs.org/@types/whatwg-url/-/whatwg-url-11.0.5.tgz",
      "integrity": "sha512-coYR071JRaHa+xoEvvYqvnIHaVqaYrLPbsufM9BF63HkwI5Lgmy2QR8Q5K/lYDYo5AK82wOvSOS0UsLTpTG7uQ==",
      "license": "MIT",
      "dependencies": {
        "@types/webidl-conversions": "*"
      }
    },
    "node_modules/@types/yargs": {
      "version": "17.0.33",
      "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.33.tgz",
      "integrity": "sha512-WpxBCKWPLr4xSsHgz511rFJAM+wS28w2zEO1QDNY5zM/S8ok70NNfztH0xwhqKyaK0OHCbN98LDAZuy1ctxDkA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/yargs-parser": "*"
      }
    },
    "node_modules/@types/yargs-parser": {
      "version": "21.0.3",
      "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.3.tgz",
      "integrity": "sha512-I4q9QU9MQv4oEOz4tAHJtNz1cwuLxn2F3xcc2iV5WdqLPpUnj30aUuxt1mAxYTG+oe8CZMV/+6rU4S4gRDzqtQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-6.21.0.tgz",
      "integrity": "sha512-oy9+hTPCUFpngkEZUSzbf9MxI65wbKFoQYsgPdILTfbUldp5ovUuphZVe4i30emU9M/kP+T64Di0mxl7dSw3MA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.5.1",
        "@typescript-eslint/scope-manager": "6.21.0",
        "@typescript-eslint/type-utils": "6.21.0",
        "@typescript-eslint/utils": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0",
        "debug": "^4.3.4",
        "graphemer": "^1.4.0",
        "ignore": "^5.2.4",
        "natural-compare": "^1.4.0",
        "semver": "^7.5.4",
        "ts-api-utils": "^1.0.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^6.0.0 || ^6.0.0-alpha",
        "eslint": "^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-6.21.0.tgz",
      "integrity": "sha512-tbsV1jPne5CkFQCgPBcDOt30ItF7aJoZL997JSF7MhGQqOeT3svWRYxiqlfA5RUdlHN6Fi+EI9bxqbdyAUZjYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@typescript-eslint/scope-manager": "6.21.0",
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/typescript-estree": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-6.21.0.tgz",
      "integrity": "sha512-OwLUIWZJry80O99zvqXVEioyniJMa+d2GrqpUTqi5/v5D5rOrppJVBPa0yKCblcigC0/aYAzxxqQ1B+DS2RYsg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-6.21.0.tgz",
      "integrity": "sha512-rZQI7wHfao8qMX3Rd3xqeYSMCL3SoiSQLBATSiVKARdFGCYSRvmViieZjqc58jKgs8Y8i9YvVVhRbHSTA4VBag==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/typescript-estree": "6.21.0",
        "@typescript-eslint/utils": "6.21.0",
        "debug": "^4.3.4",
        "ts-api-utils": "^1.0.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-6.21.0.tgz",
      "integrity": "sha512-1kFmZ1rOm5epu9NZEZm1kckCDGj5UJEf7P1kliH4LKu/RkwpsfqqGmY2OOcUs18lSlQBKLDYBOGxRVtrMN5lpg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-6.21.0.tgz",
      "integrity": "sha512-6npJTkZcO+y2/kr+z0hc4HwNfrrP4kNYh57ek7yCNlrBjWQ1Y0OS7jiZTkgumrvkX5HkEKXFZkkdFNkaW2wmUQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0",
        "debug": "^4.3.4",
        "globby": "^11.1.0",
        "is-glob": "^4.0.3",
        "minimatch": "9.0.3",
        "semver": "^7.5.4",
        "ts-api-utils": "^1.0.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-6.21.0.tgz",
      "integrity": "sha512-NfWVaC8HP9T8cbKQxHcsJBY5YE1O33+jpMwN45qzWWaPDZgLIbo12toGMWnmhvCpd3sIxkpDw3Wv1B3dYrbDQQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.4.0",
        "@types/json-schema": "^7.0.12",
        "@types/semver": "^7.5.0",
        "@typescript-eslint/scope-manager": "6.21.0",
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/typescript-estree": "6.21.0",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-6.21.0.tgz",
      "integrity": "sha512-JJtkDduxLi9bivAB+cYOVMtbkqdPOhZ+ZI5LC47MIRrDV4Yn2o+ZnW10Nkmr28xRpSpdJ6Sm42Hjf2+REYXm0A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "6.21.0",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typespec/ts-http-runtime": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/@typespec/ts-http-runtime/-/ts-http-runtime-0.3.0.tgz",
      "integrity": "sha512-sOx1PKSuFwnIl7z4RN0Ls7N9AQawmR9r66eI5rFCzLDIs8HTIYrIpH9QjYWoX0lkgGrkLxXhi4QnK7MizPRrIg==",
      "license": "MIT",
      "dependencies": {
        "http-proxy-agent": "^7.0.0",
        "https-proxy-agent": "^7.0.0",
        "tslib": "^2.6.2"
      },
      "engines": {
        "node": ">=20.0.0"
      }
    },
    "node_modules/@ungap/structured-clone": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@ungap/structured-clone/-/structured-clone-1.3.0.tgz",
      "integrity": "sha512-WmoN8qaIAo7WTYWbAZuG8PYEhn5fkz7dZrqTBZ7dtt//lL2Gwms1IcnQ5yHqjDfX8Ft5j4YzDM23f87zBfDe9g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/abort-controller": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/abort-controller/-/abort-controller-3.0.0.tgz",
      "integrity": "sha512-h8lQ8tacZYnR3vNQTgibj+tODHI5/+l06Au2Pcriv/Gmet0eaj4TwWH41sO9wnHDiQsEj19q0drzdWdeAHtweg==",
      "license": "MIT",
      "dependencies": {
        "event-target-shim": "^5.0.0"
      },
      "engines": {
        "node": ">=6.5"
      }
    },
    "node_modules/accepts": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-1.3.8.tgz",
      "integrity": "sha512-PYAthTa2m2VKxuvSD3DPC/Gy+U+sOA1LAuT8mkmRuvw+NACSaeXEQ+NHcVF7rONl6qcaxV3Uuemwawk+7+SJLw==",
      "license": "MIT",
      "dependencies": {
        "mime-types": "~2.1.34",
        "negotiator": "0.6.3"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/accepts/node_modules/negotiator": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.3.tgz",
      "integrity": "sha512-+EUsqGPLsM+j/zdChZjsnX51g4XrHFOIXwfnCVPGlQk/k5giakcKsuxCObBRu6DSm9opw/O6slWbJdghQM4bBg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/acorn-walk": {
      "version": "8.3.4",
      "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.3.4.tgz",
      "integrity": "sha512-ueEepnujpqee2o5aIYnvHU6C0A42MNdsIDeqy5BydrkuC5R1ZuUFnm27EeFJGoEHJQgn3uleRvmTXaJgfXbt4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "acorn": "^8.11.0"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/adler-32": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/adler-32/-/adler-32-1.3.1.tgz",
      "integrity": "sha512-ynZ4w/nUUv5rrsR8UUGoe1VC9hZj6V5hU9Qw1HlMDJGEJw5S7TfTErWTjMys6M7vr0YWcPqs3qAr4ss0nDfP+A==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/agent-base": {
      "version": "7.1.4",
      "resolved": "https://registry.npmjs.org/agent-base/-/agent-base-7.1.4.tgz",
      "integrity": "sha512-MnA+YT8fwfJPgBx3m60MNqakm30XOkyIoH1y6huTQvC0PwZG7ki8NacLBcrPbNoo8vEZy7Jpuk7+jMO+CUovTQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-escapes": {
      "version": "4.3.2",
      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-4.3.2.tgz",
      "integrity": "sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.21.3"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ansi-escapes/node_modules/type-fest": {
      "version": "0.21.3",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.21.3.tgz",
      "integrity": "sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/append-field": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/append-field/-/append-field-1.0.0.tgz",
      "integrity": "sha512-klpgFSWLW1ZEs8svjfb7g4qWY0YS5imI82dTg+QahUvJ8YqAY0P10Uk8tTyh9ZGuYEZEMaeJYCF5BFuX552hsw==",
      "license": "MIT"
    },
    "node_modules/arg": {
      "version": "4.1.3",
      "resolved": "https://registry.npmjs.org/arg/-/arg-4.1.3.tgz",
      "integrity": "sha512-58S9QDqG0Xx27YwPSt9fJxivjYl432YCwfDMfZ+71RAqUrZef7LrKQZ3LHLOwCS4FLNBplP533Zx895SeOCHvA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/array-buffer-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/array-buffer-byte-length/-/array-buffer-byte-length-1.0.2.tgz",
      "integrity": "sha512-LHE+8BuR7RYGDKvnrmcuSq3tDcKv9OFEXQt/HpbZhY7V6h0zlUXutnAD82GiFx9rdieCMjkvtcsPqBwgUl1Iiw==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "is-array-buffer": "^3.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/array-flatten": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/array-flatten/-/array-flatten-1.1.1.tgz",
      "integrity": "sha512-PCVAQswWemu6UdxsDFFX/+gVeYqKAod3D3UVm91jHwynguOwAvYPhx8nNlM++NqRcK6CxxpUafjmhIdKiHibqg==",
      "license": "MIT"
    },
    "node_modules/array-union": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/array-union/-/array-union-2.1.0.tgz",
      "integrity": "sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/arraybuffer.prototype.slice": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/arraybuffer.prototype.slice/-/arraybuffer.prototype.slice-1.0.4.tgz",
      "integrity": "sha512-BNoCY6SXXPQ7gF2opIP4GBE+Xw7U+pHMYKuzjgCN3GwiaIR09UUeKfheyIry77QtrCBlC0KK0q5/TER/tYh3PQ==",
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.1",
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "is-array-buffer": "^3.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/asap": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
      "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/async": {
      "version": "3.2.6",
      "resolved": "https://registry.npmjs.org/async/-/async-3.2.6.tgz",
      "integrity": "sha512-htCUDlxyyCLMgaM3xXg0C0LW2xqfuQ6p05pCEIsXuyQ+a1koYKTuBMzRNwmybfLgvJDMd0r1LTn4+E0Ti6C2AA==",
      "license": "MIT"
    },
    "node_modules/async-function": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/async-function/-/async-function-1.0.0.tgz",
      "integrity": "sha512-hsU18Ae8CDTR6Kgu9DYf0EbCr/a5iGL0rytQDobUcdpYOKokk8LEjVphnXkDkgpi0wYVsqrXuP0bZxJaTqdgoA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/available-typed-arrays": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/available-typed-arrays/-/available-typed-arrays-1.0.7.tgz",
      "integrity": "sha512-wvUjBtSGN7+7SjNpq/9M2Tg350UZD3q62IFZLbRAR1bSMlCo1ZaeW+BJ+D090e4hIIZLBcTDWe4Mh4jvUDajzQ==",
      "license": "MIT",
      "dependencies": {
        "possible-typed-array-names": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/aws-ssl-profiles": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/aws-ssl-profiles/-/aws-ssl-profiles-1.1.2.tgz",
      "integrity": "sha512-NZKeq9AfyQvEeNlN0zSYAaWrmBffJh3IELMZfRpJVWgrpEbtEpnjvzqBPf+mxoI287JohRDoa+/nsfqqiZmF6g==",
      "license": "MIT",
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/axios": {
      "version": "1.11.0",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.11.0.tgz",
      "integrity": "sha512-1Lx3WLFQWm3ooKDYZD1eXmoGO9fxYQjrycfHFC8P0sCfQVXyROp0p9PFWBehewBOdCwHc+f/b8I0fMto5eSfwA==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/babel-jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/babel-jest/-/babel-jest-29.7.0.tgz",
      "integrity": "sha512-BrvGY3xZSwEcCzKvKsCi2GgHqDqsYkOP4/by5xCgIwGXQxIEh+8ew3gmrE1y7XRR6LHZIj6yLYnUi/mm2KXKBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/transform": "^29.7.0",
        "@types/babel__core": "^7.1.14",
        "babel-plugin-istanbul": "^6.1.1",
        "babel-preset-jest": "^29.6.3",
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.8.0"
      }
    },
    "node_modules/babel-plugin-istanbul": {
      "version": "6.1.1",
      "resolved": "https://registry.npmjs.org/babel-plugin-istanbul/-/babel-plugin-istanbul-6.1.1.tgz",
      "integrity": "sha512-Y1IQok9821cC9onCx5otgFfRm7Lm+I+wwxOx738M/WLPZ9Q42m4IG5W0FNX8WLL2gYMZo3JkuXIH2DOpWM+qwA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.0.0",
        "@istanbuljs/load-nyc-config": "^1.0.0",
        "@istanbuljs/schema": "^0.1.2",
        "istanbul-lib-instrument": "^5.0.4",
        "test-exclude": "^6.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/babel-plugin-istanbul/node_modules/istanbul-lib-instrument": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-instrument/-/istanbul-lib-instrument-5.2.1.tgz",
      "integrity": "sha512-pzqtp31nLv/XFOzXGuvhCb8qhjmTVo5vjVk19XE4CRlSWz0KoeJ3bw9XsA7nOp9YBf4qHjwBxkDzKcME/J29Yg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/core": "^7.12.3",
        "@babel/parser": "^7.14.7",
        "@istanbuljs/schema": "^0.1.2",
        "istanbul-lib-coverage": "^3.2.0",
        "semver": "^6.3.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/babel-plugin-istanbul/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/babel-plugin-jest-hoist": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/babel-plugin-jest-hoist/-/babel-plugin-jest-hoist-29.6.3.tgz",
      "integrity": "sha512-ESAc/RJvGTFEzRwOTT4+lNDk/GNHMkKbNzsvT0qKRfDyyYTskxB5rnU2njIDYVxXCBHHEI1c0YwHob3WaYujOg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.3.3",
        "@babel/types": "^7.3.3",
        "@types/babel__core": "^7.1.14",
        "@types/babel__traverse": "^7.0.6"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/babel-preset-current-node-syntax": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/babel-preset-current-node-syntax/-/babel-preset-current-node-syntax-1.2.0.tgz",
      "integrity": "sha512-E/VlAEzRrsLEb2+dv8yp3bo4scof3l9nR4lrld+Iy5NyVqgVYUJnDAmunkhPMisRI32Qc4iRiz425d8vM++2fg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/plugin-syntax-async-generators": "^7.8.4",
        "@babel/plugin-syntax-bigint": "^7.8.3",
        "@babel/plugin-syntax-class-properties": "^7.12.13",
        "@babel/plugin-syntax-class-static-block": "^7.14.5",
        "@babel/plugin-syntax-import-attributes": "^7.24.7",
        "@babel/plugin-syntax-import-meta": "^7.10.4",
        "@babel/plugin-syntax-json-strings": "^7.8.3",
        "@babel/plugin-syntax-logical-assignment-operators": "^7.10.4",
        "@babel/plugin-syntax-nullish-coalescing-operator": "^7.8.3",
        "@babel/plugin-syntax-numeric-separator": "^7.10.4",
        "@babel/plugin-syntax-object-rest-spread": "^7.8.3",
        "@babel/plugin-syntax-optional-catch-binding": "^7.8.3",
        "@babel/plugin-syntax-optional-chaining": "^7.8.3",
        "@babel/plugin-syntax-private-property-in-object": "^7.14.5",
        "@babel/plugin-syntax-top-level-await": "^7.14.5"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0 || ^8.0.0-0"
      }
    },
    "node_modules/babel-preset-jest": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/babel-preset-jest/-/babel-preset-jest-29.6.3.tgz",
      "integrity": "sha512-0B3bhxR6snWXJZtR/RliHTDPRgn1sNHOR0yVtq/IiQFyuOVjFS+wuio/R4gSNkyYmKmJB4wGZv2NZanmKmTnNA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "babel-plugin-jest-hoist": "^29.6.3",
        "babel-preset-current-node-syntax": "^1.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/base64-js": {
      "version": "1.5.1",
      "resolved": "https://registry.npmjs.org/base64-js/-/base64-js-1.5.1.tgz",
      "integrity": "sha512-AKpaYlHn8t4SVbOHCy+b5+KKgvR4vrsD8vbvrbiQJps7fKDTkjkDry6ji0rUJjC0kzbNePLwzxq8iypo41qeWA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/bcryptjs": {
      "version": "2.4.3",
      "resolved": "https://registry.npmjs.org/bcryptjs/-/bcryptjs-2.4.3.tgz",
      "integrity": "sha512-V/Hy/X9Vt7f3BbPJEi8BdVFMByHi+jNXrYkW3huaybV/kQ0KJg0Y6PkEMbn+zeT+i+SiKZ/HMqJGIIt4LZDqNQ==",
      "license": "MIT"
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/bl": {
      "version": "6.1.3",
      "resolved": "https://registry.npmjs.org/bl/-/bl-6.1.3.tgz",
      "integrity": "sha512-nHB8B5roHlGX5TFsWeiQJijdddZIOHuv1eL2cM2kHnG3qR91CYLsysGe+CvxQfEd23EKD0eJf4lto0frTbddKA==",
      "license": "MIT",
      "dependencies": {
        "@types/readable-stream": "^4.0.0",
        "buffer": "^6.0.3",
        "inherits": "^2.0.4",
        "readable-stream": "^4.2.0"
      }
    },
    "node_modules/bl/node_modules/readable-stream": {
      "version": "4.7.0",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-4.7.0.tgz",
      "integrity": "sha512-oIGGmcpTLwPga8Bn6/Z75SVaH1z5dUut2ibSyAMVhmUggWpmDn2dapB0n7f8nwaSiRtepAsfJyfXIO5DCVAODg==",
      "license": "MIT",
      "dependencies": {
        "abort-controller": "^3.0.0",
        "buffer": "^6.0.3",
        "events": "^3.3.0",
        "process": "^0.11.10",
        "string_decoder": "^1.3.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/bl/node_modules/string_decoder": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.3.0.tgz",
      "integrity": "sha512-hkRX8U1WjJFd8LsDJ2yQ/wWWxaopEsABU1XfkM8A+j0+85JAGppt16cr1Whg6KIbb4okU6Mql6BOj+uup/wKeA==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.2.0"
      }
    },
    "node_modules/body-parser": {
      "version": "1.20.3",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.20.3.tgz",
      "integrity": "sha512-7rAxByjUMqQ3/bHJy7D6OGXvx/MMc4IqBn/X0fcM1QUcAItpZrBEYhWGem+tzXH90c+G01ypMcYJBO9Y30203g==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "content-type": "~1.0.5",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "on-finished": "2.4.1",
        "qs": "6.13.0",
        "raw-body": "2.5.2",
        "type-is": "~1.6.18",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/body-parser/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/body-parser/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/bowser": {
      "version": "2.12.1",
      "resolved": "https://registry.npmjs.org/bowser/-/bowser-2.12.1.tgz",
      "integrity": "sha512-z4rE2Gxh7tvshQ4hluIT7XcFrgLIQaw9X3A+kTTRdovCz5PMukm/0QC/BKSYPj3omF5Qfypn9O/c5kgpmvYUCw==",
      "license": "MIT"
    },
    "node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.25.4",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.25.4.tgz",
      "integrity": "sha512-4jYpcjabC606xJ3kw2QwGEZKX0Aw7sgQdZCvIK9dhVSPh76BKo+C+btT1RRofH7B+8iNpEbgGNVWiLki5q93yg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "caniuse-lite": "^1.0.30001737",
        "electron-to-chromium": "^1.5.211",
        "node-releases": "^2.0.19",
        "update-browserslist-db": "^1.1.3"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/bs-logger": {
      "version": "0.2.6",
      "resolved": "https://registry.npmjs.org/bs-logger/-/bs-logger-0.2.6.tgz",
      "integrity": "sha512-pd8DCoxmbgc7hyPKOvxtqNcjYoOsABPQdcCUjGp3d42VR2CX1ORhk2A87oqqu5R1kk+76nsxZupkmyd+MVtCog==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-json-stable-stringify": "2.x"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/bser": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/bser/-/bser-2.1.1.tgz",
      "integrity": "sha512-gQxTNE/GAfIIrmHLUE3oJyp5FO6HRBfhjnw4/wMmA63ZGDJnWBmgY/lyQBpnDUkGmAhbSe39tx2d/iTOAfglwQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "node-int64": "^0.4.0"
      }
    },
    "node_modules/bson": {
      "version": "6.10.4",
      "resolved": "https://registry.npmjs.org/bson/-/bson-6.10.4.tgz",
      "integrity": "sha512-WIsKqkSC0ABoBJuT1LEX+2HEvNmNKKgnTAyd0fL8qzK4SH2i9NXg+t08YtdZp/V9IZ33cxe3iV4yM0qg8lMQng==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=16.20.1"
      }
    },
    "node_modules/buffer": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/buffer/-/buffer-6.0.3.tgz",
      "integrity": "sha512-FTiCpNxtwiZZHEZbcbTIcZjERVICn9yq/pDFkTl95/AxzD1naBctN7YO68riM/gLSDY7sdrMby8hofADYuuqOA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "base64-js": "^1.3.1",
        "ieee754": "^1.2.1"
      }
    },
    "node_modules/buffer-equal-constant-time": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/buffer-from": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
      "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
      "license": "MIT"
    },
    "node_modules/bundle-name": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/bundle-name/-/bundle-name-4.1.0.tgz",
      "integrity": "sha512-tjwM5exMg6BGRI+kNmTntNsvdZS1X8BFYS6tnJ2hdH0kVxM6/eVZ2xy+FqStSWvYmtfFMDLIxurorHwDKfDz5Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "run-applescript": "^7.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/busboy": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/busboy/-/busboy-1.6.0.tgz",
      "integrity": "sha512-8SFQbg/0hQ9xy3UNTB0YEnsNBbWfhf7RtnzpL7TkBiTBRfrQ9Fxcnz7VJsleJpyp6rVLvXiuORqjlHi5q+PYuA==",
      "dependencies": {
        "streamsearch": "^1.1.0"
      },
      "engines": {
        "node": ">=10.16.0"
      }
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/call-bind/-/call-bind-1.0.8.tgz",
      "integrity": "sha512-oKlSFMcMwpUg2ednkhQ454wfWiU/ul3CkJe/PEHcTKuiX6RpbehUiFMXu13HalGZxfUwCQzZG747YXBn1im9ww==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.0",
        "es-define-property": "^1.0.0",
        "get-intrinsic": "^1.2.4",
        "set-function-length": "^1.2.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase": {
      "version": "5.3.1",
      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-5.3.1.tgz",
      "integrity": "sha512-L28STB170nwWS63UjtlEOE3dldQApaJXZkOI1uMFfzf3rRuPegHaHesyee+YxQ+W6SvRDQV6UrdOdRiR153wJg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001741",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001741.tgz",
      "integrity": "sha512-QGUGitqsc8ARjLdgAfxETDhRbJ0REsP6O3I96TAth/mVjh2cYzN2u+3AzPP3aVSm2FehEItaJw1xd+IGBXWeSw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/cfb": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/cfb/-/cfb-1.2.2.tgz",
      "integrity": "sha512-KfdUZsSOw19/ObEWasvBP/Ac4reZvAGauZhs6S/gqNhXhI7cKwvlH7ulj+dOEYnca4bm4SGo8C1bTAQvnTjgQA==",
      "license": "Apache-2.0",
      "dependencies": {
        "adler-32": "~1.3.0",
        "crc-32": "~1.2.0"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/char-regex": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/char-regex/-/char-regex-1.0.2.tgz",
      "integrity": "sha512-kWWXztvZ5SBQV+eRgKFeh8q5sLuZY2+8WUIzlxWVTg+oGwY14qylx1KbKzHd8P6ZYkAg0xyIDU9JMHhyJMZ1jw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/ci-info": {
      "version": "3.9.0",
      "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.9.0.tgz",
      "integrity": "sha512-NIxF55hv4nSqQswkAeiOi1r83xy8JldOFDTWiug55KBu9Jnblncd2U6ViHmYgHf01TPZS77NJBhBMKdWj9HQMQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/sibiraj-s"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cjs-module-lexer": {
      "version": "1.4.3",
      "resolved": "https://registry.npmjs.org/cjs-module-lexer/-/cjs-module-lexer-1.4.3.tgz",
      "integrity": "sha512-9z8TZaGM1pfswYeXrUpzPrkx8UnWYdhJclsiYMm6x/w5+nN+8Tf/LnAgfLGQCm59qAOxU8WwHEq2vNwF6i4j+Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/cluster-key-slot": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/cluster-key-slot/-/cluster-key-slot-1.1.2.tgz",
      "integrity": "sha512-RMr0FhtfXemyinomL4hrWcYJxmX6deFdCxpJzhDttxgO1+bcCnkk+9drydLVDmAMG7NE6aN/fl4F7ucU/90gAA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/co": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/co/-/co-4.6.0.tgz",
      "integrity": "sha512-QVb0dM5HvG+uaxitm8wONl7jltx8dqhfU33DcqtOZcLSVIKSDDLDi7+0LbAKiyI8hD9u42m2YxXSkMGWThaecQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">= 1.0.0",
        "node": ">= 0.12.0"
      }
    },
    "node_modules/codepage": {
      "version": "1.15.0",
      "resolved": "https://registry.npmjs.org/codepage/-/codepage-1.15.0.tgz",
      "integrity": "sha512-3g6NUTPd/YtuuGrhMnOMRjFc+LJw/bnMp3+0r/Wcz3IXUuCosKRJvMphm5+Q+bvTVGcJJuRvVLuYba+WojaFaA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/collect-v8-coverage": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/collect-v8-coverage/-/collect-v8-coverage-1.0.2.tgz",
      "integrity": "sha512-lHl4d5/ONEbLlJvaJNtsF/Lz+WvB07u2ycqTYbdrq7UypDXailES4valYb2eWiJFxZlVmpGekfqoxQhzyFdT4Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/color": {
      "version": "3.2.1",
      "resolved": "https://registry.npmjs.org/color/-/color-3.2.1.tgz",
      "integrity": "sha512-aBl7dZI9ENN6fUGC7mWpMTPNHmWUSNan9tuWN6ahh5ZLNk9baLJOnSMlrQkHcrfFgz2/RigjUVAjdx36VcemKA==",
      "license": "MIT",
      "dependencies": {
        "color-convert": "^1.9.3",
        "color-string": "^1.6.0"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "license": "MIT"
    },
    "node_modules/color-string": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/color-string/-/color-string-1.9.1.tgz",
      "integrity": "sha512-shrVawQFojnZv6xM40anx4CkoDP+fZsw/ZerEMsW/pyzsRbElpsL/DBVW7q3ExxwusdNXI3lXpuhEZkzs8p5Eg==",
      "license": "MIT",
      "dependencies": {
        "color-name": "^1.0.0",
        "simple-swizzle": "^0.2.2"
      }
    },
    "node_modules/color/node_modules/color-convert": {
      "version": "1.9.3",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-1.9.3.tgz",
      "integrity": "sha512-QfAUtd+vFdAtFQcC8CCyYt1fYWxSqAiK2cSD6zDB8N3cpsEBAvRxp9zOGg6G/SHHJYAT88/az/IuDGALsNVbGg==",
      "license": "MIT",
      "dependencies": {
        "color-name": "1.1.3"
      }
    },
    "node_modules/color/node_modules/color-name": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.3.tgz",
      "integrity": "sha512-72fSenhMw2HZMTVHeCA9KCmpEIbzWiQsjN+BHcBbS9vr1mtt+vJjPdksIBNUmKAW8TFUDPJK5SUU3QhE9NEXDw==",
      "license": "MIT"
    },
    "node_modules/colorspace": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/colorspace/-/colorspace-1.1.4.tgz",
      "integrity": "sha512-BgvKJiuVu1igBUF2kEjRCZXol6wiiGbY5ipL/oVPwm0BL9sIpMIzM8IK7vwuxIIzOXMV3Ey5w+vxhm0rR/TN8w==",
      "license": "MIT",
      "dependencies": {
        "color": "^3.1.3",
        "text-hex": "1.0.x"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/commander": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-11.1.0.tgz",
      "integrity": "sha512-yPVavfyCcRhmorC7rWlkHn15b4wDVgVmBA7kV4QVBsF7kv/9TKJAbAXVTxvTnwP8HHKjRCJDClKbciiYS7p0DQ==",
      "license": "MIT",
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/component-emitter": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/component-emitter/-/component-emitter-1.3.1.tgz",
      "integrity": "sha512-T0+barUSQRTUQASh8bx02dl+DhF54GtIDY13Y3m9oWTklKbb3Wv974meRpeZ3lp1JpLVECWWNHC4vaG2XHXouQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/compressible": {
      "version": "2.0.18",
      "resolved": "https://registry.npmjs.org/compressible/-/compressible-2.0.18.tgz",
      "integrity": "sha512-AF3r7P5dWxL8MxyITRMlORQNaOA2IkAFaTr4k7BUumjPtRpGDTZpl0Pb1XCO6JeDCBdp126Cgs9sMxqSjgYyRg==",
      "license": "MIT",
      "dependencies": {
        "mime-db": ">= 1.43.0 < 2"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/compression": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/compression/-/compression-1.8.1.tgz",
      "integrity": "sha512-9mAqGPHLakhCLeNyxPkK4xVo746zQ/czLH1Ky+vkitMnWfWZps8r0qXuwhwizagCRttsL4lfG4pIOvaWLpAP0w==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "compressible": "~2.0.18",
        "debug": "2.6.9",
        "negotiator": "~0.6.4",
        "on-headers": "~1.1.0",
        "safe-buffer": "5.2.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/compression/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/compression/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/concat-stream": {
      "version": "1.6.2",
      "resolved": "https://registry.npmjs.org/concat-stream/-/concat-stream-1.6.2.tgz",
      "integrity": "sha512-27HBghJxjiZtIk3Ycvn/4kbJk/1uZuJFfuPEns6LaEvpvG1f0hTea8lilrouyo9mVc2GWdcEZ8OLoGmSADlrCw==",
      "engines": [
        "node >= 0.8"
      ],
      "license": "MIT",
      "dependencies": {
        "buffer-from": "^1.0.0",
        "inherits": "^2.0.3",
        "readable-stream": "^2.2.2",
        "typedarray": "^0.0.6"
      }
    },
    "node_modules/content-disposition": {
      "version": "0.5.4",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-0.5.4.tgz",
      "integrity": "sha512-FveZTNuGw04cxlAiWbzi6zTAL/lhehaWbTtgluJh4/E95DqMwTmha3KZN1aAWA8cFIhHzMZUvLevkw5Rqk+tSQ==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "0.7.1",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.1.tgz",
      "integrity": "sha512-6DnInpx7SJ2AK3+CTUE/ZM0vWTUboZCegxhC2xiIydHR9jNuTAASBrfEpHhiGOZw/nX51bHt6YQl8jsGo4y/0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.6.tgz",
      "integrity": "sha512-QADzlaHc8icV8I7vbaJXJwod9HWYp8uCqf1xa4OfNu1T7JVxQIrUgOWtHdNDtPiywmFbiS12VjotIXLrKM3orQ==",
      "license": "MIT"
    },
    "node_modules/cookiejar": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/cookiejar/-/cookiejar-2.1.4.tgz",
      "integrity": "sha512-LDx6oHrK+PhzLKJU9j5S7/Y3jM/mUHvD/DeI1WQmJn652iPC5Y4TBzC9l+5OMOXlyTTA+SmVUPm0HQUwpD5Jqw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/core-util-is": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
      "integrity": "sha512-ZQBvi1DcpJ4GDqanjucZ2Hj3wEO5pZDS89BWbkcrvdxksJorwUDDZamX9ldFkp9aw2lmBDLgkObEA4DWNJ9FYQ==",
      "license": "MIT"
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/crc-32": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/crc-32/-/crc-32-1.2.2.tgz",
      "integrity": "sha512-ROmzCKrTnOwybPcJApAA6WBWij23HVfGVNKqqrZpuyZOHqK2CwHSvpGuyt/UNNvaIjEd8X5IFGp4Mh+Ie1IHJQ==",
      "license": "Apache-2.0",
      "bin": {
        "crc32": "bin/crc32.njs"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/create-jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/create-jest/-/create-jest-29.7.0.tgz",
      "integrity": "sha512-Adz2bdH0Vq3F53KEMJOoftQFutWCukm6J24wbPWRO4k1kMY7gS7ds/uoJkNuV8wDCtWWnuwGcJwpWcih+zEW1Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "exit": "^0.1.2",
        "graceful-fs": "^4.2.9",
        "jest-config": "^29.7.0",
        "jest-util": "^29.7.0",
        "prompts": "^2.0.1"
      },
      "bin": {
        "create-jest": "bin/create-jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/create-require": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/create-require/-/create-require-1.1.1.tgz",
      "integrity": "sha512-dcKFX3jn0MpIaXjisoRvexIJVEKzaq7z2rZKxf+MSr9TkdmHmsU4m2lcLojrj/FHl8mk5VxMmYA+ftRkP/3oKQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csv-parser": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/csv-parser/-/csv-parser-3.2.0.tgz",
      "integrity": "sha512-fgKbp+AJbn1h2dcAHKIdKNSSjfp43BZZykXsCjzALjKy80VXQNHPFJ6T9Afwdzoj24aMkq8GwDS7KGcDPpejrA==",
      "license": "MIT",
      "bin": {
        "csv-parser": "bin/csv-parser"
      },
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/cwic-platform": {
      "resolved": "../..",
      "link": true
    },
    "node_modules/data-view-buffer": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-buffer/-/data-view-buffer-1.0.2.tgz",
      "integrity": "sha512-EmKO5V3OLXh1rtK2wgXRansaK1/mtVdTUEiEI0W8RkvgT05kfxaH29PliLnpLP73yYO6142Q72QNa8Wx/A5CqQ==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/data-view-byte-length": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/data-view-byte-length/-/data-view-byte-length-1.0.2.tgz",
      "integrity": "sha512-tuhGbE6CfTM9+5ANGf+oQb72Ky/0+s3xKUpHvShfiz2RxMFgFPjsXuRLBVMtvMs15awe45SRb83D6wH4ew6wlQ==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/inspect-js"
      }
    },
    "node_modules/data-view-byte-offset": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/data-view-byte-offset/-/data-view-byte-offset-1.0.1.tgz",
      "integrity": "sha512-BS8PfmtDGnrgYdOonGZQdLZslWIeCGFP9tpan0hi1Co2Zr2NKADsvGYA8XxuG/4UWgJ6Cjtv+YJnB6MM69QGlQ==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-data-view": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/debug": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.1.tgz",
      "integrity": "sha512-KcKCqiftBJcZr++7ykoDIEwSa3XWowTfNPo92BYxjXiyYEVrUQh2aLyhxBCwww+heortUFxEJYcRzosstTEBYQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/dedent": {
      "version": "1.7.0",
      "resolved": "https://registry.npmjs.org/dedent/-/dedent-1.7.0.tgz",
      "integrity": "sha512-HGFtf8yhuhGhqO07SV79tRp+br4MnbdjeVxotpn1QBl30pcLLCQjX5b2295ll0fv8RKDKsmWYrl05usHM9CewQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "babel-plugin-macros": "^3.1.0"
      },
      "peerDependenciesMeta": {
        "babel-plugin-macros": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/deepmerge": {
      "version": "4.3.1",
      "resolved": "https://registry.npmjs.org/deepmerge/-/deepmerge-4.3.1.tgz",
      "integrity": "sha512-3sUqbMEc77XqpdNO7FRyRog+eW3ph+GYCbj+rK+uYyRMuwsVy0rMiVtPn+QJlKFvWP/1PYpapqYn0Me2knFn+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/default-browser": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/default-browser/-/default-browser-5.2.1.tgz",
      "integrity": "sha512-WY/3TUME0x3KPYdRRxEJJvXRHV4PyPoUsxtZa78lwItwRQRHhd2U9xOscaT/YTf8uCXIAjeJOFBVEh/7FtD8Xg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bundle-name": "^4.1.0",
        "default-browser-id": "^5.0.0"
      },
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/default-browser-id": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/default-browser-id/-/default-browser-id-5.0.0.tgz",
      "integrity": "sha512-A6p/pu/6fyBcA1TRz/GqWYPViplrftcW2gZC9q79ngNCKAeR/X3gcEdXQHl4KNXV+3wgIJ1CPkJQ3IHM6lcsyA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/define-data-property": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/define-data-property/-/define-data-property-1.1.4.tgz",
      "integrity": "sha512-rBMvIzlpA8v6E+SJZoo++HAYqsLrkg7MSfIinMPFhmkorw7X+dOXVJQs+QT69zGkzMyfDnIMN2Wid1+NbL3T+A==",
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0",
        "es-errors": "^1.3.0",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/define-lazy-prop": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-3.0.0.tgz",
      "integrity": "sha512-N+MeXYoqr3pOgn8xfyRPREN7gHakLYjhsHhWGT3fWAiL4IkAt0iDw14QiiEm2bE30c5XX5q0FtAA3CK5f9/BUg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/define-properties": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/define-properties/-/define-properties-1.2.1.tgz",
      "integrity": "sha512-8QmQKqEASLd5nx0U1B1okLElbUuuttJ/AnYmRXbbbGDWh6uS208EjD4Xqq/I9wK7u0v6O08XhTWnt5XtEbR6Dg==",
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.0.1",
        "has-property-descriptors": "^1.0.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/denque": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/denque/-/denque-2.1.0.tgz",
      "integrity": "sha512-HVQE3AAb/pxF8fQAoiqpvg9i3evqug3hoiwakOyZAwJm+6vZehbkYXZ0l4JxS+I3QxM97v5aaRNhj8v5oBhekw==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/destroy": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/destroy/-/destroy-1.2.0.tgz",
      "integrity": "sha512-2sJGJTaXIIaR1w4iJSNoN0hnMY7Gpc/n8D4qSCJw8QqFWXf7cuAgnEHxBpweaVcPevC2l3KpjYCx3NypQQgaJg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/detect-newline": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/detect-newline/-/detect-newline-3.1.0.tgz",
      "integrity": "sha512-TLz+x/vEXm/Y7P7wn1EJFNLxYpUD4TgMosxY6fAVJUnJMbupHBOncxyWUG9OpTaH9EBD7uFI5LfEgmMOc54DsA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/dezalgo": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
      "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "asap": "^2.0.0",
        "wrappy": "1"
      }
    },
    "node_modules/diff": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/diff/-/diff-4.0.2.tgz",
      "integrity": "sha512-58lmxKSA4BNyLz+HHMUzlOEpg09FV+ev6ZMe3vJihgdxzgcwZ8VoEEPmALCZG9LmqfVoNMMKpttIYTVG6uDY7A==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.3.1"
      }
    },
    "node_modules/diff-sequences": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/diff-sequences/-/diff-sequences-29.6.3.tgz",
      "integrity": "sha512-EjePK1srD3P08o2j4f0ExnylqRs5B9tJjcp9t1krH2qRi8CCdsYfwe9JgSLurFBWwq4uOlipzfk5fHNvwFKr8Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/dir-glob": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
      "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-type": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/doctrine": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-3.0.0.tgz",
      "integrity": "sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/dotenv": {
      "version": "16.6.1",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.6.1.tgz",
      "integrity": "sha512-uBq4egWHTcTt33a72vpSG0z3HnPuIl6NqYcTrKEg2azoEyl2hpW0zqlxysq2pK9HlDIHyHyakeYaYnSAwd8bow==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/dynamic-dedupe": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/dynamic-dedupe/-/dynamic-dedupe-0.3.0.tgz",
      "integrity": "sha512-ssuANeD+z97meYOqd50e04Ze5qp4bPqo8cCkI4TRjZkzAUgIDTrXV1R8QCdINpiI+hw14+rYazvTRdQrz0/rFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "xtend": "^4.0.0"
      }
    },
    "node_modules/ecdsa-sig-formatter": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==",
      "license": "MIT"
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.214",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.214.tgz",
      "integrity": "sha512-TpvUNdha+X3ybfU78NoQatKvQEm1oq3lf2QbnmCEdw+Bd9RuIAY+hJTvq1avzHM0f7EJfnH3vbCnbzKzisc/9Q==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emittery": {
      "version": "0.13.1",
      "resolved": "https://registry.npmjs.org/emittery/-/emittery-0.13.1.tgz",
      "integrity": "sha512-DeWwawk6r5yR9jFgnDKYt4sLS0LmHJJi3ZOnb5/JdbYwj3nW+FxQnHIjhBKz8YLC7oRNPVM9NQ47I3CVx34eqQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/emittery?sponsor=1"
      }
    },
    "node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/enabled": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/enabled/-/enabled-2.0.0.tgz",
      "integrity": "sha512-AKrN98kuwOzMIdAizXGI86UFBoo26CL21UM763y1h/GMSJ4/OHU9k2YlsmBpyScFo/wbLzWQJBMCW4+IO3/+OQ==",
      "license": "MIT"
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/error-ex": {
      "version": "1.3.2",
      "resolved": "https://registry.npmjs.org/error-ex/-/error-ex-1.3.2.tgz",
      "integrity": "sha512-7dFHNmqeFSEt2ZBsCriorKnn3Z2pj+fd9kmI6QoWw4//DL+icEBfc0U7qJCisqrTsKTjw4fNFy2pW9OqStD84g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-arrayish": "^0.2.1"
      }
    },
    "node_modules/es-abstract": {
      "version": "1.24.0",
      "resolved": "https://registry.npmjs.org/es-abstract/-/es-abstract-1.24.0.tgz",
      "integrity": "sha512-WSzPgsdLtTcQwm4CROfS5ju2Wa1QQcVeT37jFjYzdFz1r9ahadC8B8/a4qxJxM+09F18iumCdRmlr96ZYkQvEg==",
      "license": "MIT",
      "dependencies": {
        "array-buffer-byte-length": "^1.0.2",
        "arraybuffer.prototype.slice": "^1.0.4",
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "data-view-buffer": "^1.0.2",
        "data-view-byte-length": "^1.0.2",
        "data-view-byte-offset": "^1.0.1",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "es-set-tostringtag": "^2.1.0",
        "es-to-primitive": "^1.3.0",
        "function.prototype.name": "^1.1.8",
        "get-intrinsic": "^1.3.0",
        "get-proto": "^1.0.1",
        "get-symbol-description": "^1.1.0",
        "globalthis": "^1.0.4",
        "gopd": "^1.2.0",
        "has-property-descriptors": "^1.0.2",
        "has-proto": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "internal-slot": "^1.1.0",
        "is-array-buffer": "^3.0.5",
        "is-callable": "^1.2.7",
        "is-data-view": "^1.0.2",
        "is-negative-zero": "^2.0.3",
        "is-regex": "^1.2.1",
        "is-set": "^2.0.3",
        "is-shared-array-buffer": "^1.0.4",
        "is-string": "^1.1.1",
        "is-typed-array": "^1.1.15",
        "is-weakref": "^1.1.1",
        "math-intrinsics": "^1.1.0",
        "object-inspect": "^1.13.4",
        "object-keys": "^1.1.1",
        "object.assign": "^4.1.7",
        "own-keys": "^1.0.1",
        "regexp.prototype.flags": "^1.5.4",
        "safe-array-concat": "^1.1.3",
        "safe-push-apply": "^1.0.0",
        "safe-regex-test": "^1.1.0",
        "set-proto": "^1.0.0",
        "stop-iteration-iterator": "^1.1.0",
        "string.prototype.trim": "^1.2.10",
        "string.prototype.trimend": "^1.0.9",
        "string.prototype.trimstart": "^1.0.8",
        "typed-array-buffer": "^1.0.3",
        "typed-array-byte-length": "^1.0.3",
        "typed-array-byte-offset": "^1.0.4",
        "typed-array-length": "^1.0.7",
        "unbox-primitive": "^1.1.0",
        "which-typed-array": "^1.1.19"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-aggregate-error": {
      "version": "1.0.14",
      "resolved": "https://registry.npmjs.org/es-aggregate-error/-/es-aggregate-error-1.0.14.tgz",
      "integrity": "sha512-3YxX6rVb07B5TV11AV5wsL7nQCHXNwoHPsQC8S4AmBiqYhyNCJ5BRKXkXyDJvs8QzXN20NgRtxe3dEEQD9NLHA==",
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.24.0",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "globalthis": "^1.0.4",
        "has-property-descriptors": "^1.0.2",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-to-primitive": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-to-primitive/-/es-to-primitive-1.3.0.tgz",
      "integrity": "sha512-w+5mJ3GuFL+NjVtJlvydShqE1eN3h3PbI7/5LAsYJP/2qtuMXjfL2LpHSRqo4b4eSF5K/DH1JXKUAHSB2UW50g==",
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7",
        "is-date-object": "^1.0.5",
        "is-symbol": "^1.0.4"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==",
      "license": "MIT"
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-8.57.1.tgz",
      "integrity": "sha512-ypowyDxpVSYpkXr9WPv2PAZCtNip1Mv5KTW0SCurXv/9iOpcrH9PaqUElksqEB6pChqHGDRCFTyrZlGhnLNGiA==",
      "deprecated": "This version is no longer supported. Please see https://eslint.org/version-support for other options.",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.6.1",
        "@eslint/eslintrc": "^2.1.4",
        "@eslint/js": "8.57.1",
        "@humanwhocodes/config-array": "^0.13.0",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@nodelib/fs.walk": "^1.2.8",
        "@ungap/structured-clone": "^1.2.0",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.2",
        "debug": "^4.3.2",
        "doctrine": "^3.0.0",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^7.2.2",
        "eslint-visitor-keys": "^3.4.3",
        "espree": "^9.6.1",
        "esquery": "^1.4.2",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^6.0.1",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "globals": "^13.19.0",
        "graphemer": "^1.4.0",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "is-path-inside": "^3.0.3",
        "js-yaml": "^4.1.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "levn": "^0.4.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3",
        "strip-ansi": "^6.0.1",
        "text-table": "^0.2.0"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-scope": {
      "version": "7.2.2",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.2.2.tgz",
      "integrity": "sha512-dOt21O7lTMhDM+X9mB4GX+DZrZtCUJPL/wlcTqxyrx5IvO0IYtILdtrQGQp+8n5S0gwSVmOf9NQrjMOgfQZlIg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/espree": {
      "version": "9.6.1",
      "resolved": "https://registry.npmjs.org/espree/-/espree-9.6.1.tgz",
      "integrity": "sha512-oruZaFkjorTpF32kDSI5/75ViwGeZginGGy2NoOSg3Q9bnwlnmDm4HLnkl0RE3n+njDXR037aY1+x58Z/zFdwQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.9.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esprima": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/esprima/-/esprima-4.0.1.tgz",
      "integrity": "sha512-eGuFFw7Upda+g4p+QHvnW0RyTX/SVeJBDM/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB/sbNop0Kszm0jsaWU4A==",
      "dev": true,
      "license": "BSD-2-Clause",
      "bin": {
        "esparse": "bin/esparse.js",
        "esvalidate": "bin/esvalidate.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/event-target-shim": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/event-target-shim/-/event-target-shim-5.0.1.tgz",
      "integrity": "sha512-i/2XbnSz/uxRCU6+NdVJgKWDTM427+MqYbkQzD321DuCQJUqOuJKIA0IM2+W2xtYHdKOmZ4dR6fExsd4SXL+WQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/events": {
      "version": "3.3.0",
      "resolved": "https://registry.npmjs.org/events/-/events-3.3.0.tgz",
      "integrity": "sha512-mQw+2fkQbALzQ7V0MY0IqdnXNOeTtP4r0lN9z7AAawCXgqea7bDii20AYrIBrFd/Hx0M2Ocz6S111CaFkUcb0Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.8.x"
      }
    },
    "node_modules/execa": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/execa/-/execa-5.1.1.tgz",
      "integrity": "sha512-8uSpZZocAZRBAPIEINJj3Lo9HyGitllczc27Eh5YYojjMFMn8yHMDMaUHE2Jqfq05D/wucwI4JGURyXt1vchyg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cross-spawn": "^7.0.3",
        "get-stream": "^6.0.0",
        "human-signals": "^2.1.0",
        "is-stream": "^2.0.0",
        "merge-stream": "^2.0.0",
        "npm-run-path": "^4.0.1",
        "onetime": "^5.1.2",
        "signal-exit": "^3.0.3",
        "strip-final-newline": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/execa?sponsor=1"
      }
    },
    "node_modules/exit": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/exit/-/exit-0.1.2.tgz",
      "integrity": "sha512-Zk/eNKV2zbjpKzrsQ+n1G6poVbErQxJ0LBOJXaKZ1EViLzH+hrLu9cdXI4zw9dBQJslwBEpbQ2P1oS7nDxs6jQ==",
      "dev": true,
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/expect": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/expect/-/expect-29.7.0.tgz",
      "integrity": "sha512-2Zks0hf1VLFYI1kbh0I5jP3KHHyCHpkfyHBzsSXRFgl/Bg9mWYfMW8oD+PdMPlEwy5HNsR9JutYy6pMeOh61nw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/expect-utils": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/express": {
      "version": "4.21.2",
      "resolved": "https://registry.npmjs.org/express/-/express-4.21.2.tgz",
      "integrity": "sha512-28HqgMZAmih1Czt9ny7qr6ek2qddF4FclbMzwhCREB6OFfH+rXAnuNCwo1/wFvrtbgsQDb4kSbX9de9lFbrXnA==",
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.8",
        "array-flatten": "1.1.1",
        "body-parser": "1.20.3",
        "content-disposition": "0.5.4",
        "content-type": "~1.0.4",
        "cookie": "0.7.1",
        "cookie-signature": "1.0.6",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "finalhandler": "1.3.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "merge-descriptors": "1.0.3",
        "methods": "~1.1.2",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "path-to-regexp": "0.1.12",
        "proxy-addr": "~2.0.7",
        "qs": "6.13.0",
        "range-parser": "~1.2.1",
        "safe-buffer": "5.2.1",
        "send": "0.19.0",
        "serve-static": "1.16.2",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "type-is": "~1.6.18",
        "utils-merge": "1.0.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/express-rate-limit": {
      "version": "7.5.1",
      "resolved": "https://registry.npmjs.org/express-rate-limit/-/express-rate-limit-7.5.1.tgz",
      "integrity": "sha512-7iN8iPMDzOMHPUYllBEsQdWVB6fPDMPqwjBaFrgr4Jgr/+okjvzAy+UHlYYL/Vs0OsOrMkwS6PJDkFlJwoxUnw==",
      "license": "MIT",
      "engines": {
        "node": ">= 16"
      },
      "funding": {
        "url": "https://github.com/sponsors/express-rate-limit"
      },
      "peerDependencies": {
        "express": ">= 4.11"
      }
    },
    "node_modules/express-validator": {
      "version": "7.2.1",
      "resolved": "https://registry.npmjs.org/express-validator/-/express-validator-7.2.1.tgz",
      "integrity": "sha512-CjNE6aakfpuwGaHQZ3m8ltCG2Qvivd7RHtVMS/6nVxOM7xVGqr4bhflsm4+N5FP5zI7Zxp+Hae+9RE+o8e3ZOQ==",
      "license": "MIT",
      "dependencies": {
        "lodash": "^4.17.21",
        "validator": "~13.12.0"
      },
      "engines": {
        "node": ">= 8.0.0"
      }
    },
    "node_modules/express/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/express/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-safe-stringify": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/fast-safe-stringify/-/fast-safe-stringify-2.1.1.tgz",
      "integrity": "sha512-W+KJc2dmILlPplD/H4K9l9LcAHAfPtP6BY84uVLXQ6Evcz9Lcg33Y2z1IVblT6xdY54PXYVHEv+0Wpq8Io6zkA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-xml-parser": {
      "version": "5.2.5",
      "resolved": "https://registry.npmjs.org/fast-xml-parser/-/fast-xml-parser-5.2.5.tgz",
      "integrity": "sha512-pfX9uG9Ki0yekDHx2SiuRIyFdyAr1kMIMitPvb0YBo8SUfKvia7w7FIyd/l6av85pFYRhZscS75MwMnbvY+hcQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/NaturalIntelligence"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "strnum": "^2.1.0"
      },
      "bin": {
        "fxparser": "src/cli/cli.js"
      }
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fb-watchman": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/fb-watchman/-/fb-watchman-2.0.2.tgz",
      "integrity": "sha512-p5161BqbuCaSnB8jIbzQHOlpgsPmK5rJVDfDKO91Axs5NC1uu3HRQm6wt9cd9/+GtQQIO53JdGXXoyDpTAsgYA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "bser": "2.1.1"
      }
    },
    "node_modules/fecha": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/fecha/-/fecha-4.2.3.tgz",
      "integrity": "sha512-OP2IUU6HeYKJi3i0z4A19kHMQoLVs4Hc+DPqqxI2h/DPZHTm/vjsfC6P0b4jCMy14XizLBqvndQ+UilD7707Jw==",
      "license": "MIT"
    },
    "node_modules/file-entry-cache": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-6.0.1.tgz",
      "integrity": "sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^3.0.4"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/finalhandler": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-1.3.1.tgz",
      "integrity": "sha512-6BN9trH7bp3qvnrRyzsBz+g3lZxTNZTbVO2EV1CS0WIcDbawYVdYvGflME/9QP0h0pYlCDBCTjYa9nZzMDpyxQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "statuses": "2.0.1",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/finalhandler/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/finalhandler/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-3.2.0.tgz",
      "integrity": "sha512-CYcENa+FtcUKLmhhqyctpclsq7QF38pKjZHsGNiSQF5r4FtoKDWabFDl3hzaEQMvT1LHEysw5twgLvpYYb4vbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.3",
        "rimraf": "^3.0.2"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fn.name": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/fn.name/-/fn.name-1.1.0.tgz",
      "integrity": "sha512-GRnmB5gPyJpAhTQdSZTSp9uaPSvl09KoYcMQtsB9rQoOmzs9dH6ffeccH+Z+cv6P68Hu5bC6JjRh4Ah/mHSNRw==",
      "license": "MIT"
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/for-each": {
      "version": "0.3.5",
      "resolved": "https://registry.npmjs.org/for-each/-/for-each-0.3.5.tgz",
      "integrity": "sha512-dKx12eRCVIzqCxFGplyFKJMPvLEWgmNtUrpTiJIR5u97zEhRG8ySrtboPHZXx7daLxQVrl643cTzbab2tkQjxg==",
      "license": "MIT",
      "dependencies": {
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/form-data": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.4.tgz",
      "integrity": "sha512-KrGhL9Q4zjj0kiUt5OO4Mr/A/jlI2jDYs5eHBpYHPcBEVSiipAvn2Ko2HnPe20rmcuuvMHNdZFp+4IlGTMF0Ow==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/formidable": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/formidable/-/formidable-2.1.5.tgz",
      "integrity": "sha512-Oz5Hwvwak/DCaXVVUtPn4oLMLLy1CdclLKO1LFgU7XzDpVMUU5UjlSLpGMocyQNNk8F6IJW9M/YdooSn2MRI+Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@paralleldrive/cuid2": "^2.2.2",
        "dezalgo": "^1.0.4",
        "once": "^1.4.0",
        "qs": "^6.11.0"
      },
      "funding": {
        "url": "https://ko-fi.com/tunnckoCore/commissions"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/frac": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/frac/-/frac-1.1.2.tgz",
      "integrity": "sha512-w/XBfkibaTl3YDqASwfDUqkna4Z2p9cFSr1aHDt0WoMTECnRfBOv2WArlZILlqgWlmdIlALXGpM2AOhEk5W3IA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/fresh": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-0.5.2.tgz",
      "integrity": "sha512-zJ2mQYM18rEFOudeV4GShTGIQ7RbzA7ozbU9I/XBpm7kqgMywgmylMwXHxZJmkVoYkna9d2pVXVXPdYTP9ej8Q==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/function.prototype.name": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/function.prototype.name/-/function.prototype.name-1.1.8.tgz",
      "integrity": "sha512-e5iwyodOHhbMr/yNrc7fDYG4qlbIvI5gajyzPnb5TCwyhjApznQh1BMFou9b30SevY43gCJKXycoCBjMbsuW0Q==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "functions-have-names": "^1.2.3",
        "hasown": "^2.0.2",
        "is-callable": "^1.2.7"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/functions-have-names": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/functions-have-names/-/functions-have-names-1.2.3.tgz",
      "integrity": "sha512-xckBUXyTIqT97tq2x2AMb+g163b5JFysYk0x4qxNFwbfQkmNZoiRHb6sPzI9/QV33WeuvVYBUIiD4NzNIyqaRQ==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/generate-function": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/generate-function/-/generate-function-2.3.1.tgz",
      "integrity": "sha512-eeB5GfMNeevm/GRYq20ShmsaGcmI81kIX2K9XQx5miC8KdHaC6Jm0qQ8ZNeGOi7wYB8OsdxKs+Y2oVuTFuVwKQ==",
      "license": "MIT",
      "dependencies": {
        "is-property": "^1.0.2"
      }
    },
    "node_modules/generic-pool": {
      "version": "3.9.0",
      "resolved": "https://registry.npmjs.org/generic-pool/-/generic-pool-3.9.0.tgz",
      "integrity": "sha512-hymDOu5B53XvN4QT9dBmZxPX4CWhBPPLguTZ9MMFeFa/Kg0xWVfylOVNlJji/E7yTZWFd/q9GO5TxDLq156D7g==",
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-package-type": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/get-package-type/-/get-package-type-0.1.0.tgz",
      "integrity": "sha512-pjzuKtY64GYfWizNAJ0fr9VqttZkNiK2iS430LtIHzjBEr6bX8Am2zm4sW4Ro5wjWW5cAlRL1qAMTcXbjNAO2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-stream": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-6.0.1.tgz",
      "integrity": "sha512-ts6Wi+2j3jQjqi70w5AlN8DFnkSwC+MqmxEzdEALB2qXZYV3X/b1CTfgPLGJNMeAWxdPfU8FO1ms3NUfaHCPYg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/get-symbol-description": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/get-symbol-description/-/get-symbol-description-1.1.0.tgz",
      "integrity": "sha512-w9UMqWwJxHNOvoNzSJ2oPF5wvYcvP7jUvYzhp67yEhTi17ZDBBC1z9pTdGuzjD+EFIqLSYRweZjqfiPzQ06Ebg==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-tsconfig": {
      "version": "4.10.1",
      "resolved": "https://registry.npmjs.org/get-tsconfig/-/get-tsconfig-4.10.1.tgz",
      "integrity": "sha512-auHyJ4AgMz7vgS8Hp3N6HXSmlMdUyhSUrfBF16w153rxtLIEOE+HGqaBppczZvnHLqQJfiHotCYpNhl0lUROFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-pkg-maps": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/privatenumber/get-tsconfig?sponsor=1"
      }
    },
    "node_modules/glob": {
      "version": "7.2.3",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.3.tgz",
      "integrity": "sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==",
      "deprecated": "Glob versions prior to v9 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.1.1",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      },
      "engines": {
        "node": "*"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/glob/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/glob/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/globals": {
      "version": "13.24.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-13.24.0.tgz",
      "integrity": "sha512-AhO5QUcj8llrbG09iWhPU2B204J1xnPeL8kQmVorSsy+Sjj1sk8gIyh6cUocGmH4L0UuhAJy+hJMRA4mgA4mFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.20.2"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globalthis": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/globalthis/-/globalthis-1.0.4.tgz",
      "integrity": "sha512-DpLKbNU4WylpxJykQujfCcwYWiV/Jhm50Goo0wrVILAv5jOr9d+H+UR3PhSCD2rCCEIg0uc+G+muBTwD54JhDQ==",
      "license": "MIT",
      "dependencies": {
        "define-properties": "^1.2.1",
        "gopd": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/globby": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
      "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-union": "^2.1.0",
        "dir-glob": "^3.0.1",
        "fast-glob": "^3.2.9",
        "ignore": "^5.2.0",
        "merge2": "^1.4.1",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.11",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
      "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/handlebars": {
      "version": "4.7.8",
      "resolved": "https://registry.npmjs.org/handlebars/-/handlebars-4.7.8.tgz",
      "integrity": "sha512-vafaFqs8MZkRrSX7sFVUdo3ap/eNiLnb4IakshzvP56X5Nr1iGKAIqdX6tMlm6HcNRIkr6AxO5jFEoJzzpT8aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "minimist": "^1.2.5",
        "neo-async": "^2.6.2",
        "source-map": "^0.6.1",
        "wordwrap": "^1.0.0"
      },
      "bin": {
        "handlebars": "bin/handlebars"
      },
      "engines": {
        "node": ">=0.4.7"
      },
      "optionalDependencies": {
        "uglify-js": "^3.1.4"
      }
    },
    "node_modules/has-bigints": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-bigints/-/has-bigints-1.1.0.tgz",
      "integrity": "sha512-R3pbpkcIqv2Pm3dUwgjclDRVmWpTJW2DcMzcIhEXEx1oh/CEMObMm3KLmRJOdvhM7o4uQBnwr8pzRK2sJWIqfg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-property-descriptors": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-property-descriptors/-/has-property-descriptors-1.0.2.tgz",
      "integrity": "sha512-55JNKuIW+vq4Ke1BjOTjM2YctQIvCT7GFzHwmfZPGo5wnrgkid0YQtnAleFSqumZm4az3n2BS+erby5ipJdgrg==",
      "license": "MIT",
      "dependencies": {
        "es-define-property": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-proto": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/has-proto/-/has-proto-1.2.0.tgz",
      "integrity": "sha512-KIL7eQPfHQRC8+XluaIw7BHUwwqL19bQn4hzNgdr+1wXoU0KKj6rufu47lhY7KbJR2C6T6+PfyN0Ea7wkSS+qQ==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/helmet": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/helmet/-/helmet-7.2.0.tgz",
      "integrity": "sha512-ZRiwvN089JfMXokizgqEPXsl2Guk094yExfoDXR0cBYWxtBbaSww/w+vT4WEJsBW2iTUi1GgZ6swmoug3Oy4Xw==",
      "license": "MIT",
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/html-escaper": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/html-escaper/-/html-escaper-2.0.2.tgz",
      "integrity": "sha512-H2iMtd0I4Mt5eYiapRdIDjp+XzelXQ0tFE4JS7YFwFevXXMmOp9myNrUvCg0D6ws8iqkRPBfKHgbwig1SmlLfg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/http-proxy-agent": {
      "version": "7.0.2",
      "resolved": "https://registry.npmjs.org/http-proxy-agent/-/http-proxy-agent-7.0.2.tgz",
      "integrity": "sha512-T1gkAiYYDWYx3V5Bmyu7HcfcvL7mUrTWiM6yOfa3PIphViJ/gFPbvidQ+veqSOHci/PxBcDabeUNCzpOODJZig==",
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/https-proxy-agent": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/https-proxy-agent/-/https-proxy-agent-7.0.6.tgz",
      "integrity": "sha512-vK9P5/iUfdl95AI+JVyUuIcVtd4ofvtrOr3HNtM2yxC9bnMbEdp3x01OhQNnjb8IJYi38VlTE3mBXwcfvywuSw==",
      "license": "MIT",
      "dependencies": {
        "agent-base": "^7.1.2",
        "debug": "4"
      },
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/human-signals": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
      "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=10.17.0"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
      "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ieee754": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/ieee754/-/ieee754-1.2.1.tgz",
      "integrity": "sha512-dcyqhDvX1C46lXZcVqCpK+FtMRQVdIMN6/Df5js2zouUsqG7I6sFxitIC+7KYK29KdXOLHdu9zL4sFnoVQnqaA==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "BSD-3-Clause"
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/ignore-by-default": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/ignore-by-default/-/ignore-by-default-1.0.1.tgz",
      "integrity": "sha512-Ius2VYcGNk7T90CppJqcIkS5ooHUZyIQK+ClZfMfMNFEF9VSE73Fq+906u/CWu92x4gzZMWOwfFYckPObzdEbA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/import-local": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/import-local/-/import-local-3.2.0.tgz",
      "integrity": "sha512-2SPlun1JUPWoM6t3F0dw0FkCF/jWY8kttcY4f599GLTSjh2OCuuhdTkJQsEcZzBqbXZGKMK2OqW1oZsjtf/gQA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pkg-dir": "^4.2.0",
        "resolve-cwd": "^3.0.0"
      },
      "bin": {
        "import-local-fixture": "fixtures/cli.js"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==",
      "deprecated": "This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "license": "ISC"
    },
    "node_modules/internal-slot": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/internal-slot/-/internal-slot-1.1.0.tgz",
      "integrity": "sha512-4gd7VpWNQNB4UKKCFFVcp1AVv+FMOgs9NKzjHKusc8jTMhd5eL1NqQqOpE0KzMds804/yHlglp3uxgluOqAPLw==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "hasown": "^2.0.2",
        "side-channel": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-array-buffer": {
      "version": "3.0.5",
      "resolved": "https://registry.npmjs.org/is-array-buffer/-/is-array-buffer-3.0.5.tgz",
      "integrity": "sha512-DDfANUiiG2wC1qawP66qlTugJeL5HyzMpfr8lLK+jMQirGzNod0B12cFB/9q838Ru27sBwfw78/rdoU7RERz6A==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-arrayish": {
      "version": "0.2.1",
      "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.2.1.tgz",
      "integrity": "sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-async-function": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-async-function/-/is-async-function-2.1.1.tgz",
      "integrity": "sha512-9dgM/cZBnNvjzaMYHVoxxfPj2QXt22Ev7SuuPrs+xav0ukGB0S6d4ydZdEiM48kLx5kDV+QBPrpVnFyefL8kkQ==",
      "license": "MIT",
      "dependencies": {
        "async-function": "^1.0.0",
        "call-bound": "^1.0.3",
        "get-proto": "^1.0.1",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-bigint": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-bigint/-/is-bigint-1.1.0.tgz",
      "integrity": "sha512-n4ZT37wG78iz03xPRKJrHTdZbe3IicyucEtdRsV5yglwc3GyUfbAfpSeD0FJ41NbUNSt5wbhqfp1fS+BgnvDFQ==",
      "license": "MIT",
      "dependencies": {
        "has-bigints": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-boolean-object": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/is-boolean-object/-/is-boolean-object-1.2.2.tgz",
      "integrity": "sha512-wa56o2/ElJMYqjCjGkXri7it5FbebW5usLw/nPmCMs5DeZ7eziSYZhSmPRn0txqeW4LnAmQQU7FgqLpsEFKM4A==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-callable": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/is-callable/-/is-callable-1.2.7.tgz",
      "integrity": "sha512-1BC0BVFhS/p0qtw6enp8e+8OD0UrK0oFLztSjNzhcKA3WDuJxxAPXzPuPtKkjEY9UUoEWlX/8fgKeu2S8i9JTA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-data-view": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/is-data-view/-/is-data-view-1.0.2.tgz",
      "integrity": "sha512-RKtWF8pGmS87i2D6gqQu/l7EYRlVdfzemCJN/P3UOs//x1QE7mfhvzHIApBTRf7axvT6DMGwSwBXYCT0nfB9xw==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "is-typed-array": "^1.1.13"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-date-object": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-date-object/-/is-date-object-1.1.0.tgz",
      "integrity": "sha512-PwwhEakHVKTdRNVOw+/Gyh0+MzlCl4R6qKvkhuvLtPMggI1WAHt9sOwZxQLSGpUaDnrdyDsomoRgNnCfKNSXXg==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-docker": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-docker/-/is-docker-3.0.0.tgz",
      "integrity": "sha512-eljcgEDlEns/7AXFosB5K/2nCM4P7FQPkGc/DWLy5rmFEWvZayGrik1d9/QIY5nJ4f9YsVvBkA6kJpHn9rISdQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "is-docker": "cli.js"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-finalizationregistry": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-finalizationregistry/-/is-finalizationregistry-1.1.1.tgz",
      "integrity": "sha512-1pC6N8qWJbWoPtEjgcL2xyhQOP491EQjeUo3qTKcmV8YSDDJrOepfG8pcC7h/QgnQHYSv0mJ3Z/ZWxmatVrysg==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-generator-fn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-generator-fn/-/is-generator-fn-2.1.0.tgz",
      "integrity": "sha512-cTIB4yPYL/Grw0EaSzASzg6bBy9gqCofvWN8okThAYIxKJZC+udlRAmGbM0XLeniEJSs8uEgHPGuHSe1XsOLSQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/is-generator-function": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/is-generator-function/-/is-generator-function-1.1.0.tgz",
      "integrity": "sha512-nPUB5km40q9e8UfN/Zc24eLlzdSf9OfKByBw9CIdw4H1giPMeA0OIJvbchsCu4npfI2QcMVBsGEBHKZ7wLTWmQ==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-proto": "^1.0.0",
        "has-tostringtag": "^1.0.2",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-inside-container": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/is-inside-container/-/is-inside-container-1.0.0.tgz",
      "integrity": "sha512-KIYLCCJghfHZxqjYBE7rEy0OBuTd5xCHS7tHVgvCLkx7StIoaxwNW3hCALgEUjFfeRk+MG/Qxmp/vtETEF3tRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-docker": "^3.0.0"
      },
      "bin": {
        "is-inside-container": "cli.js"
      },
      "engines": {
        "node": ">=14.16"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-map": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-map/-/is-map-2.0.3.tgz",
      "integrity": "sha512-1Qed0/Hr2m+YqxnM09CjA2d/i6YZNfF6R2oRAOj36eUdS6qIV/huPJNSEpKbupewFs+ZsJlxsjjPbc0/afW6Lw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-negative-zero": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-negative-zero/-/is-negative-zero-2.0.3.tgz",
      "integrity": "sha512-5KoIu2Ngpyek75jXodFvnafB6DJgr3u8uuK0LEZJjrU19DrMD3EVERaR8sjz8CCGgpZvxPl9SuE1GMVPFHx1mw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-number-object": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-number-object/-/is-number-object-1.1.1.tgz",
      "integrity": "sha512-lZhclumE1G6VYD8VHe35wFaIif+CTy5SJIi5+3y4psDgWu4wPDoBhF8NxUOinEc7pHgiTsT6MaBb92rKhhD+Xw==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-property": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/is-property/-/is-property-1.0.2.tgz",
      "integrity": "sha512-Ks/IoX00TtClbGQr4TWXemAnktAQvYB7HzcCxDGqEZU6oCmb2INHuOoKxbtR+HFkmYWBKv/dOZtGRiAjDhj92g==",
      "license": "MIT"
    },
    "node_modules/is-regex": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/is-regex/-/is-regex-1.2.1.tgz",
      "integrity": "sha512-MjYsKHO5O7mCsmRGxWcLWheFqN9DJ/2TmngvjKXihe6efViPqc274+Fx/4fYj/r03+ESvBdTXK0V6tA3rgez1g==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-set": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/is-set/-/is-set-2.0.3.tgz",
      "integrity": "sha512-iPAjerrse27/ygGLxw+EBR9agv9Y6uLeYVJMu+QNCoouJ1/1ri0mGrcWpfCqFZuzzx3WjtwxG098X+n4OuRkPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-shared-array-buffer": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/is-shared-array-buffer/-/is-shared-array-buffer-1.0.4.tgz",
      "integrity": "sha512-ISWac8drv4ZGfwKl5slpHG9OwPNty4jOWPRIhBpxOoD+hqITiwuipOQ2bNthAzwA3B4fIjO4Nln74N0S9byq8A==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-stream": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-string": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-string/-/is-string-1.1.1.tgz",
      "integrity": "sha512-BtEeSsoaQjlSPBemMQIrY1MY0uM6vnS1g5fmufYOtnxLGUZM2178PKbhsk7Ffv58IX+ZtcvoGwccYsh0PglkAA==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-symbol": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-symbol/-/is-symbol-1.1.1.tgz",
      "integrity": "sha512-9gGx6GTtCQM73BgmHQXfDmLtfjjTUDSyoxTCbp5WtoixAhfgsDirWIcVQ/IHpvI5Vgd5i/J5F7B9cN/WlVbC/w==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "has-symbols": "^1.1.0",
        "safe-regex-test": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-typed-array": {
      "version": "1.1.15",
      "resolved": "https://registry.npmjs.org/is-typed-array/-/is-typed-array-1.1.15.tgz",
      "integrity": "sha512-p3EcsicXjit7SaskXHs1hA91QxgTw46Fv6EFKKGS5DRFLD8yKnohjF3hxoju94b/OcMZoQukzpPpBE9uLVKzgQ==",
      "license": "MIT",
      "dependencies": {
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakmap": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/is-weakmap/-/is-weakmap-2.0.2.tgz",
      "integrity": "sha512-K5pXYOm9wqY1RgjpL3YTkF39tni1XajUIkawTLUo9EZEVUFga5gSQJF8nNS7ZwJQ02y+1YCNYcMh+HIf1ZqE+w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakref": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/is-weakref/-/is-weakref-1.1.1.tgz",
      "integrity": "sha512-6i9mGWSlqzNMEqpCp93KwRS1uUOodk2OJ6b+sq7ZPDSy2WuI5NFIxp/254TytR8ftefexkWn5xNiHUNpPOfSew==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-weakset": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/is-weakset/-/is-weakset-2.0.4.tgz",
      "integrity": "sha512-mfcwb6IzQyOKTs84CQMrOwW4gQcaTOAWJ0zzJCl2WSPDrWk/OzDaImWFH3djXhb24g4eudZfLRozAvPGw4d9hQ==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "get-intrinsic": "^1.2.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-wsl": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/is-wsl/-/is-wsl-3.1.0.tgz",
      "integrity": "sha512-UcVfVfaK4Sc4m7X3dUSoHoozQGBEFeDC+zVo06t98xe8CzHSZZBekNXH+tu0NalHolcJ/QAGqS46Hef7QXBIMw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-inside-container": "^1.0.0"
      },
      "engines": {
        "node": ">=16"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/isarray": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
      "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
      "license": "MIT"
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/istanbul-lib-coverage": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/istanbul-lib-coverage/-/istanbul-lib-coverage-3.2.2.tgz",
      "integrity": "sha512-O8dpsF+r0WV/8MNRKfnmrtCWhuKjxrq2w+jpzBL5UZKTi2LeVWnWOmWRxFlesJONmc+wLAGvKQZEOanko0LFTg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/istanbul-lib-instrument": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/istanbul-lib-instrument/-/istanbul-lib-instrument-6.0.3.tgz",
      "integrity": "sha512-Vtgk7L/R2JHyyGW07spoFlB8/lpjiOLTjMdms6AFMraYt3BaJauod/NGrfnVG/y4Ix1JEuMRPDPEj2ua+zz1/Q==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/core": "^7.23.9",
        "@babel/parser": "^7.23.9",
        "@istanbuljs/schema": "^0.1.3",
        "istanbul-lib-coverage": "^3.2.0",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-lib-report": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-report/-/istanbul-lib-report-3.0.1.tgz",
      "integrity": "sha512-GCfE1mtsHGOELCU8e/Z7YWzpmybrx/+dSTfLrvY8qRmaY6zXTKWn6WQIjaAFw069icm6GVMNkgu0NzI4iPZUNw==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "istanbul-lib-coverage": "^3.0.0",
        "make-dir": "^4.0.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-lib-source-maps": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-source-maps/-/istanbul-lib-source-maps-4.0.1.tgz",
      "integrity": "sha512-n3s8EwkdFIJCG3BPKBYvskgXGoy88ARzvegkitk60NxRdwltLOTaH7CUiMRXvwYorl0Q712iEjcWB+fK/MrWVw==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "debug": "^4.1.1",
        "istanbul-lib-coverage": "^3.0.0",
        "source-map": "^0.6.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-reports": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/istanbul-reports/-/istanbul-reports-3.2.0.tgz",
      "integrity": "sha512-HGYWWS/ehqTV3xN10i23tkPkpH46MLCIMFNCaaKNavAXTF1RkqxawEPtnjnGZ6XKSInBKkiOA5BKS+aZiY3AvA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "html-escaper": "^2.0.0",
        "istanbul-lib-report": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest/-/jest-29.7.0.tgz",
      "integrity": "sha512-NIy3oAFp9shda19hy4HK0HRTWKtPJmGdnvywu01nOqNC2vZg+Z+fvJDxpMQA88eb2I9EcafcdjYgsDthnYTvGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/core": "^29.7.0",
        "@jest/types": "^29.6.3",
        "import-local": "^3.0.2",
        "jest-cli": "^29.7.0"
      },
      "bin": {
        "jest": "bin/jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/jest-changed-files": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-changed-files/-/jest-changed-files-29.7.0.tgz",
      "integrity": "sha512-fEArFiwf1BpQ+4bXSprcDc3/x4HSzL4al2tozwVpDFpsxALjLYdyiIK4e5Vz66GQJIbXJ82+35PtysofptNX2w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "execa": "^5.0.0",
        "jest-util": "^29.7.0",
        "p-limit": "^3.1.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-circus": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-circus/-/jest-circus-29.7.0.tgz",
      "integrity": "sha512-3E1nCMgipcTkCocFwM90XXQab9bS+GMsjdpmPrlelaxwD93Ad8iVEjX/vvHPdLPnFf+L40u+5+iutRdA1N9myw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/expect": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "co": "^4.6.0",
        "dedent": "^1.0.0",
        "is-generator-fn": "^2.0.0",
        "jest-each": "^29.7.0",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "p-limit": "^3.1.0",
        "pretty-format": "^29.7.0",
        "pure-rand": "^6.0.0",
        "slash": "^3.0.0",
        "stack-utils": "^2.0.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-cli": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-cli/-/jest-cli-29.7.0.tgz",
      "integrity": "sha512-OVVobw2IubN/GSYsxETi+gOe7Ka59EFMR/twOU3Jb2GnKKeMGJB5SGUUrEz3SFVmJASUdZUzy83sLNNQ2gZslg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/core": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "create-jest": "^29.7.0",
        "exit": "^0.1.2",
        "import-local": "^3.0.2",
        "jest-config": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "yargs": "^17.3.1"
      },
      "bin": {
        "jest": "bin/jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/jest-config": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-config/-/jest-config-29.7.0.tgz",
      "integrity": "sha512-uXbpfeQ7R6TZBqI3/TxCU4q4ttk3u0PJeC+E0zbfSoSjq6bJ7buBPxzQPL0ifrkY4DNu4JUdk0ImlBUYi840eQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@jest/test-sequencer": "^29.7.0",
        "@jest/types": "^29.6.3",
        "babel-jest": "^29.7.0",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "deepmerge": "^4.2.2",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "jest-circus": "^29.7.0",
        "jest-environment-node": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-runner": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "micromatch": "^4.0.4",
        "parse-json": "^5.2.0",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@types/node": "*",
        "ts-node": ">=9.0.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "ts-node": {
          "optional": true
        }
      }
    },
    "node_modules/jest-diff": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-diff/-/jest-diff-29.7.0.tgz",
      "integrity": "sha512-LMIgiIrhigmPrs03JHpxUh2yISK3vLFPkAodPeo0+BuF7wA2FoQbkEg1u8gBYBThncu7e1oEDUfIXVuTqLRUjw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "diff-sequences": "^29.6.3",
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-docblock": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-docblock/-/jest-docblock-29.7.0.tgz",
      "integrity": "sha512-q617Auw3A612guyaFgsbFeYpNP5t2aoUNLwBUbc/0kD1R4t9ixDbyFTHd1nok4epoVFpr7PmeWHrhvuV3XaJ4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "detect-newline": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-each": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-each/-/jest-each-29.7.0.tgz",
      "integrity": "sha512-gns+Er14+ZrEoC5fhOfYCY1LOHHr0TI+rQUHZS8Ttw2l7gl+80eHc/gFf2Ktkw0+SIACDTeWvpFcv3B04VembQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "jest-get-type": "^29.6.3",
        "jest-util": "^29.7.0",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-environment-node": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-environment-node/-/jest-environment-node-29.7.0.tgz",
      "integrity": "sha512-DOSwCRqXirTOyheM+4d5YZOrWcdu0LNZ87ewUoywbcb2XR4wKgqiG8vNeYwhjFMbEkfju7wx2GYH0P2gevGvFw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/fake-timers": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-mock": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-get-type": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/jest-get-type/-/jest-get-type-29.6.3.tgz",
      "integrity": "sha512-zrteXnqYxfQh7l5FHyL38jL39di8H8rHoecLH3JNxH3BwOrBsNeabdap5e0I23lD4HHI8W5VFBZqG4Eaq5LNcw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-haste-map": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-haste-map/-/jest-haste-map-29.7.0.tgz",
      "integrity": "sha512-fP8u2pyfqx0K1rGn1R9pyE0/KTn+G7PxktWidOBTqFPLYX0b9ksaMFkhK5vrS3DVun09pckLdlx90QthlW7AmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/graceful-fs": "^4.1.3",
        "@types/node": "*",
        "anymatch": "^3.0.3",
        "fb-watchman": "^2.0.0",
        "graceful-fs": "^4.2.9",
        "jest-regex-util": "^29.6.3",
        "jest-util": "^29.7.0",
        "jest-worker": "^29.7.0",
        "micromatch": "^4.0.4",
        "walker": "^1.0.8"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "optionalDependencies": {
        "fsevents": "^2.3.2"
      }
    },
    "node_modules/jest-leak-detector": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-leak-detector/-/jest-leak-detector-29.7.0.tgz",
      "integrity": "sha512-kYA8IJcSYtST2BY9I+SMC32nDpBT3J2NvWJx8+JCuCdl/CR1I4EKUJROiP8XtCcxqgTTBGJNdbB1A8XRKbTetw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-matcher-utils": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-matcher-utils/-/jest-matcher-utils-29.7.0.tgz",
      "integrity": "sha512-sBkD+Xi9DtcChsI3L3u0+N0opgPYnCRPtGcQYrgXmR+hmt/fYfWAL0xRXYU8eWOdfuLgBe0YCW3AFtnRLagq/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "jest-diff": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-message-util": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-message-util/-/jest-message-util-29.7.0.tgz",
      "integrity": "sha512-GBEV4GRADeP+qtB2+6u61stea8mGcOT4mCtrYISZwfu9/ISHFJ/5zOMXYbpBE9RsS5+Gb63DW4FgmnKJ79Kf6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.12.13",
        "@jest/types": "^29.6.3",
        "@types/stack-utils": "^2.0.0",
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "micromatch": "^4.0.4",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "stack-utils": "^2.0.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-mock": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-mock/-/jest-mock-29.7.0.tgz",
      "integrity": "sha512-ITOMZn+UkYS4ZFh83xYAOzWStloNzJFO2s8DWrE4lhtGD+AorgnbkiKERe4wQVBydIGPx059g6riW5Btp6Llnw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-pnp-resolver": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/jest-pnp-resolver/-/jest-pnp-resolver-1.2.3.tgz",
      "integrity": "sha512-+3NpwQEnRoIBtx4fyhblQDPgJI0H1IEIkX7ShLUjPGA7TtUTvI1oiKi3SR4oBR0hQhQR80l4WAe5RrXBwWMA8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      },
      "peerDependencies": {
        "jest-resolve": "*"
      },
      "peerDependenciesMeta": {
        "jest-resolve": {
          "optional": true
        }
      }
    },
    "node_modules/jest-regex-util": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/jest-regex-util/-/jest-regex-util-29.6.3.tgz",
      "integrity": "sha512-KJJBsRCyyLNWCNBOvZyRDnAIfUiRJ8v+hOBQYGn8gDyF3UegwiP4gwRR3/SDa42g1YbVycTidUF3rKjyLFDWbg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-resolve": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-resolve/-/jest-resolve-29.7.0.tgz",
      "integrity": "sha512-IOVhZSrg+UvVAshDSDtHyFCCBUl/Q3AAJv8iZ6ZjnZ74xzvwuzLXid9IIIPgTnY62SJjfuupMKZsZQRsCvxEgA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-pnp-resolver": "^1.2.2",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "resolve": "^1.20.0",
        "resolve.exports": "^2.0.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-resolve-dependencies": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-resolve-dependencies/-/jest-resolve-dependencies-29.7.0.tgz",
      "integrity": "sha512-un0zD/6qxJ+S0et7WxeI3H5XSe9lTBBR7bOHCHXkKR6luG5mwDDlIzVQ0V5cZCuoTgEdcdwzTghYkTWfubi+nA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-regex-util": "^29.6.3",
        "jest-snapshot": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-runner": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-runner/-/jest-runner-29.7.0.tgz",
      "integrity": "sha512-fsc4N6cPCAahybGBfTRcq5wFR6fpLznMg47sY5aDpsoejOcVYFb07AHuSnR0liMcPTgBsA3ZJL6kFOjPdoNipQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/environment": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "emittery": "^0.13.1",
        "graceful-fs": "^4.2.9",
        "jest-docblock": "^29.7.0",
        "jest-environment-node": "^29.7.0",
        "jest-haste-map": "^29.7.0",
        "jest-leak-detector": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-resolve": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-watcher": "^29.7.0",
        "jest-worker": "^29.7.0",
        "p-limit": "^3.1.0",
        "source-map-support": "0.5.13"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-runtime": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-runtime/-/jest-runtime-29.7.0.tgz",
      "integrity": "sha512-gUnLjgwdGqW7B4LvOIkbKs9WGbn+QLqRQQ9juC6HndeDiezIwhDP+mhMwHWCEcfQ5RUXa6OPnFF8BJh5xegwwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/fake-timers": "^29.7.0",
        "@jest/globals": "^29.7.0",
        "@jest/source-map": "^29.6.3",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "cjs-module-lexer": "^1.0.0",
        "collect-v8-coverage": "^1.0.0",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-mock": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "slash": "^3.0.0",
        "strip-bom": "^4.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-snapshot": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-snapshot/-/jest-snapshot-29.7.0.tgz",
      "integrity": "sha512-Rm0BMWtxBcioHr1/OX5YCP8Uov4riHvKPknOGs804Zg9JGZgmIBkbtlxJC/7Z4msKYVbIJtfU+tKb8xlYNfdkw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@babel/generator": "^7.7.2",
        "@babel/plugin-syntax-jsx": "^7.7.2",
        "@babel/plugin-syntax-typescript": "^7.7.2",
        "@babel/types": "^7.3.3",
        "@jest/expect-utils": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "babel-preset-current-node-syntax": "^1.0.0",
        "chalk": "^4.0.0",
        "expect": "^29.7.0",
        "graceful-fs": "^4.2.9",
        "jest-diff": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "natural-compare": "^1.4.0",
        "pretty-format": "^29.7.0",
        "semver": "^7.5.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-util": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-util/-/jest-util-29.7.0.tgz",
      "integrity": "sha512-z6EbKajIpqGKU56y5KBUgy1dt1ihhQJgWzUlZHArA/+X2ad7Cb5iF+AK1EWVL/Bo7Rz9uurpqw6SiBCefUbCGA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "graceful-fs": "^4.2.9",
        "picomatch": "^2.2.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-validate": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-validate/-/jest-validate-29.7.0.tgz",
      "integrity": "sha512-ZB7wHqaRGVw/9hST/OuFUReG7M8vKeq0/J2egIGLdvjHCmYqGARhzXmtgi+gVeZ5uXFF219aOc3Ls2yLg27tkw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "camelcase": "^6.2.0",
        "chalk": "^4.0.0",
        "jest-get-type": "^29.6.3",
        "leven": "^3.1.0",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-validate/node_modules/camelcase": {
      "version": "6.3.0",
      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.3.0.tgz",
      "integrity": "sha512-Gmy6FhYlCY7uOElZUSbxo2UCDH8owEk996gkbrpsgGtrJLM3J7jGxl9Ic7Qwwj4ivOE5AWZWRMecDdF7hqGjFA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/jest-watcher": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-watcher/-/jest-watcher-29.7.0.tgz",
      "integrity": "sha512-49Fg7WXkU3Vl2h6LbLtMQ/HyB6rXSIX7SqvBLQmssRBGN9I0PNvPmAmCWSOY6SOvrjhI/F7/bGAv9RtnsPA03g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "ansi-escapes": "^4.2.1",
        "chalk": "^4.0.0",
        "emittery": "^0.13.1",
        "jest-util": "^29.7.0",
        "string-length": "^4.0.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-worker": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-worker/-/jest-worker-29.7.0.tgz",
      "integrity": "sha512-eIz2msL/EzL9UFTFFx7jBTkeZfku0yUAyZZZmJ93H2TYEiroIx2PQjEXcwYtYl8zXCxb+PAmA2hLIt/6ZEkPHw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "jest-util": "^29.7.0",
        "merge-stream": "^2.0.0",
        "supports-color": "^8.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-worker/node_modules/supports-color": {
      "version": "8.1.1",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-8.1.1.tgz",
      "integrity": "sha512-MpUEN2OodtUzxvKQl72cUF7RQ5EiHsGvSsVG0ia9c5RbWGL2CI4C7EpPS8UTBIplnlzZiNuV56w+FuNxy3ty2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/supports-color?sponsor=1"
      }
    },
    "node_modules/joi": {
      "version": "17.13.3",
      "resolved": "https://registry.npmjs.org/joi/-/joi-17.13.3.tgz",
      "integrity": "sha512-otDA4ldcIx+ZXsKHWmp0YizCweVRZG96J10b0FevjfuncLO1oX59THoAmHkNubYJ+9gWsYsp5k8v4ib6oDv1fA==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@hapi/hoek": "^9.3.0",
        "@hapi/topo": "^5.1.0",
        "@sideway/address": "^4.1.5",
        "@sideway/formula": "^3.0.1",
        "@sideway/pinpoint": "^2.0.0"
      }
    },
    "node_modules/js-md4": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/js-md4/-/js-md4-0.3.2.tgz",
      "integrity": "sha512-/GDnfQYsltsjRswQhN9fhv3EMw2sCpUdrdxyWDOUK7eyD++r3gRhzgiQgc/x4MAv2i1iuQ4lxO5mvqM3vj4bwA==",
      "license": "MIT"
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsbi": {
      "version": "4.3.2",
      "resolved": "https://registry.npmjs.org/jsbi/-/jsbi-4.3.2.tgz",
      "integrity": "sha512-9fqMSQbhJykSeii05nxKl4m6Eqn2P6rOlYiS+C5Dr/HPIU/7yZxu5qzbs40tgaFORiw2Amd0mirjxatXYMkIew==",
      "license": "Apache-2.0"
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-parse-even-better-errors": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/json-parse-even-better-errors/-/json-parse-even-better-errors-2.3.1.tgz",
      "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/jsonwebtoken": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-9.0.2.tgz",
      "integrity": "sha512-PRp66vJ865SSqOlgqS8hujT5U4AOgMfhrwYIuIhfKaoSCZcirrmASQr8CX7cUg+RMih+hgznrjp99o+W4pJLHQ==",
      "license": "MIT",
      "dependencies": {
        "jws": "^3.2.2",
        "lodash.includes": "^4.3.0",
        "lodash.isboolean": "^3.0.3",
        "lodash.isinteger": "^4.0.4",
        "lodash.isnumber": "^3.0.3",
        "lodash.isplainobject": "^4.0.6",
        "lodash.isstring": "^4.0.1",
        "lodash.once": "^4.0.0",
        "ms": "^2.1.1",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      }
    },
    "node_modules/jwa": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
      "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jws": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
      "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
      "license": "MIT",
      "dependencies": {
        "jwa": "^1.4.1",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/kleur": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/kleur/-/kleur-3.0.3.tgz",
      "integrity": "sha512-eTIzlVOSUR+JxdDFepEYcBMtZ9Qqdef+rnzWdRZuMbOywu5tO2w2N7rqjoANZ5k9vywhL6Br1VRjUIgTQx4E8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/kuler": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/kuler/-/kuler-2.0.0.tgz",
      "integrity": "sha512-Xq9nH7KlWZmXAtodXDDRE7vs6DU1gTU8zYDHDiWLSip45Egwq3plLHzPn27NgvzL2r1LMPC1vdqh98sQxtqj4A==",
      "license": "MIT"
    },
    "node_modules/leven": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/leven/-/leven-3.1.0.tgz",
      "integrity": "sha512-qsda+H8jTaUaN/x5vzW2rzc+8Rw4TAQ/4KjB46IwK5VH+IlVeeeje/EoZRpiXvIqjFgK84QffqPztGI3VBLG1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash": {
      "version": "4.17.21",
      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
      "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==",
      "license": "MIT"
    },
    "node_modules/lodash.includes": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
      "license": "MIT"
    },
    "node_modules/lodash.isboolean": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
      "license": "MIT"
    },
    "node_modules/lodash.isinteger": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
      "license": "MIT"
    },
    "node_modules/lodash.isnumber": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
      "license": "MIT"
    },
    "node_modules/lodash.isplainobject": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
      "license": "MIT"
    },
    "node_modules/lodash.isstring": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
      "license": "MIT"
    },
    "node_modules/lodash.memoize": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/lodash.memoize/-/lodash.memoize-4.1.2.tgz",
      "integrity": "sha512-t7j+NzmgnQzTAYXcsHYLgimltOV1MXHtlOWf6GjL9Kj8GK5FInw5JotxvbOs+IvV1/Dzo04/fCGfLVs7aXb4Ag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.once": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
      "license": "MIT"
    },
    "node_modules/logform": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/logform/-/logform-2.7.0.tgz",
      "integrity": "sha512-TFYA4jnP7PVbmlBIfhlSe+WKxs9dklXMTEGcBCIvLhE/Tn3H6Gk1norupVW7m5Cnd4bLcr08AytbyV/xj7f/kQ==",
      "license": "MIT",
      "dependencies": {
        "@colors/colors": "1.6.0",
        "@types/triple-beam": "^1.3.2",
        "fecha": "^4.2.0",
        "ms": "^2.1.1",
        "safe-stable-stringify": "^2.3.1",
        "triple-beam": "^1.3.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/long": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/long/-/long-5.3.2.tgz",
      "integrity": "sha512-mNAgZ1GmyNhD7AuqnTG3/VQ26o760+ZYBPKjPvugO8+nLbYfX6TVpJPseBvopbdY+qpZ/lKUnmEc1LeZYS3QAA==",
      "license": "Apache-2.0"
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/lru.min": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/lru.min/-/lru.min-1.1.2.tgz",
      "integrity": "sha512-Nv9KddBcQSlQopmBHXSsZVY5xsdlZkdH/Iey0BlcBYggMd4two7cZnKOK9vmy3nY0O5RGH99z1PCeTpPqszUYg==",
      "license": "MIT",
      "engines": {
        "bun": ">=1.0.0",
        "deno": ">=1.30.0",
        "node": ">=8.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/wellwelwel"
      }
    },
    "node_modules/make-dir": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/make-dir/-/make-dir-4.0.0.tgz",
      "integrity": "sha512-hXdUTZYIVOt1Ex//jAQi+wTZZpUpwBj/0QsOzqegb3rGMMeJiSEu5xLHnYfBrRV4RH2+OCSOO95Is/7x1WJ4bw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.5.3"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/make-error": {
      "version": "1.3.6",
      "resolved": "https://registry.npmjs.org/make-error/-/make-error-1.3.6.tgz",
      "integrity": "sha512-s8UhlNe7vPKomQhC1qFelMokr/Sc3AgNbso3n74mVPA5LTZwkB9NlXf4XPamLxJE8h0gh73rM94xvwRT2CVInw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/makeerror": {
      "version": "1.0.12",
      "resolved": "https://registry.npmjs.org/makeerror/-/makeerror-1.0.12.tgz",
      "integrity": "sha512-JmqCvUhmt43madlpFzG4BQzG2Z3m6tvQDNKdClZnO3VbIudJYmxsT0FNJMeiB2+JTSlTQTSbU8QdesVmwJcmLg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "tmpl": "1.0.5"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/media-typer": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-0.3.0.tgz",
      "integrity": "sha512-dq+qelQ9akHpcOl/gUVRTxVIOkAJ1wR3QAvb4RsVjS8oVoFjDGTc679wJYmUmknUF5HwMLOgb5O+a3KxfWapPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/memory-pager": {
      "version": "1.5.0",
      "resolved": "https://registry.npmjs.org/memory-pager/-/memory-pager-1.5.0.tgz",
      "integrity": "sha512-ZS4Bp4r/Zoeq6+NLJpP+0Zzm0pR8whtGPf1XExKLJBAczGMnSi3It14OiNCStjQjM6NU1okjQGSxgEZN8eBYKg==",
      "license": "MIT"
    },
    "node_modules/merge-descriptors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-1.0.3.tgz",
      "integrity": "sha512-gaNvAS7TZ897/rVaZ0nMtAyxNyi/pdbjbAwUpFQpN70GqnVfOiXpeUUMKRBmzXaSQ8DdTX4/0ms62r2K+hE6mQ==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/merge-stream": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/merge-stream/-/merge-stream-2.0.0.tgz",
      "integrity": "sha512-abv/qOcuPfk3URPfDzmZU1LKmuw8kT+0nIHvKrKgFrwifol/doWcdA4ZqsWQ8ENrFKkd67Mfpo/LovbIUsbt3w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/methods": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/methods/-/methods-1.1.2.tgz",
      "integrity": "sha512-iclAHeNqNm68zFtnZ0e+1L2yUIdvzNoauKU4WBA3VvH/vPFieF7qfRlwUZU+DA9P9bPXIS90ulxoUoCH23sV2w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-1.6.0.tgz",
      "integrity": "sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==",
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.54.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.54.0.tgz",
      "integrity": "sha512-aU5EJuIN2WDemCcAp2vFBfp/m4EAhWJnUNSSw0ixs7/kXbd6Pg64EmwJkNdFhB8aWt1sH2CTXrLxo/iAGV3oPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types/node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mimic-fn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
      "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/minimatch": {
      "version": "9.0.3",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.3.tgz",
      "integrity": "sha512-RHiac9mvaRw0x3AYRgDC1CxAP7HTcNrrECeA8YYJeWnpo+2Q5CegtZjaotWTWxDG3UeGA1coE05iH1mPjT/2mg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/mkdirp": {
      "version": "0.5.6",
      "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-0.5.6.tgz",
      "integrity": "sha512-FP+p8RB8OWpF3YZBCrP5gtADmtXApB5AMLn+vdyA+PyxCjrCs00mjyUozssO33cwDeT3wNGdLxJ5M//YqtHAJw==",
      "license": "MIT",
      "dependencies": {
        "minimist": "^1.2.6"
      },
      "bin": {
        "mkdirp": "bin/cmd.js"
      }
    },
    "node_modules/mongodb": {
      "version": "6.19.0",
      "resolved": "https://registry.npmjs.org/mongodb/-/mongodb-6.19.0.tgz",
      "integrity": "sha512-H3GtYujOJdeKIMLKBT9PwlDhGrQfplABNF1G904w6r5ZXKWyv77aB0X9B+rhmaAwjtllHzaEkvi9mkGVZxs2Bw==",
      "license": "Apache-2.0",
      "dependencies": {
        "@mongodb-js/saslprep": "^1.1.9",
        "bson": "^6.10.4",
        "mongodb-connection-string-url": "^3.0.0"
      },
      "engines": {
        "node": ">=16.20.1"
      },
      "peerDependencies": {
        "@aws-sdk/credential-providers": "^3.188.0",
        "@mongodb-js/zstd": "^1.1.0 || ^2.0.0",
        "gcp-metadata": "^5.2.0",
        "kerberos": "^2.0.1",
        "mongodb-client-encryption": ">=6.0.0 <7",
        "snappy": "^7.3.2",
        "socks": "^2.7.1"
      },
      "peerDependenciesMeta": {
        "@aws-sdk/credential-providers": {
          "optional": true
        },
        "@mongodb-js/zstd": {
          "optional": true
        },
        "gcp-metadata": {
          "optional": true
        },
        "kerberos": {
          "optional": true
        },
        "mongodb-client-encryption": {
          "optional": true
        },
        "snappy": {
          "optional": true
        },
        "socks": {
          "optional": true
        }
      }
    },
    "node_modules/mongodb-connection-string-url": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/mongodb-connection-string-url/-/mongodb-connection-string-url-3.0.2.tgz",
      "integrity": "sha512-rMO7CGo/9BFwyZABcKAWL8UJwH/Kc2x0g72uhDWzG48URRax5TCIcJ7Rc3RZqffZzO/Gwff/jyKwCU9TN8gehA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@types/whatwg-url": "^11.0.2",
        "whatwg-url": "^14.1.0 || ^13.0.0"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/mssql": {
      "version": "10.0.4",
      "resolved": "https://registry.npmjs.org/mssql/-/mssql-10.0.4.tgz",
      "integrity": "sha512-MhX5IcJ75/q+dUiOe+1ajpqjEe96ZKqMchYYPUIDU+Btqhwt4gbFeZhcGUZaRCEMV9uF+G8kLvaNSFaEzL9OXQ==",
      "license": "MIT",
      "dependencies": {
        "@tediousjs/connection-string": "^0.5.0",
        "commander": "^11.0.0",
        "debug": "^4.3.3",
        "rfdc": "^1.3.0",
        "tarn": "^3.0.2",
        "tedious": "^16.4.0"
      },
      "bin": {
        "mssql": "bin/mssql"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/mssql/node_modules/@azure/abort-controller": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@azure/abort-controller/-/abort-controller-1.1.0.tgz",
      "integrity": "sha512-TrRLIoSQVzfAJX9H1JeFjzAoDGcoK1IYX1UImfceTZpsyYfWr09Ss1aHW1y5TrrR3iq6RZLBwJ3E24uwPhwahw==",
      "license": "MIT",
      "dependencies": {
        "tslib": "^2.2.0"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/mssql/node_modules/@azure/identity": {
      "version": "3.4.2",
      "resolved": "https://registry.npmjs.org/@azure/identity/-/identity-3.4.2.tgz",
      "integrity": "sha512-0q5DL4uyR0EZ4RXQKD8MadGH6zTIcloUoS/RVbCpNpej4pwte0xpqYxk8K97Py2RiuUvI7F4GXpoT4046VfufA==",
      "license": "MIT",
      "dependencies": {
        "@azure/abort-controller": "^1.0.0",
        "@azure/core-auth": "^1.5.0",
        "@azure/core-client": "^1.4.0",
        "@azure/core-rest-pipeline": "^1.1.0",
        "@azure/core-tracing": "^1.0.0",
        "@azure/core-util": "^1.6.1",
        "@azure/logger": "^1.0.0",
        "@azure/msal-browser": "^3.5.0",
        "@azure/msal-node": "^2.5.1",
        "events": "^3.0.0",
        "jws": "^4.0.0",
        "open": "^8.0.0",
        "stoppable": "^1.1.0",
        "tslib": "^2.2.0"
      },
      "engines": {
        "node": ">=14.0.0"
      }
    },
    "node_modules/mssql/node_modules/@azure/msal-browser": {
      "version": "3.30.0",
      "resolved": "https://registry.npmjs.org/@azure/msal-browser/-/msal-browser-3.30.0.tgz",
      "integrity": "sha512-I0XlIGVdM4E9kYP5eTjgW8fgATdzwxJvQ6bm2PNiHaZhEuUz47NYw1xHthC9R+lXz4i9zbShS0VdLyxd7n0GGA==",
      "license": "MIT",
      "dependencies": {
        "@azure/msal-common": "14.16.1"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/mssql/node_modules/@azure/msal-common": {
      "version": "14.16.1",
      "resolved": "https://registry.npmjs.org/@azure/msal-common/-/msal-common-14.16.1.tgz",
      "integrity": "sha512-nyxsA6NA4SVKh5YyRpbSXiMr7oQbwark7JU9LMeg6tJYTSPyAGkdx61wPT4gyxZfxlSxMMEyAsWaubBlNyIa1w==",
      "license": "MIT",
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/mssql/node_modules/@azure/msal-node": {
      "version": "2.16.3",
      "resolved": "https://registry.npmjs.org/@azure/msal-node/-/msal-node-2.16.3.tgz",
      "integrity": "sha512-CO+SE4weOsfJf+C5LM8argzvotrXw252/ZU6SM2Tz63fEblhH1uuVaaO4ISYFuN4Q6BhTo7I3qIdi8ydUQCqhw==",
      "license": "MIT",
      "dependencies": {
        "@azure/msal-common": "14.16.1",
        "jsonwebtoken": "^9.0.0",
        "uuid": "^8.3.0"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/mssql/node_modules/define-lazy-prop": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/define-lazy-prop/-/define-lazy-prop-2.0.0.tgz",
      "integrity": "sha512-Ds09qNh8yw3khSjiJjiUInaGX9xlqZDY7JVryGxdxV7NPeuqQfplOpQ66yJFZut3jLa5zOwkXw1g9EI2uKh4Og==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/mssql/node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/mssql/node_modules/is-docker": {
      "version": "2.2.1",
      "resolved": "https://registry.npmjs.org/is-docker/-/is-docker-2.2.1.tgz",
      "integrity": "sha512-F+i2BKsFrH66iaUFc0woD8sLy8getkwTwtOBjvs56Cx4CgJDeKQeqfz8wAYiSb8JOprWhHH5p77PbmYCvvUuXQ==",
      "license": "MIT",
      "bin": {
        "is-docker": "cli.js"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/mssql/node_modules/is-wsl": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/is-wsl/-/is-wsl-2.2.0.tgz",
      "integrity": "sha512-fKzAra0rGJUUBwGBgNkHZuToZcn+TtXHpeCgmkMJMMYx1sQDYaCSyjJBSCa2nH1DGm7s3n1oBnohoVTBaN7Lww==",
      "license": "MIT",
      "dependencies": {
        "is-docker": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/mssql/node_modules/jwa": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-2.0.1.tgz",
      "integrity": "sha512-hRF04fqJIP8Abbkq5NKGN0Bbr3JxlQ+qhZufXVr0DvujKy93ZCbXZMHDL4EOtodSbCWxOqR8MS1tXA5hwqCXDg==",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/mssql/node_modules/jws": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/jws/-/jws-4.0.0.tgz",
      "integrity": "sha512-KDncfTmOZoOMTFG4mBlG0qUIOlc03fmzH+ru6RgYVZhPkyiy/92Owlt/8UEN+a4TXR1FQetfIpJE8ApdvdVxTg==",
      "license": "MIT",
      "dependencies": {
        "jwa": "^2.0.0",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/mssql/node_modules/open": {
      "version": "8.4.2",
      "resolved": "https://registry.npmjs.org/open/-/open-8.4.2.tgz",
      "integrity": "sha512-7x81NCL719oNbsq/3mh+hVrAWmFuEYUqrq/Iw3kUzH8ReypT9QQ0BLoJS7/G9k6N81XjW4qHWtjWwe/9eLy1EQ==",
      "license": "MIT",
      "dependencies": {
        "define-lazy-prop": "^2.0.0",
        "is-docker": "^2.1.1",
        "is-wsl": "^2.2.0"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/mssql/node_modules/tedious": {
      "version": "16.7.1",
      "resolved": "https://registry.npmjs.org/tedious/-/tedious-16.7.1.tgz",
      "integrity": "sha512-NmedZS0NJiTv3CoYnf1FtjxIDUgVYzEmavrc8q2WHRb+lP4deI9BpQfmNnBZZaWusDbP5FVFZCcvzb3xOlNVlQ==",
      "license": "MIT",
      "dependencies": {
        "@azure/identity": "^3.4.1",
        "@azure/keyvault-keys": "^4.4.0",
        "@js-joda/core": "^5.5.3",
        "bl": "^6.0.3",
        "es-aggregate-error": "^1.0.9",
        "iconv-lite": "^0.6.3",
        "js-md4": "^0.3.2",
        "jsbi": "^4.3.0",
        "native-duplexpair": "^1.0.0",
        "node-abort-controller": "^3.1.1",
        "sprintf-js": "^1.1.2"
      },
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/mssql/node_modules/uuid": {
      "version": "8.3.2",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-8.3.2.tgz",
      "integrity": "sha512-+NYs2QeMWy+GWFOEm9xnn6HCDp0l7QBD7ml8zLUmJ+93Q5NF0NocErnwkTkXVFNiX3/fpC6afS8Dhb/gz7R7eg==",
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/multer": {
      "version": "1.4.5-lts.2",
      "resolved": "https://registry.npmjs.org/multer/-/multer-1.4.5-lts.2.tgz",
      "integrity": "sha512-VzGiVigcG9zUAoCNU+xShztrlr1auZOlurXynNvO9GiWD1/mTBbUljOKY+qMeazBqXgRnjzeEgJI/wyjJUHg9A==",
      "deprecated": "Multer 1.x is impacted by a number of vulnerabilities, which have been patched in 2.x. You should upgrade to the latest 2.x version.",
      "license": "MIT",
      "dependencies": {
        "append-field": "^1.0.0",
        "busboy": "^1.0.0",
        "concat-stream": "^1.5.2",
        "mkdirp": "^0.5.4",
        "object-assign": "^4.1.1",
        "type-is": "^1.6.4",
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/mylas": {
      "version": "2.1.13",
      "resolved": "https://registry.npmjs.org/mylas/-/mylas-2.1.13.tgz",
      "integrity": "sha512-+MrqnJRtxdF+xngFfUUkIMQrUUL0KsxbADUkn23Z/4ibGg192Q+z+CQyiYwvWTsYjJygmMR8+w3ZDa98Zh6ESg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/raouldeheer"
      }
    },
    "node_modules/mysql2": {
      "version": "3.14.4",
      "resolved": "https://registry.npmjs.org/mysql2/-/mysql2-3.14.4.tgz",
      "integrity": "sha512-Cs/jx3WZPNrYHVz+Iunp9ziahaG5uFMvD2R8Zlmc194AqXNxt9HBNu7ZsPYrUtmJsF0egETCWIdMIYAwOGjL1w==",
      "license": "MIT",
      "dependencies": {
        "aws-ssl-profiles": "^1.1.1",
        "denque": "^2.1.0",
        "generate-function": "^2.3.1",
        "iconv-lite": "^0.7.0",
        "long": "^5.2.1",
        "lru.min": "^1.0.0",
        "named-placeholders": "^1.1.3",
        "seq-queue": "^0.0.5",
        "sqlstring": "^2.3.2"
      },
      "engines": {
        "node": ">= 8.0"
      }
    },
    "node_modules/mysql2/node_modules/iconv-lite": {
      "version": "0.7.0",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.7.0.tgz",
      "integrity": "sha512-cf6L2Ds3h57VVmkZe+Pn+5APsT7FpqJtEhhieDCvrE2MK5Qk9MyffgQyuxQTm6BChfeZNtcOLHp9IcWRVcIcBQ==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/named-placeholders": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/named-placeholders/-/named-placeholders-1.1.3.tgz",
      "integrity": "sha512-eLoBxg6wE/rZkJPhU/xRX1WTpkFEwDJEN96oxFrTsqBdbT5ec295Q+CoHrL9IT0DipqKhmGcaZmwOt8OON5x1w==",
      "license": "MIT",
      "dependencies": {
        "lru-cache": "^7.14.1"
      },
      "engines": {
        "node": ">=12.0.0"
      }
    },
    "node_modules/named-placeholders/node_modules/lru-cache": {
      "version": "7.18.3",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-7.18.3.tgz",
      "integrity": "sha512-jumlc0BIUrS3qJGgIkWZsyfAM7NCWiBcCDhnd+3NNM5KbBmLTgHVfWBcg6W+rLUsIpzpERPsvwUP7CckAQSOoA==",
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/nanoid": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/nanoid/-/nanoid-4.0.2.tgz",
      "integrity": "sha512-7ZtY5KTCNheRGfEFxnedV5zFiORN1+Y1N6zvPTnHQd8ENUvfaDBeuJDZb2bN/oXwXxu3qkTXDzy57W5vAmDTBw==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "bin": {
        "nanoid": "bin/nanoid.js"
      },
      "engines": {
        "node": "^14 || ^16 || >=18"
      }
    },
    "node_modules/native-duplexpair": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/native-duplexpair/-/native-duplexpair-1.0.0.tgz",
      "integrity": "sha512-E7QQoM+3jvNtlmyfqRZ0/U75VFgCls+fSkbml2MpgWkWyz3ox8Y58gNhfuziuQYGNNQAbFZJQck55LHCnCK6CA==",
      "license": "MIT"
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/negotiator": {
      "version": "0.6.4",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.4.tgz",
      "integrity": "sha512-myRT3DiWPHqho5PrJaIRyaMv2kgYf0mUVgBNOYMuCH5Ki1yEiQaf/ZJuQ62nvpc44wL5WDbTX7yGJi1Neevw8w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/neo-async": {
      "version": "2.6.2",
      "resolved": "https://registry.npmjs.org/neo-async/-/neo-async-2.6.2.tgz",
      "integrity": "sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-abort-controller": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/node-abort-controller/-/node-abort-controller-3.1.1.tgz",
      "integrity": "sha512-AGK2yQKIjRuqnc6VkX2Xj5d+QW8xZ87pa1UK6yA6ouUyuxfHuMP6umE5QK7UmTeOAymo+Zx1Fxiuw9rVx8taHQ==",
      "license": "MIT"
    },
    "node_modules/node-int64": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/node-int64/-/node-int64-0.4.0.tgz",
      "integrity": "sha512-O5lz91xSOeoXP6DulyHfllpq+Eg00MWitZIbtPfoSEvqIHdl5gfcY6hYzDWnj0qD5tz52PI08u9qUvSVeUBeHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.20",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.20.tgz",
      "integrity": "sha512-7gK6zSXEH6neM212JgfYFXe+GmZQM+fia5SsusuBIUgnPheLFBmIPhtFoAQRj8/7wASYQnbDlHPVwY0BefoFgA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nodemon": {
      "version": "3.1.10",
      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-3.1.10.tgz",
      "integrity": "sha512-WDjw3pJ0/0jMFmyNDp3gvY2YizjLmmOUQo6DEBY+JgdvW/yQ9mEeSw6H5ythl5Ny2ytb7f9C2nIbjSxMNzbJXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chokidar": "^3.5.2",
        "debug": "^4",
        "ignore-by-default": "^1.0.1",
        "minimatch": "^3.1.2",
        "pstree.remy": "^1.1.8",
        "semver": "^7.5.3",
        "simple-update-notifier": "^2.0.0",
        "supports-color": "^5.5.0",
        "touch": "^3.1.0",
        "undefsafe": "^2.0.5"
      },
      "bin": {
        "nodemon": "bin/nodemon.js"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/nodemon"
      }
    },
    "node_modules/nodemon/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/nodemon/node_modules/has-flag": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-3.0.0.tgz",
      "integrity": "sha512-sKJf1+ceQBr4SMkvQnBDNDtf4TXpVhVGateu0t918bl30FnbE2m4vNLX+VWe/dpjlb+HugGYzW7uQXH98HPEYw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/nodemon/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/nodemon/node_modules/supports-color": {
      "version": "5.5.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-5.5.0.tgz",
      "integrity": "sha512-QjVjwdXIt408MIiAqCX4oUKsgU2EqAGzs2Ppkm4aQYbjm+ZEWEcW4SfFNTr4uMNZma0ey4f5lgLrkB0aX0QMow==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^3.0.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/npm-run-path": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/npm-run-path/-/npm-run-path-4.0.1.tgz",
      "integrity": "sha512-S48WzZW777zhNIrn7gxOlISNAqi9ZC/uQFnRdbeIHhZhCA6UqpkOT8T1G7BvfdgP4Er8gF4sUbaS0i7QvIfCWw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/object-keys": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/object-keys/-/object-keys-1.1.1.tgz",
      "integrity": "sha512-NuAESUOUMrlIXOfHKzD6bpPu3tYt3xvjNdRIQ+FeT0lNb4K8WR70CaDxhuNguS2XG+GjkyMwOzsN5ZktImfhLA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/object.assign": {
      "version": "4.1.7",
      "resolved": "https://registry.npmjs.org/object.assign/-/object.assign-4.1.7.tgz",
      "integrity": "sha512-nK28WOo+QIjBkDduTINE4JkF/UJJKyf2EJxvJKfblDpyg0Q+pkOHNTL0Qwy6NP6FhE/EnzV73BxxqcJaXY9anw==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.3",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0",
        "has-symbols": "^1.1.0",
        "object-keys": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/on-headers": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/on-headers/-/on-headers-1.1.0.tgz",
      "integrity": "sha512-737ZY3yNnXy37FHkQxPzt4UZ2UWPWiCZWLvFZ4fu5cueciegX0zGPnrlY6bwRg4FdQOe9YU8MkmJwGhoMybl8A==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/one-time": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/one-time/-/one-time-1.0.0.tgz",
      "integrity": "sha512-5DXOiRKwuSEcQ/l0kGCF6Q3jcADFv5tSmRaJck/OqkVFcOzutB134KRSfF0xDrL39MNnqxbHBbUUcjZIhTgb2g==",
      "license": "MIT",
      "dependencies": {
        "fn.name": "1.x.x"
      }
    },
    "node_modules/onetime": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/onetime/-/onetime-5.1.2.tgz",
      "integrity": "sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mimic-fn": "^2.1.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/open": {
      "version": "10.2.0",
      "resolved": "https://registry.npmjs.org/open/-/open-10.2.0.tgz",
      "integrity": "sha512-YgBpdJHPyQ2UE5x+hlSXcnejzAvD0b22U2OuAP+8OnlJT+PjWPxtgmGqKKc+RgTM63U9gN0YzrYc71R2WT/hTA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "default-browser": "^5.2.1",
        "define-lazy-prop": "^3.0.0",
        "is-inside-container": "^1.0.0",
        "wsl-utils": "^0.1.0"
      },
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/own-keys": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/own-keys/-/own-keys-1.0.1.tgz",
      "integrity": "sha512-qFOyK5PjiWZd+QQIh+1jhdb9LpxTF0qs7Pm8o5QHYZ0M3vKqSqzsZaEB6oWlxZ+q2sJBMI/Ktgd2N5ZwQoRHfg==",
      "license": "MIT",
      "dependencies": {
        "get-intrinsic": "^1.2.6",
        "object-keys": "^1.1.1",
        "safe-push-apply": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-try": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/p-try/-/p-try-2.2.0.tgz",
      "integrity": "sha512-R4nPAVTAU0B9D35/Gk3uJf/7XYbQcyohSKdvAxIRSNghFl4e71hVoGnBNQz9cWaXxO2I10KTC+3jMdvvoKw6dQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse-json": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/parse-json/-/parse-json-5.2.0.tgz",
      "integrity": "sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.0.0",
        "error-ex": "^1.3.1",
        "json-parse-even-better-errors": "^2.3.0",
        "lines-and-columns": "^1.1.6"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/path-to-regexp": {
      "version": "0.1.12",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-0.1.12.tgz",
      "integrity": "sha512-RA1GjUVMnvYFxuqovrEqZoxxW5NUZqbwKtYz/Tt7nXerk0LbLblQmrsgdeOxV5SFHf0UDggjS/bSeOZwt1pmEQ==",
      "license": "MIT"
    },
    "node_modules/path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pg": {
      "version": "8.16.3",
      "resolved": "https://registry.npmjs.org/pg/-/pg-8.16.3.tgz",
      "integrity": "sha512-enxc1h0jA/aq5oSDMvqyW3q89ra6XIIDZgCX9vkMrnz5DFTw/Ny3Li2lFQ+pt3L6MCgm/5o2o8HW9hiJji+xvw==",
      "license": "MIT",
      "dependencies": {
        "pg-connection-string": "^2.9.1",
        "pg-pool": "^3.10.1",
        "pg-protocol": "^1.10.3",
        "pg-types": "2.2.0",
        "pgpass": "1.0.5"
      },
      "engines": {
        "node": ">= 16.0.0"
      },
      "optionalDependencies": {
        "pg-cloudflare": "^1.2.7"
      },
      "peerDependencies": {
        "pg-native": ">=3.0.1"
      },
      "peerDependenciesMeta": {
        "pg-native": {
          "optional": true
        }
      }
    },
    "node_modules/pg-cloudflare": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/pg-cloudflare/-/pg-cloudflare-1.2.7.tgz",
      "integrity": "sha512-YgCtzMH0ptvZJslLM1ffsY4EuGaU0cx4XSdXLRFae8bPP4dS5xL1tNB3k2o/N64cHJpwU7dxKli/nZ2lUa5fLg==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/pg-connection-string": {
      "version": "2.9.1",
      "resolved": "https://registry.npmjs.org/pg-connection-string/-/pg-connection-string-2.9.1.tgz",
      "integrity": "sha512-nkc6NpDcvPVpZXxrreI/FOtX3XemeLl8E0qFr6F2Lrm/I8WOnaWNhIPK2Z7OHpw7gh5XJThi6j6ppgNoaT1w4w==",
      "license": "MIT"
    },
    "node_modules/pg-int8": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/pg-int8/-/pg-int8-1.0.1.tgz",
      "integrity": "sha512-WCtabS6t3c8SkpDBUlb1kjOs7l66xsGdKpIPZsg4wR+B3+u9UAum2odSsF9tnvxg80h4ZxLWMy4pRjOsFIqQpw==",
      "license": "ISC",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/pg-pool": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/pg-pool/-/pg-pool-3.10.1.tgz",
      "integrity": "sha512-Tu8jMlcX+9d8+QVzKIvM/uJtp07PKr82IUOYEphaWcoBhIYkoHpLXN3qO59nAI11ripznDsEzEv8nUxBVWajGg==",
      "license": "MIT",
      "peerDependencies": {
        "pg": ">=8.0"
      }
    },
    "node_modules/pg-protocol": {
      "version": "1.10.3",
      "resolved": "https://registry.npmjs.org/pg-protocol/-/pg-protocol-1.10.3.tgz",
      "integrity": "sha512-6DIBgBQaTKDJyxnXaLiLR8wBpQQcGWuAESkRBX/t6OwA8YsqP+iVSiond2EDy6Y/dsGk8rh/jtax3js5NeV7JQ==",
      "license": "MIT"
    },
    "node_modules/pg-types": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/pg-types/-/pg-types-2.2.0.tgz",
      "integrity": "sha512-qTAAlrEsl8s4OiEQY69wDvcMIdQN6wdz5ojQiOy6YRMuynxenON0O5oCpJI6lshc6scgAY8qvJ2On/p+CXY0GA==",
      "license": "MIT",
      "dependencies": {
        "pg-int8": "1.0.1",
        "postgres-array": "~2.0.0",
        "postgres-bytea": "~1.0.0",
        "postgres-date": "~1.0.4",
        "postgres-interval": "^1.1.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/pgpass": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/pgpass/-/pgpass-1.0.5.tgz",
      "integrity": "sha512-FdW9r/jQZhSeohs1Z3sI1yxFQNFvMcnmfuj4WBMUTxOrAyLMaTcE1aAMBiTlbMNaXvBCQuVi0R7hd8udDSP7ug==",
      "license": "MIT",
      "dependencies": {
        "split2": "^4.1.0"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/pkg-dir": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/pkg-dir/-/pkg-dir-4.2.0.tgz",
      "integrity": "sha512-HRDzbaKjC+AOWVXxAU/x54COGeIv9eb+6CkDSQoNTt4XyWoIJvuPsXizxu/Fr23EiekbtZwmh1IcIG/l/a10GQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "find-up": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pkg-dir/node_modules/find-up": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-4.1.0.tgz",
      "integrity": "sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^5.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pkg-dir/node_modules/locate-path": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-5.0.0.tgz",
      "integrity": "sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^4.1.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pkg-dir/node_modules/p-limit": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-2.3.0.tgz",
      "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-try": "^2.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/pkg-dir/node_modules/p-locate": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-4.1.0.tgz",
      "integrity": "sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^2.2.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/plimit-lit": {
      "version": "1.6.1",
      "resolved": "https://registry.npmjs.org/plimit-lit/-/plimit-lit-1.6.1.tgz",
      "integrity": "sha512-B7+VDyb8Tl6oMJT9oSO2CW8XC/T4UcJGrwOVoNGwOQsQYhlpfajmrMj5xeejqaASq3V/EqThyOeATEOMuSEXiA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "queue-lit": "^1.5.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/possible-typed-array-names": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/possible-typed-array-names/-/possible-typed-array-names-1.1.0.tgz",
      "integrity": "sha512-/+5VFTchJDoVj3bhoqi6UeymcD00DAwb1nJwamzPvHEszJ4FpF6SNNbUbOS8yI56qHzdV8eK0qEfOSiodkTdxg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/postgres-array": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/postgres-array/-/postgres-array-2.0.0.tgz",
      "integrity": "sha512-VpZrUqU5A69eQyW2c5CA1jtLecCsN2U/bD6VilrFDWq5+5UIEVO7nazS3TEcHf1zuPYO/sqGvUvW62g86RXZuA==",
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postgres-bytea": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/postgres-bytea/-/postgres-bytea-1.0.0.tgz",
      "integrity": "sha512-xy3pmLuQqRBZBXDULy7KbaitYqLcmxigw14Q5sj8QBVLqEwXfeybIKVWiqAXTlcvdvb0+xkOtDbfQMOf4lST1w==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-date": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/postgres-date/-/postgres-date-1.0.7.tgz",
      "integrity": "sha512-suDmjLVQg78nMK2UZ454hAG+OAW+HQPZ6n++TNDUX+L0+uUlLywnoxJKDou51Zm+zTCjrCl0Nq6J9C5hP9vK/Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-interval": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/postgres-interval/-/postgres-interval-1.2.0.tgz",
      "integrity": "sha512-9ZhXKM/rw350N1ovuWHbGxnGh/SNJ4cnxHiM0rxE4VN41wsg8P8zWn9hv/buK00RP4WvlOyr/RBDiptyxVbkZQ==",
      "license": "MIT",
      "dependencies": {
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prettier": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/prettier/-/prettier-3.6.2.tgz",
      "integrity": "sha512-I7AIg5boAr5R0FFtJ6rCfD+LFsWHp81dolrFD8S79U9tb8Az2nGrJncnMSnys+bpQJfRUzqs9hnA81OAA3hCuQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "prettier": "bin/prettier.cjs"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/prettier/prettier?sponsor=1"
      }
    },
    "node_modules/pretty-format": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/pretty-format/-/pretty-format-29.7.0.tgz",
      "integrity": "sha512-Pdlw/oPxN+aXdmM9R00JVC9WVFoCLTKJvDVLgmJ+qAffBMxsV85l/Lu7sNx4zSzPyoL2euImuEwHhOXdEgNFZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/schemas": "^29.6.3",
        "ansi-styles": "^5.0.0",
        "react-is": "^18.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/pretty-format/node_modules/ansi-styles": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-5.2.0.tgz",
      "integrity": "sha512-Cxwpt2SfTzTtXcfOlzGEee8O+c+MmUgGrNiBcXnuWxuFJHe6a5Hz7qwhwe5OgaSYI0IJvkLqWX1ASG+cJOkEiA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/process": {
      "version": "0.11.10",
      "resolved": "https://registry.npmjs.org/process/-/process-0.11.10.tgz",
      "integrity": "sha512-cdGef/drWFoydD1JsMzuFf8100nZl+GT+yacc2bEced5f9Rjk4z+WtFUTBu9PhOi9j/jfmBPu0mMEY4wIdAF8A==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6.0"
      }
    },
    "node_modules/process-nextick-args": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/process-nextick-args/-/process-nextick-args-2.0.1.tgz",
      "integrity": "sha512-3ouUOpQhtgrbOa17J7+uxOTpITYWaGP7/AhoR3+A+/1e9skrzelGi/dXzEYyvbxubEF6Wn2ypscTKiKJFFn1ag==",
      "license": "MIT"
    },
    "node_modules/prompts": {
      "version": "2.4.2",
      "resolved": "https://registry.npmjs.org/prompts/-/prompts-2.4.2.tgz",
      "integrity": "sha512-NxNv/kLguCA7p3jE8oL2aEBsrJWgAakBpgmgK6lpPWV+WuOmY6r2/zbAVnP+T8bQlA0nzHXSJSJW0Hq7ylaD2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "kleur": "^3.0.3",
        "sisteransi": "^1.0.5"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/pstree.remy": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/pstree.remy/-/pstree.remy-1.1.8.tgz",
      "integrity": "sha512-77DZwxQmxKnu3aR542U+X8FypNzbfJ+C5XQDk3uWjWxn6151aIMGthWYRXTqT1E5oJvg+ljaa2OJi+VfvCOQ8w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/pure-rand": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/pure-rand/-/pure-rand-6.1.0.tgz",
      "integrity": "sha512-bVWawvoZoBYpp6yIoQtQXHZjmz35RSVHnUOTefl8Vcjr8snTPY1wnpSPMWekcFwbxI6gtmT7rSYPFvz71ldiOA==",
      "dev": true,
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/dubzzz"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/fast-check"
        }
      ],
      "license": "MIT"
    },
    "node_modules/qs": {
      "version": "6.13.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.13.0.tgz",
      "integrity": "sha512-+38qI9SOr8tfZ4QmJNplMUxqjbe7LKvvZgWdExBOmd+egZTtjLB67Gu0HRX3u/XOq7UU2Nx6nsjvS16Z9uwfpg==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.0.6"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/queue-lit": {
      "version": "1.5.2",
      "resolved": "https://registry.npmjs.org/queue-lit/-/queue-lit-1.5.2.tgz",
      "integrity": "sha512-tLc36IOPeMAubu8BkW8YDBV+WyIgKlYU7zUNs0J5Vk9skSZ4JfGlPOqplP0aHdfv7HL0B2Pg6nwiq60Qc6M2Hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "2.5.2",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.5.2.tgz",
      "integrity": "sha512-8zGqypfENjCIqGhgXToC8aB2r7YrBX+AQAfIPs/Mlk+BtPTztOvTS01NRW/3Eh60J+a48lt8qsCzirQ6loCVfA==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/react-is": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-18.3.1.tgz",
      "integrity": "sha512-/LLMVyas0ljjAtoYiPqYiL8VWXzUUdThrmU5+n20DZv+a+ClRoevUzw5JxU+Ieh5/c87ytoTBV9G1FiKfNJdmg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/readable-stream": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-2.3.8.tgz",
      "integrity": "sha512-8p0AUk4XODgIewSi0l8Epjs+EVnWiK7NoDIEGU0HhE7+ZyY8D1IMY7odu5lRrFXGg71L15KG8QrPmum45RTtdA==",
      "license": "MIT",
      "dependencies": {
        "core-util-is": "~1.0.0",
        "inherits": "~2.0.3",
        "isarray": "~1.0.0",
        "process-nextick-args": "~2.0.0",
        "safe-buffer": "~5.1.1",
        "string_decoder": "~1.1.1",
        "util-deprecate": "~1.0.1"
      }
    },
    "node_modules/readable-stream/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "license": "MIT"
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/redis": {
      "version": "4.7.1",
      "resolved": "https://registry.npmjs.org/redis/-/redis-4.7.1.tgz",
      "integrity": "sha512-S1bJDnqLftzHXHP8JsT5II/CtHWQrASX5K96REjWjlmWKrviSOLWmM7QnRLstAWsu1VBBV1ffV6DzCvxNP0UJQ==",
      "license": "MIT",
      "workspaces": [
        "./packages/*"
      ],
      "dependencies": {
        "@redis/bloom": "1.2.0",
        "@redis/client": "1.6.1",
        "@redis/graph": "1.1.1",
        "@redis/json": "1.0.7",
        "@redis/search": "1.2.0",
        "@redis/time-series": "1.1.0"
      }
    },
    "node_modules/reflect.getprototypeof": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/reflect.getprototypeof/-/reflect.getprototypeof-1.0.10.tgz",
      "integrity": "sha512-00o4I+DVrefhv+nX0ulyi3biSHCPDe+yLv5o/p6d/UVlirijB8E16FtfwSAi4g3tcqrQ4lRAqQSoFEZJehYEcw==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.9",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0",
        "get-intrinsic": "^1.2.7",
        "get-proto": "^1.0.1",
        "which-builtin-type": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/regexp.prototype.flags": {
      "version": "1.5.4",
      "resolved": "https://registry.npmjs.org/regexp.prototype.flags/-/regexp.prototype.flags-1.5.4.tgz",
      "integrity": "sha512-dYqgNSZbDwkaJ2ceRd9ojCGjBq+mOm9LmtXnAnEGyHhN/5R7iDW2TRw3h+o/jCFxus3P2LfWIIiwowAjANm7IA==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "define-properties": "^1.2.1",
        "es-errors": "^1.3.0",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "set-function-name": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.10",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.10.tgz",
      "integrity": "sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-cwd": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/resolve-cwd/-/resolve-cwd-3.0.0.tgz",
      "integrity": "sha512-OrZaX2Mb+rJCpH/6CpSqt9xFVpN++x01XnN2ie9g6P5/3xelLAkXWVADpdz1IHD/KFfEXyE6V0U01OQ3UO2rEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-from": "^5.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/resolve-cwd/node_modules/resolve-from": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
      "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/resolve-pkg-maps": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/resolve-pkg-maps/-/resolve-pkg-maps-1.0.0.tgz",
      "integrity": "sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
      }
    },
    "node_modules/resolve.exports": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/resolve.exports/-/resolve.exports-2.0.3.tgz",
      "integrity": "sha512-OcXjMsGdhL4XnbShKpAcSqPMzQoYkYyhbEaeSko47MjRP9NfEQMhZkXL1DoFlt9LWQn4YttrdnV6X2OiyzBi+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rfdc": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/rfdc/-/rfdc-1.4.1.tgz",
      "integrity": "sha512-q1b3N5QkRUWUl7iyylaaj3kOpIT0N2i9MqIEQXP73GVsN9cw3fdx8X63cEmWhJGi2PPCF23Ijp7ktmd39rawIA==",
      "license": "MIT"
    },
    "node_modules/rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "deprecated": "Rimraf versions prior to v4 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/run-applescript": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/run-applescript/-/run-applescript-7.0.0.tgz",
      "integrity": "sha512-9by4Ij99JUr/MCFBUkDKLWK3G9HVXmabKz9U5MlIAIuvuzkiOicRYs8XJLxX+xahD+mLiiCYDqF9dKAgtzKP1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safe-array-concat": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/safe-array-concat/-/safe-array-concat-1.1.3.tgz",
      "integrity": "sha512-AURm5f0jYEOydBj7VQlVvDrjeFgthDdEF5H1dP+6mNpoXOMo1quQqJ4wvJDyRZ9+pO3kGWoOdmV08cSv2aJV6Q==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "get-intrinsic": "^1.2.6",
        "has-symbols": "^1.1.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">=0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-array-concat/node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
      "license": "MIT"
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safe-push-apply": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/safe-push-apply/-/safe-push-apply-1.0.0.tgz",
      "integrity": "sha512-iKE9w/Z7xCzUMIZqdBsp6pEQvwuEebH4vdpjcDWnyzaI6yl6O9FHvVpmGelvEHNsoY6wGblkxR6Zty/h00WiSA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "isarray": "^2.0.5"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-push-apply/node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
      "license": "MIT"
    },
    "node_modules/safe-regex-test": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/safe-regex-test/-/safe-regex-test-1.1.0.tgz",
      "integrity": "sha512-x/+Cz4YrimQxQccJf5mKEbIa1NzeCRNI5Ecl/ekmlYaampdNLPalVyIcCZNNH3MvmqBugV5TMYZXv0ljslUlaw==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "is-regex": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/safe-stable-stringify": {
      "version": "2.5.0",
      "resolved": "https://registry.npmjs.org/safe-stable-stringify/-/safe-stable-stringify-2.5.0.tgz",
      "integrity": "sha512-b3rppTKm9T+PsVCBEOUR46GWI7fdOs00VKZ1+9c1EWDaDMvjQc6tUwuFyIprgGgTcWoVHSKrU8H31ZHA2e0RHA==",
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "7.7.2",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.2.tgz",
      "integrity": "sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==",
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/send": {
      "version": "0.19.0",
      "resolved": "https://registry.npmjs.org/send/-/send-0.19.0.tgz",
      "integrity": "sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/send/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/send/node_modules/debug/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/send/node_modules/encodeurl": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
      "integrity": "sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/seq-queue": {
      "version": "0.0.5",
      "resolved": "https://registry.npmjs.org/seq-queue/-/seq-queue-0.0.5.tgz",
      "integrity": "sha512-hr3Wtp/GZIc/6DAGPDcV4/9WoZhjrkXsi5B/07QgX8tsdc6ilr7BFM6PM6rbdAX1kFSDYeZGLipIZZKyQP0O5Q=="
    },
    "node_modules/serve-static": {
      "version": "1.16.2",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-1.16.2.tgz",
      "integrity": "sha512-VqpjJZKadQB/PEbEwvFdO43Ax5dFBZ2UECszz8bQ7pi7wt//PWe1P6MN7eCnjsatYtBT6EuiClbjSWP2WrIoTw==",
      "license": "MIT",
      "dependencies": {
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "parseurl": "~1.3.3",
        "send": "0.19.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/set-function-length": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/set-function-length/-/set-function-length-1.2.2.tgz",
      "integrity": "sha512-pgRc4hJ4/sNjWCSS9AmnS40x3bNMDTknHgL5UaMBTMyJnU90EgWh1Rz+MC9eFu4BuN/UwZjKQuY/1v3rM7HMfg==",
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2",
        "get-intrinsic": "^1.2.4",
        "gopd": "^1.0.1",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-function-name": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/set-function-name/-/set-function-name-2.0.2.tgz",
      "integrity": "sha512-7PGFlmtwsEADb0WYyvCMa1t+yke6daIG4Wirafur5kcf+MhUnPms1UeR0CKQdTZD81yESwMHbtn+TR+dMviakQ==",
      "license": "MIT",
      "dependencies": {
        "define-data-property": "^1.1.4",
        "es-errors": "^1.3.0",
        "functions-have-names": "^1.2.3",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/set-proto": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/set-proto/-/set-proto-1.0.0.tgz",
      "integrity": "sha512-RJRdvCo6IAnPdsvP/7m6bsQqNnn1FCBX5ZNtFL98MmFF/4xAIJTIg1YbHW5DC2W5SKZanrC6i4HsJqlajw/dZw==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
      "license": "ISC"
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/signal-exit": {
      "version": "3.0.7",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.7.tgz",
      "integrity": "sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/simple-swizzle": {
      "version": "0.2.2",
      "resolved": "https://registry.npmjs.org/simple-swizzle/-/simple-swizzle-0.2.2.tgz",
      "integrity": "sha512-JA//kQgZtbuY83m+xT+tXJkmJncGMTFT+C+g2h2R9uxkYIrE2yy9sgmcLhCnw57/WSD+Eh3J97FPEDFnbXnDUg==",
      "license": "MIT",
      "dependencies": {
        "is-arrayish": "^0.3.1"
      }
    },
    "node_modules/simple-swizzle/node_modules/is-arrayish": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.3.2.tgz",
      "integrity": "sha512-eVRqCvVlZbuw3GrM63ovNSNAeA1K16kaR/LRY/92w0zxQ5/1YzwblUX652i4Xs9RwAGjW9d9y6X88t8OaAJfWQ==",
      "license": "MIT"
    },
    "node_modules/simple-update-notifier": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-2.0.0.tgz",
      "integrity": "sha512-a2B9Y0KlNXl9u/vsW6sTIu9vGEpfKu2wRV6l1H3XEas/0gUIzGzBoP/IouTcUQbm9JWZLH3COxyn03TYlFax6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.5.3"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/sisteransi": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/sisteransi/-/sisteransi-1.0.5.tgz",
      "integrity": "sha512-bLGGlR1QxBcynn2d5YmDX4MGjlZvy2MRBDRNHLJ8VI6l6+9FUiyTFNJ0IveOSP0bcXgVDPRcfGqA0pjaqUpfVg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/slash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
      "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-support": {
      "version": "0.5.13",
      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.13.tgz",
      "integrity": "sha512-SHSKFHadjVA5oR4PPqhtAVdcBWwRYVd6g6cAXnIbRiIwc2EhPrTuKUBdSLvlEKyIP3GCf89fltvcZiP9MMFA1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "buffer-from": "^1.0.0",
        "source-map": "^0.6.0"
      }
    },
    "node_modules/sparse-bitfield": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/sparse-bitfield/-/sparse-bitfield-3.0.3.tgz",
      "integrity": "sha512-kvzhi7vqKTfkh0PZU+2D2PIllw2ymqJKujUcyPMd9Y75Nv4nPbGJZXNhxsgdQab2BmlDct1YnfQCguEvHr7VsQ==",
      "license": "MIT",
      "dependencies": {
        "memory-pager": "^1.0.2"
      }
    },
    "node_modules/split2": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/split2/-/split2-4.2.0.tgz",
      "integrity": "sha512-UcjcJOWknrNkF6PLX83qcHM6KHgVKNkV62Y8a5uYDVv9ydGQVwAHMKqHdJje1VTWpljG0WYpCDhrCdAOYH4TWg==",
      "license": "ISC",
      "engines": {
        "node": ">= 10.x"
      }
    },
    "node_modules/sprintf-js": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/sprintf-js/-/sprintf-js-1.1.3.tgz",
      "integrity": "sha512-Oo+0REFV59/rz3gfJNKQiBlwfHaSESl1pcGyABQsnnIfWOFt6JNj5gCog2U6MLZ//IGYD+nA8nI+mTShREReaA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/sqlstring": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/sqlstring/-/sqlstring-2.3.3.tgz",
      "integrity": "sha512-qC9iz2FlN7DQl3+wjwn3802RTyjCx7sDvfQEXchwa6CWOx07/WVfh91gBmQ9fahw8snwGEWU3xGzOt4tFyHLxg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/ssf": {
      "version": "0.11.2",
      "resolved": "https://registry.npmjs.org/ssf/-/ssf-0.11.2.tgz",
      "integrity": "sha512-+idbmIXoYET47hH+d7dfm2epdOMUDjqcB4648sTZ+t2JwoyBFL/insLfB/racrDmsKB3diwsDA696pZMieAC5g==",
      "license": "Apache-2.0",
      "dependencies": {
        "frac": "~1.1.2"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/stack-trace": {
      "version": "0.0.10",
      "resolved": "https://registry.npmjs.org/stack-trace/-/stack-trace-0.0.10.tgz",
      "integrity": "sha512-KGzahc7puUKkzyMt+IqAep+TVNbKP+k2Lmwhub39m1AsTSkaDutx56aDCo+HLDzf/D26BIHTJWNiTG1KAJiQCg==",
      "license": "MIT",
      "engines": {
        "node": "*"
      }
    },
    "node_modules/stack-utils": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/stack-utils/-/stack-utils-2.0.6.tgz",
      "integrity": "sha512-XlkWvfIm6RmsWtNJx+uqtKLS8eqFbxUg0ZzLXqY0caEy9l7hruX8IpiDnjsLavoBgqCCR71TqWO8MaXYheJ3RQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "escape-string-regexp": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/stack-utils/node_modules/escape-string-regexp": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-2.0.0.tgz",
      "integrity": "sha512-UpzcLCXolUWcNu5HtVMHYdXJjArjsF9C0aNnquZYY4uW/Vu0miy5YoWvbV345HauVvcAUnpRuhMMcqTcGOY2+w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/stop-iteration-iterator": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/stop-iteration-iterator/-/stop-iteration-iterator-1.1.0.tgz",
      "integrity": "sha512-eLoXW/DHyl62zxY4SCaIgnRhuMr6ri4juEYARS8E6sCEqzKpOiE521Ucofdx+KnDZl5xmvGYaaKCk5FEOxJCoQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "internal-slot": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/stoppable": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/stoppable/-/stoppable-1.1.0.tgz",
      "integrity": "sha512-KXDYZ9dszj6bzvnEMRYvxgeTHU74QBFL54XKtP3nyMuJ81CFYtABZ3bAzL2EdFUaEwJOBOgENyFj3R7oTzDyyw==",
      "license": "MIT",
      "engines": {
        "node": ">=4",
        "npm": ">=6"
      }
    },
    "node_modules/streamsearch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/streamsearch/-/streamsearch-1.1.0.tgz",
      "integrity": "sha512-Mcc5wHehp9aXz1ax6bZUyY5afg9u2rv5cqQI3mRrYkGC8rW2hM02jWuwjtL++LS5qinSyhj2QfLyNsuc+VsExg==",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/string_decoder": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.1.1.tgz",
      "integrity": "sha512-n/ShnvDi6FHbbVfviro+WojiFzv+s8MPMHBczVePfUpDJLwoLT0ht1l4YwBCbi8pJAveEEdnkHyPyTP/mzRfwg==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.1.0"
      }
    },
    "node_modules/string_decoder/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "license": "MIT"
    },
    "node_modules/string-length": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/string-length/-/string-length-4.0.2.tgz",
      "integrity": "sha512-+l6rNN5fYHNhZZy41RXsYptCjA2Igmq4EG7kZAYFQI1E1VTXarr6ZPXBg6eq7Y6eK4FEhY6AJlyuFIb/v/S0VQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "char-regex": "^1.0.2",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/string.prototype.trim": {
      "version": "1.2.10",
      "resolved": "https://registry.npmjs.org/string.prototype.trim/-/string.prototype.trim-1.2.10.tgz",
      "integrity": "sha512-Rs66F0P/1kedk5lyYyH9uBzuiI/kNRmwJAR9quK6VOtIpZ2G+hMZd+HQbbv25MgCA6gEffoMZYxlTod4WcdrKA==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-data-property": "^1.1.4",
        "define-properties": "^1.2.1",
        "es-abstract": "^1.23.5",
        "es-object-atoms": "^1.0.0",
        "has-property-descriptors": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimend": {
      "version": "1.0.9",
      "resolved": "https://registry.npmjs.org/string.prototype.trimend/-/string.prototype.trimend-1.0.9.tgz",
      "integrity": "sha512-G7Ok5C6E/j4SGfyLCloXTrngQIQU3PWtXGst3yM7Bea9FRURf1S42ZHlZZtsNque2FN2PoUhfZXYLNWwEr4dLQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.2",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/string.prototype.trimstart": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/string.prototype.trimstart/-/string.prototype.trimstart-1.0.8.tgz",
      "integrity": "sha512-UXSH262CSZY1tfu3G3Secr6uGLCFVPMhIqHjlgCUtCCcgihYc/xKs9djMTMUOb2j1mVSeU8EU6NWc/iQKU6Gfg==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "define-properties": "^1.2.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-bom": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-4.0.0.tgz",
      "integrity": "sha512-3xurFv5tEgii33Zi8Jtp55wEIILR9eh34FAW00PZf+JnSsTmV/ioewSgQl97JHvgjoRGwPShsWm+IdrxB35d0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-final-newline": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/strip-final-newline/-/strip-final-newline-2.0.0.tgz",
      "integrity": "sha512-BrpvfNAE3dcvq7ll3xVumzjKjZQ5tI1sEUIKr3Uoks0XUl45St3FlatVqef9prk4jRDzhW6WZg+3bk93y6pLjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/strnum": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/strnum/-/strnum-2.1.1.tgz",
      "integrity": "sha512-7ZvoFTiCnGxBtDqJ//Cu6fWtZtc7Y3x+QOirG15wztbdngGSkht27o2pyGWrVy0b4WAy3jbKmnoK6g5VlVNUUw==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/NaturalIntelligence"
        }
      ],
      "license": "MIT"
    },
    "node_modules/superagent": {
      "version": "8.1.2",
      "resolved": "https://registry.npmjs.org/superagent/-/superagent-8.1.2.tgz",
      "integrity": "sha512-6WTxW1EB6yCxV5VFOIPQruWGHqc3yI7hEmZK6h+pyk69Lk/Ut7rLUY6W/ONF2MjBuGjvmMiIpsrVJ2vjrHlslA==",
      "deprecated": "Please upgrade to superagent v10.2.2+, see release notes at https://github.com/forwardemail/superagent/releases/tag/v10.2.2 - maintenance is supported by Forward Email @ https://forwardemail.net",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "component-emitter": "^1.3.0",
        "cookiejar": "^2.1.4",
        "debug": "^4.3.4",
        "fast-safe-stringify": "^2.1.1",
        "form-data": "^4.0.0",
        "formidable": "^2.1.2",
        "methods": "^1.1.2",
        "mime": "2.6.0",
        "qs": "^6.11.0",
        "semver": "^7.3.8"
      },
      "engines": {
        "node": ">=6.4.0 <13 || >=14"
      }
    },
    "node_modules/superagent/node_modules/mime": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-2.6.0.tgz",
      "integrity": "sha512-USPkMeET31rOMiarsBNIHZKLGgvKc/LrjofAnBlOttf5ajRvqiRA8QsenbcooctK6d6Ts6aqZXBA+XbkKthiQg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/supertest": {
      "version": "6.3.4",
      "resolved": "https://registry.npmjs.org/supertest/-/supertest-6.3.4.tgz",
      "integrity": "sha512-erY3HFDG0dPnhw4U+udPfrzXa4xhSG+n4rxfRuZWCUvjFWwKl+OxWf/7zk50s84/fAAs7vf5QAb9uRa0cCykxw==",
      "deprecated": "Please upgrade to supertest v7.1.3+, see release notes at https://github.com/forwardemail/supertest/releases/tag/v7.1.3 - maintenance is supported by Forward Email @ https://forwardemail.net",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "methods": "^1.1.2",
        "superagent": "^8.1.2"
      },
      "engines": {
        "node": ">=6.4.0"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tarn": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/tarn/-/tarn-3.0.2.tgz",
      "integrity": "sha512-51LAVKUSZSVfI05vjPESNc5vwqqZpbXCsU+/+wxlOrUjk2SnFTt97v9ZgQrD4YmxYW1Px6w2KjaDitCfkvgxMQ==",
      "license": "MIT",
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/tedious": {
      "version": "18.6.1",
      "resolved": "https://registry.npmjs.org/tedious/-/tedious-18.6.1.tgz",
      "integrity": "sha512-9AvErXXQTd6l7TDd5EmM+nxbOGyhnmdbp/8c3pw+tjaiSXW9usME90ET/CRG1LN1Y9tPMtz/p83z4Q97B4DDpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@azure/core-auth": "^1.7.2",
        "@azure/identity": "^4.2.1",
        "@azure/keyvault-keys": "^4.4.0",
        "@js-joda/core": "^5.6.1",
        "@types/node": ">=18",
        "bl": "^6.0.11",
        "iconv-lite": "^0.6.3",
        "js-md4": "^0.3.2",
        "native-duplexpair": "^1.0.0",
        "sprintf-js": "^1.1.3"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/tedious/node_modules/iconv-lite": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.6.3.tgz",
      "integrity": "sha512-4fCk79wshMdzMp2rH06qWrJE4iolqLhCUH+OiuIgU++RB0+94NlDL81atO7GX55uUKueo0txHNtvEyI6D7WdMw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/test-exclude": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/test-exclude/-/test-exclude-6.0.0.tgz",
      "integrity": "sha512-cAGWPIyOHU6zlmg88jwm7VRyXnMN7iV68OGAbYDk/Mh/xC/pzVPlQtY6ngoIH/5/tciuhGfvESU8GrHrcxD56w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@istanbuljs/schema": "^0.1.2",
        "glob": "^7.1.4",
        "minimatch": "^3.0.4"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/test-exclude/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/test-exclude/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/text-hex": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/text-hex/-/text-hex-1.0.0.tgz",
      "integrity": "sha512-uuVGNWzgJ4yhRaNSiubPY7OjISw4sw4E5Uv0wbjp+OzcbmVU/rsT8ujgcXJhn9ypzsgr5vlzpPqP+MBBKcGvbg==",
      "license": "MIT"
    },
    "node_modules/text-table": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
      "integrity": "sha512-N+8UisAXDGk8PFXP4HAzVR9nbfmVJ3zYLAWiTIoqC5v5isinhr+r5uaO8+7r3BMfuNIufIsA7RdpVgacC2cSpw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tmpl": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/tmpl/-/tmpl-1.0.5.tgz",
      "integrity": "sha512-3f0uOEAQwIqGuWW2MVzYg8fV/QNnc/IpuJNG837rLuczAaLVHslWHZQj4IGiEl5Hs3kkbhwL9Ab7Hrsmuj+Smw==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/touch": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/touch/-/touch-3.1.1.tgz",
      "integrity": "sha512-r0eojU4bI8MnHr8c5bNo7lJDdI2qXlWWJk6a9EAFG7vbhTjElYhBVS3/miuE0uOuoLdb8Mc/rVfsmm6eo5o9GA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "nodetouch": "bin/nodetouch.js"
      }
    },
    "node_modules/tr46": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-5.1.1.tgz",
      "integrity": "sha512-hdF5ZgjTqgAntKkklYw0R03MG2x/bSzTtkxmIRw/sTNV8YXsCJ1tfLAX23lhxhHJlEf3CRCOCGGWw3vI3GaSPw==",
      "license": "MIT",
      "dependencies": {
        "punycode": "^2.3.1"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/tree-kill": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/tree-kill/-/tree-kill-1.2.2.tgz",
      "integrity": "sha512-L0Orpi8qGpRG//Nd+H90vFB+3iHnue1zSSGmNOOCh1GLJ7rUKVwV2HvijphGQS2UmhUZewS9VgvxYIdgr+fG1A==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "tree-kill": "cli.js"
      }
    },
    "node_modules/triple-beam": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/triple-beam/-/triple-beam-1.4.1.tgz",
      "integrity": "sha512-aZbgViZrg1QNcG+LULa7nhZpJTZSLm/mXnHXnbAbjmN5aSa0y7V+wvv6+4WaBtpISJzThKy+PIPxc1Nq1EJ9mg==",
      "license": "MIT",
      "engines": {
        "node": ">= 14.0.0"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "1.4.3",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-1.4.3.tgz",
      "integrity": "sha512-i3eMG77UTMD0hZhgRS562pv83RC6ukSAC2GMNWc+9dieh/+jDM5u5YG+NHX6VNDRHQcHwmsTHctP9LhbC3WxVw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=16"
      },
      "peerDependencies": {
        "typescript": ">=4.2.0"
      }
    },
    "node_modules/ts-jest": {
      "version": "29.4.1",
      "resolved": "https://registry.npmjs.org/ts-jest/-/ts-jest-29.4.1.tgz",
      "integrity": "sha512-SaeUtjfpg9Uqu8IbeDKtdaS0g8lS6FT6OzM3ezrDfErPJPHNDo/Ey+VFGP1bQIDfagYDLyRpd7O15XpG1Es2Uw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bs-logger": "^0.2.6",
        "fast-json-stable-stringify": "^2.1.0",
        "handlebars": "^4.7.8",
        "json5": "^2.2.3",
        "lodash.memoize": "^4.1.2",
        "make-error": "^1.3.6",
        "semver": "^7.7.2",
        "type-fest": "^4.41.0",
        "yargs-parser": "^21.1.1"
      },
      "bin": {
        "ts-jest": "cli.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || ^18.0.0 || >=20.0.0"
      },
      "peerDependencies": {
        "@babel/core": ">=7.0.0-beta.0 <8",
        "@jest/transform": "^29.0.0 || ^30.0.0",
        "@jest/types": "^29.0.0 || ^30.0.0",
        "babel-jest": "^29.0.0 || ^30.0.0",
        "jest": "^29.0.0 || ^30.0.0",
        "jest-util": "^29.0.0 || ^30.0.0",
        "typescript": ">=4.3 <6"
      },
      "peerDependenciesMeta": {
        "@babel/core": {
          "optional": true
        },
        "@jest/transform": {
          "optional": true
        },
        "@jest/types": {
          "optional": true
        },
        "babel-jest": {
          "optional": true
        },
        "esbuild": {
          "optional": true
        },
        "jest-util": {
          "optional": true
        }
      }
    },
    "node_modules/ts-jest/node_modules/type-fest": {
      "version": "4.41.0",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-4.41.0.tgz",
      "integrity": "sha512-TeTSQ6H5YHvpqVwBRcnLDCBnDOHWYu7IvGbHT6N8AOymcr9PJGjc1GTtiWZTYg0NCgYwvnYWEkVChQAr9bjfwA==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=16"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ts-node": {
      "version": "10.9.2",
      "resolved": "https://registry.npmjs.org/ts-node/-/ts-node-10.9.2.tgz",
      "integrity": "sha512-f0FFpIdcHgn8zcPSbf1dRevwt047YMnaiJM3u2w2RewrB+fob/zePZcrOyQoLMMO7aBIddLcQIEK5dYjkLnGrQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@cspotcode/source-map-support": "^0.8.0",
        "@tsconfig/node10": "^1.0.7",
        "@tsconfig/node12": "^1.0.7",
        "@tsconfig/node14": "^1.0.0",
        "@tsconfig/node16": "^1.0.2",
        "acorn": "^8.4.1",
        "acorn-walk": "^8.1.1",
        "arg": "^4.1.0",
        "create-require": "^1.1.0",
        "diff": "^4.0.1",
        "make-error": "^1.1.1",
        "v8-compile-cache-lib": "^3.0.1",
        "yn": "3.1.1"
      },
      "bin": {
        "ts-node": "dist/bin.js",
        "ts-node-cwd": "dist/bin-cwd.js",
        "ts-node-esm": "dist/bin-esm.js",
        "ts-node-script": "dist/bin-script.js",
        "ts-node-transpile-only": "dist/bin-transpile.js",
        "ts-script": "dist/bin-script-deprecated.js"
      },
      "peerDependencies": {
        "@swc/core": ">=1.2.50",
        "@swc/wasm": ">=1.2.50",
        "@types/node": "*",
        "typescript": ">=2.7"
      },
      "peerDependenciesMeta": {
        "@swc/core": {
          "optional": true
        },
        "@swc/wasm": {
          "optional": true
        }
      }
    },
    "node_modules/ts-node-dev": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ts-node-dev/-/ts-node-dev-2.0.0.tgz",
      "integrity": "sha512-ywMrhCfH6M75yftYvrvNarLEY+SUXtUvU8/0Z6llrHQVBx12GiFk5sStF8UdfE/yfzk9IAq7O5EEbTQsxlBI8w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chokidar": "^3.5.1",
        "dynamic-dedupe": "^0.3.0",
        "minimist": "^1.2.6",
        "mkdirp": "^1.0.4",
        "resolve": "^1.0.0",
        "rimraf": "^2.6.1",
        "source-map-support": "^0.5.12",
        "tree-kill": "^1.2.2",
        "ts-node": "^10.4.0",
        "tsconfig": "^7.0.0"
      },
      "bin": {
        "ts-node-dev": "lib/bin.js",
        "tsnd": "lib/bin.js"
      },
      "engines": {
        "node": ">=0.8.0"
      },
      "peerDependencies": {
        "node-notifier": "*",
        "typescript": "*"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/ts-node-dev/node_modules/mkdirp": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-1.0.4.tgz",
      "integrity": "sha512-vVqVZQyf3WLx2Shd0qJ9xuvqgAyKPLAiqITEtqW0oIUjzo3PePDd6fW9iFz30ef7Ysp/oiWqbhszeGWW2T6Gzw==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "mkdirp": "bin/cmd.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/ts-node-dev/node_modules/rimraf": {
      "version": "2.7.1",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-2.7.1.tgz",
      "integrity": "sha512-uWjbaKIK3T1OSVptzX7Nl6PvQ3qAGtKEtVRjRuazjfL3Bx5eI409VZSqgND+4UNnmzLVdPj9FqFJNPqBZFve4w==",
      "deprecated": "Rimraf versions prior to v4 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      }
    },
    "node_modules/tsc-alias": {
      "version": "1.8.16",
      "resolved": "https://registry.npmjs.org/tsc-alias/-/tsc-alias-1.8.16.tgz",
      "integrity": "sha512-QjCyu55NFyRSBAl6+MTFwplpFcnm2Pq01rR/uxfqJoLMm6X3O14KEGtaSDZpJYaE1bJBGDjD0eSuiIWPe2T58g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chokidar": "^3.5.3",
        "commander": "^9.0.0",
        "get-tsconfig": "^4.10.0",
        "globby": "^11.0.4",
        "mylas": "^2.1.9",
        "normalize-path": "^3.0.0",
        "plimit-lit": "^1.2.6"
      },
      "bin": {
        "tsc-alias": "dist/bin/index.js"
      },
      "engines": {
        "node": ">=16.20.2"
      }
    },
    "node_modules/tsc-alias/node_modules/commander": {
      "version": "9.5.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-9.5.0.tgz",
      "integrity": "sha512-KRs7WVDKg86PWiuAqhDrAQnTXZKraVcCc6vFdL14qrZ/DcWwuRo7VoiYXalXO7S5GKpqYiVEwCbgFDfxNHKJBQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.20.0 || >=14"
      }
    },
    "node_modules/tsconfig": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/tsconfig/-/tsconfig-7.0.0.tgz",
      "integrity": "sha512-vZXmzPrL+EmC4T/4rVlT2jNVMWCi/O4DIiSj3UHg1OE5kCKbk4mfrXc6dZksLgRM/TZlKnousKH9bbTazUWRRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/strip-bom": "^3.0.0",
        "@types/strip-json-comments": "0.0.30",
        "strip-bom": "^3.0.0",
        "strip-json-comments": "^2.0.0"
      }
    },
    "node_modules/tsconfig-paths": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-4.2.0.tgz",
      "integrity": "sha512-NoZ4roiN7LnbKn9QqE1amc9DJfzvZXxF4xDavcOWt1BPkdx+m+0gJuPM+S0vCe7zTJMYUP0R8pO2XMr+Y8oLIg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json5": "^2.2.2",
        "minimist": "^1.2.6",
        "strip-bom": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/tsconfig-paths/node_modules/strip-bom": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
      "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/tsconfig/node_modules/strip-bom": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
      "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/tsconfig/node_modules/strip-json-comments": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-2.0.1.tgz",
      "integrity": "sha512-4gB8na07fecVVkOI6Rs4e7T6NOTki5EmL7TUduTs6bu3EdnSycntVJ4re8kgZA+wx9IueI2Y11bfbgwtzuE0KQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/tslib": {
      "version": "2.8.1",
      "resolved": "https://registry.npmjs.org/tslib/-/tslib-2.8.1.tgz",
      "integrity": "sha512-oJFu94HQb+KVduSUQL7wnpmqnfmLsOA/nAh6b6EH0wCEoK0/mPeXU6c3wKDV83MkOuHPRHtSXKKU99IBazS/2w==",
      "license": "0BSD"
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-detect": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/type-detect/-/type-detect-4.0.8.tgz",
      "integrity": "sha512-0fr/mIH1dlO+x7TlcMy+bIDqKPsw/70tVyeHW787goQjhmqaZe10uwLujubK9q9Lg6Fiho1KUKDYz0Z7k7g5/g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/type-is": {
      "version": "1.6.18",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-1.6.18.tgz",
      "integrity": "sha512-TkRKr9sUTxEH8MdfuCSP7VizJyzRNMjj2J2do2Jr3Kym598JVdEksuzPQCnlFPW4ky9Q+iA+ma9BGm06XQBy8g==",
      "license": "MIT",
      "dependencies": {
        "media-typer": "0.3.0",
        "mime-types": "~2.1.24"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/typed-array-buffer": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-buffer/-/typed-array-buffer-1.0.3.tgz",
      "integrity": "sha512-nAYYwfY3qnzX30IkA6AQZjVbtK6duGontcQm1WSG1MD94YLqK0515GNApXkoxKOWMusVssAHWLh9SeaoefYFGw==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "es-errors": "^1.3.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/typed-array-byte-length": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/typed-array-byte-length/-/typed-array-byte-length-1.0.3.tgz",
      "integrity": "sha512-BaXgOuIxz8n8pIq3e7Atg/7s+DpiYrxn4vdot3w9KbnBhcRQq6o3xemQdIfynqSeXeDrF32x+WvfzmOjPiY9lg==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.14"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-byte-offset": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/typed-array-byte-offset/-/typed-array-byte-offset-1.0.4.tgz",
      "integrity": "sha512-bTlAFB/FBYMcuX81gbL4OcpH5PmlFHqlCCpAl8AlEzMz5k53oNDvN8p1PNOWLEmI2x4orp3raOFB51tv9X+MFQ==",
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "for-each": "^0.3.3",
        "gopd": "^1.2.0",
        "has-proto": "^1.2.0",
        "is-typed-array": "^1.1.15",
        "reflect.getprototypeof": "^1.0.9"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typed-array-length": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/typed-array-length/-/typed-array-length-1.0.7.tgz",
      "integrity": "sha512-3KS2b+kL7fsuk/eJZ7EQdnEmQoaho/r6KUef7hxvltNA5DR8NAUM+8wJMbJyZ4G9/7i3v5zPBIMN5aybAh2/Jg==",
      "license": "MIT",
      "dependencies": {
        "call-bind": "^1.0.7",
        "for-each": "^0.3.3",
        "gopd": "^1.0.1",
        "is-typed-array": "^1.1.13",
        "possible-typed-array-names": "^1.0.0",
        "reflect.getprototypeof": "^1.0.6"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/typedarray": {
      "version": "0.0.6",
      "resolved": "https://registry.npmjs.org/typedarray/-/typedarray-0.0.6.tgz",
      "integrity": "sha512-/aCDEGatGvZ2BIk+HmLf4ifCJFwvKFNb9/JeZPMulfgFracn9QFcAf5GO8B/mweUjSoblS5In0cWhqpfs/5PQA==",
      "license": "MIT"
    },
    "node_modules/typescript": {
      "version": "5.9.2",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.2.tgz",
      "integrity": "sha512-CWBzXQrc/qOkhidw1OzBTQuYRbfyxDXJMVJ1XNwUHGROVmuaeiEm3OslpZ1RV96d7SKKjZKrSJu3+t/xlw3R9A==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/uglify-js": {
      "version": "3.19.3",
      "resolved": "https://registry.npmjs.org/uglify-js/-/uglify-js-3.19.3.tgz",
      "integrity": "sha512-v3Xu+yuwBXisp6QYTcH4UbH+xYJXqnq2m/LtQVWKWzYc1iehYnLixoQDN9FH6/j9/oybfd6W9Ghwkl8+UMKTKQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "optional": true,
      "bin": {
        "uglifyjs": "bin/uglifyjs"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/unbox-primitive": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/unbox-primitive/-/unbox-primitive-1.1.0.tgz",
      "integrity": "sha512-nWJ91DjeOkej/TA8pXQ3myruKpKEYgqvpw9lz4OPHj/NWFNluYrjbz9j01CJ8yKQd2g4jFoOkINCTW2I5LEEyw==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.3",
        "has-bigints": "^1.0.2",
        "has-symbols": "^1.1.0",
        "which-boxed-primitive": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/undefsafe": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/undefsafe/-/undefsafe-2.0.5.tgz",
      "integrity": "sha512-WxONCrssBM8TSPRqN5EmsjVrsv4A8X12J4ArBiiayv3DyyG3ZlIg6yysuuSYdZsVz3TKcTg2fd//Ujd4CHV1iA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "license": "MIT"
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.3.tgz",
      "integrity": "sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "license": "MIT"
    },
    "node_modules/utils-merge": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/utils-merge/-/utils-merge-1.0.1.tgz",
      "integrity": "sha512-pMZTvIkT1d+TFGvDOqodOclx0QWkkgi6Tdoa8gC8ffGAAqz9pzPTZWAybbsHHoED/ztMtkv/VoYTYyShUn81hA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/v8-compile-cache-lib": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/v8-compile-cache-lib/-/v8-compile-cache-lib-3.0.1.tgz",
      "integrity": "sha512-wa7YjyUGfNZngI/vtK0UHAN+lgDCxBPCylVXGp0zu59Fz5aiGtNXaq3DhIov063MorB+VfufLh3JlF2KdTK3xg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/v8-to-istanbul": {
      "version": "9.3.0",
      "resolved": "https://registry.npmjs.org/v8-to-istanbul/-/v8-to-istanbul-9.3.0.tgz",
      "integrity": "sha512-kiGUalWN+rgBJ/1OHZsBtU4rXZOfj/7rKQxULKlIzwzQSvMJUUNgPwJEEh7gU6xEVxC0ahoOBvN2YI8GH6FNgA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@jridgewell/trace-mapping": "^0.3.12",
        "@types/istanbul-lib-coverage": "^2.0.1",
        "convert-source-map": "^2.0.0"
      },
      "engines": {
        "node": ">=10.12.0"
      }
    },
    "node_modules/validator": {
      "version": "13.12.0",
      "resolved": "https://registry.npmjs.org/validator/-/validator-13.12.0.tgz",
      "integrity": "sha512-c1Q0mCiPlgdTVVVIJIrBuxNicYE+t/7oKeI9MWLj3fh/uq2Pxh/3eeWbVZ4OcGW1TUf53At0njHw5SMdA3tmMg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/walker": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/walker/-/walker-1.0.8.tgz",
      "integrity": "sha512-ts/8E8l5b7kY0vlWLewOkDXMmPdLcVV4GmOQLyxuSswIJsweeFZtAsMF7k1Nszz+TYBQrlYRmzOnr398y1JemQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "makeerror": "1.0.12"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-7.0.0.tgz",
      "integrity": "sha512-VwddBukDzu71offAQR975unBIGqfKZpM+8ZX6ySk8nYhVoo5CYaZyzt3YBvYtRtO+aoGlqxPg/B87NGVZ/fu6g==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/whatwg-url": {
      "version": "14.2.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-14.2.0.tgz",
      "integrity": "sha512-De72GdQZzNTUBBChsXueQUnPKDkg/5A5zp7pFDuQAj5UFoENpiACU0wlCvzpAGnTkj++ihpKwKyYewn/XNUbKw==",
      "license": "MIT",
      "dependencies": {
        "tr46": "^5.1.0",
        "webidl-conversions": "^7.0.0"
      },
      "engines": {
        "node": ">=18"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/which-boxed-primitive": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/which-boxed-primitive/-/which-boxed-primitive-1.1.1.tgz",
      "integrity": "sha512-TbX3mj8n0odCBFVlY8AxkqcHASw3L60jIuF8jFP78az3C2YhmGvqbHBpAjTRH2/xqYunrJ9g1jSyjCjpoWzIAA==",
      "license": "MIT",
      "dependencies": {
        "is-bigint": "^1.1.0",
        "is-boolean-object": "^1.2.1",
        "is-number-object": "^1.1.1",
        "is-string": "^1.1.1",
        "is-symbol": "^1.1.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-builtin-type": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/which-builtin-type/-/which-builtin-type-1.2.1.tgz",
      "integrity": "sha512-6iBczoX+kDQ7a3+YJBnh3T+KZRxM/iYNPXicqk66/Qfm1b93iu+yOImkg0zHbj5LNOcNv1TEADiZ0xa34B4q6Q==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "function.prototype.name": "^1.1.6",
        "has-tostringtag": "^1.0.2",
        "is-async-function": "^2.0.0",
        "is-date-object": "^1.1.0",
        "is-finalizationregistry": "^1.1.0",
        "is-generator-function": "^1.0.10",
        "is-regex": "^1.2.1",
        "is-weakref": "^1.0.2",
        "isarray": "^2.0.5",
        "which-boxed-primitive": "^1.1.0",
        "which-collection": "^1.0.2",
        "which-typed-array": "^1.1.16"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-builtin-type/node_modules/isarray": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-2.0.5.tgz",
      "integrity": "sha512-xHjhDr3cNBK0BzdUJSPXZntQUx/mwMS5Rw4A7lPJ90XGAO6ISP/ePDNuo0vhqOZU+UD5JoodwCAAoZQd3FeAKw==",
      "license": "MIT"
    },
    "node_modules/which-collection": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/which-collection/-/which-collection-1.0.2.tgz",
      "integrity": "sha512-K4jVyjnBdgvc86Y6BkaLZEN933SwYOuBFkdmBu9ZfkcAbdVbpITnDmjvZ/aQjRXQrv5EPkTnD1s39GiiqbngCw==",
      "license": "MIT",
      "dependencies": {
        "is-map": "^2.0.3",
        "is-set": "^2.0.3",
        "is-weakmap": "^2.0.2",
        "is-weakset": "^2.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/which-typed-array": {
      "version": "1.1.19",
      "resolved": "https://registry.npmjs.org/which-typed-array/-/which-typed-array-1.1.19.tgz",
      "integrity": "sha512-rEvr90Bck4WZt9HHFC4DJMsjvu7x+r6bImz0/BrbWb7A2djJ8hnZMrWnHo9F8ssv0OMErasDhftrfROTyqSDrw==",
      "license": "MIT",
      "dependencies": {
        "available-typed-arrays": "^1.0.7",
        "call-bind": "^1.0.8",
        "call-bound": "^1.0.4",
        "for-each": "^0.3.5",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-tostringtag": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/winston": {
      "version": "3.17.0",
      "resolved": "https://registry.npmjs.org/winston/-/winston-3.17.0.tgz",
      "integrity": "sha512-DLiFIXYC5fMPxaRg832S6F5mJYvePtmO5G9v9IgUFPhXm9/GkXarH/TUrBAVzhTCzAj9anE/+GjrgXp/54nOgw==",
      "license": "MIT",
      "dependencies": {
        "@colors/colors": "^1.6.0",
        "@dabh/diagnostics": "^2.0.2",
        "async": "^3.2.3",
        "is-stream": "^2.0.0",
        "logform": "^2.7.0",
        "one-time": "^1.0.0",
        "readable-stream": "^3.4.0",
        "safe-stable-stringify": "^2.3.1",
        "stack-trace": "0.0.x",
        "triple-beam": "^1.3.0",
        "winston-transport": "^4.9.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/winston-transport": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/winston-transport/-/winston-transport-4.9.0.tgz",
      "integrity": "sha512-8drMJ4rkgaPo1Me4zD/3WLfI/zPdA9o2IipKODunnGDcuqbHwjsbB79ylv04LCGGzU0xQ6vTznOMpQGaLhhm6A==",
      "license": "MIT",
      "dependencies": {
        "logform": "^2.7.0",
        "readable-stream": "^3.6.2",
        "triple-beam": "^1.3.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/winston-transport/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/winston/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/wmf": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wmf/-/wmf-1.0.2.tgz",
      "integrity": "sha512-/p9K7bEh0Dj6WbXg4JG0xvLQmIadrner1bi45VMJTfnbVHsc7yIajZyoSoK60/dtVBs12Fm6WkUI5/3WAVsNMw==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/word": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/word/-/word-0.3.0.tgz",
      "integrity": "sha512-OELeY0Q61OXpdUfTp+oweA/vtLVg5VDOXh+3he3PNzLGG/y0oylSOC1xRVj0+l4vQ3tj/bB1HVHv1ocXkQceFA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wordwrap": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/wordwrap/-/wordwrap-1.0.0.tgz",
      "integrity": "sha512-gvVzJFlPycKc5dZN4yPkP8w7Dc37BtP1yczEneOb4uq34pXZcvrtRTmWV8W+Ume+XCxKgbjM+nevkyFPMybd4Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/write-file-atomic": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/write-file-atomic/-/write-file-atomic-4.0.2.tgz",
      "integrity": "sha512-7KxauUdBmSdWnmpaGFg+ppNjKF8uNLry8LyzjauQDOVONfFLNKrKvQOxZ/VuTIcS/gge/YNahf5RIIQWTSarlg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "imurmurhash": "^0.1.4",
        "signal-exit": "^3.0.7"
      },
      "engines": {
        "node": "^12.13.0 || ^14.15.0 || >=16.0.0"
      }
    },
    "node_modules/wsl-utils": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/wsl-utils/-/wsl-utils-0.1.0.tgz",
      "integrity": "sha512-h3Fbisa2nKGPxCpm89Hk33lBLsnaGBvctQopaBSOW/uIs6FTe1ATyAnKFJrzVs9vpGdsTe73WF3V4lIsk4Gacw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-wsl": "^3.1.0"
      },
      "engines": {
        "node": ">=18"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/xlsx": {
      "version": "0.18.5",
      "resolved": "https://registry.npmjs.org/xlsx/-/xlsx-0.18.5.tgz",
      "integrity": "sha512-dmg3LCjBPHZnQp5/F/+nnTa+miPJxUXB6vtk42YjBBKayDNagxGEeIdWApkYPOf3Z3pm3k62Knjzp7lMeTEtFQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "adler-32": "~1.3.0",
        "cfb": "~1.2.1",
        "codepage": "~1.15.0",
        "crc-32": "~1.2.1",
        "ssf": "~0.11.2",
        "wmf": "~1.0.1",
        "word": "~0.3.0"
      },
      "bin": {
        "xlsx": "bin/xlsx.njs"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/xtend": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/xtend/-/xtend-4.0.2.tgz",
      "integrity": "sha512-LKYU1iAXJXUgAXn9URjiu+MWhyUXHsvfp7mcuYm9dSUKK0/CjtrUwFAxD82/mCWbtLsGjFIad0wIsod4zrTAEQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4"
      }
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yn": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yn/-/yn-3.1.1.tgz",
      "integrity": "sha512-Ux4ygGWsu2c7isFWe8Yu1YluJmqVhxqK2cLXNQA5AcC3QfbGNpM7fu0Y8b/z16pXLnFxZYvWhd3fhBY9DLmC6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "4.1.5",
      "resolved": "https://registry.npmjs.org/zod/-/zod-4.1.5.tgz",
      "integrity": "sha512-rcUUZqlLJgBC33IT3PNMgsCq6TzLQEG/Ei/KTCU0PedSWRMAXoOUN+4t/0H+Q8bdnLPdqUYnvboJT0bn/229qg==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    }
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\app.ts
--------------------------------------------------------------------------------
// backend/data-service/src/app.ts
import compression from 'compression';
import cors from 'cors';
import express, { type Express } from 'express';
import helmet from 'helmet';
import {
  cleanupMiddleware,
  limitRequestSize,
  requestTimeout,
  sanitizeInput,
  securityHeaders,
} from './middleware/audit';
import { DatabaseService } from './services/DatabaseService';
import { logger } from './utils/logger';

// Routes
import assetRoutes from './routes/assets';
import dataSourceRoutes from './routes/dataSources';
import governanceRoutes from './routes/governance';
import lineageRoutes from './routes/lineage';
import qualityRoutes from './routes/quality';
import requestsRoutes from './routes/requests';
import statsRoutes from './routes/stats';

/* ──────────────────────────────────────────────────────────────────────────
 * Helpers
 * ────────────────────────────────────────────────────────────────────────── */

type AppError = Error & { code?: string; statusCode?: number };
const toAppError = (err: unknown): AppError => {
  if (err instanceof Error) return err as AppError;
  try {
    return new Error(typeof err === 'string' ? err : JSON.stringify(err)) as AppError;
  } catch {
    return new Error(String(err)) as AppError;
  }
};

const healthToBoolean = (v: unknown): boolean => {
  if (typeof v === 'boolean') return v;
  if (v && typeof v === 'object') {
    const anyV = v as any;
    if (typeof anyV.ok === 'boolean') return anyV.ok;
    if (typeof anyV.healthy === 'boolean') return anyV.healthy;
    if (typeof anyV.status === 'string') {
      const s = anyV.status.toLowerCase();
      return s === 'healthy' || s === 'ok' || s === 'ready';
    }
  }
  return false;
};

/* ──────────────────────────────────────────────────────────────────────────
 * Default-exported App class (matches server.ts expectations)
 * ────────────────────────────────────────────────────────────────────────── */

export default class App {
  private readonly app: Express;
  private readonly db: DatabaseService;

  constructor() {
    this.app = express();
    this.db = new DatabaseService();
    this.configure();
    this.registerRoutes();
    this.registerGlobalErrorHandler();
  }

  /** server.ts calls this to get the Express instance and start listening */
  public getExpressApp(): Express {
    return this.app;
  }

  /** server.ts calls this async init after listen (migrations, warmups, etc.) */
  public async initialize(): Promise<void> {
    // Run migrations & any warm-up tasks
    await this.db.runMigrations();
    logger.info('[data-service] initialize complete');
  }

  /** server.ts calls this during shutdown */
  public async cleanup(): Promise<void> {
    try {
      await this.db.close();
      await cleanupMiddleware();
      logger.info('[data-service] cleanup completed');
    } catch (e) {
      const err = toAppError(e);
      logger.error('[data-service] cleanup error', { message: err.message, stack: err.stack });
    }
  }

  /* ────────────────────────────────────────────────────────────────────────
   * Private configuration & routes
   * ──────────────────────────────────────────────────────────────────────── */

  private configure(): void {
    // Trust proxy for accurate IP addresses behind load balancers
    this.app.set('trust proxy', 1);

    // Security middleware
    this.app.use(
      helmet({
        contentSecurityPolicy: {
          directives: {
            defaultSrc: ["'self'"],
            styleSrc: ["'self'", "'unsafe-inline'"],
            scriptSrc: ["'self'"],
            imgSrc: ["'self'", 'data:', 'https:'],
            connectSrc: ["'self'"],
            fontSrc: ["'self'"],
            objectSrc: ["'none'"],
            mediaSrc: ["'self'"],
            frameSrc: ["'none'"],
          },
        },
        crossOriginEmbedderPolicy: false,
      })
    );

    // CORS configuration
    this.app.use(
      cors({
        origin: (origin, callback) => {
          const allowedOrigins = (process.env.CORS_ORIGIN || '')
            .split(',')
            .map((o) => o.trim())
            .filter(Boolean);

          // Allow requests with no origin (mobile apps, curl, etc.)
          if (!origin) return callback(null, true);

          if (allowedOrigins.includes(origin) || process.env.NODE_ENV === 'development') {
            callback(null, true);
          } else {
            logger.warn('CORS origin rejected', { origin });
            callback(new Error('Not allowed by CORS'));
          }
        },
        credentials: true,
        methods: ['GET', 'POST', 'PUT', 'DELETE', 'OPTIONS'],
        allowedHeaders: ['Content-Type', 'Authorization', 'X-Requested-With'],
        maxAge: 86_400,
      })
    );

    // Compression
    this.app.use(
      compression({
        filter: (req, res) => {
          if (req.headers['x-no-compression']) return false;
          return compression.filter(req, res);
        },
        threshold: 1024,
      })
    );

    // Request parsing with size limits
    this.app.use(
      express.json({
        limit: process.env.MAX_REQUEST_SIZE || '10mb',
        strict: true,
      })
    );
    this.app.use(
      express.urlencoded({
        extended: true,
        limit: process.env.MAX_REQUEST_SIZE || '10mb',
      })
    );

    // Custom security middleware
    this.app.use(securityHeaders);
    this.app.use(sanitizeInput);
    this.app.use(requestTimeout(parseInt(process.env.REQUEST_TIMEOUT_MS || '30000', 10)));
    this.app.use(limitRequestSize(parseInt(process.env.MAX_REQUEST_SIZE || '10485760', 10)));

    // Request logging
    this.app.use((req, res, next) => {
      const start = Date.now();
      res.on('finish', () => {
        const duration = Date.now() - start;
        logger.info('HTTP Request', {
          method: req.method,
          path: req.path,
          statusCode: res.statusCode,
          duration,
          ip: req.ip,
          userAgent: req.get('User-Agent'),
        });
      });
      next();
    });
  }

  private registerRoutes(): void {
    // Health check
    this.app.get('/health', async (_req, res) => {
      try {
        const dbHealthRaw = (await this.db.healthCheck()) as unknown;
        const dbHealthy = healthToBoolean(dbHealthRaw);

        res.json({
          status: 'healthy',
          service: 'cwic-data-service',
          version: process.env.APP_VERSION || '1.0.0',
          environment: process.env.NODE_ENV || 'development',
          timestamp: new Date().toISOString(),
          uptime: process.uptime(),
          memory: process.memoryUsage(),
          database: dbHealthRaw, // raw payload if object
          databaseHealthy: dbHealthy, // normalized boolean
        });
      } catch (error) {
        const err = toAppError(error);
        logger.error('Health check failed', { error: err.message });
        res.status(503).json({
          status: 'unhealthy',
          service: 'cwic-data-service',
          error: err.message,
          timestamp: new Date().toISOString(),
        });
      }
    });

    // Readiness check
    this.app.get('/ready', async (_req, res) => {
      try {
        const maybe = (this.db as any).isReady?.() ?? this.db.healthCheck();
        const raw = await Promise.resolve(maybe as unknown);
        const isReady = healthToBoolean(raw);
        if (!isReady) throw new Error('Database not ready');

        res.json({ status: 'ready', timestamp: new Date().toISOString() });
      } catch (error) {
        const err = toAppError(error);
        res.status(503).json({
          status: 'not ready',
          error: err.message,
          timestamp: new Date().toISOString(),
        });
      }
    });

    // Mount routes with both /api prefix and without (gateway flexibility)
    const routes = [
      { path: '/data-sources', router: dataSourceRoutes },
      { path: '/assets', router: assetRoutes },
      { path: '/quality', router: qualityRoutes },
      { path: '/governance', router: governanceRoutes },
      { path: '/requests', router: requestsRoutes },
      { path: '/lineage', router: lineageRoutes },
      { path: '/stats', router: statsRoutes },
    ];

    routes.forEach(({ path, router }) => {
      this.app.use(`/api${path}`, router);
      this.app.use(path, router);
    });

    // 404 handler
    this.app.use('*', (req, res) => {
      logger.warn('Route not found', {
        method: req.method,
        path: req.originalUrl,
        ip: req.ip,
      });

      res.status(404).json({
        success: false,
        error: {
          code: 'NOT_FOUND',
          message: `Route ${req.method} ${req.originalUrl} not found`,
          timestamp: new Date().toISOString(),
        },
      });
    });
  }

  private registerGlobalErrorHandler(): void {
    // Global error handler
    this.app.use((error: unknown, req: express.Request, res: express.Response, _next: express.NextFunction) => {
      const err = toAppError(error);
      const errorId = Math.random().toString(36).substring(7);

      logger.error('Unhandled application error', {
        errorId,
        message: err.message,
        stack: err.stack,
        path: req.path,
        method: req.method,
        ip: req.ip,
      });

      let statusCode = 500;
      let errorCode = 'INTERNAL_ERROR';
      let message = 'An unexpected error occurred';

      if (err.name === 'ValidationError') {
        statusCode = 400;
        errorCode = 'VALIDATION_ERROR';
        message = err.message;
      } else if ((err as any).code === '23505') {
        statusCode = 409;
        errorCode = 'DUPLICATE_ENTRY';
        message = 'A record with this information already exists';
      } else if ((err as any).code === '23503') {
        statusCode = 400;
        errorCode = 'INVALID_REFERENCE';
        message = 'Referenced record does not exist';
      } else if ((err as any).statusCode) {
        statusCode = (err as any).statusCode;
        errorCode = (err as any).code || errorCode;
        message = err.message || message;
      }

      if (statusCode >= 500 && process.env.NODE_ENV === 'production') {
        message = 'Internal server error';
      }

      res.status(statusCode).json({
        success: false,
        error: {
          code: errorCode,
          message,
          errorId,
          timestamp: new Date().toISOString(),
        },
      });
    });

    // Process-level guards (logging only; actual shutdown handled in server.ts)
    process.on('uncaughtException', (error: unknown) => {
      const err = toAppError(error);
      logger.error('Uncaught exception', { error: err.message, stack: err.stack });
    });

    process.on('unhandledRejection', (reason: unknown, promise) => {
      const msg =
        reason instanceof Error
          ? reason.message
          : typeof reason === 'string'
          ? reason
          : (() => {
              try {
                return JSON.stringify(reason);
              } catch {
                return String(reason);
              }
            })();
      logger.error('Unhandled promise rejection', { reason: msg, promise });
    });
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\config\database.ts
--------------------------------------------------------------------------------
// src/config/database.ts
import { Pool, PoolConfig, QueryResult, QueryResultRow } from 'pg';

/**
 * Minimal env parsing with sane defaults.
 * You can swap this for zod if you want strict validation.
 */
const {
  DATABASE_URL,
  PG_MAX = '10',
  PG_IDLE_TIMEOUT_MS = '30000',
  PG_CONN_TIMEOUT_MS = '5000',
  PG_SSL = 'false',
} = process.env;

if (!DATABASE_URL) {
  // Fail fast in production; stay permissive in dev if you prefer
  console.warn('[db] DATABASE_URL is not set. Using default localhost URL may be required for local dev.');
}

const poolConfig: PoolConfig = {
  connectionString: DATABASE_URL,
  max: Number(PG_MAX) || 10,
  idleTimeoutMillis: Number(PG_IDLE_TIMEOUT_MS) || 30_000,
  connectionTimeoutMillis: Number(PG_CONN_TIMEOUT_MS) || 5_000,
  ssl: String(PG_SSL).toLowerCase() === 'true' ? { rejectUnauthorized: false } : undefined,
};

/**
 * Shared Pool instance.
 * - Listeners log errors so the process doesn't crash silently.
 * - Graceful shutdown is provided via closePool().
 */
export const pool = new Pool(poolConfig);

pool.on('error', (err) => {
  console.error('[db] Unexpected error on idle client:', err);
});

/** Generic helpers â€” strongly typed results */
export async function query<R extends QueryResultRow = QueryResultRow>(
  text: string,
  params?: any[],
): Promise<R[]> {
  const res: QueryResult<R> = await pool.query<R>(text, params);
  return res.rows;
}

export async function queryOne<R extends QueryResultRow = QueryResultRow>(
  text: string,
  params?: any[],
): Promise<R | null> {
  const res: QueryResult<R> = await pool.query<R>(text, params);
  return res.rows[0] ?? null;
}

/**
 * Execute a function within a transaction.
 * Automatically commits on success and rolls back on error.
 */
export async function withTransaction<T>(fn: (client: import('pg').PoolClient) => Promise<T>): Promise<T> {
  const client = await pool.connect();
  try {
    await client.query('BEGIN');
    const result = await fn(client);
    await client.query('COMMIT');
    return result;
  } catch (err) {
    try {
      await client.query('ROLLBACK');
    } catch (rollbackErr) {
      console.error('[db] Rollback failed:', rollbackErr);
    }
    throw err;
  } finally {
    client.release();
  }
}

/** Cheap health check for liveness/readiness probes */
export async function healthCheck(): Promise<boolean> {
  try {
    const res = await pool.query('SELECT 1 as ok');
    return res.rows?.[0]?.ok === 1;
  } catch {
    return false;
  }
}

/** Graceful shutdown helper for process signals */
export async function closePool(): Promise<void> {
  await pool.end();
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\config\env.ts
--------------------------------------------------------------------------------
// backend/data-service/src/config/env.ts
import dotenv from 'dotenv';
import path from 'path';
import { URL } from 'url';

dotenv.config({ path: path.resolve(process.cwd(), '.env') });

export interface Config {
  server: {
    port: number;
    host: string;
    env: string;
    corsOrigin: string | string[];
    serviceName: string;
  };
  database: {
    url: string;
    host: string;
    port: number;
    name: string;
    user: string;
    password: string;
    ssl: boolean;
    poolMax: number;
    poolMin: number;
    idleTimeout: number;
    connectionTimeout: number;
  };
  security: {
    jwtSecret: string;
    jwtExpiresIn: string;
    helmet: {
      contentSecurityPolicy: boolean;
      crossOriginEmbedderPolicy: boolean;
    };
  };
  monitoring: {
    enableMetrics: boolean;
    enableHealthCheck: boolean;
  };
  logging: {
    level: string;
    enableFileLogging: boolean;
  };
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

function coerceBool(v: unknown, def = false): boolean {
  const s = String(v ?? '').trim().toLowerCase();
  if (!s) return def;
  return s === '1' || s === 'true' || s === 'yes' || s === 'on';
}

function coerceInt(v: unknown, def: number): number {
  const n = Number(v);
  return Number.isFinite(n) ? n : def;
}

/** Accept CSV or leave string; if empty, default to dev origins */
function resolveCorsOrigin(raw?: string): string | string[] {
  if (!raw) return ['http://localhost:5173', 'http://localhost:3000', 'http://localhost:8000'];
  const parts = raw.split(',').map((o) => o.trim()).filter(Boolean);
  return parts.length <= 1 ? (parts[0] ?? '') : parts;
}

/** Strip accidental "DATABASE_URL=" prefix and surrounding quotes */
function normalizeDatabaseUrl(input?: string): string {
  let v = (input ?? '').trim();
  if (!v) return '';
  if (/^DATABASE_URL=/i.test(v)) v = v.replace(/^DATABASE_URL=/i, '').trim();
  if ((v.startsWith('"') && v.endsWith('"')) || (v.startsWith("'") && v.endsWith("'"))) {
    v = v.slice(1, -1);
  }
  return v;
}

/** Parse PostgreSQL/MySQL/MSSQL-style URL */
function parseDatabaseUrl(url: string): {
  host: string;
  port: number;
  database: string;
  user: string;
  password: string;
} {
  const normalized = normalizeDatabaseUrl(url);
  try {
    const u = new URL(normalized);
    return {
      host: u.hostname,
      port: parseInt(u.port) || 5432,
      database: u.pathname.replace(/^\//, ''),
      user: decodeURIComponent(u.username),
      password: decodeURIComponent(u.password),
    };
  } catch {
    throw new Error(`Invalid DATABASE_URL format: ${normalized}`);
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ load & build config â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

const rawDbUrl = process.env.DATABASE_URL || 'postgresql://cwic_user:cwic_secure_pass@localhost:5432/cwic_platform';
const databaseUrl = normalizeDatabaseUrl(rawDbUrl);
const parsedDb = parseDatabaseUrl(databaseUrl);

export const config: Config = {
  server: {
    port: coerceInt(process.env.PORT, 3002),
    host: process.env.HOST || '0.0.0.0',
    env: process.env.NODE_ENV || 'development',
    corsOrigin: resolveCorsOrigin(process.env.CORS_ORIGIN),
    serviceName: process.env.SERVICE_NAME || 'data-service',
  },
  database: {
    url: databaseUrl,
    host: parsedDb.host,
    port: parsedDb.port,
    name: parsedDb.database,
    user: parsedDb.user,
    password: parsedDb.password,
    ssl: coerceBool(process.env.DB_SSL, process.env.NODE_ENV === 'production'),
    poolMax: coerceInt(process.env.DB_POOL_MAX, 20),
    poolMin: coerceInt(process.env.DB_POOL_MIN, 2),
    idleTimeout: coerceInt(process.env.DB_IDLE_TIMEOUT, 30_000),
    connectionTimeout: coerceInt(process.env.DB_CONNECTION_TIMEOUT, 10_000),
  },
  security: {
    jwtSecret: process.env.JWT_SECRET || 'your-super-secret-jwt-key-change-this-in-production',
    jwtExpiresIn: process.env.JWT_EXPIRES_IN || '7d',
    helmet: {
      contentSecurityPolicy: process.env.NODE_ENV === 'production',
      crossOriginEmbedderPolicy: false,
    },
  },
  monitoring: {
    enableMetrics: coerceBool(process.env.ENABLE_METRICS, process.env.NODE_ENV === 'production'),
    enableHealthCheck: process.env.ENABLE_HEALTH_CHECK !== 'false',
  },
  logging: {
    level: process.env.LOG_LEVEL || (process.env.NODE_ENV === 'production' ? 'info' : 'debug'),
    enableFileLogging: coerceBool(process.env.ENABLE_FILE_LOGGING, process.env.NODE_ENV === 'production'),
  },
};

export const isProduction = config.server.env === 'production';

/** Small shim for modules that expect `env.JWT_SECRET` etc. */
export const env = {
  NODE_ENV: config.server.env,
  PORT: String(config.server.port),
  HOST: config.server.host,
  SERVICE_NAME: config.server.serviceName,
  JWT_SECRET: config.security.jwtSecret,
  JWT_EXPIRES_IN: config.security.jwtExpiresIn,
  DATABASE_URL: config.database.url,
  LOG_LEVEL: config.logging.level,
  CORS_ORIGIN: Array.isArray(config.server.corsOrigin)
    ? config.server.corsOrigin.join(',')
    : config.server.corsOrigin,
} as const;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ validation & logging â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export const validateConfig = (): void => {
  if (!config.database.url) throw new Error('DATABASE_URL environment variable is required');

  // Re-validate URL (throws with normalized string if bad)
  parseDatabaseUrl(config.database.url);

  // Ports
  if (config.server.port < 1 || config.server.port > 65535) {
    throw new Error('Server port must be between 1 and 65535');
  }
  if (config.database.port < 1 || config.database.port > 65535) {
    throw new Error('Database port must be between 1 and 65535');
  }

  // JWT secret length in prod
  if (isProduction && config.security.jwtSecret.length < 32) {
    throw new Error('JWT secret must be at least 32 characters long in production');
  }

  // Pool sizes
  if (config.database.poolMax < config.database.poolMin) {
    throw new Error('Database pool max must be greater than or equal to pool min');
  }

  // CORS origins are URLs if provided as strings; arrays can include plain origins
  const origins = Array.isArray(config.server.corsOrigin)
    ? config.server.corsOrigin
    : [config.server.corsOrigin];
  origins.forEach((origin) => {
    if (!origin) return;
    try {
      // Allow wildcard-like strings only if exactly "*"
      if (origin === '*') return;
      new URL(origin);
    } catch {
      throw new Error(`Invalid CORS_ORIGIN URL: ${origin}`);
    }
  });
};

export const logConfig = (): void => {
  console.log('ðŸ”§ Service Configuration:');
  console.log(`   Service: ${config.server.serviceName}`);
  console.log(`   Port: ${config.server.port}`);
  console.log(`   Host: ${config.server.host}`);
  console.log(`   Environment: ${config.server.env}`);
  console.log(
    `   CORS Origin: ${
      Array.isArray(config.server.corsOrigin) ? config.server.corsOrigin.join(', ') : config.server.corsOrigin
    }`
  );
  console.log(`   Database: ${config.database.host}:${config.database.port}/${config.database.name}`);
  console.log(`   Database User: ${config.database.user}`);
  console.log(`   SSL: ${config.database.ssl ? 'enabled' : 'disabled'}`);
  console.log(`   Pool Max: ${config.database.poolMax}`);
  console.log(`   Pool Min: ${config.database.poolMin}`);
  console.log(`   Metrics: ${config.monitoring.enableMetrics ? 'enabled' : 'disabled'}`);
  console.log(`   Log Level: ${config.logging.level}`);
  console.log('');
};



--------------------------------------------------------------------------------
FILE: backend\data-service\src\controllers\AssetController.ts
--------------------------------------------------------------------------------
// backend/data-service/src/controllers/AssetController.ts
import { Request, Response } from 'express';
import { AssetService } from '../services/AssetService';
import { logger, loggerUtils } from '../utils/logger';

export interface AssetRequest extends Request {
  user?: {
    id: string;
    email: string;
    role: string;
  };
}

export interface Column {
  name: string;
  type: string;
  nullable: boolean;
  primaryKey: boolean;
  foreignKey?: { table: string; column: string };
  description?: string;
  tags?: string[];
}

export interface Asset {
  id: string;
  name: string;
  type:
    | 'table'
    | 'view'
    | 'procedure'
    | 'function'
    | 'schema'
    | 'file'
    | 'api_endpoint'
    | 'stream'
    | 'model';
  dataSourceId: string;
  schemaName?: string;
  tableName?: string;
  description?: string;
  columns?: Column[];
  tags?: string[];
  status: 'active' | 'inactive' | 'deprecated';
  classification?: 'public' | 'internal' | 'confidential' | 'restricted';
  createdAt: Date;
  updatedAt: Date;
  metadata?: {
    rowCount?: number;
    size?: string;
    lastAccessed?: Date;
    sensitivity?: 'public' | 'internal' | 'confidential' | 'restricted';
  };
}

type LineageDirection = 'upstream' | 'downstream' | 'both';

type ListFilters = {
  search?: string;
  type?: string;
  dataSourceId?: string;
  status?: string;
  tags?: string[];
  sensitivity?: string;
};

type Pagination = { page: number; limit: number };

export class AssetController {
  private assetService: AssetService;

  constructor() {
    this.assetService = new AssetService();
  }

  /**
   * GET /api/assets
   */
  public getAllAssets = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const {
        page = '1',
        limit = '20',
        search,
        type,
        dataSourceId,
        status,
        tags,
        sensitivity,
      } = req.query;

      const filters: ListFilters = {
        search: typeof search === 'string' ? search : undefined,
        type: typeof type === 'string' ? type : undefined,
        dataSourceId: typeof dataSourceId === 'string' ? dataSourceId : undefined,
        status: typeof status === 'string' ? status : undefined,
        tags:
          typeof tags === 'string'
            ? tags
                .split(',')
                .map((s) => s.trim())
                .filter(Boolean)
            : undefined,
        sensitivity: typeof sensitivity === 'string' ? sensitivity : undefined,
      };

      const pagination: Pagination = {
        page: Number(page) || 1,
        limit: Number(limit) || 20,
      };

      const t0 = Date.now();
      const result = await this.assetService.getAssets(filters, pagination);
      const dt = Date.now() - t0;

      loggerUtils.logDbOperation('select', 'assets', dt, true);

      res.status(200).json({
        success: true,
        data: result.assets,
        pagination: {
          page: result.page,
          limit: result.limit,
          total: result.total,
          totalPages: result.totalPages,
        },
        meta: {
          processingTime: `${dt}ms`,
          filters,
        },
      });
    } catch (error) {
      logger.error('Error fetching assets:', error);
      res.status(500).json({
        success: false,
        error: 'FETCH_ASSETS_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * GET /api/assets/:id
   */
  public getAssetById = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;

      const t0 = Date.now();
      const asset = await this.assetService.getAssetById(id);
      const dt = Date.now() - t0;

      if (!asset) {
        res.status(404).json({ success: false, error: 'NOT_FOUND', message: 'Asset not found' });
        return;
      }

      loggerUtils.logDbOperation('select', 'assets', dt, true);

      res.status(200).json({
        success: true,
        data: asset,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error fetching asset:', error);
      res.status(500).json({
        success: false,
        error: 'FETCH_ASSET_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * GET /api/assets/:id/schema
   */
  public getAssetSchema = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;

      const t0 = Date.now();
      const schema = await this.assetService.getAssetSchema(id);
      const dt = Date.now() - t0;

      if (!schema) {
        res.status(404).json({ success: false, error: 'NOT_FOUND', message: 'Asset schema not found' });
        return;
      }

      res.status(200).json({
        success: true,
        data: schema,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error fetching asset schema:', error);
      res.status(500).json({
        success: false,
        error: 'FETCH_SCHEMA_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * GET /api/assets/:id/lineage
   */
  public getAssetLineage = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;
      const direction = (req.query.direction as LineageDirection) || 'both';

      const t0 = Date.now();
      const lineage = await this.assetService.getAssetLineage(id, direction);
      const dt = Date.now() - t0;

      res.status(200).json({
        success: true,
        data: lineage,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error fetching asset lineage:', error);
      res.status(500).json({
        success: false,
        error: 'FETCH_LINEAGE_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * GET /api/assets/:id/profile
   */
  public getAssetProfile = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;

      const t0 = Date.now();
      const profile = await this.assetService.getAssetProfile(id);
      const dt = Date.now() - t0;

      if (!profile) {
        res.status(404).json({
          success: false,
          error: 'NOT_FOUND',
          message: 'Asset profile not found',
        });
        return;
      }

      res.status(200).json({
        success: true,
        data: profile,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error fetching asset profile:', error);
      res.status(500).json({
        success: false,
        error: 'FETCH_PROFILE_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * POST /api/assets
   */
  public createAsset = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const assetData = req.body;

      const t0 = Date.now();
      const newAsset = await this.assetService.createAsset(assetData);
      const dt = Date.now() - t0;

      loggerUtils.logDbOperation('insert', 'assets', dt, true);
      logger.info(`Asset created: ${newAsset?.id}`, { userId: req.user?.id });

      res.status(201).json({
        success: true,
        data: newAsset,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error creating asset:', error);
      res.status(500).json({
        success: false,
        error: 'CREATE_ASSET_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * PUT /api/assets/:id
   */
  public updateAsset = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;
      const updateData = req.body;

      const t0 = Date.now();
      const updatedAsset = await this.assetService.updateAsset(id, updateData);
      const dt = Date.now() - t0;

      if (!updatedAsset) {
        res.status(404).json({ success: false, error: 'NOT_FOUND', message: 'Asset not found' });
        return;
      }

      loggerUtils.logDbOperation('update', 'assets', dt, true);
      logger.info(`Asset updated: ${id}`, { userId: req.user?.id });

      res.status(200).json({
        success: true,
        data: updatedAsset,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error updating asset:', error);
      res.status(500).json({
        success: false,
        error: 'UPDATE_ASSET_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * PUT /api/assets/:id/classification
   */
  public updateClassification = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;
      const { classification } = req.body as { classification: Asset['classification'] };

      const t0 = Date.now();
      const updated =
        typeof (this.assetService as any).updateClassification === 'function'
          ? await (this.assetService as any).updateClassification(id, { classification })
          : await this.assetService.updateAsset(id, { classification });
      const dt = Date.now() - t0;

      if (!updated) {
        res.status(404).json({ success: false, error: 'NOT_FOUND', message: 'Asset not found' });
        return;
      }

      loggerUtils.logDbOperation('update', 'assets', dt, true);

      res.status(200).json({
        success: true,
        data: updated,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error updating asset classification:', error);
      res.status(500).json({
        success: false,
        error: 'UPDATE_CLASSIFICATION_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * POST /api/assets/:id/tag
   */
  public addTags = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;
      const { tags } = req.body as { tags: string[] };

      if (!Array.isArray(tags)) {
        res
          .status(400)
          .json({ success: false, error: 'VALIDATION_ERROR', message: 'Tags must be an array' });
        return;
      }

      const t0 = Date.now();
      const result = await this.assetService.addTags(id, tags);
      const dt = Date.now() - t0;

      loggerUtils.logDbOperation('update', 'asset_tags', dt, true);

      res.status(200).json({
        success: true,
        data: result,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error adding tags:', error);
      res.status(500).json({
        success: false,
        error: 'ADD_TAGS_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * DELETE /api/assets/:id/tag
   */
  public removeTags = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;
      const { tags } = req.body as { tags: string[] };

      if (!Array.isArray(tags)) {
        res
          .status(400)
          .json({ success: false, error: 'VALIDATION_ERROR', message: 'Tags must be an array' });
        return;
      }

      const t0 = Date.now();
      const result = await this.assetService.removeTags(id, tags);
      const dt = Date.now() - t0;

      loggerUtils.logDbOperation('update', 'asset_tags', dt, true);

      res.status(200).json({
        success: true,
        data: result,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error removing tags:', error);
      res.status(500).json({
        success: false,
        error: 'REMOVE_TAGS_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * GET /api/assets/stats  (global)
   */
  public getAssetStats = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { period = '30d' } = req.query as { period?: string };

      const t0 = Date.now();
      // Prefer a dedicated overview method if it exists
      const stats =
        typeof (this.assetService as any).getOverviewStats === 'function'
          ? await (this.assetService as any).getOverviewStats(period)
          : await this.assetService.getAssets({}, { page: 1, limit: 1 }).then((r) => ({
              totalAssets: r.total,
            }));

      const dt = Date.now() - t0;

      res.status(200).json({
        success: true,
        data: stats,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error fetching asset stats:', error);
      res.status(500).json({
        success: false,
        error: 'FETCH_STATS_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * POST /api/assets/:id/scan
   */
  public scanAsset = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;
      const { type = 'full', force = false } = req.body as {
        type?: 'full' | 'incremental' | 'schema_only' | 'profile_only';
        force?: boolean;
      };

      const t0 = Date.now();
      const result =
        typeof (this.assetService as any).scanAsset === 'function'
          ? await (this.assetService as any).scanAsset(id, { type, force })
          : await (this.assetService as any).syncAsset(id, { type, force }); // cast to any to avoid arity/type mismatch
      const dt = Date.now() - t0;

      logger.info(`Asset scan triggered: ${id}`, { userId: req.user?.id, type, force, duration: `${dt}ms` });

      res.status(200).json({
        success: true,
        data: result,
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error scanning asset:', error);
      res.status(500).json({
        success: false,
        error: 'SCAN_ASSET_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * DELETE /api/assets/:id
   */
  public deleteAsset = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { id } = req.params;

      const t0 = Date.now();
      const deleted =
        typeof (this.assetService as any).deleteAsset === 'function'
          ? await (this.assetService as any).deleteAsset(id)
          : await this.assetService.updateAsset(id, { status: 'inactive' as Asset['status'] });
      const dt = Date.now() - t0;

      if (!deleted) {
        res.status(404).json({ success: false, error: 'NOT_FOUND', message: 'Asset not found' });
        return;
      }

      loggerUtils.logDbOperation('delete', 'assets', dt, true);

      res.status(200).json({
        success: true,
        data: { id, deleted: true },
        meta: { processingTime: `${dt}ms` },
      });
    } catch (error) {
      logger.error('Error deleting asset:', error);
      res.status(500).json({
        success: false,
        error: 'DELETE_ASSET_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };

  /**
   * GET /api/assets/search
   */
  public searchAssets = async (req: AssetRequest, res: Response): Promise<void> => {
    try {
      const { q, type, limit = '20', page = '1' } = req.query;

      // Ensure `search` is a string (service expects a required string)
      const searchTerm: string = typeof q === 'string' ? q : '';

      const filters: { search: string; type?: string } = {
        search: searchTerm,
        type: typeof type === 'string' ? type : undefined,
      };

      const pagination: Pagination = {
        page: Number(page) || 1,
        limit: Number(limit) || 20,
      };

      const t0 = Date.now();
      const result = await this.assetService.searchAssets(filters, pagination);
      const dt = Date.now() - t0;

      loggerUtils.logDbOperation('select', 'assets', dt, true);

      res.status(200).json({
        success: true,
        data: result.assets,
        pagination: {
          page: result.page,
          limit: result.limit,
          total: result.total,
          totalPages: result.totalPages,
        },
        meta: {
          processingTime: `${dt}ms`,
          query: filters.search,
        },
      });
    } catch (error) {
      logger.error('Error searching assets:', error);
      res.status(500).json({
        success: false,
        error: 'SEARCH_ASSETS_FAILED',
        message: error instanceof Error ? error.message : 'Unknown error',
      });
    }
  };
}

export default AssetController;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\controllers\DataSourceController.ts
--------------------------------------------------------------------------------
// backend/data-service/src/controllers/DataSourceController.ts
import { Request, Response } from 'express';
import { ConnectionTestService } from '../services/ConnectionTestService';
import { DataSourceService } from '../services/DataSourceService';
import { logger } from '../utils/logger';

import type {
  DataSource,
  DataSourceFilters,
  DataSourceStatus,
  DataSourceType,
} from '../models/DataSource';

type ReqWithUser = Request & { user?: { id?: string; email?: string; role?: string } };

const normalizeType = (t?: string): DataSourceType | undefined => {
  if (!t) return undefined;
  const x = String(t).toLowerCase();
  if (['azure_sql','azure-sql','sqlserver','sql-server'].includes(x)) return 'mssql' as DataSourceType;
  if (x === 'postgres') return 'postgresql' as DataSourceType;
  return x as DataSourceType;
};

const buildFilters = (q: Request['query']): DataSourceFilters => {
  const filters: DataSourceFilters = {};
  if (typeof q.status === 'string' && q.status.trim()) {
    filters.status = q.status.toLowerCase() as DataSourceStatus;
  }
  if (typeof q.type === 'string' && q.type.trim()) {
    filters.type = normalizeType(q.type) as DataSourceType;
  }
  if (typeof q.createdBy === 'string' && q.createdBy.trim()) {
    filters.createdBy = q.createdBy;
  }
  if (typeof q.search === 'string' && q.search.trim()) {
    filters.search = q.search.trim();
  }
  return filters;
};

const toInt = (v: unknown, def: number): number => {
  const n = Number(v);
  return Number.isFinite(n) && n > 0 ? n : def;
};

const allowedSortBy = new Set(['updatedAt','createdAt','name','status','type'] as const);
const normSortBy = (v: unknown): 'updatedAt'|'createdAt'|'name'|'status'|'type' =>
  allowedSortBy.has(String(v || '') as any) ? (String(v) as any) : 'updatedAt';
const normSortOrder = (v: unknown): 'asc'|'desc' =>
  String(v || '').toLowerCase() === 'asc' ? 'asc' : 'desc';

export class DataSourceController {
  private dataSourceService = new DataSourceService();
  private connectionTestService = new ConnectionTestService();

  getAllDataSources = async (req: Request, res: Response) => {
    try {
      const page = toInt(req.query.page, 1);
      const limit = toInt(req.query.limit, 20);
      const filters = buildFilters(req.query);
      const sortBy = normSortBy(req.query.sortBy);
      const sortOrder = normSortOrder(req.query.sortOrder);

      const result = await this.dataSourceService.getAllDataSources({
        page, limit, filters, sortBy, sortOrder,
      });

      res.json({
        success: true,
        data: result.dataSources,
        pagination: {
          page: result.page,
          limit: result.limit,
          total: result.total,
          totalPages: result.totalPages,
          sortBy, sortOrder,
        },
      });
    } catch (error) {
      logger.error('Error fetching data sources:', error);
      res.status(500).json({ success: false, error: { code: 'FETCH_ERROR', message: 'Failed to fetch data sources' } });
    }
  };

  getDataSourceById = async (req: Request, res: Response) => {
    try {
      const { id } = req.params;
      const ds = await this.dataSourceService.getDataSourceById(id);
      if (!ds) {
        res.status(404).json({ success: false, error: { code: 'NOT_FOUND', message: 'Data source not found' } });
        return;
      }
      res.json({ success: true, data: ds });
    } catch (error) {
      logger.error('Error fetching data source:', error);
      res.status(500).json({ success: false, error: { code: 'FETCH_ERROR', message: 'Failed to fetch data source' } });
    }
  };

  createDataSource = async (req: Request, res: Response) => {
    try {
      const payload = req.body;

      const err = this.validateDataSourceData(payload);
      if (err) {
        res.status(400).json({ success: false, error: { code: 'VALIDATION_ERROR', message: err } });
        return;
      }

      const test = await this.connectionTestService.testConnection(payload);
      if (!test.success) {
        res.status(400).json({
          success: false,
          error: { code: 'CONNECTION_FAILED', message: 'Failed to connect to data source', details: test.error },
        });
        return;
      }

      const userId = (req as ReqWithUser).user?.id ?? 'system';

      const created = await this.dataSourceService.createDataSource({
        ...payload,
        type: normalizeType(payload.type) ?? payload.type,
        status: 'connected',
        lastTestAt: new Date(),
        createdBy: userId,
      });

      res.status(201).json({ success: true, data: created });
    } catch (error) {
      logger.error('Error creating data source:', error);
      res.status(500).json({ success: false, error: { code: 'CREATE_ERROR', message: 'Failed to create data source' } });
    }
  };

  updateDataSource = async (req: Request, res: Response) => {
    try {
      const { id } = req.params;
      const patch = req.body;
      const userId = (req as ReqWithUser).user?.id ?? 'system';

      const updated = await this.dataSourceService.updateDataSource(id, {
        ...patch,
        ...(patch.type ? { type: normalizeType(patch.type) } : {}),
        updatedBy: userId,
        updatedAt: new Date(),
      });

      if (!updated) {
        res.status(404).json({ success: false, error: { code: 'NOT_FOUND', message: 'Data source not found' } });
        return;
      }
      res.json({ success: true, data: updated });
    } catch (error) {
      logger.error('Error updating data source:', error);
      res.status(500).json({ success: false, error: { code: 'UPDATE_ERROR', message: 'Failed to update data source' } });
    }
  };

  deleteDataSource = async (req: Request, res: Response) => {
    try {
      const { id } = req.params;
      const ok = await this.dataSourceService.deleteDataSource(id);
      if (!ok) {
        res.status(404).json({ success: false, error: { code: 'NOT_FOUND', message: 'Data source not found' } });
        return;
      }
      res.json({ success: true, message: 'Data source deleted successfully' });
    } catch (error) {
      logger.error('Error deleting data source:', error);
      res.status(500).json({ success: false, error: { code: 'DELETE_ERROR', message: 'Failed to delete data source' } });
    }
  };

  testConnection = async (req: Request, res: Response) => {
    try {
      const { id } = req.params;
      const ds = await this.dataSourceService.getDataSourceById(id);
      if (!ds) {
        res.status(404).json({ success: false, error: { code: 'NOT_FOUND', message: 'Data source not found' } });
        return;
      }

      const result = await this.connectionTestService.testConnection(ds);
      const patch: Partial<DataSource> = {
        lastTestAt: new Date(),
        status: (result.success ? 'connected' : 'error') as DataSourceStatus,
      };
      if (!result.success) patch.lastError = result.error || 'Connection test failed';

      await this.dataSourceService.updateDataSource(id, patch);

      res.json({
        success: true,
        data: {
          connectionStatus: result.success ? 'connected' : 'failed',
          responseTime: result.responseTime,
          details: result.details,
          error: result.error,
          testedAt: new Date(),
        },
      });
    } catch (error) {
      logger.error('Error testing connection:', error);
      res.status(500).json({ success: false, error: { code: 'TEST_ERROR', message: 'Failed to test connection' } });
    }
  };

  getHealthSummary = async (_req: Request, res: Response) => {
    try {
      const summary = await this.dataSourceService.getHealthSummary();
      res.json({ success: true, data: summary });
    } catch (error) {
      logger.error('Error fetching health summary:', error);
      res.status(500).json({ success: false, error: { code: 'HEALTH_ERROR', message: 'Failed to fetch health summary' } });
    }
  };

  getDataSourceSchema = async (req: Request, res: Response) => {
    try {
      const { id } = req.params;
      const schema = await this.dataSourceService.getDataSourceSchema(id);
      res.json({ success: true, data: schema });
    } catch (error) {
      logger.error('Error fetching schema:', error);
      res.status(500).json({ success: false, error: { code: 'SCHEMA_ERROR', message: 'Failed to fetch data source schema' } });
    }
  };

  syncDataSource = async (req: Request, res: Response) => {
    try {
      const { id } = req.params;
      const { force = false } = req.body ?? {};
      const result = await this.dataSourceService.syncDataSource(id, { force: !!force });
      res.json({ success: true, data: result });
    } catch (error) {
      logger.error('Error syncing data source:', error);
      res.status(500).json({ success: false, error: { code: 'SYNC_ERROR', message: 'Failed to sync data source' } });
    }
  };

  private validateDataSourceData(data: any): string | null {
  if (!data?.name) return 'Name is required';
  if (!data?.type) return 'Type is required';
  if (!data?.connectionConfig) return 'Connection configuration is required';

  const t = normalizeType(data.type);

  const hasConnStr = !!data.connectionConfig.connectionString;
  const hasHostDb  = !!(data.connectionConfig.host && data.connectionConfig.database);

  switch (t) {
    case 'postgresql':
    case 'mysql':
    case 'mssql':
    case 'oracle':
    case 'redshift':
      if (!hasConnStr && !hasHostDb) {
        return 'Provide either connectionString OR host + database for relational connections';
      }
      break;

    case 'mongodb':
      if (!hasConnStr && !data.connectionConfig.host) {
        return 'Provide connectionString or host for MongoDB';
      }
      break;

    case 's3':
      if (!data.connectionConfig.bucket) return 'Bucket is required for S3';
      break;

    case 'api':
      if (!data.connectionConfig.baseUrl) return 'Base URL is required for API connections';
      break;

    // other types: rely on connector-specific validation
  }

  return null;
}

}


--------------------------------------------------------------------------------
FILE: backend\data-service\src\controllers\GovernanceController.ts
--------------------------------------------------------------------------------
import { Request, Response } from 'express';
import { GovernanceService } from '../services/GovernanceService';

export class GovernanceController {
  private svc = new GovernanceService();

  listPolicies = async (req: Request, res: Response) => {
    const data = await this.svc.listPolicies(String(req.query.status || ''));
    res.json({ success: true, data });
  };

  createPolicy = async (req: Request, res: Response) => {
    const data = await this.svc.createPolicy(req.body, (req as any).user?.id);
    res.status(201).json({ success: true, data });
  };

  updatePolicy = async (req: Request, res: Response) => {
    const data = await this.svc.updatePolicy(req.params.id, req.body, (req as any).user?.id);
    if (!data) return res.status(404).json({ success: false, error: { code: 'NOT_FOUND' } });
    res.json({ success: true, data });
  };

  deletePolicy = async (req: Request, res: Response) => {
    const ok = await this.svc.deletePolicy(req.params.id);
    if (!ok) return res.status(404).json({ success: false, error: { code: 'NOT_FOUND' } });
    res.json({ success: true });
  };
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\controllers\LineageController.ts
--------------------------------------------------------------------------------
import { Request, Response } from 'express';
import { LineageService } from '../services/LineageService';

export class LineageController {
  private svc = new LineageService();
  graph = async (_req: Request, res: Response) => {
    const data = await this.svc.buildDemoGraph();
    res.json({ success: true, data });
  };
}


--------------------------------------------------------------------------------
FILE: backend\data-service\src\controllers\QualityController.ts
--------------------------------------------------------------------------------
// backend/data-service/src/controllers/QualityController.ts
import { NextFunction, Request, Response } from 'express';
import { z } from 'zod';
import { QualityService } from '../services/QualityService';
import { logger } from '../utils/logger';

// Custom error classes
class ValidationError extends Error {
  constructor(message: string, public details?: any) {
    super(message);
    this.name = 'ValidationError';
  }
}

class BusinessError extends Error {
  constructor(message: string, public code: string, public statusCode: number = 400) {
    super(message);
    this.name = 'BusinessError';
  }
}

// Request validation schemas
const ListRulesSchema = z.object({
  q: z.string().max(100).optional(),
  severity: z.enum(['low', 'medium', 'high', 'critical']).optional(),
  enabled: z.coerce.boolean().optional(),
  limit: z.coerce.number().min(1).max(100).default(50),
  offset: z.coerce.number().min(0).default(0),
});

const ExecuteRuleSchema = z.object({
  dataSourceId: z.string().uuid().optional(),
  timeout: z.coerce.number().min(1000).max(300000).default(30000),
});

const ListResultsSchema = z.object({
  ruleId: z.string().uuid().optional(),
  dataSourceId: z.string().uuid().optional(),
  status: z.enum(['passed', 'failed', 'error', 'skipped', 'timeout']).optional(),
  limit: z.coerce.number().min(1).max(100).default(50),
  offset: z.coerce.number().min(0).default(0),
});

const StatsSchema = z.object({
  timeframe: z.enum(['24h', '7d', '30d', '90d']).default('7d').optional(),
  groupBy: z.enum(['severity', 'status', 'data_source']).default('status').optional(),
});

export class QualityController {
  // allow DI for tests, default to real service
  constructor(private svc: QualityService = new QualityService()) {}

  listRules = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      const validatedQuery = ListRulesSchema.parse(req.query);
      const result = await this.svc.listRules(validatedQuery);
      const processingTime = Date.now() - startTime;

      logger.info('Quality rules listed', {
        userId: (req as any).user?.id,
        filters: validatedQuery,
        resultCount: result.rules.length,
        processingTimeMs: processingTime,
      });

      res.json({
        success: true,
        data: {
          rules: result.rules,
          pagination: {
            total: result.total,
            limit: validatedQuery.limit,
            offset: validatedQuery.offset,
            hasMore: validatedQuery.offset + validatedQuery.limit < result.total,
          },
        },
        meta: { processingTimeMs: processingTime, timestamp: new Date().toISOString() },
      });
    } catch (error) {
      next(this.handleError(error, 'listRules'));
    }
  };

  createRule = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      const userId = (req as any).user?.id;
      if (!userId) throw new BusinessError('Authentication required', 'AUTH_REQUIRED', 401);

      const rule = await this.svc.createRule(req.body, userId);
      const processingTime = Date.now() - startTime;

      logger.info('Quality rule created', { ruleId: rule.id, name: rule.name, createdBy: userId, processingTimeMs: processingTime });

      res.status(201).json({
        success: true,
        data: rule,
        meta: { processingTimeMs: processingTime, timestamp: new Date().toISOString() },
      });
    } catch (error) {
      next(this.handleError(error, 'createRule'));
    }
  };

  updateRule = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      const userId = (req as any).user?.id;
      const ruleId = req.params.id;
      if (!userId) throw new BusinessError('Authentication required', 'AUTH_REQUIRED', 401);
      if (!z.string().uuid().safeParse(ruleId).success) throw new ValidationError('Invalid rule ID format');

      const updated = await this.svc.updateRule(ruleId, req.body, userId);
      if (!updated) throw new BusinessError('Rule not found', 'RULE_NOT_FOUND', 404);

      const processingTime = Date.now() - startTime;

      logger.info('Quality rule updated', { ruleId, updatedBy: userId, processingTimeMs: processingTime });

      res.json({
        success: true,
        data: updated,
        meta: { processingTimeMs: processingTime, timestamp: new Date().toISOString() },
      });
    } catch (error) {
      next(this.handleError(error, 'updateRule'));
    }
  };

  deleteRule = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      const userId = (req as any).user?.id;
      const ruleId = req.params.id;
      if (!userId) throw new BusinessError('Authentication required', 'AUTH_REQUIRED', 401);
      if (!z.string().uuid().safeParse(ruleId).success) throw new ValidationError('Invalid rule ID format');

      const deleted = await this.svc.deleteRule(ruleId, userId);
      if (!deleted) throw new BusinessError('Rule not found', 'RULE_NOT_FOUND', 404);

      const processingTime = Date.now() - startTime;

      logger.info('Quality rule deleted', { ruleId, deletedBy: userId, processingTimeMs: processingTime });

      res.json({
        success: true,
        message: 'Rule successfully disabled',
        meta: { processingTimeMs: processingTime, timestamp: new Date().toISOString() },
      });
    } catch (error) {
      next(this.handleError(error, 'deleteRule'));
    }
  };

  listResults = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      const validatedQuery = ListResultsSchema.parse(req.query);
      const result = await this.svc.listResults(validatedQuery);
      const processingTime = Date.now() - startTime;

      logger.info('Quality results listed', {
        userId: (req as any).user?.id,
        filters: validatedQuery,
        resultCount: result.results.length,
        processingTimeMs: processingTime,
      });

      res.json({
        success: true,
        data: {
          results: result.results,
          pagination: {
            total: result.total,
            limit: validatedQuery.limit,
            offset: validatedQuery.offset,
            hasMore: validatedQuery.offset + validatedQuery.limit < result.total,
          },
        },
        meta: { processingTimeMs: processingTime, timestamp: new Date().toISOString() },
      });
    } catch (error) {
      next(this.handleError(error, 'listResults'));
    }
  };

  executeRule = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      const userId = (req as any).user?.id;
      const ruleId = req.params.id;

      if (!userId) throw new BusinessError('Authentication required', 'AUTH_REQUIRED', 401);
      if (!z.string().uuid().safeParse(ruleId).success) throw new ValidationError('Invalid rule ID format');

      const validatedBody = ExecuteRuleSchema.parse(req.body);

      const result = await this.svc.executeRule(ruleId, validatedBody.dataSourceId, {
        timeout: validatedBody.timeout,
        userId,
      });

      const processingTime = Date.now() - startTime;

      logger.info('Quality rule executed', {
        ruleId,
        dataSourceId: validatedBody.dataSourceId,
        status: result.status,
        executionTimeMs: result.execution_time_ms,
        executedBy: userId,
        processingTimeMs: processingTime,
      });

      res.json({
        success: true,
        data: result,
        meta: { processingTimeMs: processingTime, timestamp: new Date().toISOString() },
      });
    } catch (error) {
      next(this.handleError(error, 'executeRule'));
    }
  };

  getRule = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      const ruleId = req.params.id;
      if (!z.string().uuid().safeParse(ruleId).success) throw new ValidationError('Invalid rule ID format');

      const rule = await this.svc.getRule(ruleId);
      if (!rule) throw new BusinessError('Rule not found', 'RULE_NOT_FOUND', 404);

      const processingTime = Date.now() - startTime;

      res.json({
        success: true,
        data: rule,
        meta: { processingTimeMs: processingTime, timestamp: new Date().toISOString() },
      });
    } catch (error) {
      next(this.handleError(error, 'getRule'));
    }
  };

  // GET /api/quality/health
  healthCheck = async (_req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const startTime = Date.now();
      // Prefer a DB ping in the service if available
      const ok = (this.svc as any).healthCheck ? await (this.svc as any).healthCheck() : (await this.svc.listRules({ limit: 1 })).rules !== undefined;
      const processingTime = Date.now() - startTime;

      res.json({
        success: true,
        data: {
          status: ok ? 'healthy' : 'degraded',
          service: 'quality-service',
          timestamp: new Date().toISOString(),
          responseTimeMs: processingTime,
        },
      });
    } catch (error) {
      next(this.handleError(error, 'healthCheck'));
    }
  };

  // GET /api/quality/stats
  getQualityStats = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { timeframe = '7d', groupBy = 'status' } = StatsSchema.parse(req.query);
      // âœ… FIX: use this.svc, not this.service
      const stats = await this.svc.getStats({ timeframe, groupBy });
      res.json({ success: true, data: stats, meta: { timestamp: new Date().toISOString() } });
    } catch (error) {
      next(this.handleError(error, 'getQualityStats'));
    }
  };

  // POST /api/quality/rules/bulk/execute  (used by router)
  executeRulesBulk = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const userId = (req as any).user?.id;
      if (!userId) throw new BusinessError('Authentication required', 'AUTH_REQUIRED', 401);

      const body = z.object({
        ruleIds: z.array(z.string().uuid()).min(1).max(10),
        dataSourceId: z.string().uuid().optional(),
        timeout: z.coerce.number().min(1000).max(300000).optional(),
      }).parse(req.body);

      const concurrency = 3;
      const results: any[] = [];
      let idx = 0;

      const worker = async () => {
        while (idx < body.ruleIds.length) {
          const myIndex = idx++;
          const id = body.ruleIds[myIndex];
          try {
            const r = await this.svc.executeRule(id, body.dataSourceId, { timeout: body.timeout, userId });
            results[myIndex] = { ok: true, result: r };
          } catch (e: any) {
            results[myIndex] = { ok: false, error: String(e?.message || e) };
          }
        }
      };

      await Promise.all(Array.from({ length: Math.min(concurrency, body.ruleIds.length) }, worker));
      res.status(202).json({ success: true, data: { results } });
    } catch (error) {
      next(this.handleError(error, 'executeRulesBulk'));
    }
  };

  // Error handling helper
  private handleError(error: any, operation: string): Error {
    const errorId = Math.random().toString(36).substring(7);

    logger.error(`Quality controller error in ${operation}`, {
      errorId,
      operation,
      message: error?.message,
      stack: error?.stack,
      type: error?.constructor?.name,
    });

    if (error instanceof ValidationError) {
      const err = new Error(error.message) as any;
      err.statusCode = 400;
      err.code = 'VALIDATION_ERROR';
      err.details = error.details;
      err.errorId = errorId;
      return err;
    }

    if (error instanceof BusinessError) {
      const err = new Error(error.message) as any;
      err.statusCode = error.statusCode;
      err.code = error.code;
      err.errorId = errorId;
      return err;
    }

    if (error?.name === 'ZodError') {
      const err = new Error('Invalid request parameters') as any;
      err.statusCode = 400;
      err.code = 'VALIDATION_ERROR';
      err.details = error.errors;
      err.errorId = errorId;
      return err;
    }

    if (error?.code && String(error.code).startsWith('23')) {
      const err = new Error('Database constraint violation') as any;
      err.statusCode = 409;
      err.code = 'CONSTRAINT_ERROR';
      err.errorId = errorId;
      return err;
    }

    const err = new Error('Internal server error') as any;
    err.statusCode = 500;
    err.code = 'INTERNAL_ERROR';
    err.errorId = errorId;
    return err;
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\controllers\RequestsController.ts
--------------------------------------------------------------------------------
import { Request, Response } from 'express';
import { RequestsService } from '../services/RequestsService';

export class RequestsController {
  private svc = new RequestsService();

  list = async (req: Request, res: Response) => {
    const data = await this.svc.list(String(req.query.status || ''), String(req.query.type || ''));
    res.json({ success: true, data });
  };

  create = async (req: Request, res: Response) => {
    const data = await this.svc.create(req.body, (req as any).user?.id);
    res.status(201).json({ success: true, data });
  };

  update = async (req: Request, res: Response) => {
    const data = await this.svc.update(req.params.id, req.body, (req as any).user?.id);
    if (!data) return res.status(404).json({ success: false, error: { code: 'NOT_FOUND' } });
    res.json({ success: true, data });
  };
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\controllers\StatsController.ts
--------------------------------------------------------------------------------
import { Request, Response } from 'express';
import { StatsService } from '../services/StatsService';

export class StatsController {
  private svc = new StatsService();
  get = async (_req: Request, res: Response) => {
    const data = await this.svc.snapshot();
    res.json({ success: true, data });
  };
}


--------------------------------------------------------------------------------
FILE: backend\data-service\src\cron.ts
--------------------------------------------------------------------------------
// src/cron.ts (optional)
import { Pool } from 'pg';
import { SyncQueue } from './queue';
const cpdb = new Pool({ connectionString: process.env.DATABASE_URL });

export async function scheduleSyncAll() {
  const { rows } = await cpdb.query(`SELECT id::text AS id FROM data_sources WHERE status='connected'`);
  for (const r of rows) {
    await SyncQueue.add('sync-source', { dataSourceId: r.id }, { removeOnComplete: 50, removeOnFail: 50 });
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\db.ts
--------------------------------------------------------------------------------
// backend/data-service/src/db.ts - Updated with correct imports
import { Pool, PoolConfig } from 'pg';
import { config } from './config/env';
import { logger } from './utils/logger';

export interface DatabaseConfig extends PoolConfig {
  host: string;
  port: number;
  database: string;
  user: string;
  password: string;
  ssl?: boolean | object;
  max?: number;
  min?: number;
  idleTimeoutMillis?: number;
  connectionTimeoutMillis?: number;
}

class Database {
  private pool: Pool;
  private static instance: Database;

  constructor() {
    const dbConfig: DatabaseConfig = {
      host: config.database.host,
      port: config.database.port,
      database: config.database.name,
      user: config.database.user,
      password: config.database.password,
      ssl: config.database.ssl ? { rejectUnauthorized: false } : false,
      max: config.database.poolMax,
      min: config.database.poolMin,
      idleTimeoutMillis: config.database.idleTimeout,
      connectionTimeoutMillis: config.database.connectionTimeout,
    };

    this.pool = new Pool(dbConfig);

    // Handle pool events
    this.pool.on('connect', (client) => {
      logger.debug('New database client connected', {
        totalConnections: this.pool.totalCount,
        idleConnections: this.pool.idleCount,
      });
    });

    this.pool.on('acquire', (client) => {
      logger.debug('Database client acquired from pool', {
        totalConnections: this.pool.totalCount,
        idleConnections: this.pool.idleCount,
        waitingClients: this.pool.waitingCount,
      });
    });

    this.pool.on('remove', (client) => {
      logger.debug('Database client removed from pool', {
        totalConnections: this.pool.totalCount,
        idleConnections: this.pool.idleCount,
      });
    });

    this.pool.on('error', (err, client) => {
      logger.error('Database pool error:', {
        error: err.message,
        stack: err.stack,
        totalConnections: this.pool.totalCount,
        idleConnections: this.pool.idleCount,
      });
    });

    logger.info('Database pool initialized', {
      host: dbConfig.host,
      port: dbConfig.port,
      database: dbConfig.database,
      maxConnections: dbConfig.max,
      minConnections: dbConfig.min,
      ssl: !!dbConfig.ssl,
    });
  }

  public static getInstance(): Database {
    if (!Database.instance) {
      Database.instance = new Database();
    }
    return Database.instance;
  }

  public getPool(): Pool {
    return this.pool;
  }

  public async query(text: string, params?: any[]): Promise<any> {
    const start = Date.now();
    const queryId = Math.random().toString(36).substring(7);
    
    try {
      logger.debug('Database query started', {
        queryId,
        query: text.substring(0, 100) + (text.length > 100 ? '...' : ''),
        paramCount: params?.length || 0,
      });

      const result = await this.pool.query(text, params);
      const duration = Date.now() - start;
      
      logger.debug('Database query completed', {
        queryId,
        duration: `${duration}ms`,
        rowCount: result.rowCount,
        command: result.command,
      });
      
      return result;
    } catch (error) {
      const duration = Date.now() - start;
      logger.error('Database query failed', {
        queryId,
        query: text.substring(0, 100) + (text.length > 100 ? '...' : ''),
        duration: `${duration}ms`,
        error: error instanceof Error ? error.message : 'Unknown error',
        paramCount: params?.length || 0,
      });
      throw error;
    }
  }

  public async transaction<T>(callback: (client: any) => Promise<T>): Promise<T> {
    const client = await this.pool.connect();
    const transactionId = Math.random().toString(36).substring(7);
    
    try {
      await client.query('BEGIN');
      logger.debug('Database transaction started', { transactionId });
      
      const result = await callback(client);
      
      await client.query('COMMIT');
      logger.debug('Database transaction committed', { transactionId });
      
      return result;
    } catch (error) {
      await client.query('ROLLBACK');
      logger.error('Database transaction rolled back', {
        transactionId,
        error: error instanceof Error ? error.message : 'Unknown error'
      });
      throw error;
    } finally {
      client.release();
      logger.debug('Database transaction client released', { transactionId });
    }
  }

  public async healthCheck(): Promise<{
    status: 'healthy' | 'unhealthy';
    latency?: number;
    connections?: {
      total: number;
      idle: number;
      waiting: number;
    };
    error?: string;
    timestamp: string;
  }> {
    const start = Date.now();
    
    try {
      // Simple connectivity test
      await this.pool.query('SELECT 1 as health_check');
      const latency = Date.now() - start;
      
      return {
        status: 'healthy',
        latency,
        connections: {
          total: this.pool.totalCount,
          idle: this.pool.idleCount,
          waiting: this.pool.waitingCount
        },
        timestamp: new Date().toISOString(),
      };
    } catch (error) {
      const latency = Date.now() - start;
      return {
        status: 'unhealthy',
        latency,
        error: error instanceof Error ? error.message : 'Unknown error',
        timestamp: new Date().toISOString(),
      };
    }
  }

  public async deepHealthCheck(): Promise<{
    status: 'healthy' | 'unhealthy';
    checks: {
      connectivity: boolean;
      writeable: boolean;
      performant: boolean;
    };
    latency: number;
    error?: string;
  }> {
    const start = Date.now();
    const checks = {
      connectivity: false,
      writeable: false,
      performant: false,
    };

    try {
      // Test connectivity
      await this.pool.query('SELECT 1');
      checks.connectivity = true;

      // Test write capability (create temp table and drop it)
      const tempTableName = `health_check_${Date.now()}`;
      await this.pool.query(`CREATE TEMP TABLE ${tempTableName} (id INTEGER)`);
      await this.pool.query(`INSERT INTO ${tempTableName} VALUES (1)`);
      await this.pool.query(`DROP TABLE ${tempTableName}`);
      checks.writeable = true;

      const latency = Date.now() - start;
      
      // Check if performance is acceptable (under 1 second)
      checks.performant = latency < 1000;

      return {
        status: Object.values(checks).every(Boolean) ? 'healthy' : 'unhealthy',
        checks,
        latency,
      };
    } catch (error) {
      const latency = Date.now() - start;
      return {
        status: 'unhealthy',
        checks,
        latency,
        error: error instanceof Error ? error.message : 'Unknown error',
      };
    }
  }

  public getStats(): {
    totalCount: number;
    idleCount: number;
    waitingCount: number;
  } {
    return {
      totalCount: this.pool.totalCount,
      idleCount: this.pool.idleCount,
      waitingCount: this.pool.waitingCount,
    };
  }

  public async getDetailedStats(): Promise<{
    pool: {
      totalCount: number;
      idleCount: number;
      waitingCount: number;
      maxConnections: number;
      minConnections: number;
    };
    database: {
      version: string;
      size: string;
      activeConnections: number;
    };
  }> {
    try {
      // Get database version
      const versionResult = await this.pool.query('SELECT version()');
      const version = versionResult.rows[0].version;

      // Get database size
      const sizeResult = await this.pool.query(`
        SELECT pg_size_pretty(pg_database_size(current_database())) as size
      `);
      const size = sizeResult.rows[0].size;

      // Get active connections count
      const connectionsResult = await this.pool.query(`
        SELECT count(*) as active_connections 
        FROM pg_stat_activity 
        WHERE state = 'active'
      `);
      const activeConnections = parseInt(connectionsResult.rows[0].active_connections);

      return {
        pool: {
          totalCount: this.pool.totalCount,
          idleCount: this.pool.idleCount,
          waitingCount: this.pool.waitingCount,
          maxConnections: config.database.poolMax,
          minConnections: config.database.poolMin,
        },
        database: {
          version: version.split(' ')[1], // Extract version number
          size,
          activeConnections,
        },
      };
    } catch (error) {
      logger.error('Error getting detailed database stats:', error);
      throw error;
    }
  }

  public async close(): Promise<void> {
    try {
      logger.info('Closing database pool...');
      await this.pool.end();
      logger.info('Database pool closed successfully');
    } catch (error) {
      logger.error('Error closing database pool:', error);
      throw error;
    }
  }

  // Migration and schema management
  public async runMigrations(): Promise<void> {
    try {
      logger.info('Running database migrations...');

      // Create migrations table if it doesn't exist
      await this.pool.query(`
        CREATE TABLE IF NOT EXISTS migrations (
          id SERIAL PRIMARY KEY,
          name VARCHAR(255) NOT NULL UNIQUE,
          executed_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
        )
      `);

      // List of migrations to run
      const migrations = [
        {
          name: '001_create_data_sources_table',
          sql: `
            CREATE TABLE IF NOT EXISTS data_sources (
              id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
              name VARCHAR(100) NOT NULL,
              type VARCHAR(50) NOT NULL,
              host VARCHAR(255),
              port INTEGER,
              database_name VARCHAR(100),
              username VARCHAR(100),
              password_encrypted TEXT,
              ssl BOOLEAN DEFAULT FALSE,
              connection_string TEXT,
              description TEXT,
              tags TEXT[] DEFAULT '{}',
              status VARCHAR(20) DEFAULT 'active',
              metadata JSONB DEFAULT '{}',
              created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
              updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
            );
            CREATE INDEX IF NOT EXISTS idx_data_sources_type ON data_sources(type);
            CREATE INDEX IF NOT EXISTS idx_data_sources_status ON data_sources(status);
          `
        },
        {
          name: '002_create_assets_table',
          sql: `
            CREATE TABLE IF NOT EXISTS assets (
              id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
              name VARCHAR(100) NOT NULL,
              type VARCHAR(50) NOT NULL,
              data_source_id UUID NOT NULL REFERENCES data_sources(id) ON DELETE CASCADE,
              schema_name VARCHAR(100),
              table_name VARCHAR(100),
              description TEXT,
              columns JSONB DEFAULT '[]',
              tags TEXT[] DEFAULT '{}',
              status VARCHAR(20) DEFAULT 'active',
              metadata JSONB DEFAULT '{}',
              created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
              updated_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
            );
            CREATE INDEX IF NOT EXISTS idx_assets_data_source_id ON assets(data_source_id);
            CREATE INDEX IF NOT EXISTS idx_assets_type ON assets(type);
            CREATE INDEX IF NOT EXISTS idx_assets_status ON assets(status);
          `
        },
        {
          name: '003_create_asset_lineage_table',
          sql: `
            CREATE TABLE IF NOT EXISTS asset_lineage (
              id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
              upstream_asset_id UUID NOT NULL REFERENCES assets(id) ON DELETE CASCADE,
              downstream_asset_id UUID NOT NULL REFERENCES assets(id) ON DELETE CASCADE,
              relationship_type VARCHAR(50) NOT NULL,
              description TEXT,
              created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
            );
            CREATE INDEX IF NOT EXISTS idx_asset_lineage_upstream ON asset_lineage(upstream_asset_id);
            CREATE INDEX IF NOT EXISTS idx_asset_lineage_downstream ON asset_lineage(downstream_asset_id);
          `
        }
      ];

      for (const migration of migrations) {
        // Check if migration has already been run
        const result = await this.pool.query(
          'SELECT id FROM migrations WHERE name = $1',
          [migration.name]
        );

        if (result.rows.length === 0) {
          logger.info(`Running migration: ${migration.name}`);
          
          // Run migration in a transaction
          await this.transaction(async (client) => {
            await client.query(migration.sql);
            await client.query(
              'INSERT INTO migrations (name) VALUES ($1)',
              [migration.name]
            );
          });

          logger.info(`Migration completed: ${migration.name}`);
        } else {
          logger.debug(`Migration already applied: ${migration.name}`);
        }
      }

      logger.info('All migrations completed successfully');
    } catch (error) {
      logger.error('Migration failed:', error);
      throw error;
    }
  }
}

// Export singleton instance
export const db = Database.getInstance();
export default db;


--------------------------------------------------------------------------------
FILE: backend\data-service\src\db\pool.ts
--------------------------------------------------------------------------------
// backend/data-service/src/db/pool.ts
import { Pool } from "pg";

const {
  DATABASE_URL,
  DB_POOL_MAX = "20",
  DB_IDLE_TIMEOUT = "30000",
  DB_CONNECTION_TIMEOUT = "10000",
  DB_SSL = "false",
} = process.env;

if (!DATABASE_URL) {
  throw new Error("DATABASE_URL is not set for data-service");
}

export const pool = new Pool({
  connectionString: DATABASE_URL,
  max: Number(DB_POOL_MAX),
  idleTimeoutMillis: Number(DB_IDLE_TIMEOUT),
  connectionTimeoutMillis: Number(DB_CONNECTION_TIMEOUT),
  ssl: String(DB_SSL).toLowerCase() === "true" ? { rejectUnauthorized: false } : undefined,
});

pool.on("error", (err) => {
  // Do not crash the process on idle client error; log and continue.
  console.error("[pg] Pool error:", err);
});



--------------------------------------------------------------------------------
FILE: backend\data-service\src\middleware\audit.ts
--------------------------------------------------------------------------------
// backend/data-service/src/middleware/audit.ts
import { NextFunction, Request, Response } from 'express';
import { DatabaseService } from '../services/DatabaseService';
import { logger } from '../utils/logger';

interface AuditLogEntry {
  entity_type: string;
  entity_id: string;
  action: string;
  actor?: string;
  actor_ip?: string;
  user_agent?: string;
  changes?: any;
  metadata?: any;
}

class AuditService {
  private db = new DatabaseService();
  private logQueue: AuditLogEntry[] = [];
  private flushInterval: NodeJS.Timeout;

  constructor() {
    // Batch insert audit logs every 5 seconds
    this.flushInterval = setInterval(() => this.flushLogs(), 5000);
  }

  async logAction(entry: AuditLogEntry): Promise<void> {
    this.logQueue.push({
      ...entry,
      metadata: {
        ...entry.metadata,
        timestamp: new Date().toISOString()
      }
    });

    // Flush immediately for critical actions
    if (['DELETE', 'EXECUTE'].includes(entry.action)) {
      await this.flushLogs();
    }
  }

  private async flushLogs(): Promise<void> {
    if (this.logQueue.length === 0) return;

    const logsToFlush = [...this.logQueue];
    this.logQueue = [];

    try {
      for (const log of logsToFlush) {
        await this.db.query(`
          INSERT INTO audit_logs (entity_type, entity_id, action, actor, actor_ip, user_agent, changes, metadata)
          VALUES ($1, $2, $3, $4, $5, $6, $7::jsonb, $8::jsonb)
        `, [
          log.entity_type,
          log.entity_id,
          log.action,
          log.actor || null,
          log.actor_ip || null,
          log.user_agent || null,
          JSON.stringify(log.changes || {}),
          JSON.stringify(log.metadata || {})
        ]);
      }
    } catch (error) {
      logger.error('Failed to flush audit logs', { 
        error: (error as Error).message, 
        queueSize: logsToFlush.length 
      });
      // Re-queue the failed logs
      this.logQueue.unshift(...logsToFlush);
    }
  }

  async cleanup(): Promise<void> {
    clearInterval(this.flushInterval);
    await this.flushLogs();
  }
}

const auditService = new AuditService();

export const auditMiddleware = (entityType: string, action: string) => {
  return (req: Request, res: Response, next: NextFunction) => {
    const originalSend = res.send;
    
    res.send = function(body: any) {
      const user = (req as any).user;
      const entityId = req.params.id || 'bulk_operation';
      const clientIp = req.ip || req.connection.remoteAddress || 'unknown';
      const userAgent = req.get('User-Agent') || 'unknown';

      // Log the action
      auditService.logAction({
        entity_type: entityType,
        entity_id: entityId,
        action: action,
        actor: user?.id || user?.email || 'anonymous',
        actor_ip: clientIp,
        user_agent: userAgent,
        changes: req.method === 'POST' || req.method === 'PUT' ? req.body : undefined,
        metadata: {
          method: req.method,
          path: req.path,
          query: req.query,
          statusCode: res.statusCode,
          contentLength: body ? Buffer.byteLength(body) : 0
        }
      }).catch(error => {
        logger.error('Audit logging failed', { error: error.message });
      });

      return originalSend.call(this, body);
    };

    next();
  };
};

// Enhanced rate limiting with Redis-like token bucket implementation
export class TokenBucket {
  private tokens: number;
  private lastRefill: number;
  private readonly capacity: number;
  private readonly refillRate: number;
  private readonly refillInterval: number;

  constructor(capacity: number, refillRate: number, refillInterval: number = 1000) {
    this.capacity = capacity;
    this.refillRate = refillRate;
    this.refillInterval = refillInterval;
    this.tokens = capacity;
    this.lastRefill = Date.now();
  }

  consume(tokens: number = 1): boolean {
    this.refill();
    
    if (this.tokens >= tokens) {
      this.tokens -= tokens;
      return true;
    }
    
    return false;
  }

  private refill(): void {
    const now = Date.now();
    const timePassed = now - this.lastRefill;
    const tokensToAdd = Math.floor(timePassed / this.refillInterval) * this.refillRate;
    
    if (tokensToAdd > 0) {
      this.tokens = Math.min(this.capacity, this.tokens + tokensToAdd);
      this.lastRefill = now;
    }
  }

  getTokens(): number {
    this.refill();
    return this.tokens;
  }
}

// Enhanced rate limiting middleware
export const createRateLimit = (options: {
  windowMs: number;
  max: number;
  skipSuccessfulRequests?: boolean;
  standardHeaders?: boolean;
  message?: string;
}) => {
  const buckets = new Map<string, TokenBucket>();
  const {
    windowMs,
    max,
    skipSuccessfulRequests = false,
    standardHeaders = true,
    message = 'Too many requests'
  } = options;

  return (req: Request, res: Response, next: NextFunction) => {
    const key = `${req.ip}:${req.path}`;
    
    if (!buckets.has(key)) {
      buckets.set(key, new TokenBucket(max, max, windowMs));
    }

    const bucket = buckets.get(key)!;
    const hasTokens = bucket.consume(1);

    if (standardHeaders) {
      res.set({
        'X-RateLimit-Limit': max.toString(),
        'X-RateLimit-Remaining': Math.max(0, bucket.getTokens()).toString(),
        'X-RateLimit-Reset': new Date(Date.now() + windowMs).toISOString()
      });
    }

    if (!hasTokens) {
      logger.warn('Rate limit exceeded', {
        ip: req.ip,
        path: req.path,
        userAgent: req.get('User-Agent')
      });

      return res.status(429).json({
        success: false,
        error: {
          code: 'RATE_LIMIT_EXCEEDED',
          message,
          retryAfter: Math.ceil(windowMs / 1000)
        }
      });
    }

    // Clean up old buckets periodically
    if (Math.random() < 0.01) { // 1% chance
      const now = Date.now();
      for (const [key, bucket] of buckets) {
        if (bucket.getTokens() === max && now - windowMs > 0) {
          buckets.delete(key);
        }
      }
    }

    next();
  };
};

// Security headers middleware
export const securityHeaders = (req: Request, res: Response, next: NextFunction) => {
  // Security headers
  res.set({
    'X-Content-Type-Options': 'nosniff',
    'X-Frame-Options': 'DENY',
    'X-XSS-Protection': '1; mode=block',
    'Strict-Transport-Security': 'max-age=31536000; includeSubDomains',
    'Referrer-Policy': 'strict-origin-when-cross-origin',
    'Content-Security-Policy': "default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'",
    'X-Permitted-Cross-Domain-Policies': 'none'
  });

  next();
};

// Request sanitization middleware
export const sanitizeInput = (req: Request, res: Response, next: NextFunction) => {
  const sanitizeValue = (value: any): any => {
    if (typeof value === 'string') {
      // Remove potentially dangerous characters
      return value
        .replace(/[<>]/g, '') // Remove angle brackets
        .replace(/javascript:/gi, '') // Remove javascript: protocol
        .replace(/data:/gi, '') // Remove data: protocol
        .trim();
    }
    
    if (Array.isArray(value)) {
      return value.map(sanitizeValue);
    }
    
    if (value && typeof value === 'object') {
      const sanitized: any = {};
      for (const [key, val] of Object.entries(value)) {
        sanitized[key] = sanitizeValue(val);
      }
      return sanitized;
    }
    
    return value;
  };

  if (req.body && typeof req.body === 'object') {
    req.body = sanitizeValue(req.body);
  }

  if (req.query && typeof req.query === 'object') {
    req.query = sanitizeValue(req.query);
  }

  next();
};

// Request timeout middleware
export const requestTimeout = (timeoutMs: number = 30000) => {
  return (req: Request, res: Response, next: NextFunction) => {
    const timeout = setTimeout(() => {
      if (!res.headersSent) {
        logger.warn('Request timeout', {
          method: req.method,
          path: req.path,
          ip: req.ip,
          timeout: timeoutMs
        });

        res.status(408).json({
          success: false,
          error: {
            code: 'REQUEST_TIMEOUT',
            message: 'Request timed out'
          }
        });
      }
    }, timeoutMs);

    res.on('finish', () => {
      clearTimeout(timeout);
    });

    res.on('close', () => {
      clearTimeout(timeout);
    });

    next();
  };
};

// Request size limiting middleware
export const limitRequestSize = (maxSize: number = 10 * 1024 * 1024) => { // 10MB default
  return (req: Request, res: Response, next: NextFunction) => {
    const contentLength = parseInt(req.get('Content-Length') || '0', 10);
    
    if (contentLength > maxSize) {
      logger.warn('Request too large', {
        contentLength,
        maxSize,
        ip: req.ip,
        path: req.path
      });

      return res.status(413).json({
        success: false,
        error: {
          code: 'PAYLOAD_TOO_LARGE',
          message: `Request size exceeds limit of ${maxSize} bytes`
        }
      });
    }

    next();
  };
};

// Export cleanup function for graceful shutdown
export const cleanupMiddleware = async (): Promise<void> => {
  await auditService.cleanup();
};


--------------------------------------------------------------------------------
FILE: backend\data-service\src\middleware\auth.ts
--------------------------------------------------------------------------------
// backend/data-service/src/middleware/auth.ts
import type { NextFunction, Request, Response } from 'express';
import jwt from 'jsonwebtoken';

const IS_PROD = (process.env.NODE_ENV || '').toLowerCase() === 'production';

function devBypass(req: Request): boolean {
  const hdr = (req.get('X-Dev-Auth') || req.get('x-dev-auth') || '').trim();
  const envSkip = (process.env.SKIP_AUTH || '').toLowerCase() === 'true';
  const envMock = (process.env.MOCK_AUTH || '').toLowerCase() === 'true';
  return !IS_PROD && (envSkip || envMock || hdr === '1');
}

function getJwtSecret(): string {
  const s = (process.env.JWT_SECRET || '').trim();
  if (s) return s;
  if (!IS_PROD) return 'devsecret';
  throw new Error('JWT is not configured (missing JWT_SECRET).');
}

function extractToken(req: Request): string | undefined {
  const h = (req.headers.authorization || req.headers.Authorization) as string | undefined;
  if (typeof h === 'string' && h.startsWith('Bearer ')) return h.slice(7).trim();
  const c = req.headers.cookie;
  if (c) {
    const m = c.match(/(?:^|;\s*)access_token=([^;]+)/i);
    if (m) return decodeURIComponent(m[1]);
  }
  return undefined;
}

export function authMiddleware(req: Request, res: Response, next: NextFunction) {
  if (devBypass(req)) return next();
  const token = extractToken(req);
  if (!token) return res.status(401).json({ success: false, error: 'Access denied. No token provided.' });
  try {
    const decoded = jwt.verify(token, getJwtSecret(), { algorithms: ['HS256'] });
    (req as any).user = decoded;
    next();
  } catch {
    return res.status(401).json({ success: false, error: 'Access denied. Invalid or expired token.' });
  }
}

export function optionalAuthMiddleware(req: Request, _res: Response, next: NextFunction) {
  if (devBypass(req)) return next();
  const token = extractToken(req);
  if (!token) return next();
  try {
    const decoded = jwt.verify(token, getJwtSecret(), { algorithms: ['HS256'] });
    (req as any).user = decoded;
  } catch {/* ignore */}
  next();
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\middleware\error.ts
--------------------------------------------------------------------------------
// backend/data-service/src/middleware/error.ts
import { NextFunction, Request, Response } from 'express';
import { isProduction } from '../config/env';
import { logger } from '../utils/logger';

export interface ErrorResponse {
  success: false;
  error: {
    code: string;
    message: string;
    details?: any;
    timestamp: string;
    requestId?: string;
  };
}

export class AppError extends Error {
  public statusCode: number;
  public code: string;
  public isOperational: boolean;
  public details?: any;

  constructor(
    message: string,
    statusCode: number = 500,
    code: string = 'INTERNAL_ERROR',
    isOperational: boolean = true,
    details?: any
  ) {
    super(message);
    this.statusCode = statusCode;
    this.code = code;
    this.isOperational = isOperational;
    this.details = details;
    Error.captureStackTrace?.(this, this.constructor);
  }
}

/** Factory used by other middleware/controllers */
export const createError = (
  message: string,
  statusCode: number = 500,
  code: string = 'INTERNAL_ERROR',
  details?: any
): AppError => new AppError(message, statusCode, code, true, details);

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Common error types
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export class ValidationError extends AppError {
  constructor(message: string, details?: any) {
    super(message, 400, 'VALIDATION_ERROR', true, details);
  }
}
export class NotFoundError extends AppError {
  constructor(resource: string = 'Resource') {
    super(`${resource} not found`, 404, 'NOT_FOUND', true);
  }
}
export class UnauthorizedError extends AppError {
  constructor(message: string = 'Unauthorized') {
    super(message, 401, 'UNAUTHORIZED', true);
  }
}
export class ForbiddenError extends AppError {
  constructor(message: string = 'Forbidden') {
    super(message, 403, 'FORBIDDEN', true);
  }
}
export class ConflictError extends AppError {
  constructor(message: string = 'Resource already exists') {
    super(message, 409, 'CONFLICT', true);
  }
}
export class DatabaseError extends AppError {
  constructor(message: string, details?: any) {
    super(message, 500, 'DATABASE_ERROR', true, details);
  }
}
export class ExternalServiceError extends AppError {
  constructor(service: string, message: string, details?: any) {
    super(`External service error (${service}): ${message}`, 502, 'EXTERNAL_SERVICE_ERROR', true, details);
  }
}

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Error handler
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export const errorHandler = (
  error: Error | AppError,
  req: Request,
  res: Response,
  next: NextFunction
): void => {
  if (res.headersSent) return next(error);

  // Defaults
  let statusCode = 500;
  let code = 'INTERNAL_ERROR';
  let message = 'Internal server error';
  let details: any;

  if (error instanceof AppError) {
    statusCode = error.statusCode;
    code = error.code;
    message = error.message;
    details = error.details;
  } else if (error.name === 'ValidationError') {
    statusCode = 400;
    code = 'VALIDATION_ERROR';
    message = error.message;
  } else if (error.name === 'JsonWebTokenError') {
    statusCode = 401;
    code = 'INVALID_TOKEN';
    message = 'Invalid token';
  } else if (error.name === 'TokenExpiredError') {
    statusCode = 401;
    code = 'TOKEN_EXPIRED';
    message = 'Token expired';
  } else if ((error as any).code === '23505') {
    statusCode = 409;
    code = 'DUPLICATE_ENTRY';
    message = 'Resource already exists';
  } else if ((error as any).code === '23503') {
    statusCode = 400;
    code = 'FOREIGN_KEY_VIOLATION';
    message = 'Referenced resource does not exist';
  } else if ((error as any).code === 'ECONNREFUSED') {
    statusCode = 503;
    code = 'SERVICE_UNAVAILABLE';
    message = 'External service unavailable';
  } else if ((error as any).code === 'ENOTFOUND') {
    statusCode = 503;
    code = 'SERVICE_UNREACHABLE';
    message = 'External service unreachable';
  } else if ((error as any).code === 'ETIMEDOUT') {
    statusCode = 504;
    code = 'SERVICE_TIMEOUT';
    message = 'External service timeout';
  }

  const requestId =
    (req as any).requestId ||
    req.get('X-Request-ID') ||
    `req_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;

  const logPayload = {
    requestId,
    method: req.method,
    url: req.originalUrl || req.url,
    statusCode,
    code,
    message: (error as any).message,
    stack: (error as any).stack,
    body: req.body,
    params: req.params,
    query: req.query,
    userAgent: req.get('User-Agent'),
    ip: req.ip,
  };

  if (statusCode >= 500) {
    logger.error('Server error:', logPayload);
  } else {
    logger.warn('Client error:', logPayload);
  }

  const payload: ErrorResponse = {
    success: false,
    error: {
      code,
      message,
      timestamp: new Date().toISOString(),
      requestId,
    },
  };

  // Only include details/stack outside production
  if (!isProduction) {
    if (details) payload.error.details = details;
    payload.error.details = {
      ...(payload.error.details || {}),
      stack: (error as any).stack,
    };
  }

  res.status(statusCode).json(payload);
};

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
export const notFoundHandler = (req: Request, res: Response): void => {
  const requestId =
    (req as any).requestId ||
    req.get('X-Request-ID') ||
    `req_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;

  const payload: ErrorResponse = {
    success: false,
    error: {
      code: 'NOT_FOUND',
      message: `Route ${req.method} ${req.originalUrl} not found`,
      timestamp: new Date().toISOString(),
      requestId,
    },
  };

  logger.warn('Route not found:', {
    method: req.method,
    url: req.originalUrl,
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    requestId,
  });

  res.status(404).json(payload);
};

// Wrap async route handlers
export const asyncHandler = (fn: (...args: any[]) => Promise<any>) => {
  return (req: Request, res: Response, next: NextFunction) => {
    Promise.resolve(fn(req, res, next)).catch(next);
  };
};

// Attach/propagate a request ID for tracing
export const requestIdMiddleware = (req: Request, res: Response, next: NextFunction): void => {
  const requestId = req.get('X-Request-ID') || `req_${Date.now()}_${Math.random().toString(36).slice(2, 9)}`;
  (req as any).requestId = requestId;
  res.set('X-Request-ID', requestId);
  next();
};

export default errorHandler;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\middleware\rateLimit.ts
--------------------------------------------------------------------------------
import type { RequestHandler } from 'express';
import rateLimit from 'express-rate-limit';
import { logger, loggerUtils } from '../utils/logger';

// helper to coerce the rate-limit handler to Express's RequestHandler
const asExpressHandler = (h: unknown) => h as unknown as RequestHandler;

/** Default rate limiting middleware for general use */
const _defaultRateLimit = rateLimit({
  windowMs: 15 * 60 * 1000,
  max: 1000,
  message: {
    success: false,
    error: 'RATE_LIMIT_EXCEEDED',
    message: 'Too many requests from this IP, please try again later.',
    retryAfter: '15 minutes',
  },
  standardHeaders: true,
  legacyHeaders: false,
  handler: (req: any, res: any) => {
    logger.warn('Default rate limit exceeded', {
      ip: req.ip,
      userAgent: req.get('User-Agent'),
      path: req.path,
    });
    res.status(429).json({
      success: false,
      error: 'RATE_LIMIT_EXCEEDED',
      message: 'Too many requests from this IP, please try again later.',
      retryAfter: res.get('Retry-After'),
      timestamp: new Date().toISOString(),
    });
  },
});
export const defaultRateLimit: RequestHandler = asExpressHandler(_defaultRateLimit);

/** Custom key generator */
const keyGenerator = (req: any): string => {
  const user = req.user;
  return user ? `user:${user.id}` : `ip:${req.ip}`;
};

/** Common response body */
const rateLimitMessage = (req: any, res: any) => {
  const user = req.user;
  loggerUtils.logAuth('rate_limit_exceeded', user?.id, req.ip, req.get('User-Agent'));
  return {
    success: false,
    error: 'RATE_LIMIT_EXCEEDED',
    message: 'Too many requests. Please try again later.',
    retryAfter: res.get('Retry-After'),
    timestamp: new Date().toISOString(),
  };
};

// Skip function (keep any to avoid cross-tree type binding)
const skipSuccessfulRequests = (req: any, res: any): boolean =>
  res.statusCode < 400 && req.path === '/health';

/** General rate limiting middleware */
export const rateLimitMiddleware: RequestHandler = asExpressHandler(
  rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 100,
    standardHeaders: true,
    legacyHeaders: false,
    keyGenerator,
    skip: skipSuccessfulRequests,
    handler: (req: any, res: any) => {
      res.status(429).json(rateLimitMessage(req, res));
    },
  })
);

/** Strict auth limiter */
export const strictRateLimitMiddleware: RequestHandler = asExpressHandler(
  rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 5,
    standardHeaders: true,
    legacyHeaders: false,
    keyGenerator: (req: any) => `auth:${req.ip}`,
    handler: (req: any, res: any) => {
      res.status(429).json(rateLimitMessage(req, res));
    },
  })
);

/** API limiter */
export const apiRateLimitMiddleware: RequestHandler = asExpressHandler(
  rateLimit({
    windowMs: 60 * 1000,
    max: 20,
    standardHeaders: true,
    legacyHeaders: false,
    keyGenerator,
    skip: skipSuccessfulRequests,
    handler: (req: any, res: any) => {
      res.status(429).json(rateLimitMessage(req, res));
    },
  })
);

/** Connection test limiter */
export const connectionTestRateLimitMiddleware: RequestHandler = asExpressHandler(
  rateLimit({
    windowMs: 5 * 60 * 1000,
    max: 10,
    standardHeaders: true,
    legacyHeaders: false,
    keyGenerator,
    handler: (req: any, res: any) => {
      res.status(429).json(rateLimitMessage(req, res));
    },
  })
);

/** Search limiter */
export const searchRateLimitMiddleware: RequestHandler = asExpressHandler(
  rateLimit({
    windowMs: 60 * 1000,
    max: 30,
    standardHeaders: true,
    legacyHeaders: false,
    keyGenerator,
    skip: skipSuccessfulRequests,
    handler: (req: any, res: any) => {
      res.status(429).json(rateLimitMessage(req, res));
    },
  })
);

/** Export limiter */
export const exportRateLimitMiddleware: RequestHandler = asExpressHandler(
  rateLimit({
    windowMs: 60 * 60 * 1000,
    max: 5,
    standardHeaders: true,
    legacyHeaders: false,
    keyGenerator,
    handler: (req: any, res: any) => {
      res.status(429).json(rateLimitMessage(req, res));
    },
  })
);

/** Upload limiter */
export const uploadRateLimitMiddleware: RequestHandler = asExpressHandler(
  rateLimit({
    windowMs: 15 * 60 * 1000,
    max: 10,
    standardHeaders: true,
    legacyHeaders: false,
    keyGenerator,
    handler: (req: any, res: any) => {
      res.status(429).json(rateLimitMessage(req, res));
    },
  })
);

/** Factory */
/** Factory */
export const createRateLimit = (options: {
  windowMs: number;
  max: number;
  message?: string;
  skipSuccessfulRequests?: boolean;

  // NEW: allow callers to customize headers (matches express-rate-limit v6)
  standardHeaders?: boolean;
  legacyHeaders?: boolean;

  // (optional) allow a custom keyGenerator/skip override
  keyGenerator?: (req: any) => string;
  skip?: (req: any, res: any) => boolean;
}): RequestHandler =>
  asExpressHandler(
    rateLimit({
      windowMs: options.windowMs,
      max: options.max,

      // keep your nice JSON body when a custom message is provided
      message: options.message
        ? {
            success: false,
            error: 'RATE_LIMIT_EXCEEDED',
            message: options.message,
            timestamp: new Date().toISOString(),
          }
        : undefined,

      // use provided header prefs, fall back to your defaults
      standardHeaders: options.standardHeaders ?? true,
      legacyHeaders: options.legacyHeaders ?? false,

      // prefer provided keyGenerator/skip, else your defaults
      keyGenerator: options.keyGenerator ?? keyGenerator,
      skip:
        options.skip ??
        (options.skipSuccessfulRequests ? skipSuccessfulRequests : undefined),

      handler: (req: any, res: any) => {
        res.status(429).json(rateLimitMessage(req, res));
      },
    })
  );


export const RATE_LIMITS = {
  GENERAL: { windowMs: 15 * 60 * 1000, max: 100 },
  AUTH: { windowMs: 15 * 60 * 1000, max: 5 },
  API: { windowMs: 1 * 60 * 1000, max: 20 },
  CONNECTION_TEST: { windowMs: 5 * 60 * 1000, max: 10 },
  SEARCH: { windowMs: 1 * 60 * 1000, max: 30 },
  EXPORT: { windowMs: 60 * 60 * 1000, max: 5 },
  UPLOAD: { windowMs: 15 * 60 * 1000, max: 10 },
} as const;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\middleware\validation.ts
--------------------------------------------------------------------------------
// src/middleware/validation.ts - Data source validation rules
import { NextFunction, Request, Response } from 'express';
import { body, param, query, validationResult } from 'express-validator';

/**
 * Validate request and return errors if any
 */
export const validateRequest = (req: Request, res: Response, next: NextFunction) => {
  const errors = validationResult(req);
  
  if (!errors.isEmpty()) {
    const errorMessage = formatValidationError(errors.array());
    return res.status(400).json({
      success: false,
      error: 'VALIDATION_ERROR',
      message: errorMessage,
      details: errors.array(),
      timestamp: new Date().toISOString(),
    });
  }
  
  next();
};

/**
 * Validation error formatter
 */
export const formatValidationError = (errors: any[]): string => {
  return errors.map(error => {
    if (error.type === 'field') {
      return `${error.path}: ${error.msg}`;
    }
    return error.msg;
  }).join(', ');
};

/**
 * Data source validation rules
 */
export const validateDataSource = [
  body('name')
    .trim()
    .isLength({ min: 1, max: 100 })
    .withMessage('Name must be between 1 and 100 characters'),
  
  body('type')
    .isIn(['postgres', 'mysql', 'sqlserver', 'mongodb', 's3', 'api', 'file'])
    .withMessage('Invalid data source type'),
  
  body('host')
    .optional()
    .isLength({ min: 1, max: 255 })
    .withMessage('Host must be between 1 and 255 characters'),
  
  body('port')
    .optional()
    .isInt({ min: 1, max: 65535 })
    .withMessage('Port must be between 1 and 65535'),
  
  body('database')
    .optional()
    .isLength({ min: 1, max: 100 })
    .withMessage('Database name must be between 1 and 100 characters'),
  
  body('username')
    .optional()
    .isLength({ min: 1, max: 100 })
    .withMessage('Username must be between 1 and 100 characters'),
  
  body('password')
    .optional()
    .isLength({ min: 1, max: 255 })
    .withMessage('Password must be between 1 and 255 characters'),
  
  body('ssl')
    .optional()
    .isBoolean()
    .withMessage('SSL must be a boolean value'),
  
  body('description')
    .optional()
    .isLength({ max: 500 })
    .withMessage('Description must be less than 500 characters'),
  
  body('tags')
    .optional()
    .isArray()
    .withMessage('Tags must be an array'),
  
  body('tags.*')
    .optional()
    .isString()
    .trim()
    .isLength({ min: 1, max: 50 })
    .withMessage('Each tag must be between 1 and 50 characters'),

  validateRequest
];

/**
 * Data source update validation rules
 */
export const validateDataSourceUpdate = [
  param('id')
    .isUUID()
    .withMessage('Invalid data source ID'),
  
  body('name')
    .optional()
    .trim()
    .isLength({ min: 1, max: 100 })
    .withMessage('Name must be between 1 and 100 characters'),
  
  body('host')
    .optional()
    .isLength({ min: 1, max: 255 })
    .withMessage('Host must be between 1 and 255 characters'),
  
  body('port')
    .optional()
    .isInt({ min: 1, max: 65535 })
    .withMessage('Port must be between 1 and 65535'),
  
  body('database')
    .optional()
    .isLength({ min: 1, max: 100 })
    .withMessage('Database name must be between 1 and 100 characters'),
  
  body('username')
    .optional()
    .isLength({ min: 1, max: 100 })
    .withMessage('Username must be between 1 and 100 characters'),
  
  body('password')
    .optional()
    .isLength({ min: 1, max: 255 })
    .withMessage('Password must be between 1 and 255 characters'),
  
  body('ssl')
    .optional()
    .isBoolean()
    .withMessage('SSL must be a boolean value'),
  
  body('description')
    .optional()
    .isLength({ max: 500 })
    .withMessage('Description must be less than 500 characters'),
  
  body('tags')
    .optional()
    .isArray()
    .withMessage('Tags must be an array'),

  validateRequest
];

/**
 * Asset validation rules
 */
export const validateAsset = [
  body('name')
    .trim()
    .isLength({ min: 1, max: 100 })
    .withMessage('Name must be between 1 and 100 characters'),
  
  body('type')
    .isIn(['table', 'view', 'procedure', 'function', 'schema'])
    .withMessage('Invalid asset type'),
  
  body('dataSourceId')
    .isUUID()
    .withMessage('Invalid data source ID'),
  
  body('schemaName')
    .optional()
    .isLength({ min: 1, max: 100 })
    .withMessage('Schema name must be between 1 and 100 characters'),
  
  body('tableName')
    .optional()
    .isLength({ min: 1, max: 100 })
    .withMessage('Table name must be between 1 and 100 characters'),
  
  body('description')
    .optional()
    .isLength({ max: 500 })
    .withMessage('Description must be less than 500 characters'),
  
  body('tags')
    .optional()
    .isArray()
    .withMessage('Tags must be an array'),
  
  body('status')
    .optional()
    .isIn(['active', 'inactive', 'deprecated'])
    .withMessage('Invalid status'),

  validateRequest
];

/**
 * ID parameter validation
 */
export const validateId = [
  param('id')
    .isUUID()
    .withMessage('Invalid ID format'),
  
  validateRequest
];

/**
 * Pagination validation
 */
export const validatePagination = [
  query('page')
    .optional()
    .isInt({ min: 1 })
    .withMessage('Page must be a positive integer'),
  
  query('limit')
    .optional()
    .isInt({ min: 1, max: 100 })
    .withMessage('Limit must be between 1 and 100'),
  
  query('search')
    .optional()
    .isString()
    .trim()
    .isLength({ max: 100 })
    .withMessage('Search term must be less than 100 characters'),

  validateRequest
];

/**
 * Connection test validation
 */
export const validateConnectionTest = [
  body('type')
    .isIn(['postgres', 'mysql', 'sqlserver', 'mongodb', 's3', 'api'])
    .withMessage('Invalid connection type'),
  
  body('host')
    .isLength({ min: 1, max: 255 })
    .withMessage('Host is required and must be less than 255 characters'),
  
  body('port')
    .isInt({ min: 1, max: 65535 })
    .withMessage('Port must be between 1 and 65535'),
  
  body('database')
    .optional()
    .isLength({ min: 1, max: 100 })
    .withMessage('Database name must be between 1 and 100 characters'),
  
  body('username')
    .isLength({ min: 1, max: 100 })
    .withMessage('Username is required and must be less than 100 characters'),
  
  body('password')
    .isLength({ min: 1, max: 255 })
    .withMessage('Password is required and must be less than 255 characters'),

  validateRequest
];

/**
 * Tags validation
 */
export const validateTags = [
  body('tags')
    .isArray({ min: 1 })
    .withMessage('Tags must be a non-empty array'),
  
  body('tags.*')
    .isString()
    .trim()
    .isLength({ min: 1, max: 50 })
    .withMessage('Each tag must be between 1 and 50 characters'),

  validateRequest
];


--------------------------------------------------------------------------------
FILE: backend\data-service\src\models\Connection.ts
--------------------------------------------------------------------------------
// backend/data-service/src/models/Connection.ts
// Back-compat shim: re-export the canonical connection types from DataSource.
// This prevents drift between modules and ensures 'mssql' etc. exist here too.

export type {
  APIConnection, AzureBlobConnection, BigQueryConnection, ConnectionConfig, ConnectionTestResult, DatabricksConnection, ElasticsearchConnection, FileConnection, GCSConnection, KafkaConnection, MongoDBConnection, MSSQLConnection, MySQLConnection, OracleConnection, PostgreSQLConnection, RedisConnection, RedshiftConnection, S3Connection, SnowflakeConnection
} from './DataSource';




--------------------------------------------------------------------------------
FILE: backend\data-service\src\models\ConnectionRuntime.ts
--------------------------------------------------------------------------------
// backend/data-service/src/models/ConnectionRuntime.ts

export interface ConnectionPool {
  id: string;
  dataSourceId: string;
  poolSize: number;
  activeConnections: number;
  idleConnections: number;
  waitingConnections: number;
  createdAt: Date;
  lastUsedAt: Date;
}

export interface ConnectionMetrics {
  dataSourceId: string;
  totalConnections: number;
  successfulConnections: number;
  failedConnections: number;
  averageResponseTime: number;
  lastConnectionAt?: Date;
  lastFailureAt?: Date;
  lastErrorMessage?: string;
  uptime: number;       // percentage
  availability: number; // percentage
}

export interface ConnectionHistory {
  id: string;
  dataSourceId: string;
  connectionStatus: 'success' | 'failed' | 'timeout' | 'refused';
  responseTime?: number; // ms
  errorCode?: string;
  errorMessage?: string;
  connectionDetails?: {
    host?: string;
    port?: number;
    database?: string;
    serverVersion?: string;
    serverInfo?: Record<string, any>;
  };
  testedAt: Date;
  testedBy?: string;
  testType: 'manual' | 'scheduled' | 'health_check' | 'startup';
}

export interface ConnectionCredentials {
  username?: string;
  password?: string;
  apiKey?: string;
  secretKey?: string;
  accessToken?: string;
  refreshToken?: string;
  tokenType?: string;
  certificate?: string;
  privateKey?: string;
  passphrase?: string;
  accessKeyId?: string;
  secretAccessKey?: string;
  serviceAccountKey?: string;
  authMethod?: 'basic' | 'bearer' | 'oauth2' | 'certificate' | 'api-key' | 'iam';
  authUrl?: string;
  tokenUrl?: string;
  scope?: string[];
}

export interface RuntimeConnectionSecurity {
  ssl: boolean;
  sslMode?: 'disable' | 'allow' | 'prefer' | 'require' | 'verify-ca' | 'verify-full';
  sslCert?: string;
  sslKey?: string;
  sslRootCert?: string;
  verifyCertificate: boolean;
  allowSelfSigned: boolean;
  encryption?: 'none' | 'tls' | 'ssl';
  tlsVersion?: string;
}

export interface RuntimeConnectionOptions {
  connectionTimeout: number; // ms
  queryTimeout: number;      // ms
  idleTimeout: number;       // ms
  minConnections: number;
  maxConnections: number;
  acquireTimeout: number;    // ms
  retryAttempts: number;
  retryDelay: number;        // ms
  exponentialBackoff: boolean;
  keepAlive: boolean;
  keepAliveInterval?: number; // ms
  charset?: string;
  timezone?: string;
  applicationName?: string;
  customOptions: Record<string, any>;
}

export interface ConnectionTest {
  id: string;
  dataSourceId: string;
  testType: 'basic' | 'advanced' | 'schema' | 'performance';
  status: 'pending' | 'running' | 'completed' | 'failed';
  testQueries?: string[];
  expectedResults?: any[];
  performanceThresholds?: {
    maxResponseTime: number;
    minThroughput: number;
  };
  results?: {
    connectionSuccessful: boolean;
    responseTime: number;
    queryResults?: any[];
    performanceMetrics?: {
      throughput: number;
      latency: number;
      errorRate: number;
    };
    schemaInfo?: {
      databases?: string[];
      tables?: string[];
      columns?: string[];
    };
  };
  startedAt: Date;
  completedAt?: Date;
  duration?: number; // ms
  errorMessage?: string;
  testedBy: string;
}

export interface ConnectionFactory {
  createConnection(dataSourceId: string): Promise<any>;
  testConnection(dataSourceId: string): Promise<ConnectionTest>;
  closeConnection(dataSourceId: string): Promise<void>;
  getConnectionMetrics(dataSourceId: string): Promise<ConnectionMetrics>;
}

export const defaultConnectionOptions: RuntimeConnectionOptions = {
  connectionTimeout: 30000,
  queryTimeout: 60000,
  idleTimeout: 300000,
  minConnections: 1,
  maxConnections: 10,
  acquireTimeout: 30000,
  retryAttempts: 3,
  retryDelay: 1000,
  exponentialBackoff: true,
  keepAlive: true,
  keepAliveInterval: 30000,
  customOptions: {},
};

// helper (only for telemetry layer â€” separate from canonical config)
export function getDefaultPort(type: string): number {
  const ports: Record<string, number> = {
    postgresql: 5432,
    mysql: 3306,
    mssql: 1433,
    oracle: 1521,
    mongodb: 27017,
    redis: 6379,
    elasticsearch: 9200,
    cassandra: 9042,
    clickhouse: 8123,
  };
  return ports[type] || 0;
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\models\DataSource.ts
--------------------------------------------------------------------------------
/* ===========================================================================
 * DataSource models & helpers (canonical, production-ready)
 * =========================================================================== */

export type DataSourceType =
  | 'postgresql'
  | 'mysql'
  | 'mssql'
  | 'oracle'
  | 'mongodb'
  | 'redis'
  | 's3'
  | 'azure-blob'
  | 'gcs'
  | 'snowflake'
  | 'bigquery'
  | 'redshift'
  | 'databricks'
  | 'api'
  | 'file'
  | 'kafka'
  | 'elasticsearch';

export type DataSourceStatus =
  | 'pending'
  | 'connected'
  | 'disconnected'
  | 'error'
  | 'warning'
  | 'syncing'
  | 'testing'
  // back-compat / ops-friendly synonyms
  | 'active'
  | 'inactive';

/* ---------------------------------------------------------------------------
 * TLS / SSL
 * --------------------------------------------------------------------------- */
export interface ConnectionSecurity {
  enabled?: boolean;
  rejectUnauthorized?: boolean;
  ca?: string;
  cert?: string;
  key?: string;
  mode?: 'disable' | 'allow' | 'prefer' | 'require' | 'verify-ca' | 'verify-full';
}

/* ---------------------------------------------------------------------------
 * Shared base for all connectors
 * --------------------------------------------------------------------------- */
export interface CommonConnectionFields {
  host?: string;
  port?: number;
  database?: string | number;
  username?: string;
  password?: string;
  schema?: string;
  connectionString?: string;
  ssl?: boolean | ConnectionSecurity;

  timeout?: number;
  maxConnections?: number;
  retryAttempts?: number;
}

/* ---------------------------------------------------------------------------
 * Per-connector configs (discriminated by `type`)
 * --------------------------------------------------------------------------- */
// Relational
export interface PostgreSQLConnection extends CommonConnectionFields { type: 'postgresql' }
export interface MySQLConnection     extends CommonConnectionFields { type: 'mysql' }
export interface MSSQLConnection     extends CommonConnectionFields { type: 'mssql' }
export interface OracleConnection    extends CommonConnectionFields { type: 'oracle' }
export interface RedshiftConnection  extends CommonConnectionFields { type: 'redshift' }
export interface DatabricksConnection extends CommonConnectionFields {
  type: 'databricks';
  httpPath?: string;
  token?: string;
}

// Doc/KV
export interface MongoDBConnection extends CommonConnectionFields { type: 'mongodb' }
export interface RedisConnection extends CommonConnectionFields {
  type: 'redis';
  cluster?: boolean;
  nodes?: Array<{ host: string; port: number }>;
}

// Object storage
export interface S3Connection extends CommonConnectionFields {
  type: 's3';
  bucket?: string;
  region?: string;
  accessKeyId?: string;
  secretAccessKey?: string;
  prefix?: string;
}
export interface AzureBlobConnection extends CommonConnectionFields {
  type: 'azure-blob';
  container?: string;
  accountName?: string;
  accountKey?: string;
  connectionString?: string; // Azure style
  prefix?: string;
}
export interface GCSConnection extends CommonConnectionFields {
  type: 'gcs';
  bucket?: string;
  serviceAccountKey?: string; // JSON
  prefix?: string;
}

// SaaS DW / Analytics
export interface SnowflakeConnection extends CommonConnectionFields {
  type: 'snowflake';
  warehouse?: string;
  role?: string;
}
export interface BigQueryConnection extends CommonConnectionFields {
  type: 'bigquery';
  projectId?: string;
  dataset?: string;
  location?: string;
  serviceAccountKey?: string; // JSON
}

// REST / File / Streaming / Search
export interface APIConnection extends CommonConnectionFields {
  type: 'api';
  baseUrl?: string;
  apiKey?: string;
  headers?: Record<string, string>;
  authentication?: {
    type: 'basic' | 'bearer' | 'oauth2' | 'api-key';
    credentials: Record<string, string>;
  };
}
export interface FileConnection extends CommonConnectionFields {
  type: 'file';
  path?: string;
  format?: 'csv' | 'json' | 'parquet' | 'avro' | 'xml';
}
export interface KafkaConnection extends CommonConnectionFields {
  type: 'kafka';
  brokers?: string[];  // host:port
  topics?: string[];
  consumerGroup?: string;
  sasl?: {
    mechanism: 'plain' | 'scram-sha-256' | 'scram-sha-512';
    username: string;
    password: string;
  };
  ssl?: boolean | ConnectionSecurity;
}
export interface ElasticsearchConnection extends CommonConnectionFields { type: 'elasticsearch' }

/* ---------------------------------------------------------------------------
 * Canonical union
 * --------------------------------------------------------------------------- */
export type ConnectionConfig =
  | PostgreSQLConnection
  | MySQLConnection
  | MSSQLConnection
  | OracleConnection
  | MongoDBConnection
  | RedisConnection
  | S3Connection
  | AzureBlobConnection
  | GCSConnection
  | SnowflakeConnection
  | BigQueryConnection
  | RedshiftConnection
  | DatabricksConnection
  | APIConnection
  | FileConnection
  | KafkaConnection
  | ElasticsearchConnection;

/* ---------------------------------------------------------------------------
 * Filters & pagination
 * --------------------------------------------------------------------------- */
export interface DataSourceFilters {
  status?: DataSourceStatus;
  type?: DataSourceType;
  search?: string;
  tags?: string[];
  createdBy?: string;              // â† added (fixes controller/service usage)
}

export type SortBy = 'updatedAt' | 'createdAt' | 'name' | 'status' | 'type';
export interface ListOptions {
  page?: number;
  limit?: number;
  filters?: DataSourceFilters;
  sortBy?: SortBy;
  sortOrder?: 'asc' | 'desc';
}

export interface ListOptions {
  page?: number;
  limit?: number;
  filters?: DataSourceFilters;
  sortBy?: 'createdAt' | 'updatedAt' | 'name' | 'type' | 'status';  // â† added
  sortOrder?: 'asc' | 'desc';                                        // â† added
}

/* ---------------------------------------------------------------------------
 * DataSource record
 * --------------------------------------------------------------------------- */
export interface DataSourceMetadata {
  version?: string;
  driver?: string;
  encoding?: string;
  timezone?: string;
  tableCount?: number;
  estimatedSize?: string;
  lastSchemaUpdate?: Date;
  customFields?: Record<string, any>;
}

export interface DataSource {
  id: string; // UUID string
  name: string;
  description?: string;
  type: DataSourceType;
  status: DataSourceStatus;
  connectionConfig: ConnectionConfig;
  tags: string[];
  metadata: DataSourceMetadata;

  createdAt: Date;
  updatedAt: Date;
  createdBy: string;
  updatedBy?: string;
  deletedAt?: Date;

  lastTestAt?: Date;
  lastSyncAt?: Date;
  lastError?: string;

  publicId?: string | null;

  // optional live metrics
  responseTime?: number;
  availability?: number;

  // sync & ingestion scheduling
  syncEnabled?: boolean;
  syncSchedule?: string; // cron
  syncOptions?: {
    fullSync?: boolean;
    incrementalField?: string;
    batchSize?: number;
  };
}

/* ---------------------------------------------------------------------------
 * PostgreSQL DDL (idempotent)
 * --------------------------------------------------------------------------- */
export const createDataSourcesTable = `
  CREATE TABLE IF NOT EXISTS data_sources (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    type VARCHAR(50) NOT NULL,
    status VARCHAR(20) NOT NULL DEFAULT 'pending',
    connection_config JSONB NOT NULL,
    tags TEXT[] DEFAULT '{}',               -- TEXT[] (not JSONB)
    metadata JSONB DEFAULT '{}',

    created_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    updated_at TIMESTAMPTZ NOT NULL DEFAULT NOW(),
    created_by VARCHAR(255),
    updated_by VARCHAR(255),
    deleted_at TIMESTAMPTZ,

    last_test_at TIMESTAMPTZ,
    last_tested_at TIMESTAMPTZ,             -- legacy tolerated (COALESCE)
    last_sync_at TIMESTAMPTZ,
    last_error TEXT,

    public_id VARCHAR(100),

    response_time INTEGER,
    availability DECIMAL(5,2),

    sync_enabled BOOLEAN DEFAULT false,
    sync_schedule VARCHAR(255),
    sync_options JSONB DEFAULT '{}'
  );

  CREATE INDEX IF NOT EXISTS idx_ds_type ON data_sources(type);
  CREATE INDEX IF NOT EXISTS idx_ds_status ON data_sources(status);
  CREATE INDEX IF NOT EXISTS idx_ds_created_by ON data_sources(created_by);
  CREATE INDEX IF NOT EXISTS idx_ds_deleted_at ON data_sources(deleted_at);
  CREATE INDEX IF NOT EXISTS idx_ds_last_sync ON data_sources(last_sync_at);
  CREATE INDEX IF NOT EXISTS idx_ds_updated_at ON data_sources(updated_at);

  DO $$
  BEGIN
    IF NOT EXISTS (
      SELECT 1 FROM pg_indexes
      WHERE schemaname = 'public' AND indexname = 'uq_data_sources_public_id'
    ) THEN
      CREATE UNIQUE INDEX uq_data_sources_public_id
        ON data_sources((public_id)) WHERE public_id IS NOT NULL;
    END IF;
  END $$;
`;

/* ---------------------------------------------------------------------------
 * Result & stats
 * --------------------------------------------------------------------------- */
export interface ConnectionTestResult {
  success: boolean;
  responseTime?: number;
  error?: string;
  details?: {
    version?: string;
    serverInfo?: Record<string, any>;
    capabilities?: string[];
  };
  testedAt: Date;
}

export interface DataSourceStats {
  dataSourceId: string;
  totalTables: number;
  totalColumns: number;
  totalRows: number;
  estimatedSize: string;
  lastUpdated: Date;
  tableStats: TableStats[];
}
export interface TableStats {
  name: string;
  schema?: string;
  rowCount: number;
  columnCount: number;
  sizeBytes: number;
  lastModified?: Date;
}

/* ---------------------------------------------------------------------------
 * Helpers
 * --------------------------------------------------------------------------- */
export function validateDataSourceType(s: string): s is DataSourceType {
  const all: readonly DataSourceType[] = [
    'postgresql','mysql','mssql','oracle','mongodb','redis',
    's3','azure-blob','gcs','snowflake','bigquery','redshift',
    'databricks','api','file','kafka','elasticsearch',
  ];
  return (all as readonly string[]).includes(s);
}

export function validateDataSourceStatus(s: string): s is DataSourceStatus {
  const all: readonly DataSourceStatus[] = [
    'pending','connected','disconnected','error','warning','syncing','testing','active','inactive',
  ];
  return (all as readonly string[]).includes(s);
}

/** Map common aliases to canonical types */
export function normalizeDataSourceType(t: string): DataSourceType {
  const x = (t || '').toLowerCase();
  if (x === 'azure_sql' || x === 'azure-sql' || x === 'sqlserver' || x === 'sql-server') return 'mssql';
  return validateDataSourceType(x) ? (x as DataSourceType) : (x as DataSourceType);
}

export function getDefaultPort(type: DataSourceType): number | undefined {
  switch (type) {
    case 'postgresql': return 5432;
    case 'mysql': return 3306;
    case 'mssql': return 1433;
    case 'oracle': return 1521;
    case 'mongodb': return 27017;
    case 'redis': return 6379;
    case 'elasticsearch': return 9200;
    default: return undefined;
  }
}

/** Strong validation per connector (narrow, then read special props). */
export function validateConnectionConfig(type: DataSourceType, cfg: Partial<ConnectionConfig>): string[] {
  const errors: string[] = [];
  const t = normalizeDataSourceType(type);
  const need = (ok: boolean, msg: string) => { if (!ok) errors.push(msg); };

  switch (t) {
    case 'postgresql':
    case 'mysql':
    case 'mssql':
    case 'oracle':
    case 'redshift':
    case 'databricks': {
      need(!!(cfg.connectionString || cfg.host), 'Host or connection string is required');
      need(!!(cfg.connectionString || (cfg as any).database), 'Database is required');
      break;
    }

    case 'mongodb': {
      need(!!(cfg.connectionString || cfg.host), 'Host or connection string is required');
      break;
    }

    case 'redis': {
      const rc = cfg as any;
      if (!rc.cluster) {
        need(!!(rc.host || rc.connectionString), 'Host or connection string is required');
      } else {
        need(Array.isArray(rc.nodes) && rc.nodes.length > 0, 'At least one cluster node is required');
      }
      break;
    }

    case 's3': {
      const sc = cfg as any;
      need(!!sc.bucket, 'Bucket is required');
      need(!!sc.region, 'Region is required');
      break;
    }

    case 'azure-blob': {
      const ac = cfg as any;
      need(!!ac.container, 'Container is required');
      break;
    }

    case 'gcs': {
      const gc = cfg as any;
      need(!!gc.bucket, 'Bucket is required');
      break;
    }

    case 'snowflake': {
      const sn = cfg as any;
      need(!!sn.host, 'Account URL/host is required');
      need(!!sn.username, 'Username is required');
      need(!!sn.database, 'Database is required');
      break;
    }

    case 'bigquery': {
      const bq = cfg as any;
      need(!!bq.serviceAccountKey, 'Service account key is required');
      break;
    }

    case 'api': {
      const api = cfg as any;
      need(!!api.baseUrl, 'Base URL is required');
      if (api.baseUrl) {
        try { new URL(api.baseUrl); } catch { errors.push('Base URL must be a valid URL'); }
      }
      break;
    }

    case 'file': {
      const fc = cfg as any;
      need(!!fc.path, 'File path is required');
      break;
    }

    case 'kafka': {
      const kc = cfg as any;
      need(Array.isArray(kc.brokers) && kc.brokers.length > 0, 'At least one broker is required');
      break;
    }

    case 'elasticsearch': {
      need(!!(cfg.host || cfg.connectionString), 'Host or connection string is required');
      break;
    }
  }

  if (cfg.port !== undefined && (cfg.port < 1 || cfg.port > 65535)) {
    errors.push('Port must be between 1 and 65535');
  }
  return errors;
}

/* ---------------------------------------------------------------------------
 * UI helpers
 * --------------------------------------------------------------------------- */
export function getDataSourceDisplayName(type: DataSourceType): string {
  const t = normalizeDataSourceType(type);
  const display: Record<DataSourceType, string> = {
    postgresql: 'PostgreSQL',
    mysql: 'MySQL',
    mssql: 'SQL Server',
    oracle: 'Oracle',
    mongodb: 'MongoDB',
    redis: 'Redis',
    s3: 'Amazon S3',
    'azure-blob': 'Azure Blob Storage',
    gcs: 'Google Cloud Storage',
    snowflake: 'Snowflake',
    bigquery: 'Google BigQuery',
    redshift: 'Amazon Redshift',
    databricks: 'Databricks',
    api: 'REST API',
    file: 'File System',
    kafka: 'Apache Kafka',
    elasticsearch: 'Elasticsearch',
  };
  return display[t] || t;
}

export function getDataSourceIcon(type: DataSourceType): string {
  const t = normalizeDataSourceType(type);
  const icons: Record<DataSourceType, string> = {
    postgresql: 'ðŸ˜',
    mysql: 'ðŸ¬',
    mssql: 'ðŸ¢',
    oracle: 'ðŸ›ï¸',
    mongodb: 'ðŸƒ',
    redis: 'ðŸ“¦',
    s3: 'â˜ï¸',
    'azure-blob': 'â˜ï¸',
    gcs: 'â˜ï¸',
    snowflake: 'â„ï¸',
    bigquery: 'ðŸ“Š',
    redshift: 'ðŸ“Š',
    databricks: 'ðŸ§±',
    api: 'ðŸ”Œ',
    file: 'ðŸ“',
    kafka: 'ðŸš€',
    elasticsearch: 'ðŸ”',
  };
  return icons[t] || 'ðŸ’¾';
}

export function getStatusColor(status: DataSourceStatus): string {
  const colors: Record<DataSourceStatus, string> = {
    pending: '#fbbf24',
    connected: '#10b981',
    disconnected: '#6b7280',
    error: '#ef4444',
    warning: '#f59e0b',
    syncing: '#3b82f6',
    testing: '#8b5cf6',
    active: '#10b981',    // synonym of connected
    inactive: '#6b7280',  // synonym of disconnected
  };
  return colors[status];
}

/* ---------------------------------------------------------------------------
 * Safe creation template for UI flows
 * --------------------------------------------------------------------------- */
export type NewDataSourceTemplate =
  Partial<Omit<DataSource, 'connectionConfig'>> & {
    connectionConfig: Partial<ConnectionConfig>;
  };

export function createDataSourceTemplate(kind: DataSourceType): NewDataSourceTemplate {
  const t = normalizeDataSourceType(kind);
  return {
    type: t,
    status: 'pending',
    tags: [],
    metadata: {},
    connectionConfig: {
      port: getDefaultPort(t),
      timeout: 30_000,
      maxConnections: 10,
      retryAttempts: 3,
    },
    syncEnabled: false,
    syncOptions: {
      fullSync: true,
      batchSize: 1000,
    },
  };
}

/* ---------------------------------------------------------------------------
 * Type guards
 * --------------------------------------------------------------------------- */
export const isAPIConfig = (c: Partial<ConnectionConfig>): c is APIConnection =>
  (c as APIConnection).type === 'api' || typeof (c as APIConnection).baseUrl === 'string';

export const isS3Config = (c: Partial<ConnectionConfig>): c is S3Connection =>
  (c as S3Connection).type === 's3' || !!(c as S3Connection).accessKeyId || !!(c as S3Connection).secretAccessKey;

export const isSnowflakeConfig = (c: Partial<ConnectionConfig>): c is SnowflakeConnection =>
  (c as SnowflakeConnection).type === 'snowflake';

export const isBigQueryConfig = (c: Partial<ConnectionConfig>): c is BigQueryConnection =>
  (c as BigQueryConnection).type === 'bigquery' || typeof (c as BigQueryConnection).serviceAccountKey === 'string';

/* ---------------------------------------------------------------------------
 * Back-compat type aliases (old names used elsewhere)
 * --------------------------------------------------------------------------- */
export type APIConfig        = APIConnection;
export type BigQueryConfig   = BigQueryConnection;
export type S3Config         = S3Connection;
export type SnowflakeConfig  = SnowflakeConnection;
// For places that refer to "AzureSQLConnection", use MSSQL config
export type AzureSQLConnection = MSSQLConnection;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\queue\index.ts
--------------------------------------------------------------------------------
// backend/data-service/src/queue/index.ts
/* eslint-disable @typescript-eslint/no-explicit-any */
/**
 * Production-safe queue bootstrap:
 * - If bullmq/ioredis are available and REDIS_URL is set, use a real Queue
 * - Otherwise export a NOOP queue so the app still boots (no crash loops)
 */

export type QueueLike = {
  add: (name: string, data?: any, opts?: any) => Promise<any>;
  isMock?: boolean;
};

export let queueEnabled = false;
export let queueStatus: "ready" | "disabled" | "error" = "disabled";

function makeNoopQueue(label: string): QueueLike {
  queueEnabled = false;
  queueStatus = "disabled";
  // Returns a shape compatible with bullmq's .add()
  return {
    isMock: true,
    async add(name: string, data?: any) {
      // Log once per process to avoid spam
      if (!("QUEUE_NOOP_LOGGED" in (global as any))) {
        // eslint-disable-next-line no-console
        console.warn(
          `[queue:${label}] bullmq disabled (missing deps or REDIS_URL). Using NOOP queue.`
        );
        (global as any).QUEUE_NOOP_LOGGED = true;
      }
      return { id: `mock_${Date.now()}`, name, data, mocked: true };
    },
  };
}

function makeQueue(): QueueLike {
  try {
    // Use require() to avoid ESM import pitfalls in TS during runtime
    // eslint-disable-next-line @typescript-eslint/no-var-requires
    const { Queue } = require("bullmq");
    // eslint-disable-next-line @typescript-eslint/no-var-requires
    const IORedis = require("ioredis");

    const redisUrl =
      process.env.REDIS_URL ||
      process.env.BULL_REDIS_URL ||
      "redis://redis:6379";

    if (!redisUrl) {
      return makeNoopQueue("catalog-profile");
    }

    const connection = new IORedis(redisUrl, {
      maxRetriesPerRequest: null,
      enableReadyCheck: true,
    });

    const q = new Queue("catalog-profile", {
      connection,
      defaultJobOptions: {
        attempts: 3,
        backoff: { type: "exponential", delay: 1500 },
        removeOnComplete: 200,
        removeOnFail: 200,
      },
    });

    queueEnabled = true;
    queueStatus = "ready";
    return q as QueueLike;
  } catch (e: any) {
    // Missing bullmq or ioredis, or other init error â†’ NOOP
    // eslint-disable-next-line no-console
    console.warn(`[queue] disabled: ${e?.message || String(e)}`);
    return makeNoopQueue("catalog-profile");
  }
}

export const ProfileQueue: QueueLike = makeQueue();



--------------------------------------------------------------------------------
FILE: backend\data-service\src\repositories\dataSourcesRepo.ts
--------------------------------------------------------------------------------
// backend/data-service/src/repositories/dataSourcesRepo.ts
import { pool } from "../db/pool";

export type SortBy =
  | "name"
  | "type"
  | "status"
  | "createdAt"
  | "updatedAt"
  | "lastSyncAt"
  | "lastTestAt";

const SORT_MAP: Record<SortBy, string> = {
  name: "name",
  type: "type",
  status: "status",
  createdAt: "created_at",
  updatedAt: "updated_at",
  lastSyncAt: "last_sync_at",
  lastTestAt: "last_test_at",
};

export async function listDataSources(opts: {
  page?: number;
  limit?: number;
  sortBy?: SortBy;
  sortOrder?: "asc" | "desc";
}) {
  const page = Math.max(1, Number(opts.page ?? 1));
  const limit = Math.min(100, Math.max(1, Number(opts.limit ?? 20)));
  const offset = (page - 1) * limit;

  const sortBy = (opts.sortBy ?? "updatedAt") as SortBy;
  const sortCol = SORT_MAP[sortBy] ?? "updated_at";
  const sortOrder = (opts.sortOrder ?? "desc").toLowerCase() === "asc" ? "asc" : "desc";

  const client = await pool.connect();
  try {
    const countSql = `SELECT COUNT(*)::int AS total FROM data_sources WHERE deleted_at IS NULL`;
    const countRes = await client.query<{ total: number }>(countSql);
    const total = countRes.rows[0]?.total ?? 0;

    const sql = `
      SELECT
        id,
        name,
        description,
        type,
        status,
        connection_config           AS "connectionConfig",
        tags,
        metadata,
        created_at                  AS "createdAt",
        updated_at                  AS "updatedAt",
        created_by                  AS "createdBy",
        updated_by                  AS "updatedBy",
        deleted_at                  AS "deletedAt",
        last_test_at                AS "lastTestAt",
        last_sync_at                AS "lastSyncAt",
        last_error                  AS "lastError",
        response_time               AS "responseTime",
        availability,
        sync_enabled                AS "syncEnabled",
        sync_schedule               AS "syncSchedule",
        sync_options                AS "syncOptions"
      FROM data_sources
      WHERE deleted_at IS NULL
      ORDER BY ${sortCol} ${sortOrder}
      LIMIT $1 OFFSET $2
    `;
    const res = await client.query(sql, [limit, offset]);

    return {
      success: true as const,
      data: res.rows,
      page,
      limit,
      total,
      totalPages: Math.ceil(total / limit),
      sortBy,
      sortOrder,
    };
  } finally {
    client.release();
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\assets.ts
--------------------------------------------------------------------------------
// backend/data-service/src/routes/assets.ts
import { Router, type RequestHandler } from 'express';
import { body, param, query } from 'express-validator';
import { AssetController } from '../controllers/AssetController';
import { authMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';
import { createRateLimit } from '../middleware/rateLimit';
import { validateRequest } from '../middleware/validation';

const router = Router();
const assetController = new AssetController();

// Apply authentication to all routes
router.use(authMiddleware as unknown as RequestHandler);

// Validation schemas
const createAssetValidation = [
  body('name').isString().isLength({ min: 1, max: 255 }).withMessage('Name must be between 1 and 255 characters'),
  body('type')
    .isIn(['table', 'view', 'file', 'api_endpoint', 'stream', 'model'])
    .withMessage('Invalid asset type'),
  body('dataSourceId').isString().withMessage('Data source ID is required'),
  body('path').isString().withMessage('Asset path is required'),
  body('description').optional().isString().isLength({ max: 1000 }).withMessage('Description must be less than 1000 characters'),
  body('metadata').optional().isObject().withMessage('Metadata must be an object'),
  body('tags').optional().isArray().withMessage('Tags must be an array'),
  body('classification')
    .optional()
    .isIn(['public', 'internal', 'confidential', 'restricted'])
    .withMessage('Invalid classification level'),
];

const updateAssetValidation = [
  param('id').isString().withMessage('Asset ID must be a string'),
  body('name').optional().isString().isLength({ min: 1, max: 255 }).withMessage('Name must be between 1 and 255 characters'),
  body('description').optional().isString().isLength({ max: 1000 }).withMessage('Description must be less than 1000 characters'),
  body('metadata').optional().isObject().withMessage('Metadata must be an object'),
  body('tags').optional().isArray().withMessage('Tags must be an array'),
  body('classification')
    .optional()
    .isIn(['public', 'internal', 'confidential', 'restricted'])
    .withMessage('Invalid classification level'),
];

const paginationValidation = [
  query('page').optional().isInt({ min: 1 }).withMessage('Page must be a positive integer'),
  query('limit').optional().isInt({ min: 1, max: 100 }).withMessage('Limit must be between 1 and 100'),
  query('type')
    .optional()
    .isIn(['table', 'view', 'file', 'api_endpoint', 'stream', 'model'])
    .withMessage('Invalid asset type filter'),
  query('dataSourceId').optional().isString().withMessage('Data source ID must be a string'),
  query('classification')
    .optional()
    .isIn(['public', 'internal', 'confidential', 'restricted'])
    .withMessage('Invalid classification filter'),
  query('search').optional().isString().isLength({ min: 1, max: 100 }).withMessage('Search term must be between 1 and 100 characters'),
];

const idValidation = [param('id').isString().withMessage('Asset ID must be a string')];

// --- Rate limiters (cast to RequestHandler to avoid type incompatibilities) ---
const asHandler = (h: any) => h as unknown as RequestHandler;

const listAssetsLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 100 }));
const searchAssetsLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 50 }));
const getAssetStatsLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 30 }));
const getAssetLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 200 }));
const getSchemaLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 30 }));
const getLineageLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 20 }));
const getProfileLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 10 }));
const createAssetLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 20 }));
const scanAssetLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 5 }));
const tagOperationsLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 30 }));
const updateAssetLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 30 }));
const updateClassificationLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 20 }));
const deleteAssetLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 10 }));

/**
 * @route GET /api/assets
 * @desc Get all assets with pagination, filtering, and search
 * @access Private
 */
router.get('/', paginationValidation, validateRequest, listAssetsLimit, asyncHandler(assetController.getAllAssets));

/**
 * @route GET /api/assets/search
 * @desc Search assets by name, description, or metadata
 * @access Private
 */
router.get(
  '/search',
  [
    query('q').isString().isLength({ min: 1, max: 100 }).withMessage('Search query must be between 1 and 100 characters'),
    query('type')
      .optional()
      .isIn(['table', 'view', 'file', 'api_endpoint', 'stream', 'model'])
      .withMessage('Invalid asset type filter'),
    query('limit').optional().isInt({ min: 1, max: 50 }).withMessage('Limit must be between 1 and 50'),
  ],
  validateRequest,
  searchAssetsLimit,
  asyncHandler(assetController.searchAssets),
);

/**
 * @route GET /api/assets/stats
 * @desc Get asset statistics and overview (global)
 * @access Private
 */
router.get('/stats', getAssetStatsLimit, asyncHandler(assetController.getAssetStats));

/**
 * @route GET /api/assets/:id
 * @desc Get a specific asset by ID
 * @access Private
 */
router.get('/:id', idValidation, validateRequest, getAssetLimit, asyncHandler(assetController.getAssetById));

/**
 * @route GET /api/assets/:id/schema
 * @desc Get schema information for an asset
 * @access Private
 */
router.get('/:id/schema', idValidation, validateRequest, getSchemaLimit, asyncHandler(assetController.getAssetSchema));

/**
 * @route GET /api/assets/:id/lineage
 * @desc Get data lineage for an asset
 * @access Private
 */
router.get('/:id/lineage', idValidation, validateRequest, getLineageLimit, asyncHandler(assetController.getAssetLineage));

/**
 * @route GET /api/assets/:id/profile
 * @desc Get data profile for an asset
 * @access Private
 */
router.get('/:id/profile', idValidation, validateRequest, getProfileLimit, asyncHandler(assetController.getAssetProfile));

/**
 * @route GET /api/assets/:id/stats
 * @desc Get usage statistics for a specific asset
 * @access Private
 */
router.get('/:id/stats', idValidation, validateRequest, getAssetStatsLimit, asyncHandler(assetController.getAssetStats));

/**
 * @route POST /api/assets
 * @desc Create a new asset
 * @access Private
 */
router.post('/', createAssetValidation, validateRequest, createAssetLimit, asyncHandler(assetController.createAsset));

/**
 * @route POST /api/assets/:id/scan
 * @desc Trigger a scan/discovery for an asset
 * @access Private
 */
router.post(
  '/:id/scan',
  idValidation,
  [
    body('type').optional().isIn(['full', 'incremental', 'schema_only', 'profile_only']).withMessage('Invalid scan type'),
    body('force').optional().isBoolean().withMessage('Force must be a boolean'),
  ],
  validateRequest,
  scanAssetLimit,
  asyncHandler(assetController.scanAsset),
);

/**
 * @route POST /api/assets/:id/tags
 * @desc Add tags to an asset
 * @access Private
 */
router.post(
  '/:id/tags',
  idValidation,
  [
    body('tags').isArray({ min: 1 }).withMessage('Tags must be a non-empty array'),
    body('tags.*').isString().isLength({ min: 1, max: 50 }).withMessage('Each tag must be between 1 and 50 characters'),
  ],
  validateRequest,
  tagOperationsLimit,
  asyncHandler(assetController.addTags),
);

/**
 * @route PUT /api/assets/:id
 * @desc Update an asset
 * @access Private
 */
router.put('/:id', updateAssetValidation, validateRequest, updateAssetLimit, asyncHandler(assetController.updateAsset));

/**
 * @route PUT /api/assets/:id/classification
 * @desc Update asset classification
 * @access Private
 */
router.put(
  '/:id/classification',
  idValidation,
  [
    body('classification')
      .isIn(['public', 'internal', 'confidential', 'restricted'])
      .withMessage('Invalid classification level'),
    body('reason').optional().isString().isLength({ max: 500 }).withMessage('Reason must be less than 500 characters'),
  ],
  validateRequest,
  updateClassificationLimit,
  asyncHandler(assetController.updateClassification),
);

/**
 * @route DELETE /api/assets/:id
 * @desc Delete an asset (soft delete)
 * @access Private
 */
router.delete('/:id', idValidation, validateRequest, deleteAssetLimit, asyncHandler(assetController.deleteAsset));

/**
 * @route DELETE /api/assets/:id/tags
 * @desc Remove tags from an asset
 * @access Private
 */
router.delete(
  '/:id/tags',
  idValidation,
  [body('tags').isArray({ min: 1 }).withMessage('Tags must be a non-empty array'), body('tags.*').isString().withMessage('Each tag must be a string')],
  validateRequest,
  tagOperationsLimit,
  asyncHandler(assetController.removeTags),
);

export default router;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\catalog.ts
--------------------------------------------------------------------------------
// backend/data-service/src/routes/catalog.ts
import { Request, Response, Router } from 'express';
import mssql from 'mssql';
import { Client as PgClient, Pool, QueryResult } from 'pg';
import { z } from 'zod';
import { ProfileQueue } from '../queue';

const router = Router();
const cpdb = new Pool({ connectionString: process.env.DATABASE_URL });

/* ---------------------------- Utilities ---------------------------- */

const ok = <T>(res: Response, data: T, extra: Record<string, unknown> = {}) =>
  res.json({ success: true, data, ...extra });

const fail = (res: Response, code: number, message: string, extra?: Record<string, unknown>) =>
  res.status(code).json({ success: false, error: message, ...(extra ?? {}) });

type DSRow = {
  id: string;
  tenant_id: number | null;
  type: 'postgresql' | 'mssql';
  config?: any;
  connection_config?: any;
};

async function getDataSourceById(
  id: string
): Promise<{ tenantId: number; type: DSRow['type']; cfg: any; idText: string }> {
  const { rows } = await cpdb.query<DSRow>(
    `SELECT id::text AS id, COALESCE(tenant_id, 1) AS tenant_id, type,
            COALESCE(config, connection_config) AS cfg
     FROM data_sources WHERE id::text = $1`,
    [id]
  );
  const row = rows[0];
  if (!row) throw new Error('Data source not found');
  return { tenantId: row.tenant_id ?? 1, type: row.type, cfg: (row as any).cfg || {}, idText: (row as any).id };
}

/* ------------------------- Ingest (Harvest) ------------------------ */

async function ingestPostgres(tenantId: number, dataSourceId: string, cfg: any) {
  const src = new PgClient({
    host: cfg.host,
    port: Number(cfg.port ?? 5432),
    database: cfg.database,
    user: cfg.username,
    password: cfg.password,
    ssl: cfg.ssl === false || cfg.ssl?.mode === 'disable' ? undefined : cfg.ssl,
  });
  await src.connect();

  const tables = await src.query(`
    SELECT table_schema, table_name, table_type
    FROM information_schema.tables
    WHERE table_schema NOT IN ('pg_catalog','information_schema')
  `);

  const columns = await src.query(`
    SELECT c.table_schema, c.table_name, c.column_name, c.data_type, c.is_nullable, c.ordinal_position,
           d.description AS column_comment
    FROM information_schema.columns c
    LEFT JOIN pg_catalog.pg_class cls ON cls.relname = c.table_name
    LEFT JOIN pg_catalog.pg_namespace ns ON ns.nspname = c.table_schema
    LEFT JOIN pg_catalog.pg_description d ON d.objoid = cls.oid AND d.objsubid = c.ordinal_position
    WHERE c.table_schema NOT IN ('pg_catalog','information_schema')
    ORDER BY c.table_schema, c.table_name, c.ordinal_position
  `);

  const counts = await src.query(`
    SELECT schemaname AS table_schema, relname AS table_name, n_live_tup AS row_estimate
    FROM pg_stat_user_tables
  `);
  await src.end();

  const cnt = new Map<string, number>();
  counts.rows.forEach((r: any) => cnt.set(`${r.table_schema}.${r.table_name}`, Number(r.row_estimate)));

  let assets = 0, cols = 0;
  for (const t of tables.rows) {
    const assetType = t.table_type === 'VIEW' ? 'view' : 'table';
    const rowCount = cnt.get(`${t.table_schema}.${t.table_name}`) ?? null;

    const ar: QueryResult<{ id: string }> = await cpdb.query(
      `INSERT INTO catalog_assets
         (tenant_id, datasource_id, asset_type, schema_name, table_name, row_count, updated_at)
       VALUES ($1,$2,$3,$4,$5,$6,now())
       ON CONFLICT (tenant_id, datasource_id, asset_type, schema_name, table_name)
       DO UPDATE SET row_count = EXCLUDED.row_count, updated_at = now()
       RETURNING id`,
      [tenantId, dataSourceId, assetType, t.table_schema, t.table_name, rowCount]
    );
    const assetId = ar.rows[0].id; assets++;

    const colsForTable = columns.rows.filter((c: any) => c.table_schema === t.table_schema && c.table_name === t.table_name);
    for (const c of colsForTable) {
      await cpdb.query(
        `INSERT INTO catalog_columns (asset_id, column_name, data_type, is_nullable, ordinal, description, updated_at)
         VALUES ($1,$2,$3,$4,$5,$6,now())
         ON CONFLICT (asset_id, column_name)
         DO UPDATE SET data_type = EXCLUDED.data_type,
                       is_nullable = EXCLUDED.is_nullable,
                       ordinal = EXCLUDED.ordinal,
                       description = EXCLUDED.description,
                       updated_at = now()`,
        [assetId, c.column_name, c.data_type, c.is_nullable === 'YES', c.ordinal_position, c.column_comment ?? null]
      );
      cols++;
    }
  }

  await cpdb.query(`DO $$ BEGIN
    IF EXISTS (SELECT 1 FROM pg_matviews WHERE matviewname = 'catalog_metrics') THEN
      PERFORM 1 FROM pg_sleep(0);
      REFRESH MATERIALIZED VIEW CONCURRENTLY catalog_metrics;
    END IF;
  END $$;`);

  return { assets, columns: cols };
}

async function ingestMSSQL(tenantId: number, dataSourceId: string, cfg: any) {
  const pool = await mssql.connect({
    server: cfg.host,
    port: Number(cfg.port ?? 1433),
    database: cfg.database,
    user: cfg.username,
    password: cfg.password,
    options: { encrypt: true, trustServerCertificate: true, ...(cfg.options || {}) }
  });

  const tables = (await pool.request().query(`
    SELECT s.name AS schema_name, t.name AS object_name, 'table' AS asset_type
    FROM sys.tables t JOIN sys.schemas s ON t.schema_id = s.schema_id
    WHERE t.is_ms_shipped = 0
    UNION ALL
    SELECT s.name, v.name, 'view'
    FROM sys.views v JOIN sys.schemas s ON v.schema_id = s.schema_id
  `)).recordset;

  const columns = (await pool.request().query(`
    SELECT s.name AS schema_name, o.name AS object_name, c.name AS column_name,
           ty.name AS data_type, c.is_nullable, c.column_id AS ordinal,
           CAST(ep.value AS NVARCHAR(4000)) AS column_comment
    FROM sys.columns c
    JOIN sys.types ty ON c.user_type_id = ty.user_type_id
    JOIN sys.objects o ON c.object_id = o.object_id AND o.type IN ('U','V')
    JOIN sys.schemas s ON o.schema_id = s.schema_id
    LEFT JOIN sys.extended_properties ep
      ON ep.major_id = c.object_id AND ep.minor_id = c.column_id AND ep.name='MS_Description'
  `)).recordset;

  const counts = (await pool.request().query(`
    SELECT s.name AS schema_name, t.name AS object_name, SUM(p.rows) AS row_count
    FROM sys.tables t
    JOIN sys.partitions p ON t.object_id=p.object_id AND p.index_id IN (0,1)
    JOIN sys.schemas s ON t.schema_id=s.schema_id
    GROUP BY s.name, t.name
  `)).recordset;

  await pool.close();

  const cnt = new Map<string, number>();
  counts.forEach((r: any) => cnt.set(`${r.schema_name}.${r.object_name}`, Number(r.row_count)));

  let assets = 0, cols = 0;
  for (const t of tables as any[]) {
    const rowCount = cnt.get(`${t.schema_name}.${t.object_name}`) ?? null;

    const ar: QueryResult<{ id: string }> = await cpdb.query(
      `INSERT INTO catalog_assets
         (tenant_id, datasource_id, asset_type, schema_name, table_name, row_count, updated_at)
       VALUES ($1,$2,$3,$4,$5,$6,now())
       ON CONFLICT (tenant_id, datasource_id, asset_type, schema_name, table_name)
       DO UPDATE SET row_count = EXCLUDED.row_count, updated_at = now()
       RETURNING id`,
      [tenantId, dataSourceId, t.asset_type, t.schema_name, t.object_name, rowCount]
    );
    const assetId = ar.rows[0].id; assets++;

    const colsForTable = (columns as any[]).filter(c => c.schema_name === t.schema_name && c.object_name === t.object_name);
    for (const c of colsForTable) {
      await cpdb.query(
        `INSERT INTO catalog_columns (asset_id, column_name, data_type, is_nullable, ordinal, description, updated_at)
         VALUES ($1,$2,$3,$4,$5,$6,now())
         ON CONFLICT (asset_id, column_name)
         DO UPDATE SET data_type = EXCLUDED.data_type,
                       is_nullable = EXCLUDED.is_nullable,
                       ordinal = EXCLUDED.ordinal,
                       description = EXCLUDED.description,
                       updated_at = now()`,
        [assetId, c.column_name, c.data_type, !!c.is_nullable, c.ordinal, c.column_comment ?? null]
      );
      cols++;
    }
  }

  await cpdb.query(`DO $$ BEGIN
    IF EXISTS (SELECT 1 FROM pg_matviews WHERE matviewname = 'catalog_metrics') THEN
      REFRESH MATERIALIZED VIEW CONCURRENTLY catalog_metrics;
    END IF;
  END $$;`);

  return { assets, columns: cols };
}

/* -------------------------- Validation/Zod ------------------------- */

const PatchAsset = z.object({
  display_name: z.string().min(1).optional(),
  description: z.string().optional(),
  owner: z.string().optional(),
  classification: z.enum(['public','internal','confidential','restricted']).optional(),
  quality: z.enum(['low','medium','high']).optional(),
  tags: z.array(z.string()).optional()
});

/* ----------------------- Handlers (shared) ------------------------ */

const listAssets = async (req: Request, res: Response) => {
  try {
    const q = req.query as Record<string, string|undefined>;
    const page = Math.max(1, parseInt(q.page ?? '1', 10));
    const limit = Math.min(200, Math.max(1, parseInt(q.limit ?? '50', 10)));
    const offset = (page - 1) * limit;

    const sortBy = (q.sortBy ?? 'name');
    const sortOrder = (q.sortOrder ?? 'asc') === 'desc' ? 'desc' : 'asc';
    const sortCol = sortBy === 'name' ? 'table_name'
                    : sortBy === 'updatedAt' ? 'updated_at'
                    : sortBy === 'createdAt' ? 'created_at'
                    : sortBy === 'quality' ? 'quality'
                    : sortBy === 'owner' ? 'owner'
                    : 'table_name';

    const p: any[] = [];
    let i = 1;
    const where: string[] = [];

    if (q.search) { where.push(`(schema_name || '.' || table_name || ' ' || coalesce(description,'')) ILIKE $${i++}`); p.push(`%${q.search}%`); }
    if (q.type)   { where.push(`asset_type = $${i++}`); p.push(q.type); }
    if (q.owner)  { where.push(`owner = $${i++}`); p.push(q.owner); }
    if (q.quality){ where.push(`quality = $${i++}`); p.push(q.quality); }
    if (q.classification){ where.push(`classification = $${i++}`); p.push(q.classification); }
    if (q.datasourceId){ where.push(`datasource_id::text = $${i++}`); p.push(q.datasourceId); }
    if (q.tags) {
      where.push(`
        (
          (pg_typeof(tags)::text = 'jsonb' AND (tags ?| $${i}))
          OR
          (pg_typeof(tags)::text <> 'jsonb' AND (tags && $${i}::text[]))
        )
      `);
      p.push(q.tags.split(',').map(t => t.trim()));
      i++;
    }

    const whereSql = where.length ? `WHERE ${where.join(' AND ')}` : '';

    const listSql = `
      SELECT id, datasource_id, asset_type, schema_name, table_name, owner, quality, classification, tags,
             row_count, description, created_at, updated_at, display_name
      FROM catalog_assets
      ${whereSql}
      ORDER BY ${sortCol} ${sortOrder}
      LIMIT ${limit} OFFSET ${offset};`;

    const countSql = `SELECT COUNT(*)::bigint AS total FROM catalog_assets ${whereSql};`;

    const [list, total] = await Promise.all([cpdb.query(listSql, p), cpdb.query(countSql, p)]);
    const t = Number(total.rows[0]?.total || 0);
    const totalPages = Math.max(1, Math.ceil(t / limit));
    const payload = { items: list.rows, pagination: { page, limit, total: t, totalPages } };

    const newest = list.rows.reduce<number>((acc: number, r: any) => {
      const ts = r?.updated_at ? new Date(r.updated_at).getTime() : 0;
      return Math.max(acc, ts);
    }, 0);
    const etag = `"assets-${t}-${newest}"`;
    res.set('ETag', etag);
    if (req.headers['if-none-match'] === etag) return res.status(304).end();

    ok(res, payload);
  } catch (e: any) {
    fail(res, 500, e.message);
  }
};

const getAsset = async (req: Request, res: Response) => {
  try {
    const { rows } = await cpdb.query(
      `SELECT a.*, jsonb_agg(c ORDER BY c.ordinal) AS columns
       FROM catalog_assets a
       LEFT JOIN catalog_columns c ON c.asset_id = a.id
       WHERE a.id::text = $1
       GROUP BY a.id`,
      [req.params.id]
    );
    if (!rows[0]) return fail(res, 404, 'Not found');
    ok(res, rows[0]);
  } catch (e: any) {
    fail(res, 500, e.message);
  }
};

const exportAssets = async (req: Request, res: Response) => {
  try {
    const q = req.query as Record<string, string|undefined>;

    const p: any[] = [];
    let i = 1;
    const where: string[] = [];

    if (q.search) { where.push(`(schema_name || '.' || table_name || ' ' || coalesce(description,'')) ILIKE $${i++}`); p.push(`%${q.search}%`); }
    if (q.type)   { where.push(`asset_type = $${i++}`); p.push(q.type); }
    if (q.owner)  { where.push(`owner = $${i++}`); p.push(q.owner); }
    if (q.quality){ where.push(`quality = $${i++}`); p.push(q.quality); }
    if (q.classification){ where.push(`classification = $${i++}`); p.push(q.classification); }
    if (q.datasourceId){ where.push(`datasource_id::text = $${i++}`); p.push(q.datasourceId); }
    if (q.tags) {
      where.push(`
        (
          (pg_typeof(tags)::text = 'jsonb' AND (tags ?| $${i}))
          OR
          (pg_typeof(tags)::text <> 'jsonb' AND (tags && $${i}::text[]))
        )
      `);
      p.push(q.tags.split(',').map(t => t.trim()));
      i++;
    }
    const whereSql = where.length ? `WHERE ${where.join(' AND ')}` : '';

    const { rows } = await cpdb.query(
      `SELECT datasource_id::text AS datasource_id, asset_type, schema_name, table_name, display_name, owner, quality, classification, row_count, tags, description, updated_at
       FROM catalog_assets
       ${whereSql}
       ORDER BY schema_name, table_name`,
      p
    );

    res.setHeader('Content-Type', 'text/csv; charset=utf-8');
    res.setHeader('Content-Disposition', `attachment; filename="assets-${Date.now()}.csv"`);

    const header = [
      'datasource_id','asset_type','schema_name','table_name','display_name',
      'owner','quality','classification','row_count','tags','description','updated_at'
    ];
    res.write(header.join(',') + '\n');

    for (const r of rows) {
      const tags =
        Array.isArray(r.tags) ? r.tags.join('|')
        : (typeof r.tags === 'object' && r.tags ? Object.values(r.tags as any).join('|') : '');
      const esc = (v: any) => {
        const s = String(v ?? '');
        return (s.includes(',') || s.includes('"') || s.includes('\n')) ? `"${s.replace(/"/g, '""')}"` : s;
      };
      res.write([
        esc(r.datasource_id),
        esc(r.asset_type),
        esc(r.schema_name),
        esc(r.table_name),
        esc(r.display_name ?? ''),
        esc(r.owner ?? ''),
        esc(r.quality ?? ''),
        esc(r.classification ?? ''),
        esc(r.row_count ?? ''),
        esc(tags),
        esc(r.description ?? ''),
        esc(r.updated_at ? new Date(r.updated_at).toISOString() : '')
      ].join(',') + '\n');
    }

    res.end();
  } catch (e: any) {
    fail(res, 500, e.message);
  }
};

/* ------------------------------ Routes ---------------------------- */

// PATCH asset metadata
router.patch('/catalog/assets/:id', async (req, res) => {
  try {
    const body = PatchAsset.parse(req.body || {});
    const fields = Object.keys(body);
    if (fields.length === 0) return fail(res, 400, 'No fields');

    const sets = fields.map((k, idx) => `${k}=$${idx+1}`).join(', ') + ', updated_at=now()';
    const vals = fields.map(k => (body as any)[k]);
    vals.push(req.params.id);

    const q = await cpdb.query(
      `UPDATE catalog_assets SET ${sets} WHERE id::text=$${vals.length} RETURNING *`, vals
    );
    if (!q.rows[0]) return fail(res, 404, 'Not found');
    ok(res, q.rows[0]);
  } catch (e: any) {
    fail(res, 400, e?.message || 'Invalid payload');
  }
});

// Profile launch & read
router.post('/catalog/assets/:id/profile', async (req, res) => {
  try {
    const assetId = String(req.params.id);
    await ProfileQueue.add('profile-one', { assetId }, { removeOnComplete: 100, removeOnFail: 100 });
    ok(res, { queued: true });
  } catch (e: any) {
    fail(res, 500, e.message);
  }
});
router.get('/catalog/assets/:id/profile', async (req, res) => {
  try {
    const assetId = String(req.params.id);
    const runs = await cpdb.query(
      `SELECT * FROM catalog_profile_runs WHERE asset_id=$1 ORDER BY started_at DESC LIMIT 1`, [assetId]
    );
    const cols = await cpdb.query(
      `SELECT column_name, null_frac, distinct_frac, min_value, max_value, avg_length, pii_type, inferred_type
       FROM catalog_column_profiles WHERE asset_id=$1 ORDER BY column_name`, [assetId]
    );
    ok(res, { run: runs.rows[0] || null, columns: cols.rows });
  } catch (e: any) {
    fail(res, 500, e.message);
  }
});

// Search
router.get('/catalog/search', async (req, res) => {
  try {
    const q = String(req.query.q || '').trim();
    if (!q) return ok(res, { items: [] });
    const limit = Math.min(50, Number(req.query.limit || 20));
    const sql = `
      SELECT id, datasource_id, asset_type, schema_name, table_name, display_name, description, tags,
             ts_rank(search, plainto_tsquery('simple',$1)) AS rank
      FROM catalog_assets
      WHERE search @@ plainto_tsquery('simple',$1)
      ORDER BY rank DESC, updated_at DESC
      LIMIT $2
    `;
    const { rows } = await cpdb.query(sql, [q, limit]);
    ok(res, { items: rows });
  } catch (e: any) {
    fail(res, 500, e.message);
  }
});

// Lineage
router.get('/catalog/assets/:id/lineage', async (req, res) => {
  try {
    const id = String(req.params.id);
    const { rows } = await cpdb.query(
      `SELECT upstream_asset_id, downstream_asset_id, edge_type, confidence
       FROM catalog_edges
       WHERE upstream_asset_id=$1 OR downstream_asset_id=$1`, [id]
    );
    ok(res, { edges: rows });
  } catch (e: any) {
    fail(res, 500, e.message);
  }
});

// Metrics (matview if present, fallback otherwise)
router.get('/catalog/metrics', async (_req: Request, res: Response) => {
  try {
    const { rows } = await cpdb.query(`
      WITH ensure AS (
        SELECT 1
        FROM pg_matviews
        WHERE matviewname = 'catalog_metrics'
      )
      SELECT * FROM catalog_metrics LIMIT 1;
    `).catch(async () => {
      const fb = await cpdb.query(`
        SELECT COUNT(*)::bigint AS total,
               COUNT(*) FILTER (WHERE asset_type='table')::bigint AS tables,
               COUNT(*) FILTER (WHERE asset_type='view')::bigint AS views
        FROM catalog_assets;
      `);
      return { rows: [fb.rows[0]] } as any;
    });

    ok(res, rows?.[0] || { total: 0, tables: 0, views: 0 });
  } catch (e: any) {
    fail(res, 500, e.message);
  }
});

// Export CSV
router.get('/catalog/assets/export', exportAssets);

// Sync (harvest)
router.post('/data-sources/:id/sync', async (req: Request, res: Response) => {
  const id = String(req.params.id);
  const doAsync = String(req.query.async ?? 'false') === 'true';

  try {
    const { tenantId, type, cfg, idText } = await getDataSourceById(id);

    const run = async () => {
      if (type === 'postgresql') return ingestPostgres(tenantId, idText, cfg);
      if (type === 'mssql') return ingestMSSQL(tenantId, idText, cfg);
      throw new Error(`Unsupported datasource type: ${type}`);
    };

    if (doAsync) {
      res.status(202).json({ success: true, syncId: `sync_${Date.now()}` });
      run().catch((e) => console.error('[data-service] async sync failed', e));
      return;
    }

    const result = await run();
    ok(res, { ...result });
  } catch (e: any) {
    fail(res, 500, e.message);
  }
});

/* -------------------------- Dual registration --------------------- */
/* These ensure the FE can call either /api/catalog/assets or /api/assets */
router.get('/catalog/assets', listAssets);
router.get('/assets', listAssets);

router.get('/catalog/assets/:id', getAsset);
router.get('/assets/:id', getAsset);

router.get('/catalog/assets/export', exportAssets);
router.get('/assets/export', exportAssets);

export default router;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\chat.ts
--------------------------------------------------------------------------------
import { Router } from 'express';
import { z } from 'zod';

const r = Router();

const MsgSchema = z.object({
  role: z.enum(['user','assistant','system']),
  content: z.string().min(1)
});
const BodySchema = z.object({
  messages: z.array(MsgSchema).min(1),
});

r.post('/chat', async (req, res) => {
  const parse = BodySchema.safeParse(req.body);
  if (!parse.success) return res.status(400).json({ success: false, error: 'Invalid payload' });

  const messages = parse.data.messages;
  const lastUser = [...messages].reverse().find(m => m.role === 'user')?.content || '';

  // If OPENAI_API_KEY is present, try a short completion; else echo
  const key = (process.env.OPENAI_API_KEY || '').trim();
  let reply = `Echo: ${lastUser}`;
  if (key) {
    try {
      // Lazy import to avoid hard dep if key is missing
      const fetch = (await import('node-fetch')).default as any;
      const resp = await fetch('https://api.openai.com/v1/chat/completions', {
        method: 'POST',
        headers: { 'Authorization': `Bearer ${key}`, 'Content-Type': 'application/json' },
        body: JSON.stringify({ model: 'gpt-4o-mini', messages })
      });
      const json = await resp.json();
      reply = json?.choices?.[0]?.message?.content || reply;
    } catch (e: any) {
      reply = `Assistant: ${lastUser}`; // graceful fallback
    }
  }

  res.json({ success: true, data: { reply } });
});

export default r;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\dataSources.routes.ts
--------------------------------------------------------------------------------
import { Router } from 'express';
import { DataSourceController } from '../controllers/DataSourceController';
import { authMiddleware, optionalAuthMiddleware } from '../middleware/auth';

const r = Router();
const ctrl = new DataSourceController();

// READ (no hard auth; optional in dev)
r.get('/data-sources', optionalAuthMiddleware, ctrl.getAllDataSources);
r.get('/data-sources/health', optionalAuthMiddleware, ctrl.getHealthSummary);
r.get('/data-sources/:id', optionalAuthMiddleware, ctrl.getDataSourceById);
r.get('/data-sources/:id/schema', optionalAuthMiddleware, ctrl.getDataSourceSchema);

// WRITE (protected; in dev SKIP_AUTH=true bypasses)
r.post('/data-sources', authMiddleware, ctrl.createDataSource);
r.put('/data-sources/:id', authMiddleware, ctrl.updateDataSource);
r.delete('/data-sources/:id', authMiddleware, ctrl.deleteDataSource);
r.post('/data-sources/:id/test', authMiddleware, ctrl.testConnection);
r.post('/data-sources/:id/sync', authMiddleware, ctrl.syncDataSource);

export default r;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\dataSources.ts
--------------------------------------------------------------------------------
import { Router, type RequestHandler } from 'express';
import { body, param, query } from 'express-validator';
import { DataSourceController } from '../controllers/DataSourceController';
import { authMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';
import { createRateLimit } from '../middleware/rateLimit';
import { validateRequest } from '../middleware/validation';

// Use this ONE router file. Delete/ignore DataSources.routes.ts.
const router = Router();
const ctrl = new DataSourceController();

const asHandler = (h: any) => h as unknown as RequestHandler;
const IS_PROD = (process.env.NODE_ENV || '').toLowerCase() === 'production';

/** Type normalizers (inputs -> canonical) */
const CANONICAL_TYPES = [
  'postgresql','mysql','mssql','oracle','mongodb','redis',
  's3','azure-blob','gcs','snowflake','bigquery','redshift',
  'databricks','api','file','kafka','elasticsearch',
] as const;
type CanonicalType = (typeof CANONICAL_TYPES)[number];

const INPUT_TYPES = new Set<string>([...CANONICAL_TYPES, 'postgres']);
const normalizeType = (t?: string): CanonicalType | undefined => {
  if (!t) return undefined;
  const x = t.toLowerCase();
  const mapped = x === 'postgres' ? 'postgresql' : x;
  return (CANONICAL_TYPES as readonly string[]).includes(mapped)
    ? (mapped as CanonicalType)
    : undefined;
};

const INPUT_STATUSES = new Set<string>([
  'active','inactive','pending','error','testing','connected','disconnected','warning','syncing',
]);

/** Sort keys we allow from the UI */
const ALLOWED_SORT_BY = new Set(['updatedAt','createdAt','name','status','type'] as const);
const normalizeListParams: RequestHandler = (req, _res, next) => {
  // pagination
  const page = Math.max(parseInt(String(req.query.page ?? '1'), 10) || 1, 1);
  const limitRaw = Math.max(parseInt(String(req.query.limit ?? '20'), 10) || 20, 1);
  const limit = Math.min(limitRaw, 100);

  // sorting (keep UI names; service maps -> DB columns)
  const sortByRaw = String(req.query.sortBy ?? '').trim();
  const sortOrderRaw = String(req.query.sortOrder ?? '').trim().toLowerCase();
  const sortBy = ALLOWED_SORT_BY.has(sortByRaw as any) ? sortByRaw : 'updatedAt';
  const sortOrder = sortOrderRaw === 'asc' ? 'asc' : 'desc';

  // filters (normalized)
  const status = typeof req.query.status === 'string' && INPUT_STATUSES.has(req.query.status.toLowerCase())
    ? req.query.status.toLowerCase()
    : undefined;
  const type = normalizeType(req.query.type as string | undefined);

  req.query.page = String(page);
  req.query.limit = String(limit);
  req.query.sortBy = sortBy;
  req.query.sortOrder = sortOrder;
  if (status) req.query.status = status; else delete req.query.status;
  if (type) req.query.type = type; else delete req.query.type;

  next();
};

// Rate limits
const listLimit    = asHandler(createRateLimit({ windowMs: 60_000, max: 100 }));
const healthLimit  = asHandler(createRateLimit({ windowMs: 60_000, max: 60  }));
const getByIdLimit = asHandler(createRateLimit({ windowMs: 60_000, max: 200 }));
const schemaLimit  = asHandler(createRateLimit({ windowMs: 60_000, max: 30  }));
const createLimit  = asHandler(createRateLimit({ windowMs: 60_000, max: 20  }));
const testLimit    = asHandler(createRateLimit({ windowMs: 60_000, max: 10  }));
const syncLimit    = asHandler(createRateLimit({ windowMs: 60_000, max: 5   }));
const updateLimit  = asHandler(createRateLimit({ windowMs: 60_000, max: 30  }));
const deleteLimit  = asHandler(createRateLimit({ windowMs: 60_000, max: 10  }));

// Validation
const paginationValidation = [
  query('page').optional().isInt({ min: 1 }),
  query('limit').optional().isInt({ min: 1, max: 100 }),
  query('status').optional().isString().custom((v) => INPUT_STATUSES.has(String(v).toLowerCase())),
  query('type').optional().isString().custom((v) => INPUT_TYPES.has(String(v).toLowerCase())),
  query('sortBy').optional().isString(),
  query('sortOrder').optional().isIn(['asc','desc']),
  query('search').optional().isString(),
  query('createdBy').optional().isString(),
];

const idValidation = [param('id').isString()];

const createDataSourceValidation = [
  body('name').isString().isLength({ min: 1, max: 255 }),
  body('description').optional().isString().isLength({ max: 1000 }),
  body('type').isString()
    .custom((val) => INPUT_TYPES.has(String(val).toLowerCase()))
    .customSanitizer((val) => normalizeType(String(val))),
  body('connectionConfig').isObject(),
  body('tags').optional().isArray(),
  body('metadata').optional().isObject(),
];

const updateDataSourceValidation = [
  param('id').isString(),
  body('name').optional().isString().isLength({ min: 1, max: 255 }),
  body('description').optional().isString().isLength({ max: 1000 }),
  body('type').optional().isString()
    .custom((val) => INPUT_TYPES.has(String(val).toLowerCase()))
    .customSanitizer((val) => normalizeType(String(val))),
  body('connectionConfig').optional().isObject(),
  body('tags').optional().isArray(),
  body('metadata').optional().isObject(),
];

/** Guard: in dev accept SKIP_AUTH=true or header X-Dev-Auth: 1 */
const guard: RequestHandler = (req, res, next) => {
  const devBypass =
    !IS_PROD &&
    (
      (process.env.SKIP_AUTH || '').toLowerCase() === 'true' ||
      (process.env.MOCK_AUTH || '').toLowerCase() === 'true' ||
      req.header('x-dev-auth') === '1'
    );
  if (devBypass) return next();
  return authMiddleware(req, res, next);
};

/** ROUTES (relative!) â€” app.ts adds the /api/data-sources & /data-sources prefixes */
router.get(
  '/',
  guard,
  paginationValidation,
  validateRequest,
  normalizeListParams,
  listLimit,
  asyncHandler(ctrl.getAllDataSources),
);

router.get('/health', guard, healthLimit, asyncHandler(ctrl.getHealthSummary));

router.get('/:id', guard, idValidation, validateRequest, getByIdLimit, asyncHandler(ctrl.getDataSourceById));
router.get('/:id/schema', guard, idValidation, validateRequest, schemaLimit, asyncHandler(ctrl.getDataSourceSchema));

router.post('/', guard, createDataSourceValidation, validateRequest, createLimit, asyncHandler(ctrl.createDataSource));
router.put('/:id', guard, updateDataSourceValidation, validateRequest, updateLimit, asyncHandler(ctrl.updateDataSource));
router.delete('/:id', guard, idValidation, validateRequest, deleteLimit, asyncHandler(ctrl.deleteDataSource));

router.post('/:id/test', guard, idValidation, validateRequest, testLimit, asyncHandler(ctrl.testConnection));
router.post('/:id/sync',
  guard,
  idValidation,
  body('force').optional().isBoolean(),
  validateRequest,
  syncLimit,
  asyncHandler(ctrl.syncDataSource),
);

export default router;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\governance.ts
--------------------------------------------------------------------------------
import { Router } from 'express';
import { body, param, query } from 'express-validator';
import { GovernanceController } from '../controllers/GovernanceController';
import { authMiddleware, optionalAuthMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';
import { createRateLimit } from '../middleware/rateLimit';
import { validateRequest } from '../middleware/validation';

const r = Router();
const ctrl = new GovernanceController();
const listLimit = createRateLimit({ windowMs: 60_000, max: 120 });
const writeLimit = createRateLimit({ windowMs: 60_000, max: 30  });

r.get(
  '/policies',
  optionalAuthMiddleware,
  query('status').optional().isIn(['active','inactive']),
  validateRequest,
  listLimit,
  asyncHandler(ctrl.listPolicies),
);

r.post(
  '/policies',
  authMiddleware,
  body('name').isString().isLength({ min: 2, max: 255 }),
  body('category').optional().isIn(['access','privacy','retention']),
  body('status').optional().isIn(['active','inactive']),
  body('rules').optional().isArray(),
  validateRequest,
  writeLimit,
  asyncHandler(ctrl.createPolicy),
);

r.put(
  '/policies/:id',
  authMiddleware,
  param('id').isString(),
  validateRequest,
  writeLimit,
  asyncHandler(ctrl.updatePolicy),
);

r.delete(
  '/policies/:id',
  authMiddleware,
  param('id').isString(),
  validateRequest,
  writeLimit,
  asyncHandler(ctrl.deletePolicy),
);

export default r;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\index.ts
--------------------------------------------------------------------------------
import { Router } from 'express';
import dataSourceRoutes from './dataSources';

const api = Router();

// mount exactly as the frontend/gateway calls it
api.use('/data-sources', dataSourceRoutes);

export default api;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\lineage.ts
--------------------------------------------------------------------------------
import { Router } from 'express';
import { LineageController } from '../controllers/LineageController';
import { optionalAuthMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';

const r = Router();
const ctrl = new LineageController();

r.get('/graph', optionalAuthMiddleware, asyncHandler(ctrl.graph));
export default r;


--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\quality.ts
--------------------------------------------------------------------------------
// backend/data-service/src/routes/quality.ts
import { Router } from 'express';
import { body, param, query } from 'express-validator';
import { QualityController } from '../controllers/QualityController';
import { auditMiddleware } from '../middleware/audit';
import { authMiddleware, optionalAuthMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';
import { createRateLimit } from '../middleware/rateLimit';
import { validateRequest } from '../middleware/validation';

const router = Router();
const controller = new QualityController();

// Enhanced rate limiting with different tiers
const strictRateLimit = createRateLimit({ 
  windowMs: 60_000, 
  max: 10,
  skipSuccessfulRequests: false,
  standardHeaders: true
});

const moderateRateLimit = createRateLimit({ 
  windowMs: 60_000, 
  max: 60,
  skipSuccessfulRequests: true,
  standardHeaders: true
});

const listRateLimit = createRateLimit({ 
  windowMs: 60_000, 
  max: 120,
  skipSuccessfulRequests: true,
  standardHeaders: true
});

// Validation schemas for reuse
const uuidValidation = param('id')
  .isUUID(4)
  .withMessage('Invalid UUID format')
  .bail();

const paginationValidation = [
  query('limit')
    .optional()
    .isInt({ min: 1, max: 100 })
    .withMessage('Limit must be between 1 and 100')
    .toInt(),
  query('offset')
    .optional()
    .isInt({ min: 0 })
    .withMessage('Offset must be non-negative')
    .toInt()
];

const sqlValidationFunction = (value: string) => {
  // Basic SQL injection prevention
  const dangerous = /(\b(DROP|DELETE|INSERT|UPDATE|ALTER|CREATE|TRUNCATE|EXEC|EXECUTE)\b)/i;
  if (dangerous.test(value)) {
    throw new Error('Expression contains forbidden SQL keywords');
  }
  if (!value.trim().toUpperCase().startsWith('SELECT')) {
    throw new Error('Expression must start with SELECT');
  }
  return true;
};

const ruleValidation = [
  body('name')
    .isString()
    .isLength({ min: 2, max: 255 })
    .trim()
    .withMessage('Name must be between 2 and 255 characters'),
  body('description')
    .optional()
    .isString()
    .isLength({ max: 1000 })
    .trim()
    .withMessage('Description must not exceed 1000 characters'),
  body('severity')
    .optional()
    .isIn(['low', 'medium', 'high', 'critical'])
    .withMessage('Invalid severity level'),
  body('type')
    .optional()
    .isIn(['sql', 'metric'])
    .withMessage('Invalid rule type'),
  body('dialect')
    .optional()
    .isIn(['postgres', 'generic'])
    .withMessage('Invalid dialect'),
  body('expression')
    .isString()
    .isLength({ min: 3, max: 10000 })
    .withMessage('Expression must be between 3 and 10000 characters')
    .custom(sqlValidationFunction),
  body('tags')
    .optional()
    .isArray({ max: 20 })
    .withMessage('Tags must be an array with maximum 20 items')
    .custom((tags) => {
      if (tags && !tags.every((tag: any) => typeof tag === 'string' && tag.length <= 50)) {
        throw new Error('Each tag must be a string with maximum 50 characters');
      }
      return true;
    }),
  body('enabled')
    .optional()
    .isBoolean()
    .withMessage('Enabled must be a boolean')
];

// Routes

/**
 * @route GET /api/quality/health
 * @desc Health check for quality service
 * @access Public
 */
router.get(
  '/health',
  listRateLimit,
  asyncHandler(controller.healthCheck)
);

/**
 * @route GET /api/quality/rules
 * @desc List quality rules with filtering and pagination
 * @access Public (with optional auth for enhanced features)
 */
router.get(
  '/rules',
  optionalAuthMiddleware,
  [
    query('q')
      .optional()
      .isString()
      .isLength({ max: 100 })
      .trim()
      .withMessage('Search query must not exceed 100 characters'),
    query('severity')
      .optional()
      .isIn(['low', 'medium', 'high', 'critical'])
      .withMessage('Invalid severity filter'),
    query('enabled')
      .optional()
      .isBoolean()
      .toBoolean()
      .withMessage('Enabled filter must be boolean'),
    ...paginationValidation
  ],
  validateRequest,
  listRateLimit,
  auditMiddleware('QUALITY_RULES', 'LIST'),
  asyncHandler(controller.listRules)
);

/**
 * @route GET /api/quality/rules/:id
 * @desc Get a specific quality rule
 * @access Public
 */
router.get(
  '/rules/:id',
  uuidValidation,
  validateRequest,
  moderateRateLimit,
  auditMiddleware('QUALITY_RULE', 'ACCESS'),
  asyncHandler(controller.getRule)
);

/**
 * @route POST /api/quality/rules
 * @desc Create a new quality rule
 * @access Private
 */
router.post(
  '/rules',
  authMiddleware,
  ruleValidation,
  validateRequest,
  strictRateLimit,
  auditMiddleware('QUALITY_RULE', 'CREATE'),
  asyncHandler(controller.createRule)
);

/**
 * @route PUT /api/quality/rules/:id
 * @desc Update an existing quality rule
 * @access Private
 */
router.put(
  '/rules/:id',
  authMiddleware,
  uuidValidation,
  [
    body('name')
      .optional()
      .isString()
      .isLength({ min: 2, max: 255 })
      .trim()
      .withMessage('Name must be between 2 and 255 characters'),
    body('description')
      .optional()
      .isString()
      .isLength({ max: 1000 })
      .trim()
      .withMessage('Description must not exceed 1000 characters'),
    body('severity')
      .optional()
      .isIn(['low', 'medium', 'high', 'critical'])
      .withMessage('Invalid severity level'),
    body('expression')
      .optional()
      .isString()
      .isLength({ min: 3, max: 10000 })
      .withMessage('Expression must be between 3 and 10000 characters')
      .custom((value) => {
        if (value) {
          const dangerous = /(\b(DROP|DELETE|INSERT|UPDATE|ALTER|CREATE|TRUNCATE|EXEC|EXECUTE)\b)/i;
          if (dangerous.test(value)) {
            throw new Error('Expression contains forbidden SQL keywords');
          }
          if (!value.trim().toUpperCase().startsWith('SELECT')) {
            throw new Error('Expression must start with SELECT');
          }
        }
        return true;
      }),
    body('tags')
      .optional()
      .isArray({ max: 20 })
      .withMessage('Tags must be an array with maximum 20 items')
      .custom((tags) => {
        if (tags && !tags.every((tag: any) => typeof tag === 'string' && tag.length <= 50)) {
          throw new Error('Each tag must be a string with maximum 50 characters');
        }
        return true;
      }),
    body('enabled')
      .optional()
      .isBoolean()
      .withMessage('Enabled must be a boolean')
  ],
  validateRequest,
  strictRateLimit,
  auditMiddleware('QUALITY_RULE', 'UPDATE'),
  asyncHandler(controller.updateRule)
);

/**
 * @route DELETE /api/quality/rules/:id
 * @desc Delete (disable) a quality rule
 * @access Private
 */
router.delete(
  '/rules/:id',
  authMiddleware,
  uuidValidation,
  validateRequest,
  strictRateLimit,
  auditMiddleware('QUALITY_RULE', 'DELETE'),
  asyncHandler(controller.deleteRule)
);

/**
 * @route POST /api/quality/rules/:id/execute
 * @desc Execute a quality rule
 * @access Private
 */
router.post(
  '/rules/:id/execute',
  authMiddleware,
  uuidValidation,
  [
    body('dataSourceId')
      .optional()
      .isUUID(4)
      .withMessage('Invalid data source ID format'),
    body('timeout')
      .optional()
      .isInt({ min: 1000, max: 300000 })
      .withMessage('Timeout must be between 1000 and 300000 milliseconds')
      .toInt()
  ],
  validateRequest,
  strictRateLimit,
  auditMiddleware('QUALITY_RULE', 'EXECUTE'),
  asyncHandler(controller.executeRule)
);

/**
 * @route GET /api/quality/results
 * @desc List quality rule execution results
 * @access Public (with optional auth)
 */
router.get(
  '/results',
  optionalAuthMiddleware,
  [
    query('ruleId')
      .optional()
      .isUUID(4)
      .withMessage('Invalid rule ID format'),
    query('dataSourceId')
      .optional()
      .isUUID(4)
      .withMessage('Invalid data source ID format'),
    query('status')
      .optional()
      .isIn(['passed', 'failed', 'error', 'skipped', 'timeout'])
      .withMessage('Invalid status filter'),
    ...paginationValidation
  ],
  validateRequest,
  listRateLimit,
  auditMiddleware('QUALITY_RESULTS', 'LIST'),
  asyncHandler(controller.listResults)
);

// Bulk operations endpoint
/**
 * @route POST /api/quality/rules/bulk/execute
 * @desc Execute multiple quality rules
 * @access Private
 */
router.post(
  '/rules/bulk/execute',
  authMiddleware,
  [
    body('ruleIds')
      .isArray({ min: 1, max: 10 })
      .withMessage('Must provide 1-10 rule IDs')
      .custom((ruleIds) => {
        if (!ruleIds.every((id: any) => typeof id === 'string' && /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(id))) {
          throw new Error('All rule IDs must be valid UUIDs');
        }
        return true;
      }),
    body('dataSourceId')
      .optional()
      .isUUID(4)
      .withMessage('Invalid data source ID format')
  ],
  validateRequest,
  createRateLimit({ windowMs: 300_000, max: 5 }), // Very limited for bulk operations
  auditMiddleware('QUALITY_RULES', 'BULK_EXECUTE'),
  asyncHandler(controller.executeRule)
);

// Statistics endpoint
/**
 * @route GET /api/quality/stats
 * @desc Get quality statistics
 * @access Public (with optional auth)
 */
router.get(
  '/stats',
  optionalAuthMiddleware,
  [
    query('timeframe')
      .optional()
      .isIn(['24h', '7d', '30d', '90d'])
      .withMessage('Invalid timeframe'),
    query('groupBy')
      .optional()
      .isIn(['severity', 'status', 'data_source'])
      .withMessage('Invalid groupBy parameter')
  ],
  validateRequest,
  moderateRateLimit,
  auditMiddleware('QUALITY_STATS', 'ACCESS'),
  asyncHandler(controller.getQualityStats)
);

// Error handling middleware for this router
router.use((error: any, req: any, res: any, next: any) => {
  const errorResponse = {
    success: false,
    error: {
      code: error.code || 'INTERNAL_ERROR',
      message: error.message || 'An unexpected error occurred',
      ...(error.details && { details: error.details }),
      ...(error.errorId && { errorId: error.errorId })
    },
    meta: {
      timestamp: new Date().toISOString(),
      path: req.path,
      method: req.method
    }
  };

  const statusCode = error.statusCode || 500;
  
  // Don't expose internal error details in production
  if (statusCode >= 500 && process.env.NODE_ENV === 'production') {
    errorResponse.error.message = 'Internal server error';
    delete errorResponse.error.details;
  }

  res.status(statusCode).json(errorResponse);
});

export default router;


--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\requests.ts
--------------------------------------------------------------------------------
import { Router } from 'express';
import { body, param, query } from 'express-validator';
import { RequestsController } from '../controllers/RequestsController';
import { authMiddleware, optionalAuthMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';
import { createRateLimit } from '../middleware/rateLimit';
import { validateRequest } from '../middleware/validation';

const r = Router();
const ctrl = new RequestsController();

r.get(
  '/',
  optionalAuthMiddleware,
  query('status').optional().isString(),
  query('type').optional().isString(),
  validateRequest,
  createRateLimit({ windowMs: 60_000, max: 120 }),
  asyncHandler(ctrl.list),
);

r.post(
  '/',
  authMiddleware,
  body('title').isString().isLength({ min: 3, max: 255 }),
  body('type').optional().isIn(['access','change','incident']),
  body('payload').optional().isObject(),
  validateRequest,
  createRateLimit({ windowMs: 60_000, max: 30 }),
  asyncHandler(ctrl.create),
);

r.put(
  '/:id',
  authMiddleware,
  param('id').isString(),
  body('status').optional().isIn(['open','approved','rejected','closed']),
  validateRequest,
  createRateLimit({ windowMs: 60_000, max: 60 }),
  asyncHandler(ctrl.update),
);

export default r;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\sources.ts
--------------------------------------------------------------------------------
// backend/data-service/src/routes/sources.ts
import { Router, type RequestHandler } from 'express';
import { body, param, query } from 'express-validator';
import { DataSourceController } from '../controllers/DataSourceController';
import { authMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';
import { createRateLimit } from '../middleware/rateLimit';
import { validateDataSource, validateDataSourceUpdate, validateRequest } from '../middleware/validation';

const router = Router();
const dataSourceController = new DataSourceController();

// Helper to coerce mixed-type middlewares into Express' RequestHandler
const asHandler = (h: any) => h as unknown as RequestHandler;

// ðŸ” Auth on every route
router.use(asHandler(authMiddleware));

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Validation
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const paginationValidation = [
  query('page').optional().isInt({ min: 1 }).withMessage('Page must be a positive integer'),
  query('limit').optional().isInt({ min: 1, max: 100 }).withMessage('Limit must be between 1 and 100'),
  query('type')
    .optional()
    .isIn([
      'postgresql', 'mysql', 'mssql', 'oracle', 'mongodb', 'redis',
      's3', 'azure-blob', 'gcs', 'snowflake', 'bigquery', 'redshift',
      'databricks', 'api', 'file', 'kafka', 'elasticsearch',
    ])
    .withMessage('Invalid source type filter'),
  query('status')
    .optional()
    .isIn(['pending', 'connected', 'disconnected', 'error', 'warning', 'syncing', 'testing'])
    .withMessage('Invalid status filter'),
];

const idValidation = [param('id').isUUID().withMessage('Source ID must be a valid UUID')];

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Per-route rate limiters (use the factory; donâ€™t â€œcallâ€ a handler as a fn)
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const listSourcesLimit          = asHandler(createRateLimit({ windowMs: 60_000, max: 100 }));
const healthLimit               = asHandler(createRateLimit({ windowMs: 60_000, max: 60 }));
const getSourceLimit            = asHandler(createRateLimit({ windowMs: 60_000, max: 200 }));
const schemaLimit               = asHandler(createRateLimit({ windowMs: 60_000, max: 30 }));
const createSourceLimit         = asHandler(createRateLimit({ windowMs: 60_000, max: 20 }));
const testLimit                 = asHandler(createRateLimit({ windowMs: 60_000, max: 10 }));
const discoverSourceLimit       = asHandler(createRateLimit({ windowMs: 60_000, max: 5 }));
const updateSourceLimit         = asHandler(createRateLimit({ windowMs: 60_000, max: 30 }));
const updateStatusLimit         = asHandler(createRateLimit({ windowMs: 60_000, max: 20 }));
const deleteSourceLimit         = asHandler(createRateLimit({ windowMs: 60_000, max: 10 }));

// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
// Routes â€“ only methods that exist on DataSourceController
// â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

/**
 * @route GET /api/sources
 * @desc Get all data sources with pagination & filters
 */
router.get(
  '/',
  paginationValidation,
  validateRequest,
  listSourcesLimit,
  asyncHandler(dataSourceController.getAllDataSources),
);

/**
 * @route GET /api/sources/health
 * @desc Health summary of all data sources
 */
router.get(
  '/health',
  healthLimit,
  asyncHandler(dataSourceController.getHealthSummary),
);

/**
 * @route GET /api/sources/:id
 * @desc Get a data source by ID
 */
router.get(
  '/:id',
  idValidation,
  validateRequest,
  getSourceLimit,
  asyncHandler(dataSourceController.getDataSourceById),
);

/**
 * @route GET /api/sources/:id/schema
 * @desc Get schema for a data source
 */
router.get(
  '/:id/schema',
  idValidation,
  validateRequest,
  schemaLimit,
  asyncHandler(dataSourceController.getDataSourceSchema),
);

/**
 * @route POST /api/sources
 * @desc Create a new data source
 */
router.post(
  '/',
  validateDataSource,
  validateRequest,
  createSourceLimit,
  asyncHandler(dataSourceController.createDataSource),
);

/**
 * @route POST /api/sources/:id/test
 * @desc Test connection for an existing source
 * (if you want a â€œtest without creatingâ€ endpoint, add a controller method first)
 */
router.post(
  '/:id/test',
  idValidation,
  validateRequest,
  testLimit,
  asyncHandler(dataSourceController.testConnection),
);

/**
 * @route POST /api/sources/:id/discover
 * @desc Trigger discovery/sync on a source
 */
router.post(
  '/:id/discover',
  idValidation,
  [
    body('force').optional().isBoolean().withMessage('Force must be a boolean'),
  ],
  validateRequest,
  discoverSourceLimit,
  asyncHandler(dataSourceController.syncDataSource),
);

/**
 * @route PUT /api/sources/:id
 * @desc Update a data source
 */
router.put(
  '/:id',
  validateDataSourceUpdate,
  validateRequest,
  updateSourceLimit,
  asyncHandler(dataSourceController.updateDataSource),
);

/**
 * @route PUT /api/sources/:id/status
 * @desc Update status for a data source (reuses updateDataSource)
 */
router.put(
  '/:id/status',
  idValidation,
  [
    body('status')
      .isIn(['pending', 'connected', 'disconnected', 'error', 'warning', 'syncing', 'testing'])
      .withMessage('Invalid status'),
    body('reason').optional().isString().isLength({ max: 500 }).withMessage('Reason must be less than 500 characters'),
  ],
  validateRequest,
  updateStatusLimit,
  asyncHandler(dataSourceController.updateDataSource),
);

/**
 * @route DELETE /api/sources/:id
 * @desc Delete a data source
 */
router.delete(
  '/:id',
  idValidation,
  validateRequest,
  deleteSourceLimit,
  asyncHandler(dataSourceController.deleteDataSource),
);

export default router;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\routes\stats.ts
--------------------------------------------------------------------------------
import { Router } from 'express';
import { StatsController } from '../controllers/StatsController';
import { optionalAuthMiddleware } from '../middleware/auth';
import { asyncHandler } from '../middleware/error';

const r = Router();
const ctrl = new StatsController();

r.get('/', optionalAuthMiddleware, asyncHandler(ctrl.get));
export default r;


--------------------------------------------------------------------------------
FILE: backend\data-service\src\server.ts
--------------------------------------------------------------------------------
// src/server.ts
import compression from 'compression';
import cors from 'cors';
import 'dotenv/config';
import type { Express, NextFunction, Request, Response } from 'express';
import helmet from 'helmet';
import App from './app';
import { config, logConfig } from './config/env';
import catalogRouter from './routes/catalog';
import { logger } from './utils/logger';

type AppLifecycle = {
  initialize?: () => Promise<void> | void;
  cleanup?: () => Promise<void> | void;
  getExpressApp: () => Express;
};

class Server {
  private app: App;
  private server: any;

  constructor() {
    this.app = new (App as any)();
  }

  public async start(): Promise<void> {
    try {
      try { logConfig?.(); } catch (e) { logger.warn('[data-service] logConfig failed', e as any); }

      const host = config?.server?.host || process.env.HOST || '0.0.0.0';
      const port = Number(config?.server?.port || process.env.PORT || 3002);

      const expressApp = (this.app as unknown as AppLifecycle).getExpressApp();

      // --- hardening & DX ---
      expressApp.disable('x-powered-by');
      // Allow local dev UIs
      expressApp.use(cors({ origin: [/^http:\/\/localhost:(5173|3000)$/], credentials: true }));
      expressApp.use(helmet({ contentSecurityPolicy: false }));
      expressApp.use(compression());

      // Request ID (no extra deps)
      expressApp.use((req: Request, res: Response, next: NextFunction) => {
        // @ts-ignore
        req.id = (globalThis.crypto?.randomUUID?.() || Math.random().toString(36).slice(2));
        res.setHeader('x-request-id', (req as any).id);
        next();
      });

      // ---- Mount service routes BEFORE listen ----
      expressApp.use('/api', catalogRouter);
      logger.info('[data-service] Catalog routes mounted at /api (sync, assets, metrics, details)');

      this.server = expressApp.listen(port, host, () => {
        logger.info(`🚀 data-service listening on http://${host}:${port}`);
        logger.info(`📍 liveness:  GET /health`);
        logger.info(`📍 readiness: GET /ready`);
        logger.info(`🌱 NODE_ENV=${process.env.NODE_ENV || 'development'}`);
      });

      this.server.on('error', (err: any) => {
        logger.error('[data-service] HTTP server error', {
          message: err?.message, code: err?.code, stack: err?.stack,
        });
      });

      const lifecycle = this.app as unknown as AppLifecycle;
      Promise.resolve(lifecycle.initialize?.()).catch((err: any) => {
        logger.error('[data-service] App init failed', { message: err?.message, stack: err?.stack });
      });

      // 404 JSON & error handler (after routes)
      expressApp.use((req: Request, res: Response) => {
        res.status(404).json({ success: false, error: `Route ${req.method} ${req.path} not found` });
      });
      // eslint-disable-next-line @typescript-eslint/no-unused-vars
      expressApp.use((err: any, _req: Request, res: Response, _next: NextFunction) => {
        logger.error('[data-service] Unhandled error', { message: err?.message, stack: err?.stack });
        res.status(500).json({ success: false, error: 'Internal Server Error' });
      });

      const shutdown = (signal: string) => {
        logger.warn(`[data-service] ${signal} received. Shutting down...`);
        this.server?.close(async (err?: Error) => {
          if (err) {
            logger.error('[data-service] Error during close', { message: err.message, stack: err.stack });
            process.exit(1);
            return;
          }
          logger.info('[data-service] HTTP server closed');
          try {
            if (typeof lifecycle.cleanup === 'function') await Promise.resolve(lifecycle.cleanup());
          } catch (e: any) {
            logger.error('[data-service] cleanup failed', { message: e?.message, stack: e?.stack });
          } finally {
            process.exit(0);
          }
        });
        setTimeout(() => {
          logger.warn('[data-service] Forced shutdown after 10s');
          process.exit(1);
        }, 10_000).unref();
      };

      process.on('SIGINT', () => shutdown('SIGINT'));
      process.on('SIGTERM', () => shutdown('SIGTERM'));
      process.on('uncaughtException', (err: any) => {
        logger.error('[data-service] Uncaught exception', { message: err?.message, stack: err?.stack });
      });
      process.on('unhandledRejection', (reason: any) => {
        logger.error('[data-service] Unhandled rejection', {
          reason: reason?.message || String(reason),
          stack: reason?.stack,
        });
      });
    } catch (e: any) {
      logger.error('[data-service] Startup failed', { message: e?.message, stack: e?.stack });
      process.exit(1);
    }
  }
}

if (require.main === module) {
  new Server().start().catch((err) => {
    logger.error('[data-service] Failed to start server', { message: err?.message, stack: err?.stack });
    process.exit(1);
  });
}

export default Server;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\AssetService.ts
--------------------------------------------------------------------------------
// src/services/AssetService.ts
import { Asset, Column } from '../controllers/AssetController';
import { logger } from '../utils/logger';
import { DatabaseService } from './DatabaseService';

export interface AssetFilters {
  search?: string;
  type?: string;
  dataSourceId?: string;
  status?: string;
  tags?: string[];
  sensitivity?: string;
}

export interface AssetPagination {
  page: number;
  limit: number;
}

export interface AssetResult {
  assets: Asset[];
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

export interface AssetLineage {
  upstream: Asset[];
  downstream: Asset[];
  relationships: LineageRelationship[];
}

export interface LineageRelationship {
  fromAsset: string;
  toAsset: string;
  type: 'table_to_view' | 'procedure_call' | 'data_flow' | 'dependency';
  description?: string;
}

export interface AssetStats {
  accessCount: number;
  lastAccessed: Date | null;
  avgQueryTime: number;
  dataVolume: {
    current: number;
    trend: 'increasing' | 'decreasing' | 'stable';
    changePercent: number;
  };
  qualityScore: number;
  usageMetrics: {
    date: string;
    count: number;
  }[];
}

export class AssetService {
  private db: DatabaseService;

  constructor() {
    this.db = new DatabaseService();
  }

  /**
   * Get assets with filtering and pagination
   */
  public async getAssets(filters: AssetFilters, pagination: AssetPagination): Promise<AssetResult> {
    try {
      const { page, limit } = pagination;
      const offset = (page - 1) * limit;

      // Build dynamic WHERE clause
      const conditions: string[] = [];
      const params: any[] = [];
      let paramIndex = 1;

      if (filters.search) {
        conditions.push(`(a.name ILIKE $${paramIndex} OR a.description ILIKE $${paramIndex})`);
        params.push(`%${filters.search}%`);
        paramIndex++;
      }

      if (filters.type) {
        conditions.push(`a.type = $${paramIndex}`);
        params.push(filters.type);
        paramIndex++;
      }

      if (filters.dataSourceId) {
        conditions.push(`a.data_source_id = $${paramIndex}`);
        params.push(filters.dataSourceId);
        paramIndex++;
      }

      if (filters.status) {
        conditions.push(`a.status = $${paramIndex}`);
        params.push(filters.status);
        paramIndex++;
      }

      if (filters.sensitivity) {
        conditions.push(`a.metadata->>'sensitivity' = $${paramIndex}`);
        params.push(filters.sensitivity);
        paramIndex++;
      }

      if (filters.tags && filters.tags.length > 0) {
        conditions.push(`a.tags && $${paramIndex}`);
        params.push(filters.tags);
        paramIndex++;
      }

      const whereClause = conditions.length > 0 ? `WHERE ${conditions.join(' AND ')}` : '';

      // Count query
      const countQuery = `
        SELECT COUNT(*) as total
        FROM assets a
        ${whereClause}
      `;

      // Data query
      const dataQuery = `
        SELECT 
          a.*,
          ds.name as data_source_name,
          ds.type as data_source_type
        FROM assets a
        LEFT JOIN data_sources ds ON a.data_source_id = ds.id
        ${whereClause}
        ORDER BY a.updated_at DESC
        LIMIT $${paramIndex} OFFSET $${paramIndex + 1}
      `;

      params.push(limit, offset);

      const [countResult, dataResult] = await Promise.all([
        this.db.query(countQuery, params.slice(0, -2)),
        this.db.query(dataQuery, params)
      ]);

      const total = parseInt(countResult.rows[0].total);
      const totalPages = Math.ceil(total / limit);

      const assets: Asset[] = dataResult.rows.map(row => ({
        id: row.id,
        name: row.name,
        type: row.type,
        dataSourceId: row.data_source_id,
        schemaName: row.schema_name,
        tableName: row.table_name,
        description: row.description,
        columns: row.columns || [],
        tags: row.tags || [],
        status: row.status,
        createdAt: new Date(row.created_at),
        updatedAt: new Date(row.updated_at),
        metadata: row.metadata || {},
      }));

      return {
        assets,
        total,
        page,
        limit,
        totalPages,
      };
    } catch (error) {
      logger.error('Error in getAssets:', error);
      throw new Error('Failed to fetch assets');
    }
  }

  /**
   * Get asset by ID
   */
  public async getAssetById(id: string): Promise<Asset | null> {
    try {
      const query = `
        SELECT 
          a.*,
          ds.name as data_source_name,
          ds.type as data_source_type
        FROM assets a
        LEFT JOIN data_sources ds ON a.data_source_id = ds.id
        WHERE a.id = $1
      `;

      const result = await this.db.query(query, [id]);

      if (result.rows.length === 0) {
        return null;
      }

      const row = result.rows[0];
      return {
        id: row.id,
        name: row.name,
        type: row.type,
        dataSourceId: row.data_source_id,
        schemaName: row.schema_name,
        tableName: row.table_name,
        description: row.description,
        columns: row.columns || [],
        tags: row.tags || [],
        status: row.status,
        createdAt: new Date(row.created_at),
        updatedAt: new Date(row.updated_at),
        metadata: row.metadata || {},
      };
    } catch (error) {
      logger.error('Error in getAssetById:', error);
      throw new Error('Failed to fetch asset');
    }
  }

  /**
   * Create a new asset
   */
  public async createAsset(assetData: Partial<Asset>): Promise<Asset> {
    try {
      const {
        name,
        type,
        dataSourceId,
        schemaName,
        tableName,
        description,
        columns,
        tags,
        status = 'active',
        metadata = {}
      } = assetData;

      const query = `
        INSERT INTO assets (
          name, type, data_source_id, schema_name, table_name,
          description, columns, tags, status, metadata
        )
        VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9, $10)
        RETURNING *
      `;

      const values = [
        name,
        type,
        dataSourceId,
        schemaName,
        tableName,
        description,
        JSON.stringify(columns || []),
        tags || [],
        status,
        JSON.stringify(metadata)
      ];

      const result = await this.db.query(query, values);
      return this.mapRowToAsset(result.rows[0]);
    } catch (error) {
      logger.error('Error in createAsset:', error);
      throw new Error('Failed to create asset');
    }
  }

  /**
   * Search assets
   */
  public async searchAssets(
    filters: { search: string; type?: string },
    pagination: AssetPagination
  ): Promise<AssetResult> {
    try {
      const { page, limit } = pagination;
      const offset = (page - 1) * limit;

      // Build search query with full-text search
      const conditions: string[] = [];
      const params: any[] = [];
      let paramIndex = 1;

      if (filters.search) {
        conditions.push(`(
          to_tsvector('english', coalesce(a.name, '') || ' ' || coalesce(a.description, '')) 
          @@ plainto_tsquery('english', $${paramIndex})
          OR a.name ILIKE $${paramIndex + 1}
          OR a.description ILIKE $${paramIndex + 1}
        )`);
        params.push(filters.search, `%${filters.search}%`);
        paramIndex += 2;
      }

      if (filters.type) {
        conditions.push(`a.type = $${paramIndex}`);
        params.push(filters.type);
        paramIndex++;
      }

      const whereClause = conditions.length > 0 ? `WHERE ${conditions.join(' AND ')}` : '';

      // Count query
      const countQuery = `
        SELECT COUNT(*) as total
        FROM assets a
        ${whereClause}
      `;

      // Data query
      const dataQuery = `
        SELECT 
          a.*,
          ds.name as data_source_name,
          ds.type as data_source_type,
          ts_rank(to_tsvector('english', coalesce(a.name, '') || ' ' || coalesce(a.description, '')), 
                   plainto_tsquery('english', $1)) as search_rank
        FROM assets a
        LEFT JOIN data_sources ds ON a.data_source_id = ds.id
        ${whereClause}
        ORDER BY ${filters.search ? 'search_rank DESC,' : ''} a.updated_at DESC
        LIMIT $${paramIndex} OFFSET $${paramIndex + 1}
      `;

      params.push(limit, offset);

      const [countResult, dataResult] = await Promise.all([
        this.db.query(countQuery, params.slice(0, -2)),
        this.db.query(dataQuery, params)
      ]);

      const total = parseInt(countResult.rows[0].total);
      const totalPages = Math.ceil(total / limit);

      const assets: Asset[] = dataResult.rows.map(row => this.mapRowToAsset(row));

      return {
        assets,
        total,
        page,
        limit,
        totalPages,
      };
    } catch (error) {
      logger.error('Error in searchAssets:', error);
      throw new Error('Failed to search assets');
    }
  }

  /**
   * Get asset schema details
   */
  public async getAssetSchema(id: string): Promise<Column[] | null> {
    try {
      const query = `
        SELECT columns
        FROM assets
        WHERE id = $1
      `;

      const result = await this.db.query(query, [id]);

      if (result.rows.length === 0) {
        return null;
      }

      return result.rows[0].columns || [];
    } catch (error) {
      logger.error('Error in getAssetSchema:', error);
      throw new Error('Failed to fetch asset schema');
    }
  }

  /**
   * Get asset lineage
   */
  public async getAssetLineage(id: string, direction: 'upstream' | 'downstream' | 'both'): Promise<AssetLineage> {
    try {
      // Mock implementation - in real scenario, you'd analyze SQL queries, ETL processes, etc.
      const upstreamQuery = `
        SELECT DISTINCT a.*
        FROM assets a
        JOIN asset_lineage al ON a.id = al.upstream_asset_id
        WHERE al.downstream_asset_id = $1
      `;

      const downstreamQuery = `
        SELECT DISTINCT a.*
        FROM assets a
        JOIN asset_lineage al ON a.id = al.downstream_asset_id
        WHERE al.upstream_asset_id = $1
      `;

      const relationshipsQuery = `
        SELECT *
        FROM asset_lineage
        WHERE upstream_asset_id = $1 OR downstream_asset_id = $1
      `;

      let upstream: Asset[] = [];
      let downstream: Asset[] = [];

      if (direction === 'upstream' || direction === 'both') {
        const upstreamResult = await this.db.query(upstreamQuery, [id]);
        upstream = upstreamResult.rows.map(this.mapRowToAsset);
      }

      if (direction === 'downstream' || direction === 'both') {
        const downstreamResult = await this.db.query(downstreamQuery, [id]);
        downstream = downstreamResult.rows.map(this.mapRowToAsset);
      }

      const relationshipsResult = await this.db.query(relationshipsQuery, [id]);
      const relationships: LineageRelationship[] = relationshipsResult.rows.map(row => ({
        fromAsset: row.upstream_asset_id,
        toAsset: row.downstream_asset_id,
        type: row.relationship_type,
        description: row.description,
      }));

      return {
        upstream,
        downstream,
        relationships,
      };
    } catch (error) {
      logger.error('Error in getAssetLineage:', error);
      throw new Error('Failed to fetch asset lineage');
    }
  }

  /**
   * Update asset
   */
  public async updateAsset(id: string, updateData: Partial<Asset>): Promise<Asset | null> {
    try {
      const setClause: string[] = [];
      const params: any[] = [];
      let paramIndex = 1;

      if (updateData.name) {
        setClause.push(`name = $${paramIndex++}`);
        params.push(updateData.name);
      }

      if (updateData.description) {
        setClause.push(`description = $${paramIndex++}`);
        params.push(updateData.description);
      }

      if (updateData.status) {
        setClause.push(`status = $${paramIndex++}`);
        params.push(updateData.status);
      }

      if (updateData.tags) {
        setClause.push(`tags = $${paramIndex++}`);
        params.push(updateData.tags);
      }

      if (updateData.metadata) {
        setClause.push(`metadata = $${paramIndex++}`);
        params.push(JSON.stringify(updateData.metadata));
      }

      setClause.push(`updated_at = NOW()`);
      params.push(id);

      const query = `
        UPDATE assets
        SET ${setClause.join(', ')}
        WHERE id = $${paramIndex}
        RETURNING *
      `;

      const result = await this.db.query(query, params);

      if (result.rows.length === 0) {
        return null;
      }

      return this.mapRowToAsset(result.rows[0]);
    } catch (error) {
      logger.error('Error in updateAsset:', error);
      throw new Error('Failed to update asset');
    }
  }

  /**
   * Add tags to asset
   */
  public async addTags(id: string, tags: string[]): Promise<Asset | null> {
    try {
      const query = `
        UPDATE assets
        SET tags = COALESCE(tags, '{}') || $1::text[],
            updated_at = NOW()
        WHERE id = $2
        RETURNING *
      `;

      const result = await this.db.query(query, [tags, id]);

      if (result.rows.length === 0) {
        return null;
      }

      return this.mapRowToAsset(result.rows[0]);
    } catch (error) {
      logger.error('Error in addTags:', error);
      throw new Error('Failed to add tags');
    }
  }

  /**
   * Remove tags from asset
   */
  public async removeTags(id: string, tags: string[]): Promise<Asset | null> {
    try {
      const query = `
        UPDATE assets
        SET tags = ARRAY(SELECT unnest(tags) EXCEPT SELECT unnest($1::text[])),
            updated_at = NOW()
        WHERE id = $2
        RETURNING *
      `;

      const result = await this.db.query(query, [tags, id]);

      if (result.rows.length === 0) {
        return null;
      }

      return this.mapRowToAsset(result.rows[0]);
    } catch (error) {
      logger.error('Error in removeTags:', error);
      throw new Error('Failed to remove tags');
    }
  }

  /**
   * Get asset usage statistics
   */
  public async getAssetStats(id: string, period: string): Promise<AssetStats> {
    try {
      // Mock implementation - in real scenario, you'd aggregate from usage logs
      const statsQuery = `
        SELECT 
          COALESCE(usage.access_count, 0) as access_count,
          usage.last_accessed,
          COALESCE(usage.avg_query_time, 0) as avg_query_time,
          COALESCE(metadata->>'rowCount', '0')::bigint as current_volume,
          COALESCE((metadata->>'qualityScore')::numeric, 85) as quality_score
        FROM assets a
        LEFT JOIN asset_usage_stats usage ON a.id = usage.asset_id
        WHERE a.id = $1
      `;

      const result = await this.db.query(statsQuery, [id]);
      
      if (result.rows.length === 0) {
        throw new Error('Asset not found');
      }

      const row = result.rows[0];

      // Mock usage metrics for the period
      const usageMetrics = this.generateMockUsageMetrics(period);

      return {
        accessCount: row.access_count,
        lastAccessed: row.last_accessed ? new Date(row.last_accessed) : null,
        avgQueryTime: row.avg_query_time,
        dataVolume: {
          current: row.current_volume,
          trend: 'increasing',
          changePercent: 12.5,
        },
        qualityScore: row.quality_score,
        usageMetrics,
      };
    } catch (error) {
      logger.error('Error in getAssetStats:', error);
      throw new Error('Failed to fetch asset stats');
    }
  }

  /**
   * Get asset profile/data preview
   */
  public async getAssetProfile(id: string): Promise<{
    asset: Asset;
    profile: {
      rowCount: number;
      columnCount: number;
      dataTypes: Record<string, number>;
      nullCounts: Record<string, number>;
      sampleData: any[];
      lastProfiledAt: Date;
    };
  } | null> {
    try {
      const asset = await this.getAssetById(id);
      if (!asset) {
        return null;
      }

      // Mock profile data - in real implementation, this would connect to the data source
      const profile = {
        rowCount: Math.floor(Math.random() * 1000000) + 1000,
        columnCount: asset.columns?.length || 0,
        dataTypes: {
          'string': Math.floor(Math.random() * 10) + 1,
          'integer': Math.floor(Math.random() * 5) + 1,
          'decimal': Math.floor(Math.random() * 3) + 1,
          'date': Math.floor(Math.random() * 2) + 1,
          'boolean': Math.floor(Math.random() * 2),
        },
        nullCounts: asset.columns?.reduce((acc, col) => {
          acc[col.name] = Math.floor(Math.random() * 100);
          return acc;
        }, {} as Record<string, number>) || {},
        sampleData: [
          // Mock sample data
          { id: 1, name: 'Sample Row 1', value: 100 },
          { id: 2, name: 'Sample Row 2', value: 200 },
          { id: 3, name: 'Sample Row 3', value: 300 },
        ],
        lastProfiledAt: new Date(),
      };

      return {
        asset,
        profile,
      };
    } catch (error) {
      logger.error('Error in getAssetProfile:', error);
      throw new Error('Failed to get asset profile');
    }
  }

  /**
   * Sync asset metadata from data source
   */
  public async syncAsset(id: string): Promise<{ success: boolean; updatedFields: string[] }> {
    try {
      // Mock implementation - in real scenario, you'd connect to the data source
      // and refresh metadata (row counts, schema changes, etc.)
      
      const updateQuery = `
        UPDATE assets
        SET 
          metadata = metadata || '{"lastSyncAt": "' || NOW() || '", "syncStatus": "completed"}',
          updated_at = NOW()
        WHERE id = $1
        RETURNING *
      `;

      const result = await this.db.query(updateQuery, [id]);

      if (result.rows.length === 0) {
        throw new Error('Asset not found');
      }

      return {
        success: true,
        updatedFields: ['metadata', 'rowCount', 'lastSyncAt'],
      };
    } catch (error) {
      logger.error('Error in syncAsset:', error);
      throw new Error('Failed to sync asset');
    }
  }

  /**
   * Delete asset
   */
  public async deleteAsset(id: string): Promise<boolean> {
    try {
      const query = `
        DELETE FROM assets
        WHERE id = $1
        RETURNING id
      `;

      const result = await this.db.query(query, [id]);
      return result.rows.length > 0;
    } catch (error) {
      logger.error('Error in deleteAsset:', error);
      throw new Error('Failed to delete asset');
    }
  }

  /**
   * Helper method to map database row to Asset object
   */
  private mapRowToAsset(row: any): Asset {
    return {
      id: row.id,
      name: row.name,
      type: row.type,
      dataSourceId: row.data_source_id,
      schemaName: row.schema_name,
      tableName: row.table_name,
      description: row.description,
      columns: row.columns || [],
      tags: row.tags || [],
      status: row.status,
      createdAt: new Date(row.created_at),
      updatedAt: new Date(row.updated_at),
      metadata: row.metadata || {},
    };
  }

  /**
   * Generate mock usage metrics for testing
   */
  private generateMockUsageMetrics(period: string): { date: string; count: number }[] {
    const days = period === '7d' ? 7 : period === '30d' ? 30 : 90;
    const metrics: { date: string; count: number }[] = [];

    for (let i = days - 1; i >= 0; i--) {
      const date = new Date();
      date.setDate(date.getDate() - i);
      
      metrics.push({
        date: date.toISOString().split('T')[0],
        count: Math.floor(Math.random() * 50) + 10,
      });
    }

    return metrics;
  }
}


--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\ConnectionTestService.ts
--------------------------------------------------------------------------------
import { ListBucketsCommand, S3Client } from '@aws-sdk/client-s3';
import axios, { AxiosError } from 'axios';
import { MongoClient } from 'mongodb';
import { createConnection as createMySQLConnection } from 'mysql2/promise';
import { Client as PgClient } from 'pg';
import { createClient as createRedisClient } from 'redis';

import {
  ConnectionTestResult,
  DataSource,
  isAPIConfig,
  isBigQueryConfig,
  isS3Config,
  isSnowflakeConfig,
  type APIConfig,
  type BigQueryConfig,
  type S3Config,
  type SnowflakeConfig,
} from '../models/DataSource';
import { logger } from '../utils/logger';

const toStr = (v: string | number | undefined): string | undefined =>
  v == null ? undefined : String(v);

export class ConnectionTestService {
  async testConnection(dataSource: DataSource): Promise<ConnectionTestResult> {
    const startTime = Date.now();
    try {
      logger.info(`Testing connection for data source: ${dataSource.name} (${dataSource.type})`);
      let result: ConnectionTestResult;

      switch (dataSource.type) {
        case 'postgresql':
          result = await this.testPostgreSQL(dataSource); break;
        case 'mysql':
          result = await this.testMySQL(dataSource); break;
        case 'mssql':
          result = await this.testSQLServer(dataSource); break;
        case 'mongodb':
          result = await this.testMongoDB(dataSource); break;
        case 'redis':
          result = await this.testRedis(dataSource); break;
        case 's3':
          result = await this.testS3(dataSource); break;
        case 'api':
          result = await this.testAPI(dataSource); break;
        case 'snowflake':
          result = await this.testSnowflake(dataSource); break;
        case 'bigquery':
          result = await this.testBigQuery(dataSource); break;
        case 'elasticsearch':
          result = await this.testElasticsearch(dataSource); break;
        default:
          result = await this.testGeneric(dataSource);
      }

      result.responseTime = Date.now() - startTime;
      result.testedAt = new Date();
      logger.info(
        `Connection test completed for ${dataSource.name}: ${result.success ? 'SUCCESS' : 'FAILED'} (${result.responseTime}ms)`
      );
      return result;
    } catch (error: unknown) {
      const responseTime = Date.now() - startTime;
      logger.error(`Connection test failed for ${dataSource.name}:`, error);
      return {
        success: false,
        responseTime,
        error: error instanceof Error ? error.message : 'Unknown error occurred',
        testedAt: new Date(),
      };
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ PostgreSQL â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testPostgreSQL(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    let client: PgClient;

    if (c.connectionString) {
      client = new PgClient({ connectionString: c.connectionString });
    } else {
      const ssl =
        c.ssl === true ? { rejectUnauthorized: false }
        : typeof c.ssl === 'object' ? (c.ssl as object)
        : false;

      client = new PgClient({
        host: c.host,
        port: c.port || 5432,
        database: toStr(c.database),
        user: c.username,
        password: c.password,
        ssl,
        connectionTimeoutMillis: c.timeout || 30_000,
      });
    }

    try {
      await client.connect();
      const result = await client.query('SELECT version()');
      const version = result.rows?.[0]?.version as string | undefined;
      return {
        success: true,
        details: {
          version,
          serverInfo: { type: 'PostgreSQL' },
          capabilities: ['SQL', 'ACID', 'Indexing'],
        },
        testedAt: new Date(),
      };
    } finally {
      await client.end().catch(() => {});
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ MySQL â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testMySQL(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    const cfg: any = {
      host: c.host,
      port: c.port || 3306,
      database: toStr(c.database),
      user: c.username,
      password: c.password,
      connectTimeout: c.timeout || 30_000,
      acquireTimeout: c.timeout || 30_000,
    };

    if (c.ssl === true) cfg.ssl = { rejectUnauthorized: false };
    else if (typeof c.ssl === 'object') cfg.ssl = c.ssl;

    const conn = await createMySQLConnection(cfg);
    try {
      const [rows] = await conn.execute('SELECT VERSION() as version');
      const version = (rows as any)?.[0]?.version as string | undefined;
      return {
        success: true,
        details: {
          version,
          serverInfo: { type: 'MySQL' },
          capabilities: ['SQL', 'ACID', 'Replication'],
        },
        testedAt: new Date(),
      };
    } finally {
      await conn.end().catch(() => {});
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ SQL Server (mock) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testSQLServer(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        if (!c.host || !c.username || !c.password) {
          reject(new Error('Missing required connection parameters'));
          return;
        }
        resolve({
          success: true,
          details: {
            version: 'SQL Server 2019',
            serverInfo: { type: 'SQL Server', host: c.host, port: c.port || 1433 },
            capabilities: ['SQL', 'ACID', 'Clustering'],
          },
          testedAt: new Date(),
        });
      }, 100);
    });
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ MongoDB â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testMongoDB(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    const auth = c.username ? `${c.username}:${c.password}@` : '';
    const port = c.port || 27017;
    const database = c.database ? `/${toStr(c.database)}` : '';
    const uri = c.connectionString || `mongodb://${auth}${c.host}:${port}${database}`;

    const client = new MongoClient(uri, { serverSelectionTimeoutMS: c.timeout || 30_000 });
    try {
      await client.connect();
      const serverStatus = await client.db().admin().serverStatus();
      return {
        success: true,
        details: {
          version: (serverStatus as any).version,
          serverInfo: { type: 'MongoDB', host: (serverStatus as any).host, uptime: (serverStatus as any).uptime },
          capabilities: ['Document Store', 'Indexing', 'Aggregation'],
        },
        testedAt: new Date(),
      };
    } finally {
      await client.close().catch(() => {});
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Redis â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testRedis(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    const client = createRedisClient({
      socket: { host: c.host, port: c.port || 6379, connectTimeout: c.timeout || 30_000 },
      password: c.password,
    });

    try {
      await client.connect();
      const info = await client.info();
      const version = info.match(/redis_version:([^\r\n]+)/)?.[1];
      return {
        success: true,
        details: {
          version,
          serverInfo: { type: 'Redis' },
          capabilities: ['Key-Value Store', 'Pub/Sub', 'Streams'],
        },
        testedAt: new Date(),
      };
    } finally {
      await client.disconnect().catch(() => {});
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ S3 â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testS3(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    if (!isS3Config(c)) throw new Error('Invalid S3 configuration');

    const s3 = c as S3Config;
    if (!s3.accessKeyId || !s3.secretAccessKey) {
      throw new Error('S3 credentials (accessKeyId and secretAccessKey) are required');
    }

    const s3Client = new S3Client({
      region: s3.region || 'us-east-1',
      credentials: { accessKeyId: s3.accessKeyId, secretAccessKey: s3.secretAccessKey },
    });

    const response = await s3Client.send(new ListBucketsCommand({}));
    const bucketExists = s3.bucket ? !!response.Buckets?.some(b => b.Name === s3.bucket) : true;

    return {
      success: true,
      details: {
        serverInfo: { type: 'Amazon S3', region: s3.region, bucketCount: response.Buckets?.length || 0, bucketExists },
        capabilities: ['Object Storage', 'Versioning', 'Lifecycle Management'],
      },
      testedAt: new Date(),
    };
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ HTTP API â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testAPI(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    if (!isAPIConfig(c)) throw new Error('Invalid API configuration');

    const api = c as APIConfig;
    if (!api.baseUrl) throw new Error('Base URL is required for API connections');

    const headers: Record<string, string> = {
      'Content-Type': 'application/json',
      'User-Agent': 'CWIC-Data-Service/1.0',
      ...(api.headers || {}),
    };

    if (api.apiKey) headers['Authorization'] = `Bearer ${api.apiKey}`;

    if (api.authentication) {
      const creds = api.authentication.credentials || {};
      switch (api.authentication.type) {
        case 'basic':
          if (creds.username && creds.password) {
            headers['Authorization'] = `Basic ${Buffer.from(`${creds.username}:${creds.password}`).toString('base64')}`;
          }
          break;
        case 'bearer':
          if (creds.token) headers['Authorization'] = `Bearer ${creds.token}`;
          break;
        case 'api-key':
          if (creds.apiKey) headers[creds.headerName || 'X-API-Key'] = creds.apiKey;
          break;
      }
    }

    try {
      const response = await axios.get(api.baseUrl, {
        headers,
        timeout: api.timeout || 30_000,
        validateStatus: s => s < 500,
      });

      return {
        success: true,
        details: {
          serverInfo: {
            type: 'REST API',
            statusCode: response.status,
            statusText: response.statusText,
            contentType: response.headers['content-type'],
          },
          capabilities: ['HTTP REST', 'JSON', 'Authentication'],
        },
        testedAt: new Date(),
      };
    } catch (err) {
      const error = err as AxiosError;
      if (error.response) {
        const ok = error.response.status < 500;
        return {
          success: ok,
          details: {
            serverInfo: {
              type: 'REST API',
              statusCode: error.response.status,
              statusText: error.response.statusText,
              errorMessage: error.message,
            },
            capabilities: ['HTTP REST'],
          },
          error: !ok ? `Server error: ${error.response.status} ${error.response.statusText}` : undefined,
          testedAt: new Date(),
        };
      }
      if (error.request) throw new Error(`Network error: ${error.message}`);
      throw error;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Snowflake (mock) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testSnowflake(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    if (!isSnowflakeConfig(c)) throw new Error('Invalid Snowflake configuration');
    const sf = c as SnowflakeConfig;

    return new Promise((resolve, reject) => {
      setTimeout(() => {
        if (!sf.host || !sf.username || !sf.password) {
          reject(new Error('Missing required Snowflake connection parameters (host, username, password)'));
          return;
        }
        resolve({
          success: true,
          details: {
            version: 'Snowflake 6.0',
            serverInfo: { type: 'Snowflake', account: sf.host, warehouse: sf.warehouse },
            capabilities: ['SQL', 'Data Warehouse', 'Auto-scaling'],
          },
          testedAt: new Date(),
        });
      }, 200);
    });
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ BigQuery (mock) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testBigQuery(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    if (!isBigQueryConfig(c)) throw new Error('Invalid BigQuery configuration');
    const bq = c as BigQueryConfig;

    return new Promise((resolve, reject) => {
      setTimeout(() => {
        if (!bq.projectId || !bq.serviceAccountKey) {
          reject(new Error('Missing required BigQuery connection parameters (projectId, serviceAccountKey)'));
          return;
        }
        resolve({
          success: true,
          details: {
            version: 'BigQuery API v2',
            serverInfo: { type: 'Google BigQuery', projectId: bq.projectId, location: bq.location || 'US' },
            capabilities: ['SQL', 'Analytics', 'Machine Learning'],
          },
          testedAt: new Date(),
        });
      }, 150);
    });
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Elasticsearch â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testElasticsearch(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig;
    if (!c.host) throw new Error('Host is required for Elasticsearch connections');

    const protocol = c.ssl ? 'https' : 'http';
    const port = c.port || 9200;
    const baseUrl = `${protocol}://${c.host}:${port}`;

    const headers: Record<string, string> = { 'Content-Type': 'application/json' };
    if (c.username && c.password) {
      headers['Authorization'] = `Basic ${Buffer.from(`${c.username}:${c.password}`).toString('base64')}`;
    }

    const health = await axios.get(`${baseUrl}/_cluster/health`, { headers, timeout: c.timeout || 30_000 });
    const root = await axios.get(`${baseUrl}/`, { headers, timeout: c.timeout || 30_000 });

    return {
      success: true,
      details: {
        version: (root.data as any)?.version?.number,
        serverInfo: {
          type: 'Elasticsearch',
          clusterName: health.data.cluster_name,
          status: health.data.status,
          numberOfNodes: health.data.number_of_nodes,
        },
        capabilities: ['Full-text Search', 'Analytics', 'Aggregations'],
      },
      testedAt: new Date(),
    };
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Generic fallback â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async testGeneric(ds: DataSource): Promise<ConnectionTestResult> {
    const c = ds.connectionConfig as any;
    return new Promise((resolve, reject) => {
      setTimeout(() => {
        if (!c.host && !c.baseUrl && !c.connectionString) {
          reject(new Error('At least one of host, baseUrl, or connectionString is required'));
          return;
        }
        resolve({
          success: true,
          details: {
            serverInfo: { type: ds.type, host: c.host, port: c.port },
            capabilities: ['Generic Connection'],
          },
          testedAt: new Date(),
        });
      }, 100);
    });
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Utilities â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  public async testMultipleConnections(dataSources: DataSource[]): Promise<ConnectionTestResult[]> {
    const promises = dataSources.map(ds =>
      this.testConnection(ds).catch(err => {
        const msg = err instanceof Error ? err.message : 'Unknown error';
        return { success: false, error: msg, responseTime: 0, testedAt: new Date() } as ConnectionTestResult;
      })
    );
    return Promise.all(promises);
  }

  public getSupportedTypes(): string[] {
    return [
      'postgresql','mysql','mssql','mongodb','redis','s3','api','file',
      'snowflake','bigquery','elasticsearch','oracle','azure-blob','gcs',
      'redshift','databricks','kafka',
    ];
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\connectors\azureSql.ts
--------------------------------------------------------------------------------
import { ConnectionPool, config as MSSQLConfig, Request } from 'mssql';
import type { ConnectionConfig, ConnectionTestResult } from '../../models/Connection';
import { logger } from '../../utils/logger';
import {
  BaseConnector,
  type Column,
  type QueryResult,
  type Schema,
  type SchemaInfo,
  type Table,
  type View,
} from './base';

export interface AzureSqlConfig {
  server: string;
  database: string;
  user: string;
  password: string;
  port?: number;
  options?: {
    encrypt?: boolean;
    trustServerCertificate?: boolean;
    enableArithAbort?: boolean;
    connectionTimeout?: number;
    requestTimeout?: number;
  };
  pool?: {
    max?: number;
    min?: number;
    idleTimeoutMillis?: number;
  };
}

export class AzureSqlConnector extends BaseConnector {
  private pool: ConnectionPool | null = null;
  private config: AzureSqlConfig;

  constructor(conn: ConnectionConfig) {
    super('azure-sql', conn);
    this.config = this.parseConfig(conn);
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ config parsing â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private parseConfig(c: ConnectionConfig): AzureSqlConfig {
    const anyC = c as any;
    const trustServerCertificate =
      typeof anyC.trustServerCertificate === 'boolean'
        ? anyC.trustServerCertificate
        : typeof c.ssl === 'object'
        ? (c.ssl as any)?.rejectUnauthorized === false
        : false;

    return {
      server: c.host ?? anyC.server ?? '',
      database: (c.database as string) ?? anyC.db ?? '',
      user: (c.username as string) ?? anyC.user ?? '',
      password: (c.password as string) ?? '',
      port: c.port ?? 1433,
      options: {
        encrypt: true, // Azure SQL requires encrypt
        trustServerCertificate,
        enableArithAbort: true,
        connectionTimeout: anyC.connectionTimeout ?? c.timeout ?? 30_000,
        requestTimeout: anyC.requestTimeout ?? c.timeout ?? 30_000,
      },
      pool: {
        max: anyC.maxConnections ?? 10,
        min: anyC.minConnections ?? 1,
        idleTimeoutMillis: anyC.idleTimeout ?? 30_000,
        ...(anyC.poolOptions ?? {}),
      },
    };
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ connect / disconnect â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  override async connect(): Promise<void> {
    try {
      if (this.pool?.connected) return;

      const poolConfig: MSSQLConfig = {
        server: this.config.server,
        database: this.config.database,
        user: this.config.user,
        password: this.config.password,
        port: this.config.port,
        options: this.config.options,
        pool: this.config.pool,
      };

      this.pool = new ConnectionPool(poolConfig);

      this.pool.on('error', (err: Error) => {
        logger.error('Azure SQL pool error:', err);
        this.emitConnectionEvent('error', err);
      });

      await this.pool.connect();

      (this as any).metrics.connected = true;
      this.emitConnectionEvent('connected', {
        server: this.config.server,
        database: this.config.database,
      });

      logger.info(`Connected to Azure SQL: ${this.config.server}/${this.config.database}`);
    } catch (error) {
      (this as any).metrics.connected = false;
      logger.error('Failed to connect to Azure SQL:', error);
      throw this.createConnectionError(error);
    }
  }

  override async disconnect(): Promise<void> {
    try {
      if (this.pool) {
        this.pool.removeAllListeners?.('error');
        await this.pool.close();
        this.pool = null;
        (this as any).metrics.connected = false;
        this.emitConnectionEvent('disconnected');
        logger.info('Disconnected from Azure SQL');
      }
    } catch (error) {
      logger.error('Error disconnecting from Azure SQL:', error);
      throw error;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ basic ops â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  override async testConnection(): Promise<ConnectionTestResult> {
    const t0 = Date.now();
    try {
      await this.connect();
      const req = new Request(this.pool!);
      const result = await req.query('SELECT @@VERSION AS version, DB_NAME() AS database_name');
      return {
        success: true,
        responseTime: Date.now() - t0,
        details: {
          version: (result as any)?.recordset?.[0]?.version,
          serverInfo: {
            type: 'Azure SQL Database',
            database: (result as any)?.recordset?.[0]?.database_name,
            server: this.config.server,
          },
          capabilities: ['SQL', 'ACID', 'Transactions', 'Stored Procedures', 'Functions'],
        },
        testedAt: new Date(),
      };
    } catch (error: any) {
      return {
        success: false,
        responseTime: Date.now() - t0,
        error: error?.message || 'Unknown error',
        testedAt: new Date(),
      };
    }
  }

  override async executeQuery(query: string, params?: any[]): Promise<QueryResult> {
    return this.executeWithMetrics(async () => {
      await this.ensureConnected();
      const req = new Request(this.pool!);

      if (params?.length) {
        params.forEach((p, i) => req.input(`p${i}`, p));
        let idx = 0;
        query = query.replace(/\?/g, () => `@p${idx++}`);
      }

      const r = await req.query(query);
      return {
        rows: (r as any).recordset ?? [],
        rowCount: (r as any).rowsAffected?.[0] ?? ((r as any).recordset?.length || 0),
        columns: (r as any).recordset?.columns || {},
      };
    });
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ schema & metadata â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  override async getSchema(): Promise<SchemaInfo> {
    await this.ensureConnected();

    const schemaQuery = `
      SELECT 
        t.TABLE_SCHEMA,
        t.TABLE_NAME,
        t.TABLE_TYPE,
        c.COLUMN_NAME,
        c.DATA_TYPE,
        c.IS_NULLABLE,
        c.COLUMN_DEFAULT,
        c.CHARACTER_MAXIMUM_LENGTH,
        c.NUMERIC_PRECISION,
        c.NUMERIC_SCALE,
        CASE WHEN pk.COLUMN_NAME IS NOT NULL THEN 1 ELSE 0 END AS IS_PRIMARY_KEY
      FROM INFORMATION_SCHEMA.TABLES t
      LEFT JOIN INFORMATION_SCHEMA.COLUMNS c
        ON t.TABLE_NAME = c.TABLE_NAME AND t.TABLE_SCHEMA = c.TABLE_SCHEMA
      LEFT JOIN (
        SELECT ku.TABLE_SCHEMA, ku.TABLE_NAME, ku.COLUMN_NAME
        FROM INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc
        INNER JOIN INFORMATION_SCHEMA.KEY_COLUMN_USAGE ku
          ON tc.CONSTRAINT_NAME = ku.CONSTRAINT_NAME
          AND tc.TABLE_SCHEMA = ku.TABLE_SCHEMA
        WHERE tc.CONSTRAINT_TYPE = 'PRIMARY KEY'
      ) pk ON c.TABLE_SCHEMA = pk.TABLE_SCHEMA 
         AND c.TABLE_NAME   = pk.TABLE_NAME 
         AND c.COLUMN_NAME  = pk.COLUMN_NAME
      WHERE t.TABLE_TYPE IN ('BASE TABLE', 'VIEW')
      ORDER BY t.TABLE_SCHEMA, t.TABLE_NAME, c.ORDINAL_POSITION
    `;

    const res = await this.executeQuery(schemaQuery);
    return this.buildSchemaInfo(res.rows as any[]);
  }

  private buildSchemaInfo(rows: any[]): SchemaInfo {
    const bySchema = new Map<string, { tables: Map<string, Table>; views: Map<string, View> }>();

    for (const r of rows) {
      const sName = r.TABLE_SCHEMA as string;
      const tName = r.TABLE_NAME as string;
      const isView = (r.TABLE_TYPE as string) === 'VIEW';

      if (!bySchema.has(sName)) bySchema.set(sName, { tables: new Map(), views: new Map() });
      const bucket = bySchema.get(sName)!;

      if (isView) {
        const vmap = bucket.views;
        if (!vmap.has(tName)) {
          vmap.set(tName, { name: tName, schema: sName, columns: [], definition: undefined });
        }
        if (r.COLUMN_NAME) {
          const col: Column = {
            name: r.COLUMN_NAME,
            dataType: r.DATA_TYPE,
            nullable: r.IS_NULLABLE === 'YES',
            defaultValue: r.COLUMN_DEFAULT ?? undefined,
            maxLength: r.CHARACTER_MAXIMUM_LENGTH ?? undefined,
            precision: r.NUMERIC_PRECISION ?? undefined,
            scale: r.NUMERIC_SCALE ?? undefined,
            isPrimaryKey: r.IS_PRIMARY_KEY === 1,
          };
          vmap.get(tName)!.columns.push(col);
        }
      } else {
        const tmap = bucket.tables;
        if (!tmap.has(tName)) {
          tmap.set(tName, { name: tName, schema: sName, columns: [], primaryKeys: [], foreignKeys: [], indexes: [] });
        }
        if (r.COLUMN_NAME) {
          const col: Column = {
            name: r.COLUMN_NAME,
            dataType: r.DATA_TYPE,
            nullable: r.IS_NULLABLE === 'YES',
            defaultValue: r.COLUMN_DEFAULT ?? undefined,
            maxLength: r.CHARACTER_MAXIMUM_LENGTH ?? undefined,
            precision: r.NUMERIC_PRECISION ?? undefined,
            scale: r.NUMERIC_SCALE ?? undefined,
            isPrimaryKey: r.IS_PRIMARY_KEY === 1,
          };
          const tbl = tmap.get(tName)!;
          tbl.columns.push(col);
          if (col.isPrimaryKey) tbl.primaryKeys.push(col.name);
        }
      }
    }

    const schemas: Schema[] = [];
    let totalTables = 0;
    let totalViews = 0;
    let totalColumns = 0;

    for (const [name, { tables, views }] of bySchema) {
      const tablesArr = Array.from(tables.values());
      const viewsArr = Array.from(views.values());
      totalTables += tablesArr.length;
      totalViews += viewsArr.length;
      totalColumns +=
        tablesArr.reduce((n, t) => n + t.columns.length, 0) +
        viewsArr.reduce((n, v) => n + v.columns.length, 0);
      schemas.push({ name, tables: tablesArr, views: viewsArr });
    }

    return { schemas, totalTables, totalViews, totalColumns };
  }

  override async validateQuery(query: string): Promise<{ valid: boolean; error?: string }> {
    try {
      await this.ensureConnected();
      const req = new Request(this.pool!);
      await req.batch('SET PARSEONLY ON;');
      try {
        await req.query(query);
        await req.batch('SET PARSEONLY OFF;');
        return { valid: true };
      } catch (err: any) {
        await req.batch('SET PARSEONLY OFF;');
        return { valid: false, error: err?.message || 'Invalid query' };
      }
    } catch (e: any) {
      return { valid: false, error: e?.message || 'Connection error during validation' };
    }
  }

  override async getSampleData(tableName: string, schemaName: string = 'dbo', limit: number = 100): Promise<QueryResult> {
    await this.ensureConnected();
    const full = `${this.escapeIdentifier(schemaName)}.${this.escapeIdentifier(tableName)}`;
    const q = `SELECT TOP (${limit}) * FROM ${full}`;
    return this.executeQuery(q);
  }

  async getConnectionInfo(): Promise<any> {
    await this.ensureConnected();
    const q = `
      SELECT 
        @@VERSION AS version,
        @@SERVERNAME AS server_name,
        DB_NAME() AS database_name,
        SUSER_NAME() AS login_name,
        @@LANGUAGE AS language,
        GETDATE() AS server_time
    `;
    const r = await this.executeQuery(q);
    return (r.rows as any[])?.[0];
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ internals â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
  private async ensureConnected(): Promise<void> {
    if (!this.pool || !this.pool.connected) await this.connect();
  }

  protected override escapeIdentifier(identifier: string): string {
    return `[${String(identifier).replace(/]/g, ']]')}]`;
  }

  private createConnectionError(error: any): Error {
    const message = error instanceof Error ? error.message : 'Connection failed';
    return new Error(`Azure SQL connection error: ${message}`);
  }

  private createQueryError(error: any, query: string): Error {
    const message = error instanceof Error ? error.message : 'Query failed';
    return new Error(`Azure SQL query error: ${message} (Query: ${query.substring(0, 120)}...)`);
  }

  override getMetrics(): any {
    const p: any = this.pool as any;
    const poolStats = p?.pool ?? p;
    return {
      type: 'azure-sql',
      connected: !!this.pool?.connected,
      server: this.config.server,
      database: this.config.database,
      poolSize: poolStats?.size ?? 0,
      poolAvailable: poolStats?.available ?? 0,
      poolPending: poolStats?.pending ?? 0,
    };
  }
}

export default AzureSqlConnector;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\connectors\base.ts
--------------------------------------------------------------------------------
import { EventEmitter } from "events";
import type { ConnectionConfig } from "../../models/Connection";
import type { ConnectionTestResult } from "../../models/DataSource";

export interface ConnectorMetrics {
  type: string;
  connected: boolean;
  totalQueries: number;
  successfulQueries: number;
  failedQueries: number;
  averageQueryTime: number;
  lastQueryAt?: Date;
  lastErrorAt?: Date;
  uptime: number;
}

export interface QueryResult {
  rows: any[];
  rowCount: number;
  columns?: any;
  executionTime?: number;
  metadata?: any;
}

export interface SchemaInfo {
  schemas: Schema[];
  totalTables: number;
  totalViews: number;
  totalColumns: number;
}

export interface Schema {
  name: string;
  tables: Table[];
  views: View[];
}

export interface Table {
  name: string;
  schema: string;
  columns: Column[];
  primaryKeys: string[];
  foreignKeys: ForeignKey[];
  indexes: Index[];
  rowCount?: number;
  sizeBytes?: number;
  lastModified?: Date;
}

export interface View {
  name: string;
  schema: string;
  columns: Column[];
  definition?: string;
}

export interface Column {
  name: string;
  dataType: string;
  nullable: boolean;
  defaultValue?: string;
  maxLength?: number;
  precision?: number;
  scale?: number;
  isPrimaryKey?: boolean;
  isForeignKey?: boolean;
  isUnique?: boolean;
  comment?: string;
}

export interface ForeignKey {
  name: string;
  column: string;
  referencedTable: string;
  referencedColumn: string;
  referencedSchema?: string;
}

export interface Index {
  name: string;
  columns: string[];
  unique: boolean;
  type: string;
  clustered?: boolean;
}

export abstract class BaseConnector<C extends ConnectionConfig = ConnectionConfig> extends EventEmitter {
  protected type: string;
  protected connectionConfig: C;
  protected metrics: ConnectorMetrics;
  protected startTime: Date;

  constructor(type: string, connectionConfig: C) {
    super();
    this.type = type;
    this.connectionConfig = connectionConfig;
    this.startTime = new Date();
    this.metrics = {
      type,
      connected: false,
      totalQueries: 0,
      successfulQueries: 0,
      failedQueries: 0,
      averageQueryTime: 0,
      uptime: 0,
    };
  }

  abstract connect(): Promise<void>;
  abstract disconnect(): Promise<void>;
  abstract testConnection(): Promise<ConnectionTestResult>;
  abstract executeQuery(query: string, params?: any[]): Promise<QueryResult>;
  abstract getSchema(): Promise<SchemaInfo>;

  // Optional lifecycle hook
  cleanup?(): Promise<void> | void;

  async validateQuery(query: string): Promise<{ valid: boolean; error?: string }> {
    try {
      await this.executeQuery(`EXPLAIN ${query}`);
      return { valid: true };
    } catch (error: any) {
      return { valid: false, error: error?.message ?? "Query validation failed" };
    }
  }

  async getTableStats(tableName: string, schemaName?: string): Promise<any> {
    return {
      tableName,
      schemaName,
      rowCount: 0,
      sizeBytes: 0,
      message: "Table statistics not available for this connector type",
    };
  }

  async getSampleData(tableName: string, schemaName?: string, limit = 100): Promise<QueryResult> {
    const full = schemaName ? `${schemaName}.${tableName}` : tableName;
    const q = `SELECT * FROM ${full} LIMIT ${limit}`;
    return this.executeQuery(q);
  }

  async getColumnDistinctValues(
    tableName: string,
    columnName: string,
    schemaName?: string,
    limit = 100
  ): Promise<any[]> {
    const full = schemaName ? `${schemaName}.${tableName}` : tableName;
    const q = `SELECT DISTINCT ${columnName} FROM ${full} LIMIT ${limit}`;
    const result = await this.executeQuery(q);
    return result.rows.map((r) => r[columnName]);
  }

  getMetrics(): ConnectorMetrics {
    return { ...this.metrics, uptime: Date.now() - this.startTime.getTime() };
  }

  protected updateQueryMetrics(executionTime: number, success: boolean): void {
    this.metrics.totalQueries++;
    if (success) {
      this.metrics.successfulQueries++;
      this.metrics.lastQueryAt = new Date();
      const totalTime =
        this.metrics.averageQueryTime * (this.metrics.successfulQueries - 1) + executionTime;
      this.metrics.averageQueryTime = totalTime / this.metrics.successfulQueries;
    } else {
      this.metrics.failedQueries++;
      this.metrics.lastErrorAt = new Date();
    }
  }

  protected async executeWithMetrics<T>(operation: () => Promise<T>): Promise<T> {
    const t0 = Date.now();
    let ok = false;
    try {
      const result = await operation();
      ok = true;
      return result;
    } finally {
      const dt = Date.now() - t0;
      this.updateQueryMetrics(dt, ok);
    }
  }

  protected emitConnectionEvent(event: "connected" | "disconnected" | "error", data?: any): void {
    this.emit(event, { connector: this.type, timestamp: new Date(), data });
  }

  async healthCheck(): Promise<{
    status: "healthy" | "unhealthy" | "degraded";
    latency?: number;
    error?: string;
    details?: any;
  }> {
    try {
      const r = await this.testConnection();
      if (r.success) {
        return {
          status: (r.responseTime ?? 0) > 5000 ? "degraded" : "healthy",
          latency: r.responseTime,
          details: r.details,
        };
      }
      return { status: "unhealthy", error: r.error, details: r.details };
    } catch (e: any) {
      return { status: "unhealthy", error: e?.message ?? "Health check failed" };
    }
  }

  getConnectionConfig(): C {
    const clone: any = { ...this.connectionConfig };
    if (clone.password) clone.password = "[REDACTED]";
    return clone as C;
  }

  updateConnectionConfig(patch: Partial<C>): void {
    this.connectionConfig = { ...this.connectionConfig, ...patch };
  }

  protected escapeIdentifier(identifier: string): string {
    return `"${String(identifier).replace(/"/g, '""')}"`;
  }
  protected escapeLiteral(literal: string): string {
    return `'${String(literal).replace(/'/g, "''")}'`;
  }

  protected parseConnectionString(cs: string): Record<string, string> {
    const out: Record<string, string> = {};
    cs.split(";").forEach((pair) => {
      const [k, v] = pair.split("=");
      if (k && v) out[k.trim().toLowerCase()] = v.trim();
    });
    return out;
  }

  async getPoolStats(): Promise<{ total: number; active: number; idle: number; waiting: number }> {
    return { total: 1, active: this.metrics.connected ? 1 : 0, idle: 0, waiting: 0 };
  }
}

export default BaseConnector;



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\connectors\factory.ts
--------------------------------------------------------------------------------
// backend/data-service/src/services/connectors/factory.ts - FIXED VERSION

import type { ConnectionConfig } from "../../models/Connection";
import type { DataSourceType } from "../../models/DataSource";
import { logger } from "../../utils/logger";
import { AzureSqlConnector } from "./azureSql";
import { BaseConnector } from "./base";

// Fix: Use generic constraint that works with union types
export interface ConnectorConstructor<TConfig extends ConnectionConfig = ConnectionConfig> {
  new (config: TConfig): BaseConnector<TConfig>;
}

/* Normalize common aliases to canonical DataSourceType values */
const normalizeType = (t: string): DataSourceType => {
  const x = (t || "").toLowerCase();
  if (x === "azure_sql" || x === "azure-sql" || x === "sqlserver" || x === "sql-server") return "mssql";
  return x as DataSourceType;
};

export class ConnectorFactory {
  private static connectors: Map<DataSourceType | string, ConnectorConstructor<any>> = new Map();
  private static instances: Map<string, BaseConnector<any>> = new Map();

  /* Register built-ins with proper type casting */
  static {
    // Fix: Use type assertion to handle the union type compatibility
    ConnectorFactory.registerConnector("mssql", AzureSqlConnector as ConnectorConstructor<any>);
    ConnectorFactory.registerConnector("azure-sql", AzureSqlConnector as ConnectorConstructor<any>);
    ConnectorFactory.registerConnector("azure_sql", AzureSqlConnector as ConnectorConstructor<any>);
  }

  static registerConnector(type: DataSourceType | string, ctor: ConnectorConstructor<any>): void {
    ConnectorFactory.connectors.set(type, ctor);
    logger.info(`Registered connector for type: ${type}`);
  }

  static createConnector(config: ConnectionConfig): BaseConnector<ConnectionConfig> {
    const type = normalizeType(config.type as string);
    const Ctor =
      ConnectorFactory.connectors.get(type) || 
      ConnectorFactory.connectors.get(config.type as string);
    
    if (!Ctor) {
      throw new Error(`No connector available for data source type: ${config.type}`);
    }
    
    try {
      const inst = new Ctor(config);
      logger.info(`Created connector instance for type: ${type}`);
      return inst;
    } catch (err: any) {
      logger.error(`Failed to create connector for ${type}:`, err);
      throw new Error(`Failed to create connector: ${err?.message || "Unknown error"}`);
    }
  }

  static async getConnector(dataSourceId: string, config: ConnectionConfig): Promise<BaseConnector<ConnectionConfig>> {
    let c = ConnectorFactory.instances.get(dataSourceId);
    if (!c) {
      c = ConnectorFactory.createConnector(config);
      ConnectorFactory.instances.set(dataSourceId, c);
      
      // Fix: Add proper event handling with type safety
      c.on("disconnected", () => {
        ConnectorFactory.instances.delete(dataSourceId);
        logger.info(`Connector removed from cache: ${dataSourceId}`);
      });
      
      c.on("error", (e) => {
        logger.error(`Connector error [${dataSourceId}]`, e);
      });
    }
    return c;
  }

  static async removeConnector(dataSourceId: string): Promise<void> {
    const c = ConnectorFactory.instances.get(dataSourceId);
    if (c) {
      try {
        // Fix: Check if cleanup method exists before calling
        if (c && typeof (c as any).cleanup === "function") {
          await (c as any).cleanup();
        }
      } catch (e) {
        logger.error(`Cleanup error for ${dataSourceId}`, e);
      } finally {
        ConnectorFactory.instances.delete(dataSourceId);
      }
    }
  }

  static async testConnection(config: ConnectionConfig): Promise<any> {
    const c = ConnectorFactory.createConnector(config);
    try {
      const result = await c.testConnection();
      await c.disconnect();
      return result;
    } catch (e) {
      try {
        await c.disconnect();
      } catch (disconnectError) {
        logger.warn("Error during connector cleanup after test failure:", disconnectError);
      }
      throw e;
    }
  }

  // Fix: Updated helper methods with better type safety
  static getAvailableTypes(): DataSourceType[] {
    const uniq = new Set<DataSourceType>();
    for (const k of ConnectorFactory.connectors.keys()) {
      const normalized = normalizeType(String(k));
      if (normalized) {
        uniq.add(normalized);
      }
    }
    return Array.from(uniq);
  }

  static isTypeSupported(type: DataSourceType | string): boolean {
    const normalized = normalizeType(String(type));
    return ConnectorFactory.connectors.has(normalized) || ConnectorFactory.connectors.has(type);
  }

  // Fix: More robust config validation with type guards
  static validateConfig(type: DataSourceType | string, config: any): string[] {
    const normalizedType = normalizeType(String(type));
    const errors: string[] = [];

    // Basic validation
    if (!config || typeof config !== 'object') {
      errors.push("Configuration must be an object");
      return errors;
    }

    switch (normalizedType) {
      case "postgresql":
      case "mysql":
      case "mssql": {
        const hasConnStr = config.connectionString && typeof config.connectionString === 'string';
        if (!hasConnStr) {
          if (!config.host || typeof config.host !== 'string') {
            errors.push("Host is required when not using connection string");
          }
          if (!config.database || typeof config.database !== 'string') {
            errors.push("Database is required when not using connection string");
          }
          if (!config.username || typeof config.username !== 'string') {
            errors.push("Username is required when not using connection string");
          }
        }
        if (config.port !== undefined && (typeof config.port !== 'number' || config.port < 1 || config.port > 65535)) {
          errors.push("Port must be a number between 1 and 65535");
        }
        break;
      }
      case "mongodb": {
        const hasConnStr = config.connectionString && typeof config.connectionString === 'string';
        const hasHost = config.host && typeof config.host === 'string';
        if (!hasConnStr && !hasHost) {
          errors.push("Connection string or host is required");
        }
        break;
      }
      case "s3": {
        if (!config.bucket || typeof config.bucket !== 'string') {
          errors.push("Bucket is required");
        }
        if (!config.region || typeof config.region !== 'string') {
          errors.push("Region is required");
        }
        if (!config.accessKeyId || typeof config.accessKeyId !== 'string') {
          errors.push("Access Key ID is required");
        }
        if (!config.secretAccessKey || typeof config.secretAccessKey !== 'string') {
          errors.push("Secret Access Key is required");
        }
        break;
      }
      case "api": {
        if (!config.baseUrl || typeof config.baseUrl !== 'string') {
          errors.push("Base URL is required");
        } else {
          try {
            new URL(config.baseUrl);
          } catch {
            errors.push("Base URL must be a valid URL");
          }
        }
        break;
      }
      default:
        // For unknown types, do basic validation
        if (config.timeout !== undefined && (typeof config.timeout !== 'number' || config.timeout <= 0)) {
          errors.push("Timeout must be a positive number");
        }
        break;
    }

    return errors;
  }

  // Rest of your existing methods remain the same
  static getConfigTemplate(type: DataSourceType | string): any {
    const normalized = normalizeType(String(type));
    switch (normalized) {
      case "postgresql":
        return { 
          host: "localhost", port: 5432, database: "", username: "", password: "", 
          ssl: false, timeout: 30000, maxConnections: 10 
        };
      case "mysql":
        return { 
          host: "localhost", port: 3306, database: "", username: "", password: "", 
          ssl: false, timeout: 30000, maxConnections: 10 
        };
      case "mssql":
        return { 
          host: "localhost", port: 1433, database: "", username: "", password: "", 
          ssl: true, timeout: 30000, maxConnections: 10 
        };
      case "mongodb":
        return { 
          connectionString: "mongodb://localhost:27017", database: "", 
          username: "", password: "", timeout: 30000 
        };
      case "s3":
        return { 
          region: "us-east-1", bucket: "", accessKeyId: "", secretAccessKey: "" 
        };
      case "api":
        return { 
          baseUrl: "https://api.example.com", apiKey: "", timeout: 30000, headers: {} 
        };
      default:
        return { timeout: 30000 };
    }
  }

  static getActiveConnectors(): Map<string, BaseConnector<any>> {
    return new Map(ConnectorFactory.instances);
  }

  static getAllMetrics(): Record<string, any> {
    const out: Record<string, any> = {};
    for (const [id, c] of ConnectorFactory.instances) {
      try {
        out[id] = (c as any).getMetrics?.() || { status: "no metrics available" };
      } catch (e: any) {
        out[id] = { error: e?.message || "Failed to get metrics" };
      }
    }
    return out;
  }

  static async healthCheckAll(): Promise<Record<string, any>> {
    const results: Record<string, any> = {};
    const checks = Array.from(ConnectorFactory.instances.entries()).map(async ([id, c]) => {
      try {
        results[id] = await c.healthCheck();
      } catch (e: any) {
        results[id] = { status: "unhealthy", error: e?.message || "Health check failed" };
      }
    });
    
    await Promise.allSettled(checks);
    return results;
  }

  static async cleanupAll(): Promise<void> {
    const cleanupPromises = Array.from(ConnectorFactory.instances.keys()).map(id => 
      ConnectorFactory.removeConnector(id)
    );
    
    await Promise.allSettled(cleanupPromises);
    ConnectorFactory.instances.clear();
    logger.info("All connectors cleaned up");
  }
}

export default ConnectorFactory;


--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\DatabaseService.migrations.additions.ts
--------------------------------------------------------------------------------
// backend/data-service/src/services/DatabaseService.migrations.additions.ts

export const extraMigrations = [
  {
    id: 100,
    name: '100_quality_rules_enhanced',
    sql: `
      BEGIN;

      -- Ensure UUID/crypto helpers exist (idempotent, safe to re-run)
      CREATE EXTENSION IF NOT EXISTS "pgcrypto";
      CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

      -- 1) Create tables if missing (modern schema)
      CREATE TABLE IF NOT EXISTS quality_rules (
        id                  uuid PRIMARY KEY DEFAULT gen_random_uuid(),
        name                varchar(255) NOT NULL,
        description         text,
        severity            varchar(20) NOT NULL DEFAULT 'medium',
        type                varchar(30) NOT NULL DEFAULT 'sql',
        dialect             varchar(30) NOT NULL DEFAULT 'postgres',
        expression          text NOT NULL,
        expression_hash     varchar(64),
        tags                text[] NOT NULL DEFAULT '{}'::text[],
        enabled             boolean NOT NULL DEFAULT true,
        max_execution_time_ms integer NOT NULL DEFAULT 30000,
        created_by          varchar(100),
        updated_by          varchar(100),
        created_at          timestamptz NOT NULL DEFAULT now(),
        updated_at          timestamptz NOT NULL DEFAULT now(),
        last_executed_at    timestamptz,
        execution_count     integer NOT NULL DEFAULT 0
      );

      CREATE TABLE IF NOT EXISTS quality_results (
        id                uuid PRIMARY KEY DEFAULT gen_random_uuid(),
        rule_id           uuid NOT NULL REFERENCES quality_rules(id) ON DELETE CASCADE,
        data_source_id    uuid REFERENCES data_sources(id) ON DELETE SET NULL,
        asset_id          uuid,
        status            varchar(15) NOT NULL,
        run_at            timestamptz NOT NULL DEFAULT now(),
        execution_time_ms integer NOT NULL DEFAULT 0,
        metrics           jsonb NOT NULL DEFAULT '{}'::jsonb,
        error             text,
        query_hash        varchar(64),
        executed_by       varchar(100)
      );

      -- 2) Backfill columns if table existed from older schema (fixes "enabled does not exist")
      ALTER TABLE quality_rules
        ADD COLUMN IF NOT EXISTS expression_hash      varchar(64),
        ADD COLUMN IF NOT EXISTS tags                 text[] NOT NULL DEFAULT '{}'::text[],
        ADD COLUMN IF NOT EXISTS enabled              boolean NOT NULL DEFAULT true,
        ADD COLUMN IF NOT EXISTS max_execution_time_ms integer NOT NULL DEFAULT 30000,
        ADD COLUMN IF NOT EXISTS last_executed_at     timestamptz,
        ADD COLUMN IF NOT EXISTS execution_count      integer NOT NULL DEFAULT 0,
        ADD COLUMN IF NOT EXISTS severity             varchar(20) NOT NULL DEFAULT 'medium',
        ADD COLUMN IF NOT EXISTS type                 varchar(30) NOT NULL DEFAULT 'sql',
        ADD COLUMN IF NOT EXISTS dialect              varchar(30) NOT NULL DEFAULT 'postgres';

      ALTER TABLE quality_rules
        ALTER COLUMN tags SET DEFAULT '{}'::text[],
        ALTER COLUMN enabled SET DEFAULT true;

      ALTER TABLE quality_results
        ADD COLUMN IF NOT EXISTS execution_time_ms integer NOT NULL DEFAULT 0,
        ADD COLUMN IF NOT EXISTS metrics           jsonb NOT NULL DEFAULT '{}'::jsonb,
        ADD COLUMN IF NOT EXISTS query_hash        varchar(64),
        ADD COLUMN IF NOT EXISTS executed_by       varchar(100);

      -- 3) Constraints (use catalog guards so theyâ€™re re-runnable)
      DO $$
      BEGIN
        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_rules_severity') THEN
          ALTER TABLE quality_rules
            ADD CONSTRAINT chk_quality_rules_severity
            CHECK (severity IN ('low','medium','high','critical'));
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_rules_type') THEN
          ALTER TABLE quality_rules
            ADD CONSTRAINT chk_quality_rules_type
            CHECK (type IN ('sql','metric'));
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_rules_dialect') THEN
          ALTER TABLE quality_rules
            ADD CONSTRAINT chk_quality_rules_dialect
            CHECK (dialect IN ('postgres','generic'));
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_rules_name_length') THEN
          ALTER TABLE quality_rules
            ADD CONSTRAINT chk_quality_rules_name_length
            CHECK (char_length(name) >= 2);
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_rules_expression_length') THEN
          ALTER TABLE quality_rules
            ADD CONSTRAINT chk_quality_rules_expression_length
            CHECK (char_length(expression) BETWEEN 3 AND 10000);
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_rules_max_exec_time') THEN
          ALTER TABLE quality_rules
            ADD CONSTRAINT chk_quality_rules_max_exec_time
            CHECK (max_execution_time_ms BETWEEN 1000 AND 300000);
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_results_status') THEN
          ALTER TABLE quality_results
            ADD CONSTRAINT chk_quality_results_status
            CHECK (status IN ('passed','failed','error','skipped','timeout'));
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_quality_results_exec_time') THEN
          ALTER TABLE quality_results
            ADD CONSTRAINT chk_quality_results_exec_time
            CHECK (execution_time_ms >= 0);
        END IF;
      END $$;

      -- 4) Indexes (safe to re-run)
      CREATE INDEX IF NOT EXISTS idx_quality_rules_name            ON quality_rules(name);
      CREATE INDEX IF NOT EXISTS idx_quality_rules_type_enabled    ON quality_rules(type, enabled);
      CREATE INDEX IF NOT EXISTS idx_quality_rules_updated_at      ON quality_rules(updated_at DESC);
      CREATE INDEX IF NOT EXISTS idx_quality_rules_expression_hash ON quality_rules(expression_hash);

      CREATE INDEX IF NOT EXISTS idx_quality_results_rule_id       ON quality_results(rule_id);
      CREATE INDEX IF NOT EXISTS idx_quality_results_data_source   ON quality_results(data_source_id);
      CREATE INDEX IF NOT EXISTS idx_quality_results_status        ON quality_results(status);
      CREATE INDEX IF NOT EXISTS idx_quality_results_run_at        ON quality_results(run_at DESC);
      CREATE INDEX IF NOT EXISTS idx_quality_results_rule_run_at   ON quality_results(rule_id, run_at DESC);

      -- 5) Hash trigger (correct digest usage)
      CREATE OR REPLACE FUNCTION update_quality_rule_hash()
      RETURNS TRIGGER AS $$
      BEGIN
        -- pgcrypto: encode(digest(bytea,'sha256'),'hex')
        NEW.expression_hash := encode(digest(NEW.expression::bytea, 'sha256'), 'hex');
        NEW.updated_at := now();
        RETURN NEW;
      END;
      $$ LANGUAGE plpgsql;

      DROP TRIGGER IF EXISTS trigger_quality_rule_hash ON quality_rules;
      CREATE TRIGGER trigger_quality_rule_hash
        BEFORE INSERT OR UPDATE ON quality_rules
        FOR EACH ROW
        EXECUTE FUNCTION update_quality_rule_hash();

      -- 6) Updated-at trigger (generic)
      CREATE OR REPLACE FUNCTION set_updated_at()
      RETURNS TRIGGER AS $$
      BEGIN
        NEW.updated_at := now();
        RETURN NEW;
      END;
      $$ LANGUAGE plpgsql;

      DROP TRIGGER IF EXISTS trg_quality_rules_updated_at ON quality_rules;
      CREATE TRIGGER trg_quality_rules_updated_at
        BEFORE UPDATE ON quality_rules
        FOR EACH ROW
        EXECUTE FUNCTION set_updated_at();

      -- 7) Execution stats trigger
      CREATE OR REPLACE FUNCTION update_quality_rule_stats()
      RETURNS TRIGGER AS $$
      BEGIN
        UPDATE quality_rules
           SET last_executed_at = NEW.run_at,
               execution_count  = COALESCE(execution_count,0) + 1,
               updated_at       = now()
         WHERE id = NEW.rule_id;
        RETURN NEW;
      END;
      $$ LANGUAGE plpgsql;

      DROP TRIGGER IF EXISTS trigger_quality_rule_stats ON quality_results;
      CREATE TRIGGER trigger_quality_rule_stats
        AFTER INSERT ON quality_results
        FOR EACH ROW
        EXECUTE FUNCTION update_quality_rule_stats();

      COMMIT;
    `,
  },
  {
  id: 101,
  name: '101_governance_policies_enhanced',
  sql: `
    CREATE EXTENSION IF NOT EXISTS "pgcrypto";
    BEGIN;

    /* 1) Create table if missing (modern shape) */
    CREATE TABLE IF NOT EXISTS governance_policies (
      id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
      name varchar(255) NOT NULL,
      description text,
      category varchar(50) NOT NULL DEFAULT 'access',
      status varchar(20) NOT NULL DEFAULT 'active',
      priority integer NOT NULL DEFAULT 100,
      rules jsonb NOT NULL DEFAULT '[]'::jsonb,
      conditions jsonb DEFAULT '{}'::jsonb,
      actions jsonb DEFAULT '{}'::jsonb,
      effective_from timestamptz DEFAULT now(),
      effective_until timestamptz,
      created_by varchar(100),
      updated_by varchar(100),
      approved_by varchar(100),
      approved_at timestamptz,
      created_at timestamptz NOT NULL DEFAULT now(),
      updated_at timestamptz NOT NULL DEFAULT now(),
      version integer NOT NULL DEFAULT 1
    );

    /* 2) Backfill columns for legacy tables */
    ALTER TABLE governance_policies
      ADD COLUMN IF NOT EXISTS description      text,
      ADD COLUMN IF NOT EXISTS category         varchar(50) NOT NULL DEFAULT 'access',
      ADD COLUMN IF NOT EXISTS status           varchar(20) NOT NULL DEFAULT 'active',
      ADD COLUMN IF NOT EXISTS priority         integer NOT NULL DEFAULT 100,
      ADD COLUMN IF NOT EXISTS rules            jsonb NOT NULL DEFAULT '[]'::jsonb,
      ADD COLUMN IF NOT EXISTS conditions       jsonb NOT NULL DEFAULT '{}'::jsonb,
      ADD COLUMN IF NOT EXISTS actions          jsonb NOT NULL DEFAULT '{}'::jsonb,
      ADD COLUMN IF NOT EXISTS effective_from   timestamptz DEFAULT now(),
      ADD COLUMN IF NOT EXISTS effective_until  timestamptz,
      ADD COLUMN IF NOT EXISTS created_by       varchar(100),
      ADD COLUMN IF NOT EXISTS updated_by       varchar(100),
      ADD COLUMN IF NOT EXISTS approved_by      varchar(100),
      ADD COLUMN IF NOT EXISTS approved_at      timestamptz,
      ADD COLUMN IF NOT EXISTS created_at       timestamptz NOT NULL DEFAULT now(),
      ADD COLUMN IF NOT EXISTS updated_at       timestamptz NOT NULL DEFAULT now(),
      ADD COLUMN IF NOT EXISTS version          integer NOT NULL DEFAULT 1;

    /* 3) Constraints (guarded so this block is re-runnable) */
    DO $$
    BEGIN
      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_governance_policies_category') THEN
        ALTER TABLE governance_policies
          ADD CONSTRAINT chk_governance_policies_category
          CHECK (category IN ('access','privacy','retention','classification','compliance'));
      END IF;

      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_governance_policies_status') THEN
        ALTER TABLE governance_policies
          ADD CONSTRAINT chk_governance_policies_status
          CHECK (status IN ('draft','active','inactive','archived'));
      END IF;

      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_governance_policies_priority') THEN
        ALTER TABLE governance_policies
          ADD CONSTRAINT chk_governance_policies_priority
          CHECK (priority BETWEEN 1 AND 1000);
      END IF;

      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_governance_policies_name_length') THEN
        ALTER TABLE governance_policies
          ADD CONSTRAINT chk_governance_policies_name_length
          CHECK (char_length(name) >= 2);
      END IF;
    END $$;

    /* 4) Applications table */
    CREATE TABLE IF NOT EXISTS governance_policy_applications (
      id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
      policy_id uuid NOT NULL REFERENCES governance_policies(id) ON DELETE CASCADE,
      resource_type varchar(50) NOT NULL,
      resource_id varchar(255) NOT NULL,
      action varchar(100) NOT NULL,
      result varchar(20) NOT NULL,
      applied_at timestamptz NOT NULL DEFAULT now(),
      applied_by varchar(100),
      context jsonb NOT NULL DEFAULT '{}'::jsonb
    );

    DO $$
    BEGIN
      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_governance_applications_result') THEN
        ALTER TABLE governance_policy_applications
          ADD CONSTRAINT chk_governance_applications_result
          CHECK (result IN ('allowed','denied','audited','warning'));
      END IF;
    END $$;

    /* 5) Indexes (after columns exist) */
    CREATE INDEX IF NOT EXISTS idx_governance_policies_status     ON governance_policies(status);
    CREATE INDEX IF NOT EXISTS idx_governance_policies_category   ON governance_policies(category);
    CREATE INDEX IF NOT EXISTS idx_governance_policies_effective  ON governance_policies(effective_from, effective_until);
    CREATE INDEX IF NOT EXISTS idx_governance_policies_priority   ON governance_policies(priority DESC);

    CREATE INDEX IF NOT EXISTS idx_governance_applications_policy   ON governance_policy_applications(policy_id);
    CREATE INDEX IF NOT EXISTS idx_governance_applications_resource ON governance_policy_applications(resource_type, resource_id);
    CREATE INDEX IF NOT EXISTS idx_governance_applications_applied  ON governance_policy_applications(applied_at DESC);

    /* 6) Version/updated_at trigger */
    CREATE OR REPLACE FUNCTION update_governance_policy_version()
    RETURNS TRIGGER AS $$
    BEGIN
      IF TG_OP = 'UPDATE' AND OLD.rules::text IS DISTINCT FROM NEW.rules::text THEN
        NEW.version := COALESCE(OLD.version, 0) + 1;
      END IF;
      NEW.updated_at := now();
      RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    DROP TRIGGER IF EXISTS trigger_governance_policy_version ON governance_policies;
    CREATE TRIGGER trigger_governance_policy_version
      BEFORE UPDATE ON governance_policies
      FOR EACH ROW
      EXECUTE FUNCTION update_governance_policy_version();

    COMMIT;
  `,
}
,
  {
  id: 102,
  name: '102_workflow_requests_enhanced',
  sql: `
    CREATE EXTENSION IF NOT EXISTS "pgcrypto";
    BEGIN;

    /* 1) Create table if missing (modern shape) */
    CREATE TABLE IF NOT EXISTS workflow_requests (
      id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
      title varchar(255) NOT NULL,
      description text,
      type varchar(40) NOT NULL DEFAULT 'access',
      priority varchar(20) NOT NULL DEFAULT 'medium',
      status varchar(20) NOT NULL DEFAULT 'open',
      requester varchar(120),
      assignee varchar(120),
      approver varchar(120),
      payload jsonb NOT NULL DEFAULT '{}'::jsonb,
      attachments text[] NOT NULL DEFAULT '{}'::text[],
      due_date timestamptz,
      resolved_at timestamptz,
      created_at timestamptz NOT NULL DEFAULT now(),
      updated_at timestamptz NOT NULL DEFAULT now(),
      updated_by varchar(100)
    );

    /* 2) Backfill columns for legacy installs */
    ALTER TABLE workflow_requests
      ADD COLUMN IF NOT EXISTS description   text,
      ADD COLUMN IF NOT EXISTS type          varchar(40)  NOT NULL DEFAULT 'access',
      ADD COLUMN IF NOT EXISTS priority      varchar(20)  NOT NULL DEFAULT 'medium',
      ADD COLUMN IF NOT EXISTS status        varchar(20)  NOT NULL DEFAULT 'open',
      ADD COLUMN IF NOT EXISTS requester     varchar(120),
      ADD COLUMN IF NOT EXISTS assignee      varchar(120),
      ADD COLUMN IF NOT EXISTS approver      varchar(120),
      ADD COLUMN IF NOT EXISTS payload       jsonb        NOT NULL DEFAULT '{}'::jsonb,
      ADD COLUMN IF NOT EXISTS attachments   text[]       NOT NULL DEFAULT '{}'::text[],
      ADD COLUMN IF NOT EXISTS due_date      timestamptz,
      ADD COLUMN IF NOT EXISTS resolved_at   timestamptz,
      ADD COLUMN IF NOT EXISTS created_at    timestamptz  NOT NULL DEFAULT now(),
      ADD COLUMN IF NOT EXISTS updated_at    timestamptz  NOT NULL DEFAULT now(),
      ADD COLUMN IF NOT EXISTS updated_by    varchar(100);

    /* 3) Ensure minimal defaults on existing rows */
    UPDATE workflow_requests
      SET type = COALESCE(type, 'access'),
          priority = COALESCE(priority, 'medium'),
          status = COALESCE(status, 'open'),
          payload = COALESCE(payload, '{}'::jsonb),
          attachments = COALESCE(attachments, '{}'::text[]),
          created_at = COALESCE(created_at, now()),
          updated_at = COALESCE(updated_at, now());

    /* 4) Constraints (guarded so re-runs are safe) */
    DO $$
    BEGIN
      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_workflow_requests_type') THEN
        ALTER TABLE workflow_requests
          ADD CONSTRAINT chk_workflow_requests_type
          CHECK (type IN ('access','change','incident','data_request','policy_exception'));
      END IF;

      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_workflow_requests_priority') THEN
        ALTER TABLE workflow_requests
          ADD CONSTRAINT chk_workflow_requests_priority
          CHECK (priority IN ('low','medium','high','urgent'));
      END IF;

      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_workflow_requests_status') THEN
        ALTER TABLE workflow_requests
          ADD CONSTRAINT chk_workflow_requests_status
          CHECK (status IN ('open','in_progress','pending_approval','approved','rejected','closed','cancelled'));
      END IF;

      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_workflow_requests_title_length') THEN
        ALTER TABLE workflow_requests
          ADD CONSTRAINT chk_workflow_requests_title_length
          CHECK (char_length(title) >= 3);
      END IF;
    END $$;

    /* 5) Comments/history table */
    CREATE TABLE IF NOT EXISTS workflow_request_comments (
      id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
      request_id uuid NOT NULL REFERENCES workflow_requests(id) ON DELETE CASCADE,
      comment_type varchar(20) NOT NULL DEFAULT 'comment',
      content text NOT NULL,
      author varchar(120) NOT NULL,
      created_at timestamptz NOT NULL DEFAULT now(),
      is_internal boolean NOT NULL DEFAULT false
    );

    DO $$
    BEGIN
      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_workflow_comments_type') THEN
        ALTER TABLE workflow_request_comments
          ADD CONSTRAINT chk_workflow_comments_type
          CHECK (comment_type IN ('comment','status_change','assignment','approval','rejection'));
      END IF;
    END $$;

    /* 6) Approvals table */
    CREATE TABLE IF NOT EXISTS workflow_request_approvals (
      id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
      request_id uuid NOT NULL REFERENCES workflow_requests(id) ON DELETE CASCADE,
      approver varchar(120) NOT NULL,
      decision varchar(20) NOT NULL,
      comments text,
      decided_at timestamptz NOT NULL DEFAULT now()
    );

    DO $$
    BEGIN
      IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_workflow_approvals_decision') THEN
        ALTER TABLE workflow_request_approvals
          ADD CONSTRAINT chk_workflow_approvals_decision
          CHECK (decision IN ('approved','rejected','needs_info'));
      END IF;
    END $$;

    /* 7) Indexes */
    CREATE INDEX IF NOT EXISTS idx_workflow_requests_status     ON workflow_requests(status);
    CREATE INDEX IF NOT EXISTS idx_workflow_requests_type       ON workflow_requests(type);
    CREATE INDEX IF NOT EXISTS idx_workflow_requests_assignee   ON workflow_requests(assignee);
    CREATE INDEX IF NOT EXISTS idx_workflow_requests_requester  ON workflow_requests(requester);
    CREATE INDEX IF NOT EXISTS idx_workflow_requests_updated_at ON workflow_requests(updated_at DESC);
    CREATE INDEX IF NOT EXISTS idx_workflow_requests_due_date   ON workflow_requests(due_date) WHERE due_date IS NOT NULL;

    CREATE INDEX IF NOT EXISTS idx_workflow_comments_request    ON workflow_request_comments(request_id, created_at DESC);
    CREATE INDEX IF NOT EXISTS idx_workflow_approvals_request   ON workflow_request_approvals(request_id);

    /* 8) Auto-resolve trigger (maintains resolved_at and updated_at) */
    CREATE OR REPLACE FUNCTION auto_resolve_workflow_request()
    RETURNS TRIGGER AS $$
    BEGIN
      IF TG_OP = 'UPDATE' THEN
        IF NEW.status IN ('approved','rejected','closed','cancelled') AND OLD.resolved_at IS NULL THEN
          NEW.resolved_at := now();
        END IF;
        NEW.updated_at := now();
      END IF;
      RETURN NEW;
    END;
    $$ LANGUAGE plpgsql;

    DROP TRIGGER IF EXISTS trigger_auto_resolve_workflow ON workflow_requests;
    CREATE TRIGGER trigger_auto_resolve_workflow
      BEFORE UPDATE ON workflow_requests
      FOR EACH ROW
      EXECUTE FUNCTION auto_resolve_workflow_request();

    COMMIT;
  `,
}
,
  {
    id: 103,
    name: '103_security_and_audit_tables',
    sql: `
      CREATE EXTENSION IF NOT EXISTS "pgcrypto";
      BEGIN;

      CREATE TABLE IF NOT EXISTS audit_logs (
        id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
        entity_type varchar(50) NOT NULL,
        entity_id varchar(255) NOT NULL,
        action varchar(50) NOT NULL,
        actor varchar(120),
        actor_ip inet,
        user_agent text,
        changes jsonb,
        metadata jsonb NOT NULL DEFAULT '{}'::jsonb,
        created_at timestamptz NOT NULL DEFAULT now()
      );

      DO $$
      BEGIN
        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_audit_logs_action') THEN
          ALTER TABLE audit_logs
            ADD CONSTRAINT chk_audit_logs_action
            CHECK (action IN ('CREATE','UPDATE','DELETE','EXECUTE','ACCESS','LOGIN','LOGOUT'));
        END IF;
      END $$;

      CREATE TABLE IF NOT EXISTS rate_limit_buckets (
        key varchar(255) PRIMARY KEY,
        tokens integer NOT NULL DEFAULT 0,
        last_refill timestamptz NOT NULL DEFAULT now()
      );
      DO $$
      BEGIN
        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_rate_limit_tokens') THEN
          ALTER TABLE rate_limit_buckets
            ADD CONSTRAINT chk_rate_limit_tokens CHECK (tokens >= 0);
        END IF;
      END $$;

      CREATE TABLE IF NOT EXISTS system_config (
        key varchar(100) PRIMARY KEY,
        value jsonb NOT NULL,
        description text,
        is_sensitive boolean NOT NULL DEFAULT false,
        updated_by varchar(100),
        updated_at timestamptz NOT NULL DEFAULT now()
      );

      CREATE INDEX IF NOT EXISTS idx_audit_logs_entity      ON audit_logs(entity_type, entity_id);
      CREATE INDEX IF NOT EXISTS idx_audit_logs_actor       ON audit_logs(actor);
      CREATE INDEX IF NOT EXISTS idx_audit_logs_created_at  ON audit_logs(created_at DESC);
      CREATE INDEX IF NOT EXISTS idx_audit_logs_action      ON audit_logs(action);
      CREATE INDEX IF NOT EXISTS idx_rate_limit_last_refill ON rate_limit_buckets(last_refill);

      -- Seed default config (won't overwrite)
      INSERT INTO system_config (key, value, description)
      VALUES
        ('max_query_execution_time', '300000', 'Maximum query execution time in milliseconds'),
        ('enable_audit_logging', 'true', 'Whether to enable comprehensive audit logging'),
        ('data_retention_days', '365', 'Default data retention period in days'),
        ('max_file_upload_size', '10485760', 'Maximum file upload size in bytes (10MB)')
      ON CONFLICT (key) DO NOTHING;

      -- Maintenance function
      CREATE OR REPLACE FUNCTION cleanup_old_audit_logs()
      RETURNS integer AS $$
      DECLARE
        deleted_count integer;
      BEGIN
        DELETE FROM audit_logs
         WHERE created_at < now() - interval '1 year'
           AND action NOT IN ('DELETE','LOGIN');
        GET DIAGNOSTICS deleted_count = ROW_COUNT;
        RETURN deleted_count;
      END;
      $$ LANGUAGE plpgsql;

      COMMIT;
    `,
  },
  {
    id: 104,
    name: '104_data_lineage_and_relationships',
    sql: `
      CREATE EXTENSION IF NOT EXISTS "pgcrypto";
      BEGIN;

      CREATE TABLE IF NOT EXISTS assets (
        id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
        name varchar(255) NOT NULL,
        type varchar(50) NOT NULL,
        data_source_id uuid REFERENCES data_sources(id) ON DELETE CASCADE,
        schema_name varchar(100),
        table_name varchar(100),
        column_name varchar(100),
        description text,
        data_type varchar(100),
        is_nullable boolean,
        is_primary_key boolean NOT NULL DEFAULT false,
        classification varchar(50) NOT NULL DEFAULT 'public',
        tags text[] NOT NULL DEFAULT '{}'::text[],
        metadata jsonb NOT NULL DEFAULT '{}'::jsonb,
        created_at timestamptz NOT NULL DEFAULT now(),
        updated_at timestamptz NOT NULL DEFAULT now(),
        last_scanned_at timestamptz
      );

      DO $$
      BEGIN
        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_assets_type') THEN
          ALTER TABLE assets
            ADD CONSTRAINT chk_assets_type
            CHECK (type IN ('database','schema','table','column','view','procedure','function'));
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_assets_classification') THEN
          ALTER TABLE assets
            ADD CONSTRAINT chk_assets_classification
            CHECK (classification IN ('public','internal','confidential','restricted'));
        END IF;
      END $$;

      CREATE TABLE IF NOT EXISTS data_lineage (
        id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
        source_asset_id uuid NOT NULL REFERENCES assets(id) ON DELETE CASCADE,
        target_asset_id uuid NOT NULL REFERENCES assets(id) ON DELETE CASCADE,
        relationship_type varchar(50) NOT NULL,
        transformation_logic text,
        confidence_score numeric(3,2) DEFAULT 1.0,
        discovered_by varchar(50) DEFAULT 'manual',
        discovered_at timestamptz DEFAULT now(),
        validated_by varchar(100),
        validated_at timestamptz
      );

      DO $$
      BEGIN
        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_lineage_relationship_type') THEN
          ALTER TABLE data_lineage
            ADD CONSTRAINT chk_lineage_relationship_type
            CHECK (relationship_type IN ('derives_from','feeds_into','depends_on','similar_to'));
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_lineage_confidence') THEN
          ALTER TABLE data_lineage
            ADD CONSTRAINT chk_lineage_confidence
            CHECK (confidence_score >= 0.0 AND confidence_score <= 1.0);
        END IF;

        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_lineage_no_self_reference') THEN
          ALTER TABLE data_lineage
            ADD CONSTRAINT chk_lineage_no_self_reference
            CHECK (source_asset_id <> target_asset_id);
        END IF;
      END $$;

      CREATE TABLE IF NOT EXISTS asset_usage_stats (
        id uuid PRIMARY KEY DEFAULT gen_random_uuid(),
        asset_id uuid NOT NULL REFERENCES assets(id) ON DELETE CASCADE,
        date date NOT NULL,
        query_count integer NOT NULL DEFAULT 0,
        user_count integer NOT NULL DEFAULT 0,
        bytes_read bigint NOT NULL DEFAULT 0,
        bytes_written bigint NOT NULL DEFAULT 0,
        UNIQUE(asset_id, date)
      );

      DO $$
      BEGIN
        IF NOT EXISTS (SELECT 1 FROM pg_constraint WHERE conname='chk_usage_stats_non_negative') THEN
          ALTER TABLE asset_usage_stats
            ADD CONSTRAINT chk_usage_stats_non_negative
            CHECK (query_count >= 0 AND user_count >= 0 AND bytes_read >= 0 AND bytes_written >= 0);
        END IF;
      END $$;

      CREATE INDEX IF NOT EXISTS idx_assets_data_source_id    ON assets(data_source_id);
      CREATE INDEX IF NOT EXISTS idx_assets_type              ON assets(type);
      CREATE INDEX IF NOT EXISTS idx_assets_classification    ON assets(classification);
      CREATE INDEX IF NOT EXISTS idx_assets_updated_at        ON assets(updated_at DESC);
      CREATE INDEX IF NOT EXISTS idx_assets_name_search       ON assets USING gin(to_tsvector('english', name || ' ' || COALESCE(description,'')));
      CREATE INDEX IF NOT EXISTS idx_lineage_source           ON data_lineage(source_asset_id);
      CREATE INDEX IF NOT EXISTS idx_lineage_target           ON data_lineage(target_asset_id);
      CREATE INDEX IF NOT EXISTS idx_lineage_type             ON data_lineage(relationship_type);
      CREATE INDEX IF NOT EXISTS idx_usage_stats_asset_date   ON asset_usage_stats(asset_id, date DESC);
      CREATE INDEX IF NOT EXISTS idx_usage_stats_date         ON asset_usage_stats(date DESC);

      -- Helper to traverse lineage around an asset
      CREATE OR REPLACE FUNCTION get_asset_lineage(
        asset_uuid uuid,
        max_depth integer DEFAULT 3,
        direction  varchar(10) DEFAULT 'both'
      )
      RETURNS TABLE(
        source_id uuid,
        target_id uuid,
        relationship_type varchar,
        depth integer
      ) AS $$
      WITH RECURSIVE lineage_tree AS (
        SELECT 
          dl.source_asset_id AS source_id,
          dl.target_asset_id AS target_id,
          dl.relationship_type,
          1 AS depth
        FROM data_lineage dl
        WHERE (direction IN ('upstream','both') AND dl.target_asset_id = asset_uuid)
           OR (direction IN ('downstream','both') AND dl.source_asset_id = asset_uuid)

        UNION ALL

        SELECT
          dl.source_asset_id,
          dl.target_asset_id,
          dl.relationship_type,
          lt.depth + 1
        FROM data_lineage dl
        JOIN lineage_tree lt ON (
          (direction IN ('upstream','both')   AND dl.target_asset_id = lt.source_id) OR
          (direction IN ('downstream','both') AND dl.source_asset_id = lt.target_id)
        )
        WHERE lt.depth < max_depth
      )
      SELECT DISTINCT * FROM lineage_tree;
      $$ LANGUAGE sql STABLE;

      COMMIT;
    `,
  },
];



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\DatabaseService.ts
--------------------------------------------------------------------------------
// backend/data-service/src/services/DatabaseService.ts
import { Pool, PoolClient, QueryResult } from 'pg';
import { config } from '../config/env';
import { logger, loggerUtils } from '../utils/logger';
import { extraMigrations } from './DatabaseService.migrations.additions';

export interface DatabaseConfig {
  host: string;
  port: number;
  database: string;
  user: string;
  password: string;
  ssl?: boolean | object;
  max?: number;
  min?: number;
  idleTimeoutMillis?: number;
  connectionTimeoutMillis?: number;
}

export interface QueryOptions { 
  timeout?: number; 
  retries?: number; 
  retryDelay?: number; 
}

export interface TransactionOptions {
  timeout?: number;
  isolationLevel?: 'READ_UNCOMMITTED'|'READ_COMMITTED'|'REPEATABLE_READ'|'SERIALIZABLE';
}

export interface HealthCheckResult {
  status: 'healthy' | 'unhealthy';
  latency?: number;
  connections?: { total: number; idle: number; waiting: number; };
  error?: string;
  timestamp: string;
}

export interface PoolStats { 
  total: number; 
  idle: number; 
  waiting: number; 
  max: number; 
  min: number; 
}

export interface Migration { 
  id: number; 
  name: string; 
  sql: string; 
  executedAt?: Date; 
}

export class DatabaseService {
  private pool!: Pool;
  private isInitialized = false;
  private migrations: Migration[] = [];

  constructor() {
    this.setupMigrations();
    this.initializePool();
  }

  private initializePool(): void {
    const dbConfig: DatabaseConfig = {
      host: config.database.host,
      port: config.database.port,
      database: config.database.name,
      user: config.database.user,
      password: config.database.password,
      ssl: config.database.ssl ? { rejectUnauthorized: false } : false,
      max: config.database.poolMax,
      min: config.database.poolMin,
      idleTimeoutMillis: config.database.idleTimeout,
      connectionTimeoutMillis: config.database.connectionTimeout,
    };

    this.pool = new Pool(dbConfig);

    // Enhanced error handling
    this.pool.on('error', (err: Error, client?: PoolClient) => {
      logger.error('Database pool error:', { 
        error: err.message, 
        stack: err.stack,
        clientProcessID: (client as any)?.processID 
      });
    });

    this.pool.on('connect', (client: PoolClient) => {
      loggerUtils.logDbOperation('connect', 'pool', 0, true);
    });

    this.pool.on('remove', (client: PoolClient) => {
      loggerUtils.logDbOperation('disconnect', 'pool', 0, true);
    });

    logger.info('Database pool initialized', {
      host: dbConfig.host, 
      port: dbConfig.port, 
      database: dbConfig.database,
      maxConnections: dbConfig.max, 
      minConnections: dbConfig.min, 
      ssl: !!dbConfig.ssl,
    });

    this.isInitialized = true;
  }

  private setupMigrations(): void {
    this.migrations = [
      {
        id: 0,
        name: '000_enable_pgcrypto',
        sql: `CREATE EXTENSION IF NOT EXISTS pgcrypto;`
      },
      {
        id: 1,
        name: '001_create_data_sources_table',
        sql: `
          CREATE TABLE IF NOT EXISTS data_sources (
            id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
            name VARCHAR(100) NOT NULL,
            type VARCHAR(50) NOT NULL,
            host VARCHAR(255),
            port INTEGER CHECK (port > 0 AND port <= 65535),
            database_name VARCHAR(100),
            username VARCHAR(100),
            password_encrypted TEXT,
            ssl BOOLEAN DEFAULT FALSE,
            connection_string TEXT,
            description TEXT,
            tags TEXT[] DEFAULT '{}',
            status VARCHAR(20) DEFAULT 'active',
            metadata JSONB DEFAULT '{}',
            created_at TIMESTAMPTZ DEFAULT NOW(),
            updated_at TIMESTAMPTZ DEFAULT NOW(),
            last_tested_at TIMESTAMPTZ,
            last_sync_at TIMESTAMPTZ
          );

          CREATE OR REPLACE FUNCTION update_updated_at_column()
          RETURNS TRIGGER AS $$
          BEGIN
            NEW.updated_at = NOW();
            RETURN NEW;
          END;
          $$ LANGUAGE plpgsql;

          DROP TRIGGER IF EXISTS update_data_sources_updated_at ON data_sources;
          CREATE TRIGGER update_data_sources_updated_at
            BEFORE UPDATE ON data_sources
            FOR EACH ROW
            EXECUTE FUNCTION update_updated_at_column();

          CREATE INDEX IF NOT EXISTS idx_data_sources_type ON data_sources(type);
          CREATE INDEX IF NOT EXISTS idx_data_sources_status ON data_sources(status);
          CREATE INDEX IF NOT EXISTS idx_data_sources_name ON data_sources(name);
          CREATE INDEX IF NOT EXISTS idx_data_sources_tags ON data_sources USING GIN(tags);
        `
      },
      {
        id: 6,
        name: '006_align_data_sources_schema',
        sql: `
          -- Add missing columns from your connection test requirements
          ALTER TABLE data_sources
            ADD COLUMN IF NOT EXISTS connection_config JSONB DEFAULT '{}'::jsonb,
            ADD COLUMN IF NOT EXISTS created_by VARCHAR(100),
            ADD COLUMN IF NOT EXISTS updated_by VARCHAR(100),
            ADD COLUMN IF NOT EXISTS last_error TEXT,
            ADD COLUMN IF NOT EXISTS public_id VARCHAR(100),
            ADD COLUMN IF NOT EXISTS deleted_at TIMESTAMPTZ,
            ADD COLUMN IF NOT EXISTS last_test_at TIMESTAMPTZ;

          -- Backfill new last_test_at from legacy last_tested_at if present
          UPDATE data_sources
            SET last_test_at = COALESCE(last_test_at, last_tested_at)
            WHERE last_tested_at IS NOT NULL;

          -- Create unique index for public_id
          DO $$
          BEGIN
            IF NOT EXISTS (
              SELECT 1 FROM pg_indexes
              WHERE schemaname = 'public' AND indexname = 'uq_data_sources_public_id'
            ) THEN
              CREATE UNIQUE INDEX uq_data_sources_public_id
                ON data_sources ((public_id)) WHERE public_id IS NOT NULL;
            END IF;
          END $$;

          CREATE INDEX IF NOT EXISTS idx_data_sources_updated_at ON data_sources(updated_at);
          CREATE INDEX IF NOT EXISTS idx_data_sources_deleted_at ON data_sources(deleted_at);

          -- Drop and recreate constraints safely
          DO $$
          BEGIN
            IF EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'data_sources_type_check' AND conrelid = 'data_sources'::regclass) THEN
              ALTER TABLE data_sources DROP CONSTRAINT data_sources_type_check;
            END IF;
            IF EXISTS (SELECT 1 FROM pg_constraint WHERE conname = 'data_sources_status_check' AND conrelid = 'data_sources'::regclass) THEN
              ALTER TABLE data_sources DROP CONSTRAINT data_sources_status_check;
            END IF;
          END $$;

          -- Add comprehensive constraints
          ALTER TABLE data_sources
            ADD CONSTRAINT chk_data_sources_type CHECK (type IN (
              'postgresql','mysql','mssql','oracle','mongodb','redis',
              's3','azure-blob','gcs','snowflake','bigquery','redshift',
              'databricks','api','file','kafka','elasticsearch'
            ));

          ALTER TABLE data_sources
            ADD CONSTRAINT chk_data_sources_status CHECK (status IN (
              'active','inactive','pending','error','testing',
              'connected','disconnected','warning','syncing'
            ));
        `
      }
    ];
    
    // Add extra migrations if they exist
    if (extraMigrations && Array.isArray(extraMigrations)) {
      this.migrations.push(...extraMigrations);
    }
  }

  /** Enhanced query method with better error handling */
  public async query(text: string, params?: any[], options: QueryOptions = {}): Promise<QueryResult> {
    const { timeout = 30000, retries = 0, retryDelay = 1000 } = options;
    const start = Date.now();
    const queryId = Math.random().toString(36).substring(7);
    let lastError: Error;

    if (!this.isInitialized) {
      throw new Error('Database service not initialized');
    }

    loggerUtils.logDbOperation('query_start', 'general', 0, true);

    for (let attempt = 0; attempt <= retries; attempt++) {
      try {
        const queryPromise = this.pool.query({ text, values: params });
        const timeoutPromise = new Promise<never>((_, reject) => 
          setTimeout(() => reject(new Error(`Query timeout after ${timeout}ms`)), timeout)
        );

        const result = await Promise.race([queryPromise, timeoutPromise]);
        const duration = Date.now() - start;
        
        loggerUtils.logDbOperation('query_success', 'general', duration, true);
        logger.debug('Database query completed', { queryId, duration, rows: result.rowCount });
        
        return result;
      } catch (err) {
        lastError = err as Error;
        const duration = Date.now() - start;
        
        logger.error('Database query failed', { 
          queryId, 
          attempt: attempt + 1, 
          duration,
          error: lastError.message,
          query: text.substring(0, 100) + (text.length > 100 ? '...' : '')
        });

        if (attempt === retries) {
          loggerUtils.logDbOperation('query_failed', 'general', duration, false);
          throw lastError;
        }

        // Exponential backoff
        await new Promise(r => setTimeout(r, retryDelay * Math.pow(2, attempt)));
      }
    }
    throw lastError!;
  }

  /** Enhanced transaction method */
  public async transaction<T>(
    callback: (client: PoolClient) => Promise<T>, 
    options: TransactionOptions = {}
  ): Promise<T> {
    const { timeout = 30000, isolationLevel } = options;
    let client: PoolClient | null = null;
    
    try {
      client = await this.pool.connect();
      await client.query('BEGIN');
      
      if (isolationLevel) {
        await client.query(`SET TRANSACTION ISOLATION LEVEL ${isolationLevel}`);
      }

      const timeoutPromise = new Promise<never>((_, reject) => 
        setTimeout(() => reject(new Error(`Transaction timeout after ${timeout}ms`)), timeout)
      );

      const result = await Promise.race([
        callback(client),
        timeoutPromise
      ]);

      await client.query('COMMIT');
      return result;
    } catch (err) {
      if (client) {
        try {
          await client.query('ROLLBACK');
        } catch (rollbackErr) {
          logger.error('Failed to rollback transaction', { error: (rollbackErr as Error).message });
        }
      }
      throw err;
    } finally {
      if (client) {
        client.release();
      }
    }
  }

  /** Enhanced health check */
  public async healthCheck(): Promise<HealthCheckResult> {
    const started = Date.now();
    try {
      if (!this.isInitialized) {
        throw new Error('Database service not initialized');
      }

      await this.pool.query('SELECT 1 as health_check');
      
      const poolStats = this.getPoolStats();
      
      return {
        status: 'healthy',
        latency: Date.now() - started,
        connections: {
          total: poolStats.total,
          idle: poolStats.idle,
          waiting: poolStats.waiting,
        },
        timestamp: new Date().toISOString(),
      };
    } catch (e: any) {
      logger.error('Database health check failed', { error: e.message });
      return {
        status: 'unhealthy',
        latency: Date.now() - started,
        error: e?.message || String(e),
        timestamp: new Date().toISOString(),
      };
    }
  }

  public getPoolStats(): PoolStats {
    return {
      total: (this.pool as any).totalCount ?? 0,
      idle: (this.pool as any).idleCount ?? 0,
      waiting: (this.pool as any).waitingCount ?? 0,
      max: config.database.poolMax,
      min: config.database.poolMin,
    };
  }

  /** Enhanced migration runner with better error handling */
  public async runMigrations(): Promise<void> {
    logger.info('Running database migrations...');
    
    try {
      // Create migrations table if it doesn't exist
      await this.query(`
        CREATE TABLE IF NOT EXISTS migrations (
          id SERIAL PRIMARY KEY,
          name VARCHAR(255) NOT NULL UNIQUE,
          executed_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
        )
      `);

      // Get already executed migrations
      const executedMigrations = await this.query('SELECT name FROM migrations ORDER BY id');
      const executedNames = new Set(executedMigrations.rows.map(row => row.name));

      let migrationsRun = 0;
      
      for (const migration of this.migrations) {
        if (executedNames.has(migration.name)) {
          logger.debug(`Migration already applied: ${migration.name}`);
          continue;
        }

        logger.info(`Running migration: ${migration.name}`);
        
        try {
          await this.transaction(async (client) => {
            // Execute the migration SQL
            await client.query(migration.sql);
            // Record the migration as completed
            await client.query(
              'INSERT INTO migrations (name) VALUES ($1)', 
              [migration.name]
            );
          });
          
          migrationsRun++;
          logger.info(`Migration completed: ${migration.name}`);
        } catch (migrationError) {
          logger.error(`Migration failed: ${migration.name}`, { 
            error: (migrationError as Error).message 
          });
          throw new Error(`Migration ${migration.name} failed: ${(migrationError as Error).message}`);
        }
      }

      logger.info(`All migrations completed successfully. ${migrationsRun} migrations executed.`);
    } catch (error) {
      logger.error('Migration process failed', { error: (error as Error).message });
      throw error;
    }
  }

  /** Graceful shutdown */
  public async close(): Promise<void> {
    if (this.pool && this.isInitialized) {
      logger.info('Closing database pool...');
      await this.pool.end();
      this.isInitialized = false;
      logger.info('Database pool closed');
    }
  }

  public isReady(): boolean { 
    return this.isInitialized && this.pool !== null; 
  }

  /** Utility method to check if a table exists */
  public async tableExists(tableName: string): Promise<boolean> {
    const result = await this.query(`
      SELECT EXISTS (
        SELECT FROM information_schema.tables 
        WHERE table_schema = 'public' 
        AND table_name = $1
      )
    `, [tableName]);
    
    return result.rows[0]?.exists || false;
  }

  /** Utility method to check if a column exists */
  public async columnExists(tableName: string, columnName: string): Promise<boolean> {
    const result = await this.query(`
      SELECT EXISTS (
        SELECT FROM information_schema.columns 
        WHERE table_schema = 'public' 
        AND table_name = $1 
        AND column_name = $2
      )
    `, [tableName, columnName]);
    
    return result.rows[0]?.exists || false;
  }
}


--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\DataSourceService.ts
--------------------------------------------------------------------------------
// backend/data-service/src/services/DataSourceService.ts
import { randomUUID } from 'node:crypto';
import {
  ConnectionConfig,
  DataSource,
  DataSourceFilters,
  DataSourceStatus,
  DataSourceType,
} from '../models/DataSource';
import { logger } from '../utils/logger';
import { DatabaseService } from './DatabaseService';

export interface PaginatedDataSources {
  dataSources: DataSource[];
  total: number;
  page: number;
  limit: number;
  totalPages: number;
}

export interface DataSourceListOptions {
  page: number;
  limit: number;
  filters: DataSourceFilters;
  sortBy?: 'updatedAt' | 'createdAt' | 'name' | 'status' | 'type';
  sortOrder?: 'asc' | 'desc';
}

export interface HealthSummary {
  total: number;
  healthy: number;
  warning: number;
  error: number;
  lastUpdated: Date;
}

export interface SchemaInfo {
  tables: TableInfo[];
  views: ViewInfo[];
  totalTables: number;
  totalColumns: number;
  estimatedSize: string;
}

export interface TableInfo {
  name: string;
  schema?: string;
  rowCount?: number;
  columns: ColumnInfo[];
  indexes: IndexInfo[];
  constraints: ConstraintInfo[];
}

export interface ColumnInfo {
  name: string;
  type: string;
  nullable: boolean;
  primaryKey: boolean;
  foreignKey?: { table: string; column: string };
  defaultValue?: string;
}

export interface ViewInfo { name: string; schema?: string; definition: string; }
export interface IndexInfo { name: string; columns: string[]; unique: boolean; type: string; }

export interface ConstraintInfo {
  name: string;
  type: 'PRIMARY_KEY' | 'FOREIGN_KEY' | 'UNIQUE' | 'CHECK';
  columns: string[];
  referencedTable?: string;
  referencedColumns?: string[];
}

export interface SyncResult {
  syncId: string;
  status: 'started' | 'completed' | 'failed';
  tablesScanned: number;
  newTables: number;
  updatedTables: number;
  errors: string[];
  startedAt: Date;
  completedAt?: Date;
}

const SORT_MAP: Record<NonNullable<DataSourceListOptions['sortBy']>, string> = {
  updatedAt: 'updated_at',
  createdAt: 'created_at',
  name: 'name',
  status: 'status',
  type: 'type',
};

export class DataSourceService {
  private db = new DatabaseService();

  private makePublicId(): string {
    return `ds_${Date.now()}_${randomUUID().slice(0, 8)}`;
  }

  private coerceJSON<T>(val: any, fallback: T): T {
    if (val === null || val === undefined) return fallback;
    if (typeof val === 'string') {
      try { return JSON.parse(val) as T; } catch { return fallback; }
    }
    return (typeof val === 'object') ? (val as T) : fallback;
  }

  private coerceStringArray(val: any): string[] {
    if (Array.isArray(val)) return val.map(String);
    if (typeof val === 'string') {
      try {
        const parsed = JSON.parse(val);
        if (Array.isArray(parsed)) return parsed.map(String);
      } catch {
        if (/^\{.*\}$/.test(val)) {
          return val
            .slice(1, -1)
            .split(',')
            .map((s) => s.replace(/^"(.*)"$/, '$1'))
            .filter(Boolean);
        }
      }
    }
    return [];
  }

  private toConnectionConfig(raw: any, fallbackType?: DataSourceType): ConnectionConfig {
    try {
      const obj = raw == null ? {} : (typeof raw === 'string' ? JSON.parse(raw) : raw);
      if (obj && typeof obj === 'object' && typeof obj.type === 'string') {
        return obj as ConnectionConfig;
      }
    } catch { /* ignore */ }
    return { type: (fallbackType as any) ?? 'api' } as ConnectionConfig;
  }

  private mapRowToDataSource(row: any): DataSource {
    return {
      id: row.id,
      name: row.name,
      description: row.description ?? null,
      type: row.type,
      status: row.status,
      connectionConfig: this.toConnectionConfig(row.connection_config, row.type),
      tags: this.coerceStringArray(row.tags),
      metadata: this.coerceJSON(row.metadata, {}),
      createdAt: row.created_at,
      updatedAt: row.updated_at,
      createdBy: row.created_by ?? null,
      updatedBy: row.updated_by ?? null,
      lastTestAt: row.last_test_at ?? row.last_tested_at ?? null,
      lastSyncAt: row.last_sync_at ?? null,
      lastError: row.last_error ?? null,
      publicId: row.public_id ?? null,
    } as DataSource;
  }

  async getAllDataSources(options: DataSourceListOptions): Promise<PaginatedDataSources> {
    try {
      const { page, limit, filters, sortBy = 'updatedAt', sortOrder = 'desc' } = options;
      const offset = (page - 1) * limit;

      let where = 'WHERE deleted_at IS NULL';
      const params: any[] = [];
      let i = 1;

      if (filters.status) { where += ` AND status = $${i++}`; params.push(filters.status); }
      if (filters.type)   { where += ` AND type = $${i++}`; params.push(filters.type); }
      if (filters.createdBy) { where += ` AND created_by = $${i++}`; params.push(filters.createdBy); }
      if (filters.search) {
        where += ` AND (name ILIKE $${i} OR description ILIKE $${i})`;
        params.push(`%${filters.search}%`); i++;
      }

      const countSQL = `SELECT COUNT(*)::int AS total FROM data_sources ${where}`;
      const { rows: countRows } = await this.db.query(countSQL, params);
      const total = countRows[0]?.total ?? 0;

      const orderBy = SORT_MAP[sortBy] ?? 'updated_at';
      const orderDir = sortOrder.toLowerCase() === 'asc' ? 'ASC' : 'DESC';

      const dataSQL = `
        SELECT
          id, name, description, type, status,
          connection_config, tags, metadata,
          created_at, updated_at, created_by, updated_by,
          COALESCE(last_test_at, last_tested_at) AS last_test_at,
          last_sync_at, last_error, public_id
        FROM data_sources
        ${where}
        ORDER BY ${orderBy} ${orderDir}
        LIMIT $${i++} OFFSET $${i++}
      `;
      const { rows } = await this.db.query(dataSQL, [...params, limit, offset]);
      const dataSources = rows.map((r) => this.mapRowToDataSource(r));

      return { dataSources, total, page, limit, totalPages: Math.ceil(total / limit) };
    } catch (error) {
      logger.error('DataSourceService.getAllDataSources failed:', error);
      throw error;
    }
  }

  async getDataSourceById(id: string): Promise<DataSource | null> {
    try {
      const sql = `
        SELECT
          id, name, description, type, status,
          connection_config, tags, metadata,
          created_at, updated_at, created_by, updated_by,
          COALESCE(last_test_at, last_tested_at) AS last_test_at,
          last_sync_at, last_error, public_id
        FROM data_sources
        WHERE id = $1 AND deleted_at IS NULL
      `;
      const { rows } = await this.db.query(sql, [id]);
      if (rows.length === 0) return null;
      return this.mapRowToDataSource(rows[0]);
    } catch (error) {
      logger.error('DataSourceService.getDataSourceById failed:', error);
      throw error;
    }
  }

  async createDataSource(data: Partial<DataSource>): Promise<DataSource> {
    try {
      const now = new Date();
      const publicId = this.makePublicId();

      const connectionCfg: ConnectionConfig =
        data.connectionConfig && typeof (data.connectionConfig as any).type === 'string'
          ? (data.connectionConfig as ConnectionConfig)
          : this.toConnectionConfig(null, data.type as DataSourceType);

      const sql = `
        INSERT INTO data_sources (
          name, description, type, status,
          connection_config, tags, metadata,
          created_at, updated_at, created_by, public_id,
          last_test_at, last_sync_at, last_error
        )
        VALUES (
          $1, $2, $3, $4,
          $5::jsonb, $6::text[], $7::jsonb,
          $8, $9, $10, $11,
          $12, $13, $14
        )
        RETURNING
          id, name, description, type, status,
          connection_config, tags, metadata,
          created_at, updated_at, created_by, updated_by,
          COALESCE(last_test_at, last_tested_at) AS last_test_at,
          last_sync_at, last_error, public_id
      `;

      const params: any[] = [
        data.name!,
        data.description ?? null,
        data.type!,
        data.status ?? ('pending' as DataSourceStatus),
        JSON.stringify(connectionCfg),
        Array.isArray(data.tags) ? data.tags : [],
        JSON.stringify(data.metadata ?? {}),
        now,
        now,
        data.createdBy ?? null,
        publicId,
        data.lastTestAt ?? null,
        data.lastSyncAt ?? null,
        data.lastError ?? null,
      ];

      const { rows } = await this.db.query(sql, params);
      return this.mapRowToDataSource(rows[0]);
    } catch (error) {
      logger.error('DataSourceService.createDataSource failed:', error);
      throw error;
    }
  }

  async updateDataSource(id: string, patch: Partial<DataSource>): Promise<DataSource | null> {
    try {
      const existing = await this.getDataSourceById(id);
      if (!existing) return null;

      const sets: string[] = [];
      const params: any[] = [];
      let i = 1;
      const push = (frag: string, val: any) => { sets.push(frag); params.push(val); };

      if (patch.name !== undefined)        push(`name = $${i++}`, patch.name);
      if (patch.description !== undefined) push(`description = $${i++}`, patch.description);
      if (patch.type !== undefined)        push(`type = $${i++}`, patch.type);
      if (patch.status !== undefined)      push(`status = $${i++}`, patch.status);
      if (patch.connectionConfig !== undefined) {
        const cfg = this.toConnectionConfig(patch.connectionConfig, (patch.type as any) ?? existing.type);
        push(`connection_config = $${i++}::jsonb`, JSON.stringify(cfg));
      }
      if (patch.tags !== undefined)        push(`tags = $${i++}::text[]`, Array.isArray(patch.tags) ? patch.tags : []);
      if (patch.metadata !== undefined)    push(`metadata = $${i++}::jsonb`, JSON.stringify(patch.metadata ?? {}));
      if (patch.lastTestAt !== undefined)  push(`last_test_at = $${i++}`, patch.lastTestAt);
      if (patch.lastSyncAt !== undefined)  push(`last_sync_at = $${i++}`, patch.lastSyncAt);
      if (patch.lastError !== undefined)   push(`last_error = $${i++}`, patch.lastError);
      if (patch.updatedBy !== undefined)   push(`updated_by = $${i++}`, patch.updatedBy ?? null);

      push(`updated_at = $${i++}`, new Date());
      params.push(id);

      const sql = `
        UPDATE data_sources
        SET ${sets.join(', ')}
        WHERE id = $${i} AND deleted_at IS NULL
        RETURNING
          id, name, description, type, status,
          connection_config, tags, metadata,
          created_at, updated_at, created_by, updated_by,
          COALESCE(last_test_at, last_tested_at) AS last_test_at,
          last_sync_at, last_error, public_id
      `;
      const { rows } = await this.db.query(sql, params);
      if (rows.length === 0) return null;
      return this.mapRowToDataSource(rows[0]);
    } catch (error) {
      logger.error('DataSourceService.updateDataSource failed:', error);
      throw error;
    }
  }

  async deleteDataSource(id: string): Promise<boolean> {
    try {
      const sql = `UPDATE data_sources SET deleted_at = $1 WHERE id = $2 AND deleted_at IS NULL`;
      const { rowCount } = await this.db.query(sql, [new Date(), id]);
      return (rowCount ?? 0) > 0;
    } catch (error) {
      logger.error('DataSourceService.deleteDataSource failed:', error);
      throw error;
    }
  }

  async getHealthSummary(): Promise<HealthSummary> {
    try {
      const sql = `
        SELECT
          COUNT(*)::int AS total,
          COUNT(CASE WHEN status IN ('active','connected') THEN 1 END)::int AS healthy,
          COUNT(CASE WHEN status IN ('warning','pending','testing','syncing') THEN 1 END)::int AS warning,
          COUNT(CASE WHEN status IN ('error','inactive','disconnected') THEN 1 END)::int AS error
        FROM data_sources
        WHERE deleted_at IS NULL
      `;
      const { rows } = await this.db.query(sql);
      const row = rows[0] || { total: 0, healthy: 0, warning: 0, error: 0 };
      return { ...row, lastUpdated: new Date() } as HealthSummary;
    } catch (error) {
      logger.error('DataSourceService.getHealthSummary failed:', error);
      throw error;
    }
  }

  async getDataSourceSchema(_id: string): Promise<SchemaInfo> {
    return {
      tables: [{
        name: 'users',
        schema: 'public',
        rowCount: 10000,
        columns: [
          { name: 'id', type: 'bigint', nullable: false, primaryKey: true },
          { name: 'email', type: 'varchar', nullable: false, primaryKey: false },
          { name: 'created_at', type: 'timestamp', nullable: false, primaryKey: false },
        ],
        indexes: [
          { name: 'users_pkey', columns: ['id'], unique: true, type: 'btree' },
          { name: 'users_email_idx', columns: ['email'], unique: true, type: 'btree' },
        ],
        constraints: [{ name: 'users_pkey', type: 'PRIMARY_KEY', columns: ['id'] }],
      }],
      views: [],
      totalTables: 1,
      totalColumns: 3,
      estimatedSize: '125MB',
    };
    // Replace with real connector inspection per type/id.
  }

  async syncDataSource(id: string, _options: { force?: boolean } = {}): Promise<SyncResult> {
    const syncId = `sync_${Date.now()}_${Math.random().toString(36).slice(2, 10)}`;
    await this.updateDataSource(id, { lastSyncAt: new Date(), status: 'connected' as any });
    return {
      syncId,
      status: 'completed',
      tablesScanned: 15,
      newTables: 2,
      updatedTables: 3,
      errors: [],
      startedAt: new Date(),
      completedAt: new Date(),
    };
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\GovernanceService.ts
--------------------------------------------------------------------------------
import { DatabaseService } from './DatabaseService';

export class GovernanceService {
  private db = new DatabaseService();

  async listPolicies(status?: string) {
    const where = status ? `WHERE status=$1` : '';
    const params = status ? [status] : [];
    const { rows } = await this.db.query(`
      SELECT * FROM governance_policies ${where} ORDER BY updated_at DESC LIMIT 200
    `, params);
    return rows;
  }

  async createPolicy(patch: any, userId?: string) {
    const rules = Array.isArray(patch.rules) ? patch.rules : [];
    const { rows } = await this.db.query(`
      INSERT INTO governance_policies (name,description,category,status,rules,created_by,updated_by)
      VALUES ($1,$2,COALESCE($3,'access'),COALESCE($4,'active'),$5::jsonb,$6,$6)
      RETURNING *
    `, [patch.name, patch.description ?? null, patch.category ?? 'access', patch.status ?? 'active', JSON.stringify(rules), userId ?? null]);
    return rows[0];
  }

  async updatePolicy(id: string, patch: any, userId?: string) {
    const sets: string[] = []; const params: any[] = []; let i = 1;
    const push = (frag: string, val: any) => { sets.push(frag); params.push(val); };
    if (patch.name !== undefined)        push(`name=$${i++}`, patch.name);
    if (patch.description !== undefined) push(`description=$${i++}`, patch.description);
    if (patch.category !== undefined)    push(`category=$${i++}`, patch.category);
    if (patch.status !== undefined)      push(`status=$${i++}`, patch.status);
    if (patch.rules !== undefined)       push(`rules=$${i++}::jsonb`, JSON.stringify(Array.isArray(patch.rules) ? patch.rules : []));
    push(`updated_by=$${i++}`, userId ?? null);
    push(`updated_at=NOW()`, null);
    params.push(id);

    const { rows } = await this.db.query(`
      UPDATE governance_policies SET ${sets.join(', ')} WHERE id=$${i} RETURNING *
    `, params);
    return rows[0] ?? null;
  }

  async deletePolicy(id: string) {
    const { rowCount } = await this.db.query(`DELETE FROM governance_policies WHERE id=$1`, [id]);
    return (rowCount ?? 0) > 0;
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\LineageService.ts
--------------------------------------------------------------------------------
// src/services/LineageService.ts
import { withTransaction } from '@/config/database';
import { logger } from '@/utils/logger';
import { createHash } from 'crypto';
import { performance } from 'perf_hooks';
import { z } from 'zod';
import { DatabaseService } from './DatabaseService';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Schemas & Types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

const LineageNodeSchema = z.object({
  id: z.string().uuid(),
  label: z.string().min(1).max(255),
  type: z.enum(['source', 'bronze', 'silver', 'gold', 'transformation', 'sink']),
  data_source_id: z.string().uuid().optional(),
  schema_name: z.string().max(100).optional(),
  table_name: z.string().max(100).optional(),
  description: z.string().max(1000).optional(),
  metadata: z.record(z.any()).optional(),
  created_at: z.date().optional(),
  updated_at: z.date().optional(),
  created_by: z.string().uuid().optional(),
});

const LineageEdgeSchema = z.object({
  id: z.string().uuid(),
  from_id: z.string().uuid(),
  to_id: z.string().uuid(),
  relationship_type: z.enum(['derives_from', 'transforms_to', 'copies_from', 'aggregates_from']),
  transformation_logic: z.string().max(2000).optional(),
  confidence_score: z.number().min(0).max(1).optional(),
  metadata: z.record(z.any()).optional(),
  created_at: z.date().optional(),
  updated_at: z.date().optional(),
  created_by: z.string().uuid().optional(),
});

const GraphFiltersSchema = z.object({
  dataSourceId: z.string().uuid().optional(),
  nodeTypes: z.array(z.enum(['source', 'bronze', 'silver', 'gold', 'transformation', 'sink'])).optional(),
  maxDepth: z.number().min(1).max(10).default(5),
  includeMetadata: z.boolean().default(false),
  relationshipTypes: z.array(z.enum(['derives_from', 'transforms_to', 'copies_from', 'aggregates_from'])).optional(),
  fromNodeId: z.string().uuid().optional(),
  toNodeId: z.string().uuid().optional(),
  limit: z.number().min(1).max(10000).default(1000),
});

const LineagePathSchema = z.object({
  startNodeId: z.string().uuid(),
  endNodeId: z.string().uuid(),
  maxDepth: z.number().min(1).max(20).default(10),
  direction: z.enum(['upstream', 'downstream', 'both']).default('both'),
});

export type LineageNode = z.infer<typeof LineageNodeSchema>;
export type LineageEdge = z.infer<typeof LineageEdgeSchema>;
export type GraphFilters = z.infer<typeof GraphFiltersSchema>;
export type LineagePath = z.infer<typeof LineagePathSchema>;

export interface LineageGraph {
  nodes: LineageNode[];
  edges: LineageEdge[];
  metadata: {
    totalNodes: number;
    totalEdges: number;
    nodeTypeDistribution: Record<string, number>;
    maxDepthReached: number;
    queryDuration: number;
    cacheHit: boolean;
  };
}

export interface LineagePathResult {
  paths: Array<{
    nodes: LineageNode[];
    edges: LineageEdge[];
    pathLength: number;
    confidence: number;
  }>;
  shortestPath?: {
    nodes: LineageNode[];
    edges: LineageEdge[];
    pathLength: number;
  };
  metadata: {
    totalPaths: number;
    maxDepthSearched: number;
    queryDuration: number;
  };
}

export interface LineageImpactAnalysis {
  affectedNodes: LineageNode[];
  impactRadius: number;
  criticalPaths: Array<{
    path: LineageNode[];
    criticality: 'high' | 'medium' | 'low';
    reason: string;
  }>;
  recommendations: string[];
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Errors & Helpers
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

class LineageError extends Error {
  constructor(
    message: string,
    public code: string = 'LINEAGE_ERROR',
    public statusCode: number = 500
  ) {
    super(message);
    this.name = 'LineageError';
  }
}
class LineageValidationError extends LineageError {
  constructor(message: string, public field?: string) {
    super(message, 'VALIDATION_ERROR', 400);
    this.name = 'LineageValidationError';
  }
}
class LineageNotFoundError extends LineageError {
  constructor(resource: string, id?: string) {
    super(id ? `${resource} with ID ${id} not found` : `${resource} not found`, 'NOT_FOUND', 404);
    this.name = 'LineageNotFoundError';
  }
}

const toError = (e: unknown): Error => (e instanceof Error ? e : new Error(String(e)));
const toInt = (v: unknown, fallback = 0): number => {
  const n = typeof v === 'string' ? Number(v) : (v as number);
  return Number.isFinite(n) ? (n as number) : fallback;
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Service
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export class LineageService {
  private db = new DatabaseService();

  private queryCache: Map<string, { data: any; timestamp: number; ttl: number }> = new Map();
  private readonly cacheTTL = 300000; // 5 minutes
  private readonly maxCacheSize = 1000;

  constructor() {
    this.setupCacheCleanup();
  }

  /* â”€â”€ Graph retrieval â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async getGraph(
    filters: Partial<GraphFilters> = {},
    requestContext: { userId?: string; requestId?: string } = {}
  ): Promise<LineageGraph> {
    const start = performance.now();
    const validated = GraphFiltersSchema.parse(filters);
    const cacheKey = this.generateCacheKey('graph', validated);

    // Cache lookup
    const cached = this.getCachedResult(cacheKey);
    if (cached) {
      const meta = {
        ...cached.metadata,
        cacheHit: true,
        queryDuration: Math.round(performance.now() - start),
      };
      logger.info('Lineage graph cache hit', {
        requestId: requestContext.requestId,
        userId: requestContext.userId,
        cacheKey: cacheKey.slice(0, 16),
      });
      return { ...cached, metadata: meta };
    }

    try {
      // No need for explicit transaction: two read-only queries
      const { nodesQuery, nodesParams } = this.buildNodesQuery(validated);
      const { edgesQuery, edgesParams } = this.buildEdgesQuery(validated);

      const nodesRes = (await this.db.query(nodesQuery, nodesParams)) as any;
      const edgesRes = (await this.db.query(edgesQuery, edgesParams)) as any;

      const nodes = this.processNodes(nodesRes.rows ?? [], validated.includeMetadata);
      const edges = this.processEdges(edgesRes.rows ?? []);

      const baseMeta = this.generateGraphMetadata(nodes, edges, performance.now() - start);
      const result: LineageGraph = { nodes, edges, metadata: { ...baseMeta, cacheHit: false } };

      this.setCachedResult(cacheKey, result, this.cacheTTL);

      logger.info('Lineage graph retrieved', {
        requestId: requestContext.requestId,
        userId: requestContext.userId,
        nodeCount: nodes.length,
        edgeCount: edges.length,
        queryDuration: baseMeta.queryDuration,
      });

      return result;
    } catch (e: unknown) {
      const err = toError(e);
      logger.error('Failed to retrieve lineage graph', {
        error: err.message,
        stack: err.stack,
        filters: validated,
        requestId: requestContext.requestId,
        userId: requestContext.userId,
      });
      throw new LineageError('Failed to retrieve lineage graph', 'GRAPH_RETRIEVAL_FAILED', 500);
    }
  }

  /* â”€â”€ Path finding â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async findLineagePaths(
    pathConfig: LineagePath,
    requestContext: { userId?: string; requestId?: string } = {}
  ): Promise<LineagePathResult> {
    const start = performance.now();
    const cfg = LineagePathSchema.parse(pathConfig);

    try {
      await this.validateNodesExist([cfg.startNodeId, cfg.endNodeId]);

      const { query, params } = this.buildPathQuery(cfg);
      const res = (await this.db.query(query, params)) as any;

      const paths = this.processPaths(res.rows ?? []);
      const shortestPath = this.findShortestPath(paths);

      const meta = {
        totalPaths: paths.length,
        maxDepthSearched: cfg.maxDepth,
        queryDuration: Math.round(performance.now() - start),
      };

      logger.info('Lineage paths found', {
        requestId: requestContext.requestId,
        userId: requestContext.userId,
        startNode: cfg.startNodeId,
        endNode: cfg.endNodeId,
        pathsFound: paths.length,
        queryDuration: meta.queryDuration,
      });

      return { paths, shortestPath, metadata: meta };
    } catch (e: unknown) {
      const err = toError(e);
      logger.error('Failed to find lineage paths', {
        error: err.message,
        pathConfig: cfg,
        requestId: requestContext.requestId,
        userId: requestContext.userId,
      });
      if (err instanceof LineageError) throw err;
      throw new LineageError('Failed to find lineage paths', 'PATH_FINDING_FAILED', 500);
    }
  }

  /* â”€â”€ Impact analysis â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async analyzeImpact(
    nodeId: string,
    analysisDepth = 5,
    requestContext: { userId?: string; requestId?: string } = {}
  ): Promise<LineageImpactAnalysis> {
    if (!z.string().uuid().safeParse(nodeId).success) {
      throw new LineageValidationError('Invalid node ID format');
    }

    try {
      await this.validateNodesExist([nodeId]);

      const downstreamQuery = `
        WITH RECURSIVE downstream_impact AS (
          SELECT ln.*, 0 as depth, ARRAY[ln.id] as path
          FROM lineage_nodes ln
          WHERE ln.id = $1 AND ln.deleted_at IS NULL
          UNION ALL
          SELECT ln.*, di.depth + 1, di.path || ln.id
          FROM lineage_nodes ln
          JOIN lineage_edges le ON ln.id = le.to_id
          JOIN downstream_impact di ON le.from_id = di.id
          WHERE di.depth < $2 
            AND ln.deleted_at IS NULL 
            AND le.deleted_at IS NULL
            AND NOT (ln.id = ANY(di.path))
        )
        SELECT DISTINCT id, label, type, schema_name, table_name, depth
        FROM downstream_impact
        WHERE depth > 0
        ORDER BY depth, type, label;
      `;

      const res = (await this.db.query(downstreamQuery, [nodeId, analysisDepth])) as any;

      const affectedNodes: LineageNode[] = (res.rows ?? []).map((row: any) => ({
        id: row.id,
        label: row.label,
        type: row.type,
        schema_name: row.schema_name,
        table_name: row.table_name,
      }));

      const criticalPaths = this.analyzeCriticality(affectedNodes);
      const recommendations = this.generateRecommendations(affectedNodes, criticalPaths);

      const impactRadius = (res.rows ?? []).reduce((m: number, r: any) => Math.max(m, toInt(r.depth, 0)), 0);

      logger.info('Impact analysis completed', {
        requestId: requestContext.requestId,
        userId: requestContext.userId,
        nodeId,
        affectedCount: affectedNodes.length,
        impactRadius,
      });

      return {
        affectedNodes,
        impactRadius,
        criticalPaths,
        recommendations,
      };
    } catch (e: unknown) {
      const err = toError(e);
      logger.error('Failed to analyze impact', {
        error: err.message,
        nodeId,
        requestId: requestContext.requestId,
        userId: requestContext.userId,
      });
      if (err instanceof LineageError) throw err;
      throw new LineageError('Failed to analyze impact', 'IMPACT_ANALYSIS_FAILED', 500);
    }
  }

  /* â”€â”€ Mutations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async createNode(
    nodeData: Omit<LineageNode, 'id' | 'created_at' | 'updated_at'>,
    userId: string,
    requestContext: { requestId?: string } = {}
  ): Promise<LineageNode> {
    const data = LineageNodeSchema.omit({ id: true, created_at: true, updated_at: true }).parse(nodeData);

    try {
      const inserted = await withTransaction(async (client) => {
        // duplicate check
        if (data.schema_name && data.table_name) {
          const dup = await client.query(
            `SELECT id FROM lineage_nodes 
             WHERE schema_name = $1 AND table_name = $2 AND data_source_id = $3 AND deleted_at IS NULL`,
            [data.schema_name, data.table_name, data.data_source_id]
          );
          if ((dup.rows ?? []).length > 0) {
            throw new LineageValidationError(`Node already exists for ${data.schema_name}.${data.table_name}`);
          }
        }

        const ins = await client.query(
          `
          INSERT INTO lineage_nodes (
            label, type, data_source_id, schema_name, table_name,
            description, metadata, created_by, created_at, updated_at
          ) VALUES ($1,$2,$3,$4,$5,$6,$7,$8,NOW(),NOW())
          RETURNING id, label, type, data_source_id, schema_name, table_name,
                    description, metadata, created_at, updated_at, created_by
          `,
          [
            data.label,
            data.type,
            data.data_source_id ?? null,
            data.schema_name ?? null,
            data.table_name ?? null,
            data.description ?? null,
            JSON.stringify(data.metadata ?? {}),
            userId,
          ]
        );
        return ins.rows[0] as LineageNode;
      });

      this.invalidateGraphCache();

      logger.info('Lineage node created', {
        nodeId: inserted.id,
        label: inserted.label,
        type: inserted.type,
        userId,
        requestId: requestContext.requestId,
      });

      return inserted;
    } catch (e: unknown) {
      const err = toError(e);
      if (err instanceof LineageError) throw err;
      logger.error('Failed to create lineage node', {
        error: err.message,
        nodeData: data,
        userId,
        requestId: requestContext.requestId,
      });
      throw new LineageError('Failed to create lineage node', 'NODE_CREATION_FAILED', 500);
    }
  }

  async createEdge(
    edgeData: Omit<LineageEdge, 'id' | 'created_at' | 'updated_at'>,
    userId: string,
    requestContext: { requestId?: string } = {}
  ): Promise<LineageEdge> {
    const data = LineageEdgeSchema.omit({ id: true, created_at: true, updated_at: true }).parse(edgeData);

    if (data.from_id === data.to_id) {
      throw new LineageValidationError('Self-referencing edges are not allowed');
    }
    await this.validateNodesExist([data.from_id, data.to_id]);

    try {
      const inserted = await withTransaction(async (client) => {
        // duplicate edge check
        const dup = await client.query(
          `SELECT id FROM lineage_edges 
           WHERE from_id = $1 AND to_id = $2 AND relationship_type = $3 AND deleted_at IS NULL`,
          [data.from_id, data.to_id, data.relationship_type]
        );
        if ((dup.rows ?? []).length > 0) {
          throw new LineageValidationError('Edge with this relationship already exists between these nodes');
        }

        // cycle check (simple downstream reachability)
        const cycleQ = `
          WITH RECURSIVE path_check AS (
            SELECT id, 0 as depth FROM lineage_nodes WHERE id = $1
            UNION ALL
            SELECT ln.id, pc.depth + 1
            FROM path_check pc
            JOIN lineage_edges le ON pc.id = le.from_id
            JOIN lineage_nodes ln ON le.to_id = ln.id
            WHERE pc.depth < 20 AND ln.deleted_at IS NULL AND le.deleted_at IS NULL
          )
          SELECT EXISTS(SELECT 1 FROM path_check WHERE id = $2 AND depth > 0) as has_cycle;
        `;
        const cyc = await client.query(cycleQ, [data.to_id, data.from_id]);
        if (cyc.rows?.[0]?.has_cycle === true) {
          throw new LineageValidationError('Creating this edge would introduce a cycle in the lineage graph');
        }

        const ins = await client.query(
          `
          INSERT INTO lineage_edges (
            from_id, to_id, relationship_type, transformation_logic,
            confidence_score, metadata, created_by, created_at, updated_at
          ) VALUES ($1,$2,$3,$4,$5,$6,$7,NOW(),NOW())
          RETURNING id, from_id, to_id, relationship_type, transformation_logic,
                    confidence_score, metadata, created_at, updated_at, created_by
          `,
          [
            data.from_id,
            data.to_id,
            data.relationship_type,
            data.transformation_logic ?? null,
            data.confidence_score ?? null,
            JSON.stringify(data.metadata ?? {}),
            userId,
          ]
        );
        return ins.rows[0] as LineageEdge;
      });

      this.invalidateGraphCache();

      logger.info('Lineage edge created', {
        edgeId: inserted.id,
        fromId: inserted.from_id,
        toId: inserted.to_id,
        relationshipType: inserted.relationship_type,
        userId,
        requestId: requestContext.requestId,
      });

      return inserted;
    } catch (e: unknown) {
      const err = toError(e);
      if (err instanceof LineageError) throw err;
      logger.error('Failed to create lineage edge', {
        error: err.message,
        edgeData: data,
        userId,
        requestId: requestContext.requestId,
      });
      throw new LineageError('Failed to create lineage edge', 'EDGE_CREATION_FAILED', 500);
    }
  }

  async deleteNode(
    nodeId: string,
    userId: string,
    requestContext: { requestId?: string } = {}
  ): Promise<void> {
    if (!z.string().uuid().safeParse(nodeId).success) throw new LineageValidationError('Invalid node ID format');
    await this.validateNodesExist([nodeId]);

    try {
      await withTransaction(async (client) => {
        await client.query(
          `UPDATE lineage_nodes SET deleted_at = NOW(), deleted_by = $2, updated_at = NOW()
           WHERE id = $1 AND deleted_at IS NULL`,
          [nodeId, userId]
        );
        await client.query(
          `UPDATE lineage_edges SET deleted_at = NOW(), deleted_by = $2, updated_at = NOW()
           WHERE (from_id = $1 OR to_id = $1) AND deleted_at IS NULL`,
          [nodeId, userId]
        );
      });

      this.invalidateGraphCache();

      logger.warn('Lineage node deleted', { nodeId, userId, requestId: requestContext.requestId });
    } catch (e: unknown) {
      const err = toError(e);
      logger.error('Failed to delete lineage node', { error: err.message, nodeId, userId, requestId: requestContext.requestId });
      throw new LineageError('Failed to delete lineage node', 'NODE_DELETION_FAILED', 500);
    }
  }

  async deleteEdge(
    edgeId: string,
    userId: string,
    requestContext: { requestId?: string } = {}
  ): Promise<void> {
    if (!z.string().uuid().safeParse(edgeId).success) throw new LineageValidationError('Invalid edge ID format');

    try {
      const res = (await this.db.query(
        `UPDATE lineage_edges 
         SET deleted_at = NOW(), deleted_by = $2, updated_at = NOW()
         WHERE id = $1 AND deleted_at IS NULL
         RETURNING id`,
        [edgeId, userId]
      )) as any;

      if ((res.rows ?? []).length === 0) throw new LineageNotFoundError('Lineage edge', edgeId);

      this.invalidateGraphCache();

      logger.warn('Lineage edge deleted', { edgeId, userId, requestId: requestContext.requestId });
    } catch (e: unknown) {
      const err = toError(e);
      if (err instanceof LineageError) throw err;
      logger.error('Failed to delete lineage edge', { error: err.message, edgeId, userId, requestId: requestContext.requestId });
      throw new LineageError('Failed to delete lineage edge', 'EDGE_DELETION_FAILED', 500);
    }
  }

  async bulkCreateNodes(
    nodesData: Array<Omit<LineageNode, 'id' | 'created_at' | 'updated_at'>>,
    userId: string,
    requestContext: { requestId?: string } = {}
  ): Promise<{ created: LineageNode[]; errors: Array<{ index: number; error: string }> }> {
    if (nodesData.length > 1000) throw new LineageValidationError('Maximum 1000 nodes allowed in bulk operation');

    const created: LineageNode[] = [];
    const errors: Array<{ index: number; error: string }> = [];

    try {
      await withTransaction(async (client) => {
        for (let i = 0; i < nodesData.length; i++) {
          try {
            const data = LineageNodeSchema.omit({ id: true, created_at: true, updated_at: true }).parse(nodesData[i]);

            const dup = await client.query(
              `SELECT id FROM lineage_nodes 
               WHERE schema_name = $1 AND table_name = $2 AND data_source_id = $3 AND deleted_at IS NULL`,
              [data.schema_name ?? null, data.table_name ?? null, data.data_source_id ?? null]
            );
            if ((dup.rows ?? []).length > 0) {
              errors.push({ index: i, error: `Duplicate node: ${data.schema_name}.${data.table_name}` });
              continue;
            }

            const ins = await client.query(
              `
              INSERT INTO lineage_nodes (
                label, type, data_source_id, schema_name, table_name,
                description, metadata, created_by, created_at, updated_at
              ) VALUES ($1,$2,$3,$4,$5,$6,$7,$8,NOW(),NOW())
              RETURNING id, label, type, data_source_id, schema_name, table_name,
                        description, metadata, created_at, updated_at, created_by
              `,
              [
                data.label,
                data.type,
                data.data_source_id ?? null,
                data.schema_name ?? null,
                data.table_name ?? null,
                data.description ?? null,
                JSON.stringify(data.metadata ?? {}),
                userId,
              ]
            );
            created.push(ins.rows[0] as LineageNode);
          } catch (e: unknown) {
            const err = toError(e);
            errors.push({ index: i, error: err.message || 'Unknown validation error' });
          }
        }
      });

      this.invalidateGraphCache();

      logger.info('Bulk node creation completed', {
        totalNodes: nodesData.length,
        created: created.length,
        errors: errors.length,
        userId,
        requestId: requestContext.requestId,
      });

      return { created, errors };
    } catch (e: unknown) {
      const err = toError(e);
      logger.error('Failed to bulk create lineage nodes', {
        error: err.message,
        totalNodes: nodesData.length,
        userId,
        requestId: requestContext.requestId,
      });
      throw new LineageError('Failed to bulk create lineage nodes', 'BULK_NODE_CREATION_FAILED', 500);
    }
  }

  /* â”€â”€ Stats â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async getLineageStats(
    dataSourceId?: string,
    requestContext: { userId?: string; requestId?: string } = {}
  ): Promise<{
    totalNodes: number;
    totalEdges: number;
    nodesByType: Record<string, number>;
    edgesByType: Record<string, number>;
    orphanedNodes: number;
    cyclicalReferences: number;
    dataQualityScore: number;
    lastUpdated: Date;
  }> {
    // Where/params
    const whereClause = dataSourceId ? 'WHERE ln.data_source_id = $1 AND ln.deleted_at IS NULL' : 'WHERE ln.deleted_at IS NULL';
    const params = dataSourceId ? [dataSourceId] : [];

    try {
      const [nodeStats, edgeStats, orphanStats] = (await Promise.all([
        this.db.query(
          `
          SELECT type, COUNT(*)::int as count_by_type
          FROM lineage_nodes ln
          ${whereClause}
          GROUP BY type
          ORDER BY count_by_type DESC
          `,
          params
        ) as any,
        this.db.query(
          `
          SELECT le.relationship_type, COUNT(*)::int as count_by_type, AVG(le.confidence_score)::float as avg_confidence
          FROM lineage_edges le
          JOIN lineage_nodes ln_from ON le.from_id = ln_from.id
          JOIN lineage_nodes ln_to   ON le.to_id   = ln_to.id
          WHERE le.deleted_at IS NULL 
            AND ln_from.deleted_at IS NULL 
            AND ln_to.deleted_at IS NULL
            ${dataSourceId ? 'AND (ln_from.data_source_id = $1 OR ln_to.data_source_id = $1)' : ''}
          GROUP BY le.relationship_type
          `,
          params
        ) as any,
        this.db.query(
          `
          SELECT COUNT(*)::int as orphaned_count
          FROM lineage_nodes ln
          ${whereClause}
            AND NOT EXISTS (
              SELECT 1 FROM lineage_edges le 
              WHERE (le.from_id = ln.id OR le.to_id = ln.id) 
                AND le.deleted_at IS NULL
            )
          `,
          params
        ) as any,
      ])) as [any, any, any];

      const totalNodes = (nodeStats.rows ?? []).reduce((sum: number, row: any) => sum + toInt(row.count_by_type, 0), 0);
      const totalEdges = (edgeStats.rows ?? []).reduce((sum: number, row: any) => sum + toInt(row.count_by_type, 0), 0);

      const nodesByType = (nodeStats.rows ?? []).reduce((acc: Record<string, number>, row: any) => {
        acc[row.type] = toInt(row.count_by_type, 0);
        return acc;
      }, {});

      const edgesByType = (edgeStats.rows ?? []).reduce((acc: Record<string, number>, row: any) => {
        acc[row.relationship_type] = toInt(row.count_by_type, 0);
        return acc;
      }, {});

      const avgConfidence =
        (edgeStats.rows ?? []).reduce((sum: number, row: any) => sum + (Number(row.avg_confidence ?? 0.8) || 0.8), 0) /
        Math.max((edgeStats.rows ?? []).length, 1);

      const orphanedCount = toInt(orphanStats.rows?.[0]?.orphaned_count, 0);
      const orphanedRatio = totalNodes > 0 ? orphanedCount / totalNodes : 0;

      const dataQualityScore = Math.round((avgConfidence * 0.6 + (1 - orphanedRatio) * 0.4) * 100);

      logger.info('Lineage statistics retrieved', {
        totalNodes,
        totalEdges,
        dataQualityScore,
        dataSourceId,
        requestId: requestContext.requestId,
        userId: requestContext.userId,
      });

      return {
        totalNodes,
        totalEdges,
        nodesByType,
        edgesByType,
        orphanedNodes: orphanedCount,
        cyclicalReferences: 0, // detecting cycles requires a dedicated algorithm/query
        dataQualityScore,
        lastUpdated: new Date(),
      };
    } catch (e: unknown) {
      const err = toError(e);
      logger.error('Failed to retrieve lineage statistics', {
        error: err.message,
        dataSourceId,
        requestId: requestContext.requestId,
        userId: requestContext.userId,
      });
      throw new LineageError('Failed to retrieve lineage statistics', 'STATS_RETRIEVAL_FAILED', 500);
    }
  }

  /* â”€â”€ Private helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private buildNodesQuery(filters: GraphFilters): { nodesQuery: string; nodesParams: any[] } {
    const where: string[] = ['ln.deleted_at IS NULL'];
    const params: any[] = [];
    let i = 1;

    if (filters.dataSourceId) {
      where.push(`ln.data_source_id = $${i++}`);
      params.push(filters.dataSourceId);
    }

    if (filters.nodeTypes && filters.nodeTypes.length > 0) {
      where.push(`ln.type = ANY($${i++})`);
      params.push(filters.nodeTypes);
    }

    const selectFields = filters.includeMetadata
      ? 'ln.id, ln.label, ln.type, ln.data_source_id, ln.schema_name, ln.table_name, ln.description, ln.metadata, ln.created_at, ln.updated_at'
      : 'ln.id, ln.label, ln.type, ln.data_source_id, ln.schema_name, ln.table_name';

    const nodesQuery = `
      SELECT ${selectFields}
      FROM lineage_nodes ln
      WHERE ${where.join(' AND ')}
      ORDER BY ln.type, ln.label
      LIMIT $${i++}
    `;
    params.push(filters.limit);

    return { nodesQuery, nodesParams: params };
  }

  private buildEdgesQuery(filters: GraphFilters): { edgesQuery: string; edgesParams: any[] } {
    const where: string[] = ['le.deleted_at IS NULL'];
    const params: any[] = [];
    let i = 1;

    if (filters.relationshipTypes && filters.relationshipTypes.length > 0) {
      where.push(`le.relationship_type = ANY($${i++})`);
      params.push(filters.relationshipTypes);
    }

    if (filters.dataSourceId) {
      where.push(`(
        EXISTS(SELECT 1 FROM lineage_nodes ln WHERE ln.id = le.from_id AND ln.data_source_id = $${i}) OR
        EXISTS(SELECT 1 FROM lineage_nodes ln WHERE ln.id = le.to_id   AND ln.data_source_id = $${i})
      )`);
      params.push(filters.dataSourceId);
      i++;
    }

    const selectFields = filters.includeMetadata
      ? 'le.id, le.from_id, le.to_id, le.relationship_type, le.transformation_logic, le.confidence_score, le.metadata, le.created_at, le.updated_at'
      : 'le.id, le.from_id, le.to_id, le.relationship_type';

    const edgesQuery = `
      SELECT ${selectFields}
      FROM lineage_edges le
      WHERE ${where.join(' AND ')}
      ORDER BY le.from_id, le.to_id
      LIMIT $${i++}
    `;
    params.push(filters.limit);

    return { edgesQuery, edgesParams: params };
  }

  private buildPathQuery(config: LineagePath): { query: string; params: any[] } {
    const join = this.getDirectionClause(config.direction);
    const nodeJoin = this.getNodeJoinCondition(config.direction);

    const query = `
      WITH RECURSIVE lineage_paths AS (
        SELECT 
          ln.id, ln.label, ln.type,
          ARRAY[ln.id] as path_nodes,
          ARRAY[]::uuid[] as path_edges,
          0 as depth,
          1.0 as confidence
        FROM lineage_nodes ln
        WHERE ln.id = $1 AND ln.deleted_at IS NULL
        UNION ALL
        SELECT 
          ln.id, ln.label, ln.type,
          lp.path_nodes || ln.id,
          lp.path_edges || le.id,
          lp.depth + 1,
          lp.confidence * COALESCE(le.confidence_score, 0.8)
        FROM lineage_paths lp
        JOIN lineage_edges le ${join}
        JOIN lineage_nodes ln ON ${nodeJoin}
        WHERE lp.depth < $3
          AND ln.deleted_at IS NULL
          AND le.deleted_at IS NULL
          AND NOT (ln.id = ANY(lp.path_nodes))
      )
      SELECT * FROM lineage_paths 
      WHERE id = $2 AND depth > 0
      ORDER BY depth, confidence DESC;
    `;

    return { query, params: [config.startNodeId, config.endNodeId, config.maxDepth] };
  }

  private getDirectionClause(direction: string): string {
    switch (direction) {
      case 'upstream':
        return 'ON le.to_id = lp.id';
      case 'downstream':
        return 'ON le.from_id = lp.id';
      case 'both':
      default:
        return 'ON (le.from_id = lp.id OR le.to_id = lp.id)';
    }
  }

  private getNodeJoinCondition(direction: string): string {
    switch (direction) {
      case 'upstream':
        return 'ln.id = le.from_id';
      case 'downstream':
        return 'ln.id = le.to_id';
      case 'both':
      default:
        return '(ln.id = le.to_id OR ln.id = le.from_id) AND ln.id != lp.id';
    }
  }

  private async validateNodesExist(nodeIds: string[]): Promise<void> {
    const res = (await this.db.query(
      'SELECT id FROM lineage_nodes WHERE id = ANY($1) AND deleted_at IS NULL',
      [nodeIds]
    )) as any;

    const found = new Set<string>((res.rows ?? []).map((r: any) => r.id as string));
    const missing = nodeIds.filter((id) => !found.has(id));
    if (missing.length > 0) throw new LineageNotFoundError('Lineage nodes', missing.join(', '));
  }

  private processNodes(rows: any[], includeMetadata: boolean): LineageNode[] {
    return rows.map((row: any) => ({
      id: row.id,
      label: row.label,
      type: row.type,
      data_source_id: row.data_source_id ?? undefined,
      schema_name: row.schema_name ?? undefined,
      table_name: row.table_name ?? undefined,
      ...(includeMetadata
        ? {
            description: row.description ?? undefined,
            metadata: row.metadata ?? undefined,
            created_at: row.created_at ?? undefined,
            updated_at: row.updated_at ?? undefined,
          }
        : {}),
    }));
  }

  private processEdges(rows: any[]): LineageEdge[] {
    return rows.map((row: any) => ({
      id: row.id,
      from_id: row.from_id,
      to_id: row.to_id,
      relationship_type: row.relationship_type,
      transformation_logic: row.transformation_logic ?? undefined,
      confidence_score: typeof row.confidence_score === 'number' ? row.confidence_score : undefined,
      metadata: row.metadata ?? undefined,
      created_at: row.created_at ?? undefined,
      updated_at: row.updated_at ?? undefined,
    }));
  }

  private processPaths(rows: any[]): Array<{ nodes: LineageNode[]; edges: LineageEdge[]; pathLength: number; confidence: number }> {
    return rows.map((row: any) => ({
      // If you need full nodes/edges, fetch by ids in row.path_nodes / row.path_edges
      nodes: [],
      edges: [],
      pathLength: toInt(row.depth, 0),
      confidence: Number(row.confidence ?? 0),
    }));
  }

  private findShortestPath<T extends { pathLength: number }>(paths: T[]): T | undefined {
    return paths.reduce<T | undefined>((shortest, current) => {
      if (!shortest) return current;
      return current.pathLength < shortest.pathLength ? current : shortest;
    }, undefined);
  }

  private analyzeCriticality(nodes: LineageNode[]): Array<{ path: LineageNode[]; criticality: 'high' | 'medium' | 'low'; reason: string }> {
    return nodes
      .filter((n) => n.type === 'gold')
      .map((n) => ({ path: [n], criticality: 'high' as const, reason: 'Production gold-tier data asset' }));
  }

  private generateRecommendations(affectedNodes: LineageNode[], criticalPaths: Array<{ path: LineageNode[] }>): string[] {
    const rec: string[] = [];
    if (affectedNodes.length > 50) rec.push('High impact change detected. Consider phased deployment approach.');
    if (criticalPaths.length > 0) rec.push('Critical production assets affected. Coordinate with data consumers before deployment.');
    const goldCount = affectedNodes.filter((n) => n.type === 'gold').length;
    if (goldCount > 0) rec.push(`${goldCount} gold-tier assets affected. Ensure data quality validation.`);
    rec.push('Review and update documentation for affected assets.');
    rec.push('Schedule stakeholder notifications before implementing changes.');
    return rec;
    }

  private generateGraphMetadata(nodes: LineageNode[], edges: LineageEdge[], queryDurationMs: number): Omit<LineageGraph['metadata'], 'cacheHit'> {
    const nodeTypeDistribution = nodes.reduce<Record<string, number>>((acc, n) => {
      acc[n.type] = (acc[n.type] ?? 0) + 1;
      return acc;
    }, {});
    return {
      totalNodes: nodes.length,
      totalEdges: edges.length,
      nodeTypeDistribution,
      maxDepthReached: this.calculateMaxDepth(nodes, edges),
      queryDuration: Math.round(queryDurationMs),
    };
  }

  private calculateMaxDepth(nodes: LineageNode[], edges: LineageEdge[]): number {
    if (nodes.length === 0 || edges.length === 0) return 0;

    const incoming = new Set<string>(edges.map((e) => e.to_id));
    const sources = nodes.filter((n) => !incoming.has(n.id));
    if (sources.length === 0) return 0;

    let maxDepth = 0;
    const visited = new Set<string>();
    const queue: Array<{ nodeId: string; depth: number }> = sources.map((s) => ({ nodeId: s.id, depth: 0 }));

    while (queue.length) {
      const current = queue.shift()!;
      if (visited.has(current.nodeId)) continue;
      visited.add(current.nodeId);
      maxDepth = Math.max(maxDepth, current.depth);

      const children = edges.filter((e) => e.from_id === current.nodeId).map((e) => e.to_id);
      for (const nextId of children) {
        if (!visited.has(nextId)) queue.push({ nodeId: nextId, depth: current.depth + 1 });
      }
    }
    return maxDepth;
  }

  /* â”€â”€ Cache â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private generateCacheKey(operation: string, filters: any): string {
    const filterString = JSON.stringify(filters, Object.keys(filters).sort());
    return createHash('md5').update(`${operation}:${filterString}`).digest('hex');
  }

  private getCachedResult(key: string): any | null {
    const cached = this.queryCache.get(key);
    if (!cached) return null;
    const now = Date.now();
    if (now - cached.timestamp > cached.ttl) {
      this.queryCache.delete(key);
      return null;
    }
    return cached.data;
  }

  private setCachedResult(key: string, data: any, ttl: number): void {
    if (this.queryCache.size >= this.maxCacheSize) {
      const oldestKey: string | undefined = this.queryCache.keys().next().value;
      if (typeof oldestKey === 'string') this.queryCache.delete(oldestKey);
    }
    this.queryCache.set(key, { data, timestamp: Date.now(), ttl });
  }

  private invalidateGraphCache(): void {
    for (const k of Array.from(this.queryCache.keys())) {
      if (k.startsWith('graph:')) this.queryCache.delete(k);
    }
  }

  private setupCacheCleanup(): void {
    setInterval(() => {
      const now = Date.now();
      for (const [key, entry] of this.queryCache) {
        if (now - entry.timestamp > entry.ttl) this.queryCache.delete(key);
      }
    }, 300000).unref();
  }
}

/** Optional singleton export if you prefer DI */
export const lineageService = new LineageService();



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\QualityService.ts
--------------------------------------------------------------------------------
// backend/data-service/src/services/QualityService.ts
import { createHash } from 'crypto';
import { performance } from 'perf_hooks';
import { Pool, PoolClient, PoolConfig } from 'pg';
import { z } from 'zod';
import { logger } from '../utils/logger';
import { DatabaseService } from './DatabaseService';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Zod Schemas & Types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

const QualityRuleSchema = z.object({
  name: z.string().min(2).max(255).trim(),
  description: z.string().max(1000).optional(),
  severity: z.enum(['low', 'medium', 'high', 'critical']).default('medium'),
  type: z.enum(['sql', 'metric']).default('sql'),
  dialect: z.enum(['postgres', 'generic']).default('postgres'),
  expression: z.string().min(3).max(10_000),
  tags: z.array(z.string().max(50)).max(20).default([]),
  enabled: z.boolean().default(true),
});

const QueryExecutionSchema = z.object({
  ruleId: z.string().uuid(),
  dataSourceId: z.string().uuid().optional(),
  timeout: z.number().min(1_000).max(300_000).default(30_000),
});

export type QualityRule = z.infer<typeof QualityRuleSchema> & {
  id: string;
  created_by: string | null;
  updated_by: string | null;
  created_at: Date;
  updated_at: Date;
};

export type QualityResult = {
  id: string;
  rule_id: string;
  data_source_id: string | null;
  status: 'passed' | 'failed' | 'error' | 'skipped' | 'timeout';
  run_at: Date;
  execution_time_ms: number;
  metrics: Record<string, any>;
  error: string | null;
  query_hash: string;
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * SQL Safety Validator
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

class QueryValidator {
  private static readonly FORBIDDEN = [
    'DROP','DELETE','INSERT','UPDATE','ALTER','CREATE','TRUNCATE',
    'GRANT','REVOKE','EXEC','EXECUTE','CALL','MERGE','REPLACE',
  ];

  static validateSQLQuery(query: string): { isValid: boolean; errors: string[] } {
    const errors: string[] = [];
    const upper = query.toUpperCase();

    // SELECT-only & no multi-statement
    if (!upper.trim().startsWith('SELECT')) errors.push('Query must start with SELECT.');
    if (upper.includes(';')) errors.push('Multiple statements are not allowed.');

    // DDL/DML
    for (const kw of this.FORBIDDEN) {
      if (upper.includes(kw)) errors.push(`Forbidden keyword detected: ${kw}`);
    }

    // Dangerous patterns
    const bad = [
      /UNION\s+ALL?\s+SELECT.*INFORMATION_SCHEMA/i,
      /pg_sleep\(/i,
      /waitfor\s+delay/i,
      /xp_cmdshell/i,
      /sp_configure/i,
    ];
    for (const pat of bad) {
      if (pat.test(query)) errors.push('Potentially dangerous SQL pattern detected.');
    }

    // Complexity guard
    const selectCount = (upper.match(/\bSELECT\b/g) || []).length;
    if (selectCount > 5) errors.push('Query too complex: >5 nested SELECTs.');

    return { isValid: errors.length === 0, errors };
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * External Data Source Pool Manager (Postgres)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

type ExternalPgConfig = { connectionString: string; ssl?: boolean };

class DataSourcePoolManager {
  private pools = new Map<string, Pool>();
  private readonly maxPools = 5;

  getPool(cfg: ExternalPgConfig): Pool {
    const key = this.hashCfg(cfg);
    const found = this.pools.get(key);
    if (found) return found;

    if (this.pools.size >= this.maxPools) {
      throw new Error('Maximum external connection pool limit reached.');
    }

    const poolCfg: PoolConfig = {
      connectionString: cfg.connectionString,
      max: 2,
      idleTimeoutMillis: 30_000,
      connectionTimeoutMillis: 10_000,
      ssl: cfg.ssl ? { rejectUnauthorized: false } : undefined,
    };
    const pool = new Pool(poolCfg);
    pool.on('error', (err) => logger.error('External pool idle client error', { err: String(err) }));
    this.pools.set(key, pool);
    return pool;
  }

  async cleanup(): Promise<void> {
    for (const [key, pool] of this.pools) {
      try {
        await pool.end();
      } catch (err) {
        logger.error('Error closing external pool', { key, err: String(err) });
      }
      this.pools.delete(key);
    }
  }

  private hashCfg(cfg: ExternalPgConfig): string {
    const redacted = cfg.connectionString.replace(/:(?:[^@]+)@/, ':***@');
    return createHash('sha256').update(JSON.stringify({ connectionString: redacted, ssl: !!cfg.ssl }))
      .digest('hex').slice(0, 16);
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Helpers
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

function toInt(x: unknown, fallback = 0): number {
  const n = typeof x === 'string' ? Number(x) : (x as number);
  return Number.isFinite(n) ? (n as number) : fallback;
}

function hashQuery(sql: string): string {
  return createHash('sha256').update(sql).digest('hex').slice(0, 16);
}

async function withStatementTimeout(client: PoolClient, timeoutMs: number, fn: () => Promise<any>) {
  await client.query('SET LOCAL statement_timeout = $1', [timeoutMs]);
  return fn();
}

async function withConnectTimeout(pool: Pool, timeoutMs: number): Promise<PoolClient> {
  let timer: NodeJS.Timeout | null = null;
  try {
    const connectPromise = pool.connect();
    const timeoutPromise = new Promise<never>((_, reject) => {
      timer = setTimeout(() => reject(new Error('Connection timeout')), timeoutMs);
    });
    const client = (await Promise.race([connectPromise, timeoutPromise])) as PoolClient;
    if (timer) clearTimeout(timer);
    return client;
  } catch (e) {
    if (timer) clearTimeout(timer);
    throw e;
  }
}

function safeJsonParse(s: string): any {
  try { return JSON.parse(s); } catch { return undefined; }
}

function redactError(msg: string): string {
  return msg.replace(/(password|pwd)=([^;\s]+)/gi, 'password=***');
}

function timeframeToMs(tf: '24h' | '7d' | '30d' | '90d'): number {
  switch (tf) {
    case '24h': return 24 * 60 * 60 * 1000;
    case '7d':  return 7  * 24 * 60 * 60 * 1000;
    case '30d': return 30 * 24 * 60 * 60 * 1000;
    case '90d': return 90 * 24 * 60 * 60 * 1000;
    default:    return 7  * 24 * 60 * 60 * 1000;
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Quality Service
 * (no generics at call sites â†’ avoids TS2558 if DatabaseService isn't generic)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export class QualityService {
  private readonly db = new DatabaseService();          // internal metadata DB wrapper
  private readonly pools = new DataSourcePoolManager();  // external DS pools

  /* â”€â”€ Rules: list/get/create/update/delete â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async listRules(filters: {
    q?: string;
    severity?: string;
    enabled?: boolean;
    limit?: number;
    offset?: number;
  } = {}): Promise<{ rules: QualityRule[]; total: number }> {
    const { q = '', severity, enabled, limit = 50, offset = 0 } = filters;

    const conds: string[] = [];
    const params: any[] = [];
    let i = 1;

    if (q) { conds.push(`(name ILIKE $${i} OR description ILIKE $${i})`); params.push(`%${q}%`); i++; }
    if (severity) { conds.push(`severity = $${i}`); params.push(severity); i++; }
    if (typeof enabled === 'boolean') { conds.push(`enabled = $${i}`); params.push(enabled); i++; }

    const where = conds.length ? `WHERE ${conds.join(' AND ')}` : '';

    const countRes = await this.db.query(`SELECT COUNT(*) AS total FROM quality_rules ${where}`, params) as any;
    const total = toInt(countRes.rows?.[0]?.total, 0);

    const pageLimit = Math.min(Math.max(limit, 1), 100);
    const pageOffset = Math.max(offset, 0);

    const rulesRes = await this.db.query(
      `
      SELECT id, name, description, severity, type, dialect, expression, tags,
             enabled, created_by, updated_by, created_at, updated_at
      FROM quality_rules
      ${where}
      ORDER BY updated_at DESC
      LIMIT $${i} OFFSET $${i + 1}
      `,
      [...params, pageLimit, pageOffset],
    ) as any;

    const rules = ((rulesRes.rows ?? []) as QualityRule[]).map((r) => ({
      ...r,
      tags: Array.isArray(r.tags) ? r.tags : [],
    }));

    return { rules, total };
  }

  async getRule(id: string): Promise<QualityRule | null> {
    const res = await this.db.query(`SELECT * FROM quality_rules WHERE id = $1`, [id]) as any;
    return (res.rows?.[0] as QualityRule) ?? null;
  }

  async createRule(data: z.infer<typeof QualityRuleSchema>, userId?: string): Promise<QualityRule> {
    const validated = QualityRuleSchema.parse(data);
    if (validated.type === 'sql') {
      const v = QueryValidator.validateSQLQuery(validated.expression);
      if (!v.isValid) throw new Error(`Invalid SQL query: ${v.errors.join(', ')}`);
    }

    const res = await this.db.query(
      `
      INSERT INTO quality_rules (
        name, description, severity, type, dialect, expression, tags, enabled,
        created_by, updated_by
      ) VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$9)
      RETURNING *
      `,
      [
        validated.name,
        validated.description ?? null,
        validated.severity,
        validated.type,
        validated.dialect,
        validated.expression,
        validated.tags,
        validated.enabled,
        userId ?? null,
      ],
    ) as any;

    const rule = res.rows[0] as QualityRule;
    logger.info('Quality rule created', { ruleId: rule.id, name: rule.name });
    return rule;
  }

  async updateRule(id: string, updates: Partial<z.infer<typeof QualityRuleSchema>>, userId?: string): Promise<QualityRule | null> {
    const validated = QualityRuleSchema.partial().parse(updates);

    if (validated.expression && (validated.type ?? 'sql') === 'sql') {
      const v = QueryValidator.validateSQLQuery(validated.expression);
      if (!v.isValid) throw new Error(`Invalid SQL query: ${v.errors.join(', ')}`);
    }

    const fields: Array<keyof typeof validated> = [
      'name','description','severity','type','dialect','expression','tags','enabled',
    ];
    const sets: string[] = [];
    const params: any[] = [];
    let i = 1;

    for (const f of fields) {
      if (validated[f] !== undefined) {
        sets.push(`${f} = $${i}`);
        params.push(validated[f] as any);
        i++;
      }
    }
    if (!sets.length) throw new Error('No valid fields to update');

    sets.push(`updated_by = $${i}`, `updated_at = NOW()`);
    params.push(userId ?? null);
    i++;
    params.push(id);

    const res = await this.db.query(
      `
      UPDATE quality_rules
      SET ${sets.join(', ')}
      WHERE id = $${i}
      RETURNING *
      `,
      params,
    ) as any;

    if ((res.rows?.length ?? 0) > 0) {
      logger.info('Quality rule updated', { ruleId: id, fieldsUpdated: Object.keys(validated) });
      return res.rows[0] as QualityRule;
    }
    return null;
  }

  async deleteRule(id: string, userId?: string): Promise<boolean> {
    const res = await this.db.query(
      `UPDATE quality_rules SET enabled = false, updated_by = $1, updated_at = NOW() WHERE id = $2`,
      [userId ?? null, id],
    ) as any;
    const ok = (res.rowCount || 0) > 0;
    if (ok) logger.info('Quality rule disabled', { ruleId: id });
    return ok;
  }

  /* â”€â”€ Results listing â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async listResults(filters: {
    ruleId?: string;
    dataSourceId?: string;
    status?: string;
    limit?: number;
    offset?: number;
  } = {}): Promise<{ results: (QualityResult & { rule_name: string | null })[]; total: number }> {
    const { ruleId, dataSourceId, status, limit = 50, offset = 0 } = filters;

    const conds: string[] = [];
    const params: any[] = [];
    let i = 1;

    if (ruleId) { conds.push(`qr.rule_id = $${i}`); params.push(ruleId); i++; }
    if (dataSourceId) { conds.push(`qr.data_source_id = $${i}`); params.push(dataSourceId); i++; }
    if (status) { conds.push(`qr.status = $${i}`); params.push(status); i++; }

    const where = conds.length ? `WHERE ${conds.join(' AND ')}` : '';

    const countRes = await this.db.query(`SELECT COUNT(*) AS total FROM quality_results qr ${where}`, params) as any;
    const total = toInt(countRes.rows?.[0]?.total, 0);

    const pageLimit = Math.min(Math.max(limit, 1), 100);
    const pageOffset = Math.max(offset, 0);

    const res = await this.db.query(
      `
      SELECT qr.*, r.name AS rule_name
      FROM quality_results qr
      LEFT JOIN quality_rules r ON r.id = qr.rule_id
      ${where}
      ORDER BY qr.run_at DESC
      LIMIT $${i} OFFSET $${i + 1}
      `,
      [...params, pageLimit, pageOffset],
    ) as any;

    return { results: (res.rows ?? []) as (QualityResult & { rule_name: string | null })[], total };
  }

  /* â”€â”€ Rule execution â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async executeRule(
    ruleId: string,
    dataSourceId?: string,
    options: { timeout?: number; userId?: string } = {},
  ): Promise<QualityResult> {
    const { timeout = 30_000, userId } = options;
    const startedAt = performance.now();

    const input = QueryExecutionSchema.parse({ ruleId, dataSourceId, timeout });

    const ruleRes = await this.db.query(
      `SELECT * FROM quality_rules WHERE id = $1 AND enabled = true`,
      [input.ruleId],
    ) as any;
    if (!ruleRes.rows?.length) throw new Error('Rule not found or disabled');

    const rule = ruleRes.rows[0] as QualityRule;

    let status: QualityResult['status'] = 'skipped';
    let metrics: Record<string, any> = {};
    let error: string | null = null;
    let qhash = '';

    if (rule.type === 'sql' && rule.dialect === 'postgres') {
      const v = QueryValidator.validateSQLQuery(rule.expression);
      if (!v.isValid) throw new Error(`Invalid SQL query: ${v.errors.join(', ')}`);

      qhash = hashQuery(rule.expression);

      // Resolve target connection (default to primary DB)
      let connectionString = process.env.DATABASE_URL as string | undefined;
      let ssl = false;

      if (input.dataSourceId) {
        const ds = await this.db.query(
          `SELECT connection_config FROM data_sources WHERE id = $1`,
          [input.dataSourceId],
        ) as any;

        if (ds.rows?.length) {
          const cfgRaw = (ds.rows[0] as { connection_config: any }).connection_config;
          const cfg = typeof cfgRaw === 'string' ? safeJsonParse(cfgRaw) : cfgRaw;
          if (cfg?.connectionString) connectionString = String(cfg.connectionString);
          if (typeof cfg?.ssl === 'boolean') ssl = !!cfg.ssl;
        }
      }

      if (!connectionString) throw new Error('No connection string available for rule execution.');

      const pool = this.pools.getPool({ connectionString, ssl });

      let client: PoolClient | null = null;
      try {
        client = await withConnectTimeout(pool, 10_000);

        const exec = async () => {
          const result = await client!.query(rule.expression);
          const first = result.rows?.[0] ?? {};
          const passed =
            typeof first.passed === 'boolean'
              ? (first.passed as boolean)
              : ((result.rowCount ?? 0) > 0);

          status = passed ? 'passed' : 'failed';
          metrics = {
            rowCount: result.rowCount ?? 0,
            sampleRows: (result.rows ?? []).slice(0, 3),
            queryHash: qhash,
          };
        };

        await withStatementTimeout(client, timeout, exec);
      } catch (e: any) {
        const msg = String(e?.message || e);
        status = /timeout/i.test(msg) ? 'timeout' : 'error';
        error = redactError(msg);
        logger.error('Quality rule execution failed', {
          ruleId: input.ruleId,
          dataSourceId: input.dataSourceId ?? null,
          error,
        });
      } finally {
        if (client) {
          try { client.release(); } catch (releaseErr) {
            logger.warn('Failed to release PG client', { err: String(releaseErr) });
          }
        }
      }
    } else {
      status = 'skipped';
    }

    const execMs = Math.round(performance.now() - startedAt);

    const insert = await this.db.query(
      `
      INSERT INTO quality_results (
        rule_id, data_source_id, status, execution_time_ms, metrics, error, query_hash
      ) VALUES ($1, $2, $3, $4, $5::jsonb, $6, $7)
      RETURNING *
      `,
      [input.ruleId, input.dataSourceId ?? null, status, execMs, JSON.stringify(metrics), error, qhash],
    ) as any;

    logger.info('Quality rule executed', { ruleId: input.ruleId, status, executionTimeMs: execMs });

    return insert.rows[0] as QualityResult;
  }

  /* â”€â”€ Stats & Health â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  // Lightweight DB health for /api/quality/health
  async healthCheck(): Promise<boolean> {
    try {
      const pong = await this.db.query('SELECT 1 as ok') as any;
      return pong.rows?.[0]?.ok === 1;
    } catch {
      return false;
    }
  }

  /**
   * Aggregated stats for dashboards.
   * timeframe: '24h' | '7d' | '30d' | '90d' (default '7d')
   * groupBy:   'severity' | 'status' | 'data_source' (default 'status')
   */
  async getStats(params: {
    timeframe?: '24h' | '7d' | '30d' | '90d';
    groupBy?: 'severity' | 'status' | 'data_source';
  }): Promise<{
    from: string;
    to: string;
    timeframe: '24h' | '7d' | '30d' | '90d';
    groupBy: 'severity' | 'status' | 'data_source';
    buckets: Array<{ key: string; count: number }>;
  }> {
    const timeframe = params.timeframe ?? '7d';
    const groupBy = params.groupBy ?? 'status';

    const now = new Date();
    const fromIso = new Date(now.getTime() - timeframeToMs(timeframe)).toISOString();

    let sql: string;
    const values: any[] = [fromIso];

    if (groupBy === 'severity') {
      sql = `
        SELECT r.severity AS key, COUNT(*)::int AS count
        FROM quality_results qr
        JOIN quality_rules r ON r.id = qr.rule_id
        WHERE qr.run_at >= $1
        GROUP BY 1
        ORDER BY 2 DESC, 1 ASC
      `;
    } else if (groupBy === 'data_source') {
      sql = `
        SELECT COALESCE(qr.data_source_id::text, 'none') AS key, COUNT(*)::int AS count
        FROM quality_results qr
        WHERE qr.run_at >= $1
        GROUP BY 1
        ORDER BY 2 DESC, 1 ASC
      `;
    } else {
      // status (default)
      sql = `
        SELECT qr.status AS key, COUNT(*)::int AS count
        FROM quality_results qr
        WHERE qr.run_at >= $1
        GROUP BY 1
        ORDER BY 2 DESC, 1 ASC
      `;
    }

    const res = await this.db.query(sql, values) as any;

    return {
      from: fromIso,
      to: now.toISOString(),
      timeframe,
      groupBy,
      buckets: (res.rows ?? []) as Array<{ key: string; count: number }>,
    };
  }

  /* â”€â”€ Lifecycle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  async cleanup(): Promise<void> {
    await this.pools.cleanup();
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\RequestsService.ts
--------------------------------------------------------------------------------
import { DatabaseService } from './DatabaseService';

export class RequestsService {
  private db = new DatabaseService();

  async list(status?: string, type?: string) {
    const clauses: string[] = [];
    const params: any[] = [];
    let i = 1;
    if (status) { clauses.push(`status=$${i++}`); params.push(status); }
    if (type)   { clauses.push(`type=$${i++}`);   params.push(type); }
    const where = clauses.length ? `WHERE ${clauses.join(' AND ')}` : '';
    const { rows } = await this.db.query(`
      SELECT * FROM workflow_requests ${where} ORDER BY updated_at DESC LIMIT 200
    `, params);
    return rows;
  }

  async create(data: any, userId?: string) {
    const { rows } = await this.db.query(`
      INSERT INTO workflow_requests (title,type,status,requester,payload,updated_by)
      VALUES ($1,COALESCE($2,'access'),COALESCE($3,'open'),$4,$5::jsonb,$6)
      RETURNING *
    `, [data.title, data.type ?? 'access', data.status ?? 'open', data.requester ?? userId ?? null, JSON.stringify(data.payload ?? {}), userId ?? null]);
    return rows[0];
  }

  async update(id: string, patch: any, userId?: string) {
    const sets: string[] = []; const params: any[] = []; let i = 1;
    const push = (f: string, v: any) => { sets.push(f); params.push(v); };
    if (patch.title !== undefined)   push(`title=$${i++}`, patch.title);
    if (patch.type !== undefined)    push(`type=$${i++}`, patch.type);
    if (patch.status !== undefined)  push(`status=$${i++}`, patch.status);
    if (patch.assignee !== undefined)push(`assignee=$${i++}`, patch.assignee);
    if (patch.payload !== undefined) push(`payload=$${i++}::jsonb`, JSON.stringify(patch.payload ?? {}));
    push(`updated_by=$${i++}`, userId ?? null);
    push(`updated_at=NOW()`, null);
    params.push(id);
    const { rows } = await this.db.query(`UPDATE workflow_requests SET ${sets.join(', ')} WHERE id=$${i} RETURNING *`, params);
    return rows[0] ?? null;
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\services\StatsService.ts
--------------------------------------------------------------------------------
// backend/data-service/src/services/StatsService.ts
import { DatabaseService } from './DatabaseService';

/** Public types your controller/routers can use */
export type KpiRow = { key: string; value: number; updated_at: Date };
export type StatusBucket = { key: string; count: number };
export type SeriesPoint = { ts: string; count: number; status?: string };

function timeframeToInterval(timeframe: '24h'|'7d'|'30d'|'90d'): { fromIso: string; dateTrunc: 'hour'|'day' } {
  const now = new Date();
  let ms = 7 * 24 * 60 * 60 * 1000;
  let trunc: 'hour'|'day' = 'day';
  switch (timeframe) {
    case '24h': ms = 24 * 60 * 60 * 1000; trunc = 'hour'; break;
    case '7d':  ms = 7  * 24 * 60 * 60 * 1000; trunc = 'day'; break;
    case '30d': ms = 30 * 24 * 60 * 60 * 1000; trunc = 'day'; break;
    case '90d': ms = 90 * 24 * 60 * 60 * 1000; trunc = 'day'; break;
  }
  const from = new Date(now.getTime() - ms).toISOString();
  return { fromIso: from, dateTrunc: trunc };
}

export class StatsService {
  private readonly db = new DatabaseService();

  /** Health ping for /stats/health or readiness checks */
  async healthCheck(): Promise<boolean> {
    try {
      const res = await this.db.query('SELECT 1 AS ok') as any;
      return res.rows?.[0]?.ok === 1;
    } catch {
      return false;
    }
  }

  /** Simple KPIs table -> UI cards */
  async getKpis(): Promise<KpiRow[]> {
    const res = await this.db.query(
      `SELECT key, value, updated_at FROM kpi_stats ORDER BY key`
    ) as any;
    return (res.rows ?? []) as KpiRow[];
  }

  /** Quality summary (counts by status + pass rate + avg exec time) */
  async getQualitySummary(timeframe: '24h'|'7d'|'30d'|'90d' = '7d'): Promise<{
    timeframe: typeof timeframe;
    from: string;
    to: string;
    byStatus: StatusBucket[];
    totals: { total: number; passed: number; failed: number; error: number; skipped: number; timeout: number; passRate: number; avgExecMs: number };
  }> {
    const { fromIso } = timeframeToInterval(timeframe);
    const nowIso = new Date().toISOString();

    const byStatusRes = await this.db.query(
      `
      SELECT status AS key, COUNT(*)::int AS count
      FROM quality_results
      WHERE run_at >= $1
      GROUP BY 1
      ORDER BY 2 DESC, 1 ASC
      `,
      [fromIso]
    ) as any;

    const aggRes = await this.db.query(
      `
      SELECT
        COUNT(*)::int                                  AS total,
        SUM(CASE WHEN status = 'passed'  THEN 1 ELSE 0 END)::int AS passed,
        SUM(CASE WHEN status = 'failed'  THEN 1 ELSE 0 END)::int AS failed,
        SUM(CASE WHEN status = 'error'   THEN 1 ELSE 0 END)::int AS error,
        SUM(CASE WHEN status = 'skipped' THEN 1 ELSE 0 END)::int AS skipped,
        SUM(CASE WHEN status = 'timeout' THEN 1 ELSE 0 END)::int AS timeout,
        COALESCE(AVG(execution_time_ms), 0)::float                AS avg_exec_ms
      FROM quality_results
      WHERE run_at >= $1
      `,
      [fromIso]
    ) as any;

    const a = aggRes.rows?.[0] ?? { total: 0, passed: 0, failed: 0, error: 0, skipped: 0, timeout: 0, avg_exec_ms: 0 };
    const passRate = a.total ? Math.round((a.passed / a.total) * 1000) / 10 : 0;

    return {
      timeframe,
      from: fromIso,
      to: nowIso,
      byStatus: (byStatusRes.rows ?? []) as StatusBucket[],
      totals: {
        total: a.total,
        passed: a.passed,
        failed: a.failed,
        error: a.error,
        skipped: a.skipped,
        timeout: a.timeout,
        passRate,
        avgExecMs: Math.round(a.avg_exec_ms),
      }
    };
  }

  /** Time-series of results count; optionally split by status */
  async getQualitySeries(params: { timeframe?: '24h'|'7d'|'30d'|'90d'; splitByStatus?: boolean } = {}): Promise<{
    timeframe: NonNullable<typeof params['timeframe']> extends never ? '7d' : NonNullable<typeof params['timeframe']>;
    from: string;
    to: string;
    series: SeriesPoint[];
  }> {
    const timeframe = (params.timeframe ?? '7d') as any;
    const split = !!params.splitByStatus;
    const { fromIso, dateTrunc } = timeframeToInterval(timeframe);
    const nowIso = new Date().toISOString();

    const sql = split
      ? `
        SELECT
          to_char(date_trunc('${dateTrunc}', run_at), 'YYYY-MM-DD"T"HH24:00:00Z') AS ts,
          status,
          COUNT(*)::int AS count
        FROM quality_results
        WHERE run_at >= $1
        GROUP BY 1, 2
        ORDER BY 1 ASC, 2 ASC
      `
      : `
        SELECT
          to_char(date_trunc('${dateTrunc}', run_at), 'YYYY-MM-DD"T"HH24:00:00Z') AS ts,
          COUNT(*)::int AS count
        FROM quality_results
        WHERE run_at >= $1
        GROUP BY 1
        ORDER BY 1 ASC
      `;

    const res = await this.db.query(sql, [fromIso]) as any;

    const series = (res.rows ?? []).map((r: any) =>
      split ? ({ ts: r.ts, count: r.count, status: r.status }) : ({ ts: r.ts, count: r.count })
    ) as SeriesPoint[];

    return { timeframe, from: fromIso, to: nowIso, series };
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\utils\logger.ts
--------------------------------------------------------------------------------
// backend/data-service/src/utils/logger.ts
import fs from 'fs';
import path from 'path';
import winston from 'winston';
import { env } from '../config/env';

function bool(val: any, def = true) {
  if (val === undefined || val === null) return def;
  const s = String(val).toLowerCase();
  return s === '1' || s === 'true' || s === 'yes' || s === 'on';
}

const LOG_DIR = process.env.LOG_DIR || path.join(process.cwd(), 'logs'); // default ./logs
const LOG_TO_FILES = bool(process.env.LOG_TO_FILES, true);
const LOG_LEVEL = env.LOG_LEVEL || process.env.LOG_LEVEL || 'info';

function ensureWritable(dir: string): boolean {
  try {
    fs.mkdirSync(dir, { recursive: true });
    const testFile = path.join(dir, `.writable-${Date.now()}`);
    fs.writeFileSync(testFile, 'ok');
    fs.unlinkSync(testFile);
    return true;
  } catch {
    return false;
  }
}

const canWriteFiles = LOG_TO_FILES && ensureWritable(LOG_DIR);

// common formats
const human = winston.format.combine(
  winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss:ms' }),
  winston.format.colorize({ all: true }),
  winston.format.printf(info => `${info.timestamp} ${info.level}: ${info.message}`)
);

const jsonFmt = winston.format.combine(
  winston.format.timestamp(),
  winston.format.errors({ stack: true }),
  winston.format.json()
);

// base transports: always console
const baseTransports: winston.transport[] = [
  new winston.transports.Console({ level: LOG_LEVEL, format: human }),
];

// add file transports only if writable
if (canWriteFiles) {
  baseTransports.push(
    new winston.transports.File({
      filename: path.join(LOG_DIR, 'combined.log'),
      level: LOG_LEVEL,
      format: jsonFmt,
      maxsize: 10 * 1024 * 1024,
      maxFiles: 5,
      tailable: true,
    }),
    new winston.transports.File({
      filename: path.join(LOG_DIR, 'error.log'),
      level: 'error',
      format: jsonFmt,
      maxsize: 10 * 1024 * 1024,
      maxFiles: 3,
      tailable: true,
    })
  );
} else {
  // visible, but non-fatal notice
  // eslint-disable-next-line no-console
  console.warn(`[logger] File logging disabled. LOG_DIR=${LOG_DIR} not writable. Using console only.`);
}

export const logger = winston.createLogger({
  level: LOG_LEVEL,
  format: jsonFmt,
  transports: baseTransports,
  exitOnError: false,
});

export const httpLogger = winston.createLogger({
  level: 'http',
  format: human,
  transports: canWriteFiles
    ? [
        new winston.transports.Console({ level: 'http', format: human }),
        new winston.transports.File({
          filename: path.join(LOG_DIR, 'http.log'),
          level: 'http',
          format: jsonFmt,
        }),
      ]
    : [new winston.transports.Console({ level: 'http', format: human })],
});

export const performanceLogger = winston.createLogger({
  level: 'info',
  format: jsonFmt,
  transports: canWriteFiles
    ? [new winston.transports.File({ filename: path.join(LOG_DIR, 'performance.log'), format: jsonFmt })]
    : [new winston.transports.Console({ level: 'info', format: human })],
});

export const securityLogger = winston.createLogger({
  level: 'warn',
  format: jsonFmt,
  transports: canWriteFiles
    ? [new winston.transports.File({ filename: path.join(LOG_DIR, 'security.log'), format: jsonFmt })]
    : [new winston.transports.Console({ level: 'warn', format: human })],
});

// Structured helpers (unchanged API, but now safe)
export const loggerUtils = {
  logRequest: (req: any, res: any, duration: number) => {
    httpLogger.http(`${req.method} ${req.url} - ${res.statusCode} - ${duration}ms`);
  },
  logDbOperation: (operation: string, table: string, duration: number, success: boolean) => {
    performanceLogger.info({ type: 'database', operation, table, duration, success, ts: new Date().toISOString() });
  },
  logAuth: (event: string, userId?: string, ip?: string, userAgent?: string) => {
    securityLogger.warn({ type: 'authentication', event, userId, ip, userAgent, ts: new Date().toISOString() });
  },
  logApiCall: (service: string, endpoint: string, method: string, duration: number, statusCode: number) => {
    performanceLogger.info({ type: 'external_api', service, endpoint, method, duration, statusCode, ts: new Date().toISOString() });
  },
  logDataSource: (operation: string, dataSourceId: string, status: string, details?: any) => {
    logger.info({ type: 'data_source', operation, dataSourceId, status, details, ts: new Date().toISOString() });
  },
  logConnectionTest: (dataSourceId: string, type: string, success: boolean, duration: number, error?: string) => {
    logger.info({ type: 'connection_test', dataSourceId, connectionType: type, success, duration, error, ts: new Date().toISOString() });
  },
  logError: (error: Error, context?: any) => {
    logger.error({ message: error.message, stack: error.stack, context, ts: new Date().toISOString() });
  },
};

// Crash guards (optional)
process.on('uncaughtException', (error) => {
  logger.error('Uncaught Exception', { message: error.message, stack: error.stack });
  // Donâ€™t exit here; let orchestrator handle restarts based on health checks.
});
process.on('unhandledRejection', (reason: any, promise) => {
  logger.error('Unhandled Rejection', { reason: reason?.message || String(reason), promise: String(promise) });
});



--------------------------------------------------------------------------------
FILE: backend\data-service\src\utils\normalizeType.ts
--------------------------------------------------------------------------------
// Normalize external aliases to canonical internal types
export type KnownType =
  | 'postgres' | 'postgresql' | 'mysql' | 'mssql' | 'mongodb' | 'redis'
  | 'snowflake' | 'bigquery' | 'redshift' | 'databricks' | 's3' | 'azure-blob'
  | 'gcs' | 'kafka' | 'api' | 'file' | 'ftp' | 'elasticsearch' | 'oracle';

export function normalizeDataSourceType(t?: string): KnownType | undefined {
  if (!t) return undefined;
  const lower = t.toLowerCase();
  switch (lower) {
    case 'postgres': return 'postgresql';
    default: return lower as KnownType;
  }
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\utils\pagination.ts
--------------------------------------------------------------------------------
export type PageQuery = { page?: any; pageSize?: any; sort?: any; dir?: any };

export function pageParams(q: PageQuery, allowedSort: string[] = ['created_at']) {
  const page = Math.max(1, Number(q.page) || 1);
  const pageSize = Math.min(100, Math.max(1, Number(q.pageSize) || 20));
  const sort = allowedSort.includes(String(q.sort || '')) ? String(q.sort) : allowedSort[0];
  const dir = (String(q.dir).toLowerCase() === 'desc' ? 'desc' : 'asc') as 'asc'|'desc';
  const offset = (page - 1) * pageSize;
  return { page, pageSize, sort, dir, offset };
}



--------------------------------------------------------------------------------
FILE: backend\data-service\src\worker.ts
--------------------------------------------------------------------------------
import { Worker } from 'bullmq';
import 'dotenv/config';
import mssql from 'mssql';
import { Client as PgClient, Pool } from 'pg';

const cpdb = new Pool({ connectionString: process.env.DATABASE_URL });
const connection = { connection: { url: process.env.REDIS_URL || 'redis://redis:6379' } };

// Helpers to fetch DS config
async function getAssetAndDS(assetId: string) {
  const { rows } = await cpdb.query(`
    SELECT a.id, a.schema_name, a.table_name, a.datasource_id, ds.type, COALESCE(ds.config, ds.connection_config) AS cfg
    FROM catalog_assets a JOIN data_sources ds ON ds.id = a.datasource_id
    WHERE a.id = $1
  `, [assetId]);
  return rows[0];
}

// PII heuristics by name/value
const piiNameMatchers = [
  { type: 'email', re: /(email|e[-_ ]?mail)/i },
  { type: 'ssn',   re: /(ssn|social[_-]?security)/i },
  { type: 'cc',    re: /(card|cc|credit)/i },
  { type: 'phone', re: /(phone|mobile|cell|tel)/i },
  { type: 'iban',  re: /(iban)/i },
];

const piiValueMatchers = [
  { type: 'email', re: /^[^\s@]+@[^\s@]+\.[^\s@]+$/i },
  { type: 'cc',    re: /^(?:\d[ -]*?){13,19}$/ },
  { type: 'ssn',   re: /^\d{3}-?\d{2}-?\d{4}$/ },
  { type: 'phone', re: /^\+?\d[\d -]{7,}$/ },
  { type: 'iban',  re: /^[A-Z]{2}\d{2}[A-Z0-9]{11,30}$/i }
];

function inferPIIByName(col: string): string | null {
  const m = piiNameMatchers.find(m => m.re.test(col));
  return m?.type || null;
}
function inferPIIByValues(samples: any[]): string | null {
  const s = String(samples?.find(v => v != null) ?? '');
  const m = piiValueMatchers.find(m => m.re.test(s));
  return m?.type || null;
}

// ------- Profile Worker -------
new Worker('catalog:profile', async job => {
  const { assetId } = job.data as { assetId: string };
  const asset = await getAssetAndDS(assetId);
  if (!asset) throw new Error('Asset not found');

  const { type, cfg, schema_name, table_name } = asset;
  let columns: Array<{ name: string, data_type: string }> = [];
  let rowsCount = 0;

  const runIdRes = await cpdb.query(`INSERT INTO catalog_profile_runs (asset_id, status) VALUES ($1,'running') RETURNING id`, [assetId]);
  const runId = runIdRes.rows[0].id;

  try {
    if (type === 'postgresql') {
      const cli = new PgClient({
        host: cfg.host, port: Number(cfg.port ?? 5432),
        database: cfg.database, user: cfg.username, password: cfg.password,
        ssl: cfg.ssl === false || cfg.ssl?.mode === 'disable' ? undefined : cfg.ssl
      });
      await cli.connect();

      const cols = await cli.query(`
        SELECT column_name as name, data_type
        FROM information_schema.columns
        WHERE table_schema=$1 AND table_name=$2
        ORDER BY ordinal_position`, [schema_name, table_name]);
      columns = cols.rows;

      const rc = await cli.query(`SELECT reltuples::bigint AS row_est FROM pg_class WHERE oid = $1::regclass`, [`"${schema_name}"."${table_name}"`]);
      rowsCount = Number(rc.rows?.[0]?.row_est || 0);

      for (const col of columns) {
        // sample 1% or up to 10k rows
        const sample = await cli.query(`
          SELECT ${JSON.stringify(col.name).replace(/"/g,'')} as name FROM "${schema_name}"."${table_name}"
          TABLESAMPLE SYSTEM (1) LIMIT 10000
        `).catch(() => ({ rows: [] as any[] }));

        const vals = sample.rows.map(r => r[col.name]).filter(v => v !== undefined);
        const total = Math.max(vals.length, 1);
        const nulls = vals.filter(v => v === null).length;
        const nonNull = vals.filter(v => v !== null).map(v => String(v));

        const distinct = new Set(nonNull.map(v => v)).size;
        const lengths = nonNull.map(s => s.length);
        const minv = nonNull.length ? nonNull.reduce((a,b)=> a < b ? a : b) : null;
        const maxv = nonNull.length ? nonNull.reduce((a,b)=> a > b ? a : b) : null;
        const avgl = nonNull.length ? (lengths.reduce((a,b)=>a+b,0) / nonNull.length) : null;

        const piiByName = inferPIIByName(col.name);
        const piiByValues = inferPIIByValues(nonNull.slice(0,50));
        const pii = piiByValues || piiByName;

        await cpdb.query(`
          INSERT INTO catalog_column_profiles (asset_id, column_name, null_frac, distinct_frac, min_value, max_value, avg_length, sample_values, inferred_type, pii_type, pattern, updated_at)
          VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11, now())
          ON CONFLICT (asset_id, column_name) DO UPDATE SET
            null_frac = EXCLUDED.null_frac,
            distinct_frac = EXCLUDED.distinct_frac,
            min_value = EXCLUDED.min_value,
            max_value = EXCLUDED.max_value,
            avg_length = EXCLUDED.avg_length,
            sample_values = EXCLUDED.sample_values,
            inferred_type = EXCLUDED.inferred_type,
            pii_type = EXCLUDED.pii_type,
            pattern = EXCLUDED.pattern,
            updated_at = now()
        `, [
          assetId, col.name,
          total ? nulls / total : null,
          total ? distinct / total : null,
          minv, maxv, avgl,
          JSON.stringify(nonNull.slice(0,10)),
          col.data_type, pii || null, null
        ]);
      }
      await cli.end();
    } else if (type === 'mssql') {
      const pool = await mssql.connect({
        server: cfg.host,
        port: Number(cfg.port ?? 1433),
        database: cfg.database,
        user: cfg.username,
        password: cfg.password,
        options: { encrypt: true, trustServerCertificate: true, ...(cfg.options || {}) }
      });

      const cols = await pool.request().query(`
        SELECT c.name AS name, ty.name AS data_type
        FROM sys.columns c
        JOIN sys.types ty ON c.user_type_id = ty.user_type_id
        JOIN sys.objects o ON c.object_id = o.object_id
        JOIN sys.schemas s ON s.schema_id = o.schema_id
        WHERE s.name=@schema AND o.name=@table
        ORDER BY c.column_id
      `).then(r => r.recordset);
      columns = cols;

      const rc = await pool.request().query(`
        SELECT SUM(row_count) as rows
        FROM sys.dm_db_partition_stats
        WHERE object_id = OBJECT_ID(QUOTENAME(@schema)+'.'+QUOTENAME(@table)) AND (index_id=0 OR index_id=1)
      `).then(r => Number(r.recordset?.[0]?.rows || 0));
      rowsCount = rc;

      for (const col of columns) {
        const sample = await pool.request().query(`
          SELECT TOP 10000 [${col.name}] AS v FROM QUOTENAME('${schema_name}').${table_name} TABLESAMPLE (1 PERCENT)
        `).then(r => r.recordset).catch(() => [] as any[]);

        const vals = sample.map(r => r.v);
        const total = Math.max(vals.length, 1);
        const nulls = vals.filter(v => v == null).length;
        const nonNull = vals.filter(v => v != null).map(v => String(v));

        const distinct = new Set(nonNull).size;
        const lengths = nonNull.map(s => s.length);
        const minv = nonNull.length ? nonNull.reduce((a,b)=> a < b ? a : b) : null;
        const maxv = nonNull.length ? nonNull.reduce((a,b)=> a > b ? a : b) : null;
        const avgl = nonNull.length ? (lengths.reduce((a,b)=>a+b,0) / nonNull.length) : null;

        const piiByName = inferPIIByName(col.name);
        const piiByValues = inferPIIByValues(nonNull.slice(0,50));
        const pii = piiByValues || piiByName;

        await cpdb.query(`
          INSERT INTO catalog_column_profiles (asset_id, column_name, null_frac, distinct_frac, min_value, max_value, avg_length, sample_values, inferred_type, pii_type, pattern, updated_at)
          VALUES ($1,$2,$3,$4,$5,$6,$7,$8,$9,$10,$11, now())
          ON CONFLICT (asset_id, column_name) DO UPDATE SET
            null_frac = EXCLUDED.null_frac,
            distinct_frac = EXCLUDED.distinct_frac,
            min_value = EXCLUDED.min_value,
            max_value = EXCLUDED.max_value,
            avg_length = EXCLUDED.avg_length,
            sample_values = EXCLUDED.sample_values,
            inferred_type = EXCLUDED.inferred_type,
            pii_type = EXCLUDED.pii_type,
            pattern = EXCLUDED.pattern,
            updated_at = now()
        `, [
          assetId, col.name,
          total ? nulls / total : null,
          total ? distinct / total : null,
          minv, maxv, avgl,
          JSON.stringify(nonNull.slice(0,10)),
          col.data_type, pii || null, null
        ]);
      }

      await pool.close();
    } else {
      throw new Error(`Unsupported type: ${type}`);
    }

    // Simple asset quality heuristic
    const { rows: colpii } = await cpdb.query(`SELECT count(*)::int AS pii FROM catalog_column_profiles WHERE asset_id=$1 AND pii_type IS NOT NULL`, [assetId]);
    const piiCount = colpii[0].pii || 0;
    const quality = piiCount > 0 ? 'medium' : 'high';

    await cpdb.query(`UPDATE catalog_assets SET quality=$2, updated_at=now() WHERE id=$1`, [assetId, quality]);
    await cpdb.query(`UPDATE catalog_profile_runs SET status='completed', completed_at=now() WHERE id=$1`, [runId]);

  } catch (e: any) {
    await cpdb.query(`UPDATE catalog_profile_runs SET status='failed', completed_at=now(), error=$2 WHERE id=$1`, [runId, e?.message || String(e)]);
    throw e;
  }
}, connection);

// ------- Sync Worker (optional parallelization) -------
new Worker('catalog:sync', async job => {
  // you can call your existing ingestPostgres/ingestMSSQL here
  // keeping empty for brevity since you already sync via route
  return;
}, connection);



--------------------------------------------------------------------------------
FILE: backend\data-service\tsconfig.json
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    /* Node 18+ friendly output */
    "target": "ES2022",
    "lib": ["ES2022"],
    "module": "CommonJS",
    "moduleResolution": "Node",

    /* Project structure */
    "rootDir": "src",
    "outDir": "dist",

    /* Build mode support (so `tsc --build` works) */
    "composite": true,
    "tsBuildInfoFile": "dist/.tsbuildinfo",

    /* Interop / JSON */
    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "resolveJsonModule": true,

    /* Strictness & hygiene */
    "strict": true,
    "noImplicitOverride": true,
    "forceConsistentCasingInFileNames": true,
    "skipLibCheck": true,
    "noEmitOnError": true,

    /* Node types */
    "types": ["node"],

    /* Nice absolute imports like "@/utils/logger" */
    "baseUrl": "src",
    "paths": {
      "@/*": ["*"]
    },

    /* Useful in dev; keep if you want stack traces mapped to TS */
    "sourceMap": true
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "dist",
    "node_modules"
  ]
}



========================================================================================================================
  BACKEND SERVICE: AI-SERVICE
========================================================================================================================


--------------------------------------------------------------------------------
FILE: backend\ai-service\.env
--------------------------------------------------------------------------------
NODE_ENV=development
PORT=8003
HOST=0.0.0.0

# OpenAI (real)
OPENAI_API_KEY=sk-xxxxxxx
OPENAI_MODEL=gpt-4o-mini
OPENAI_MAX_TOKENS=3000
OPENAI_TEMPERATURE=0.1

# --- Auth (dev) ---
JWT_SECRET=cwic-dev-secret
JWT_ISSUER=cwic
JWT_AUDIENCE=cwic-web
JWT_ALLOWED_ALGS=HS256
AUTH_COOKIE=auth_token

# Rate limits (optional)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# CORS (optional, comma-separated)
CORS_ORIGINS=http://localhost:3000,http://localhost:5173



--------------------------------------------------------------------------------
FILE: backend\ai-service\Dockerfile
--------------------------------------------------------------------------------
# Build
FROM node:20-alpine AS build
WORKDIR /app
COPY package*.json ./
RUN npm ci
COPY . .
RUN npm run build

# Runtime
FROM node:20-alpine
WORKDIR /app
RUN apk add --no-cache curl
COPY --from=build /app/package*.json ./
RUN npm ci --omit=dev
COPY --from=build /app/dist ./dist
EXPOSE 3003
HEALTHCHECK --interval=10s --timeout=3s --start-period=10s --retries=3 \
    CMD curl -fsS http://127.0.0.1:3003/health || exit 1

CMD ["node","dist/server.js"]



--------------------------------------------------------------------------------
FILE: backend\ai-service\Dockerfile.dev
--------------------------------------------------------------------------------
FROM node:20-alpine

WORKDIR /app
RUN apk add --no-cache curl

# Use npm@9 to dodge npm@10 workspace quirks
RUN corepack enable && corepack prepare npm@9.9.3 --activate

# Install without the lockfile (more forgiving for dev images)
COPY package.json ./
RUN npm install --no-audit --no-fund

# Bring in source
COPY . .

EXPOSE 3003
HEALTHCHECK --interval=10s --timeout=3s --start-period=15s --retries=3 \
    CMD node -e "require('http').get('http://127.0.0.1:3003/health',r=>process.exit(r.statusCode===200?0:1)).on('error',()=>process.exit(1))"

CMD ["npm","run","dev"]



--------------------------------------------------------------------------------
FILE: backend\ai-service\logs.6b77785a74c362881f6fb7e95a7530280abbf9ed-audit.json
--------------------------------------------------------------------------------
{
    "keep": {
        "days": true,
        "amount": 14
    },
    "auditLog": "logs\\.6b77785a74c362881f6fb7e95a7530280abbf9ed-audit.json",
    "files": [
        {
            "date": 1757762677960,
            "name": "logs/error-2025-09-13.log",
            "hash": "3afb956821d71cd2727380dd4b67a6c1087ef74e4e0a1b081fdd98a5298ec8a0"
        }
    ],
    "hashType": "sha256"
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\logs.ca6dad43b7d35307d69543a741eb24d3ce997028-audit.json
--------------------------------------------------------------------------------
{
    "keep": {
        "days": true,
        "amount": 14
    },
    "auditLog": "logs\\.ca6dad43b7d35307d69543a741eb24d3ce997028-audit.json",
    "files": [
        {
            "date": 1757762678007,
            "name": "logs/combined-2025-09-13.log",
            "hash": "59b5d3699fe8ce79d9a0c40462550397fb12cbf899dbf0e704967ae82f97d2f0"
        }
    ],
    "hashType": "sha256"
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\package.json
--------------------------------------------------------------------------------
{
  "name": "cwic-ai-service",
  "version": "1.0.0",
  "description": "AI Service for CWIC Data Governance Platform",
  "main": "dist/server.js",
  "scripts": {
    "start": "node dist/server.js",
    "dev": "cross-env NODE_ENV=development TS_NODE_TRANSPILE_ONLY=1 nodemon --watch src --ext ts,json --exec \"ts-node -r tsconfig-paths/register src/server.ts\"",
    "build": "tsc",
    "build:prod": "tsc && tsc-alias && npm run copy-assets",
    "copy-assets": "node -e \"try{require('fs').cpSync('src/assets','dist/assets',{recursive:true})}catch(e){}\"",
    "test": "jest",
    "test:watch": "jest --watch",
    "test:coverage": "jest --coverage",
    "lint": "eslint \"src/**/*.ts\"",
    "lint:fix": "eslint \"src/**/*.ts\" --fix",
    "format": "prettier --write \"src/**/*.ts\"",
    "typecheck": "tsc --noEmit",
    "clean": "node -e \"try{require('fs').rmSync('dist',{recursive:true,force:true})}catch(e){}\"",
    "docker:build": "docker build -t cwic-ai-service .",
    "docker:run": "docker run -p 8003:8003 cwic-ai-service",
    "docker:dev": "docker-compose -f docker-compose.dev.yml up",
    "docker:prod": "docker-compose up -d",
    "setup": "npm install && npm run build",
    "prepare": "node -e \"try{require('husky').install()}catch(e){process.exit(0)}\""
  },
  "dependencies": {
    "axios": "^1.5.0",
    "bcryptjs": "^2.4.3",
    "compression": "^1.7.4",
    "cors": "^2.8.5",
    "csv-parser": "^3.0.0",
    "cwic-platform": "file:../..",
    "dotenv": "^16.3.1",
    "express": "^4.18.2",
    "express-rate-limit": "^6.11.2",
    "express-validator": "^7.0.1",
    "helmet": "^7.2.0",
    "joi": "^17.9.2",
    "jsonwebtoken": "^9.0.2",
    "morgan": "^1.10.1",
    "multer": "^1.4.5-lts.1",
    "node-cron": "^3.0.2",
    "openai": "^4.104.0",
    "pg": "^8.11.3",
    "prom-client": "^14.2.0",
    "redis": "^4.6.8",
    "uuid": "^9.0.1",
    "winston": "^3.10.0",
    "winston-daily-rotate-file": "^4.7.1",
    "xlsx": "^0.18.5",
    "zod": "^3.25.76"
  },
  "devDependencies": {
    "@types/bcryptjs": "^2.4.2",
    "@types/compression": "^1.7.2",
    "@types/cors": "^2.8.13",
    "@types/express": "^5.0.3",
    "@types/helmet": "^0.0.48",
    "@types/jest": "^29.5.4",
    "@types/jsonwebtoken": "^9.0.2",
    "@types/morgan": "^1.9.10",
    "@types/multer": "^1.4.7",
    "@types/node": "^20.19.11",
    "@types/node-cron": "^3.0.8",
    "@types/pg": "^8.10.2",
    "@types/supertest": "^2.0.12",
    "@types/uuid": "^9.0.8",
    "@typescript-eslint/eslint-plugin": "^6.2.1",
    "@typescript-eslint/parser": "^6.2.1",
    "cross-env": "^10.0.0",
    "eslint": "^8.46.0",
    "husky": "^8.0.3",
    "jest": "^29.6.2",
    "lint-staged": "^13.2.3",
    "nodemon": "^3.1.10",
    "prettier": "^3.0.1",
    "supertest": "^6.3.3",
    "ts-jest": "^29.1.1",
    "ts-node": "^10.9.2",
    "tsc-alias": "^1.8.16",
    "tsconfig-paths": "^4.2.0",
    "typescript": "^5.9.2"
  },
  "engines": {
    "node": ">=18.0.0",
    "npm": ">=8.0.0"
  },
  "keywords": [
    "ai",
    "data-governance",
    "discovery",
    "openai",
    "typescript",
    "microservice"
  ],
  "author": "CWIC Team",
  "license": "MIT",
  "lint-staged": {
    "*.ts": [
      "eslint --fix",
      "prettier --write",
      "git add"
    ]
  }
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\package-lock.json
--------------------------------------------------------------------------------
{
  "name": "cwic-ai-service",
  "version": "1.0.0",
  "lockfileVersion": 3,
  "requires": true,
  "packages": {
    "": {
      "name": "cwic-ai-service",
      "version": "1.0.0",
      "license": "MIT",
      "dependencies": {
        "axios": "^1.5.0",
        "bcryptjs": "^2.4.3",
        "compression": "^1.7.4",
        "cors": "^2.8.5",
        "csv-parser": "^3.0.0",
        "cwic-platform": "file:../..",
        "dotenv": "^16.3.1",
        "express": "^4.18.2",
        "express-rate-limit": "^6.11.2",
        "express-validator": "^7.0.1",
        "helmet": "^7.2.0",
        "joi": "^17.9.2",
        "jsonwebtoken": "^9.0.2",
        "morgan": "^1.10.1",
        "multer": "^1.4.5-lts.1",
        "node-cron": "^3.0.2",
        "openai": "^4.104.0",
        "pg": "^8.11.3",
        "prom-client": "^14.2.0",
        "redis": "^4.6.8",
        "uuid": "^9.0.1",
        "winston": "^3.10.0",
        "winston-daily-rotate-file": "^4.7.1",
        "xlsx": "^0.18.5",
        "zod": "^3.25.76"
      },
      "devDependencies": {
        "@types/bcryptjs": "^2.4.2",
        "@types/compression": "^1.7.2",
        "@types/cors": "^2.8.13",
        "@types/express": "^5.0.3",
        "@types/helmet": "^0.0.48",
        "@types/jest": "^29.5.4",
        "@types/jsonwebtoken": "^9.0.2",
        "@types/morgan": "^1.9.10",
        "@types/multer": "^1.4.7",
        "@types/node": "^20.19.11",
        "@types/node-cron": "^3.0.8",
        "@types/pg": "^8.10.2",
        "@types/supertest": "^2.0.12",
        "@types/uuid": "^9.0.8",
        "@typescript-eslint/eslint-plugin": "^6.2.1",
        "@typescript-eslint/parser": "^6.2.1",
        "cross-env": "^10.0.0",
        "eslint": "^8.46.0",
        "husky": "^8.0.3",
        "jest": "^29.6.2",
        "lint-staged": "^13.2.3",
        "nodemon": "^3.1.10",
        "prettier": "^3.0.1",
        "supertest": "^6.3.3",
        "ts-jest": "^29.1.1",
        "ts-node": "^10.9.2",
        "tsc-alias": "^1.8.16",
        "tsconfig-paths": "^4.2.0",
        "typescript": "^5.9.2"
      },
      "engines": {
        "node": ">=18.0.0",
        "npm": ">=8.0.0"
      }
    },
    "../..": {
      "version": "1.0.0",
      "license": "MIT",
      "workspaces": [
        "frontend",
        "backend/*"
      ],
      "devDependencies": {
        "@types/express": "^4.17.23",
        "@types/express-serve-static-core": "^4.19.6",
        "concurrently": "^8.2.0",
        "cross-env": "^7.0.3",
        "cross-env-shell": "^7.0.3"
      }
    },
    "node_modules/@babel/code-frame": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/code-frame/-/code-frame-7.27.1.tgz",
      "integrity": "sha512-cjQ7ZlQ0Mv3b47hABuTevyTuYN4i+loJKGeV9flcCgIK37cCXRh+L1bd3iBHlynerhQ7BhCkn2BPbQUL+rGqFg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-validator-identifier": "^7.27.1",
        "js-tokens": "^4.0.0",
        "picocolors": "^1.1.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/compat-data": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/compat-data/-/compat-data-7.28.4.tgz",
      "integrity": "sha512-YsmSKC29MJwf0gF8Rjjrg5LQCmyh+j/nD8/eP7f+BeoQTKYqs9RoWbjGOdy0+1Ekr68RJZMUOPVQaQisnIo4Rw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/core": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/core/-/core-7.28.4.tgz",
      "integrity": "sha512-2BCOP7TN8M+gVDj7/ht3hsaO/B/n5oDbiAyyvnRlNOs+u1o+JWNYTQrmpuNp1/Wq2gcFrI01JAW+paEKDMx/CA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-compilation-targets": "^7.27.2",
        "@babel/helper-module-transforms": "^7.28.3",
        "@babel/helpers": "^7.28.4",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/traverse": "^7.28.4",
        "@babel/types": "^7.28.4",
        "@jridgewell/remapping": "^2.3.5",
        "convert-source-map": "^2.0.0",
        "debug": "^4.1.0",
        "gensync": "^1.0.0-beta.2",
        "json5": "^2.2.3",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/babel"
      }
    },
    "node_modules/@babel/core/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/generator": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/generator/-/generator-7.28.3.tgz",
      "integrity": "sha512-3lSpxGgvnmZznmBkCRnVREPUFJv2wrv9iAoFDvADJc0ypmdOxdUtcLeBgBJ6zE0PMeTKnxeQzyk0xTBq4Ep7zw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.28.3",
        "@babel/types": "^7.28.2",
        "@jridgewell/gen-mapping": "^0.3.12",
        "@jridgewell/trace-mapping": "^0.3.28",
        "jsesc": "^3.0.2"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/helper-compilation-targets/-/helper-compilation-targets-7.27.2.tgz",
      "integrity": "sha512-2+1thGUUWWjLTYTHZWK1n8Yga0ijBz1XAhUXcKy81rd5g6yh7hGqMp45v7cadSbEHc9G3OTv45SyneRN3ps4DQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/compat-data": "^7.27.2",
        "@babel/helper-validator-option": "^7.27.1",
        "browserslist": "^4.24.0",
        "lru-cache": "^5.1.1",
        "semver": "^6.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-compilation-targets/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/@babel/helper-globals": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@babel/helper-globals/-/helper-globals-7.28.0.tgz",
      "integrity": "sha512-+W6cISkXFa1jXsDEdYA8HeevQT/FULhxzR99pxphltZcVaugps53THCeiWA8SguxxpSp3gKPiuYfSWopkLQ4hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-imports": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-imports/-/helper-module-imports-7.27.1.tgz",
      "integrity": "sha512-0gSFWUPNXNopqtIPQvlD5WgXYI5GY2kP2cCvoT8kczjbfcfuIljTbcWrulD1CIPIX2gt1wghbDy08yE1p+/r3w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/traverse": "^7.27.1",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-module-transforms": {
      "version": "7.28.3",
      "resolved": "https://registry.npmjs.org/@babel/helper-module-transforms/-/helper-module-transforms-7.28.3.tgz",
      "integrity": "sha512-gytXUbs8k2sXS9PnQptz5o0QnpLL51SwASIORY6XaBKF88nsOT0Zw9szLqlSGQDP/4TljBAD5y98p2U1fqkdsw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-module-imports": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1",
        "@babel/traverse": "^7.28.3"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/@babel/helper-plugin-utils": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-plugin-utils/-/helper-plugin-utils-7.27.1.tgz",
      "integrity": "sha512-1gn1Up5YXka3YYAHGKpbideQ5Yjf1tDa9qYcgysz+cNCXukyLl6DjPXhD3VRwSb8c0J9tA4b2+rHEZtc6R0tlw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-string-parser": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-string-parser/-/helper-string-parser-7.27.1.tgz",
      "integrity": "sha512-qMlSxKbpRlAridDExk92nSobyDdpPijUq2DW6oDnUqd0iOGxmQjyqhMIihI9+zv4LPyZdRje2cavWPbCbWm3eA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-identifier": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-identifier/-/helper-validator-identifier-7.27.1.tgz",
      "integrity": "sha512-D2hP9eA+Sqx1kBZgzxZh0y1trbuU+JoDkiEwqhQ36nodYqJwyEIhPSdMNd7lOm/4io72luTPWH20Yda0xOuUow==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helper-validator-option": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/helper-validator-option/-/helper-validator-option-7.27.1.tgz",
      "integrity": "sha512-YvjJow9FxbhFFKDSuFnVCe2WxXk1zWc22fFePVNEaWJEu8IrZVlda6N0uHwzZrUM1il7NC9Mlp4MaJYbYd9JSg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/helpers": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/helpers/-/helpers-7.28.4.tgz",
      "integrity": "sha512-HFN59MmQXGHVyYadKLVumYsA9dBFun/ldYxipEjzA4196jpLZd8UjEEBLkbEkvfYreDqJhZxYAWFPtrfhNpj4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/parser": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/parser/-/parser-7.28.4.tgz",
      "integrity": "sha512-yZbBqeM6TkpP9du/I2pUZnJsRMGGvOuIrhjzC1AwHwW+6he4mni6Bp/m8ijn0iOuZuPI2BfkCoSRunpyjnrQKg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.4"
      },
      "bin": {
        "parser": "bin/babel-parser.js"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@babel/plugin-syntax-async-generators": {
      "version": "7.8.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-async-generators/-/plugin-syntax-async-generators-7.8.4.tgz",
      "integrity": "sha512-tycmZxkGfZaxhMRbXlPXuVFpdWlXpir2W4AMhSJgRKzk/eDlIXOhb2LHWoLpDF7TEHylV5zNhykX6KAgHJmTNw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-bigint": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-bigint/-/plugin-syntax-bigint-7.8.3.tgz",
      "integrity": "sha512-wnTnFlG+YxQm3vDxpGE57Pj0srRU4sHE/mDkt1qv2YJJSeUAec2ma4WLUnUPeKjyrfntVwe/N6dCXpU+zL3Npg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-class-properties": {
      "version": "7.12.13",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-class-properties/-/plugin-syntax-class-properties-7.12.13.tgz",
      "integrity": "sha512-fm4idjKla0YahUNgFNLCB0qySdsoPiZP3iQE3rky0mBUtMZ23yDJ9SJdg6dXTSDnulOVqiF3Hgr9nbXvXTQZYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.12.13"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-class-static-block": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-class-static-block/-/plugin-syntax-class-static-block-7.14.5.tgz",
      "integrity": "sha512-b+YyPmr6ldyNnM6sqYeMWE+bgJcJpO6yS4QD7ymxgH34GBPNDM/THBh8iunyvKIZztiwLH4CJZ0RxTk9emgpjw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-attributes": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-attributes/-/plugin-syntax-import-attributes-7.27.1.tgz",
      "integrity": "sha512-oFT0FrKHgF53f4vOsZGi2Hh3I35PfSmVs4IBFLFj4dnafP+hIWDLg3VyKmUHfLoLHlyxY4C7DGtmHuJgn+IGww==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-import-meta": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-import-meta/-/plugin-syntax-import-meta-7.10.4.tgz",
      "integrity": "sha512-Yqfm+XDx0+Prh3VSeEQCPU81yC+JWZ2pDPFSS4ZdpfZhp4MkFMaDC1UqseovEKwSUpnIL7+vK+Clp7bfh0iD7g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-json-strings": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-json-strings/-/plugin-syntax-json-strings-7.8.3.tgz",
      "integrity": "sha512-lY6kdGpWHvjoe2vk4WrAapEuBR69EMxZl+RoGRhrFGNYVK8mOPAW8VfbT/ZgrFbXlDNiiaxQnAtgVCZ6jv30EA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-jsx": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-jsx/-/plugin-syntax-jsx-7.27.1.tgz",
      "integrity": "sha512-y8YTNIeKoyhGd9O0Jiyzyyqk8gdjnumGTQPsz0xOZOQ2RmkVJeZ1vmmfIvFEKqucBG6axJGBZDE/7iI5suUI/w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-logical-assignment-operators": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-logical-assignment-operators/-/plugin-syntax-logical-assignment-operators-7.10.4.tgz",
      "integrity": "sha512-d8waShlpFDinQ5MtvGU9xDAOzKH47+FFoney2baFIoMr952hKOLp1HR7VszoZvOsV/4+RRszNY7D17ba0te0ig==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-nullish-coalescing-operator": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-nullish-coalescing-operator/-/plugin-syntax-nullish-coalescing-operator-7.8.3.tgz",
      "integrity": "sha512-aSff4zPII1u2QD7y+F8oDsz19ew4IGEJg9SVW+bqwpwtfFleiQDMdzA/R+UlWDzfnHFCxxleFT0PMIrR36XLNQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-numeric-separator": {
      "version": "7.10.4",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-numeric-separator/-/plugin-syntax-numeric-separator-7.10.4.tgz",
      "integrity": "sha512-9H6YdfkcK/uOnY/K7/aA2xpzaAgkQn37yzWUMRK7OaPOqOpGS1+n0H5hxT9AUw9EsSjPW8SVyMJwYRtWs3X3ug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.10.4"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-object-rest-spread": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-object-rest-spread/-/plugin-syntax-object-rest-spread-7.8.3.tgz",
      "integrity": "sha512-XoqMijGZb9y3y2XskN+P1wUGiVwWZ5JmoDRwx5+3GmEplNyVM2s2Dg8ILFQm8rWM48orGy5YpI5Bl8U1y7ydlA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-optional-catch-binding": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-optional-catch-binding/-/plugin-syntax-optional-catch-binding-7.8.3.tgz",
      "integrity": "sha512-6VPD0Pc1lpTqw0aKoeRTMiB+kWhAoT24PA+ksWSBrFtl5SIRVpZlwN3NNPQjehA2E/91FV3RjLWoVTglWcSV3Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-optional-chaining": {
      "version": "7.8.3",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-optional-chaining/-/plugin-syntax-optional-chaining-7.8.3.tgz",
      "integrity": "sha512-KoK9ErH1MBlCPxV0VANkXW2/dw4vlbGDrFgz8bmUsBGYkFRcbRwMh6cIJubdPrkxRwuGdtCk0v/wPTKbQgBjkg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.8.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-private-property-in-object": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-private-property-in-object/-/plugin-syntax-private-property-in-object-7.14.5.tgz",
      "integrity": "sha512-0wVnp9dxJ72ZUJDV27ZfbSj6iHLoytYZmh3rFcxNnvsJF3ktkzLDZPy/mA17HGsaQT3/DQsWYX1f1QGWkCoVUg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-top-level-await": {
      "version": "7.14.5",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-top-level-await/-/plugin-syntax-top-level-await-7.14.5.tgz",
      "integrity": "sha512-hx++upLv5U1rgYfwe1xBQUhRmU41NEvpUvrp8jkrSCdvGSnM5/qdRMtylJ6PG5OFkBaHkbTAKTnd3/YyESRHFw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.14.5"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/plugin-syntax-typescript": {
      "version": "7.27.1",
      "resolved": "https://registry.npmjs.org/@babel/plugin-syntax-typescript/-/plugin-syntax-typescript-7.27.1.tgz",
      "integrity": "sha512-xfYCBMxveHrRMnAWl1ZlPXOZjzkN82THFvLhQhFXFt81Z5HnN+EtUkZhv/zcKpmT3fzmWZB0ywiBrbC3vogbwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0-0"
      }
    },
    "node_modules/@babel/template": {
      "version": "7.27.2",
      "resolved": "https://registry.npmjs.org/@babel/template/-/template-7.27.2.tgz",
      "integrity": "sha512-LPDZ85aEJyYSd18/DkjNh4/y1ntkE5KwUHWTiqgRxruuZL2F1yuHligVHLvcHY2vMHXttKFpJn6LwfI7cw7ODw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/parser": "^7.27.2",
        "@babel/types": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/traverse": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/traverse/-/traverse-7.28.4.tgz",
      "integrity": "sha512-YEzuboP2qvQavAcjgQNVgsvHIDv6ZpwXvcvjmyySP2DIMuByS/6ioU5G9pYrWHM6T2YDfc7xga9iNzYOs12CFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.27.1",
        "@babel/generator": "^7.28.3",
        "@babel/helper-globals": "^7.28.0",
        "@babel/parser": "^7.28.4",
        "@babel/template": "^7.27.2",
        "@babel/types": "^7.28.4",
        "debug": "^4.3.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@babel/types": {
      "version": "7.28.4",
      "resolved": "https://registry.npmjs.org/@babel/types/-/types-7.28.4.tgz",
      "integrity": "sha512-bkFqkLhh3pMBUQQkpVgWDWq/lqzc2678eUyDlTBhRqhCHFguYYGM0Efga7tYk4TogG/3x0EEl66/OQ+WGbWB/Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/helper-string-parser": "^7.27.1",
        "@babel/helper-validator-identifier": "^7.27.1"
      },
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/@bcoe/v8-coverage": {
      "version": "0.2.3",
      "resolved": "https://registry.npmjs.org/@bcoe/v8-coverage/-/v8-coverage-0.2.3.tgz",
      "integrity": "sha512-0hYQ8SB4Db5zvZB4axdMHGwEaQjkZzFjQiN9LVYvIFB2nSUHW9tYpxWriPrWDASIxiaXax83REcLxuSdnGPZtw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@colors/colors": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/@colors/colors/-/colors-1.6.0.tgz",
      "integrity": "sha512-Ir+AOibqzrIsL6ajt3Rz3LskB7OiMVHqltZmspbW/TJuTVuyOMirVqAkjfY6JISiLHgyNqicAC8AyHHGzNd/dA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.1.90"
      }
    },
    "node_modules/@cspotcode/source-map-support": {
      "version": "0.8.1",
      "resolved": "https://registry.npmjs.org/@cspotcode/source-map-support/-/source-map-support-0.8.1.tgz",
      "integrity": "sha512-IchNf6dN4tHoMFIn/7OE8LWZ19Y6q/67Bmf6vnGREv8RSbBVb9LPJxEcnwrcwX6ixSvaiGoomAUvu4YSxXrVgw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/trace-mapping": "0.3.9"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/@cspotcode/source-map-support/node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.9",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.9.tgz",
      "integrity": "sha512-3Belt6tdc8bPgAtbcmdtNJlirVoTmEb5e2gC94PnkwEW9jI6CAHUeoG85tjWP5WquqfavoMtMwiG4P926ZKKuQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.0.3",
        "@jridgewell/sourcemap-codec": "^1.4.10"
      }
    },
    "node_modules/@dabh/diagnostics": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@dabh/diagnostics/-/diagnostics-2.0.3.tgz",
      "integrity": "sha512-hrlQOIi7hAfzsMqlGSFyVucrx38O+j6wiGOf//H2ecvIEqYN4ADBSS2iLMh5UFyDunCNniUIPk/q3riFv45xRA==",
      "license": "MIT",
      "dependencies": {
        "colorspace": "1.1.x",
        "enabled": "2.0.x",
        "kuler": "^2.0.0"
      }
    },
    "node_modules/@epic-web/invariant": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/@epic-web/invariant/-/invariant-1.0.0.tgz",
      "integrity": "sha512-lrTPqgvfFQtR/eY/qkIzp98OGdNJu0m5ji3q/nJI8v3SXkRKEnWiOxMmbvcSoAIzv/cGiuvRy57k4suKQSAdwA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@eslint-community/eslint-utils": {
      "version": "4.8.0",
      "resolved": "https://registry.npmjs.org/@eslint-community/eslint-utils/-/eslint-utils-4.8.0.tgz",
      "integrity": "sha512-MJQFqrZgcW0UNYLGOuQpey/oTN59vyWwplvCGZztn1cKz9agZPPYpJB7h2OMmuu7VLqkvEjN8feFZJmxNF9D+Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eslint-visitor-keys": "^3.4.3"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      },
      "peerDependencies": {
        "eslint": "^6.0.0 || ^7.0.0 || >=8.0.0"
      }
    },
    "node_modules/@eslint-community/regexpp": {
      "version": "4.12.1",
      "resolved": "https://registry.npmjs.org/@eslint-community/regexpp/-/regexpp-4.12.1.tgz",
      "integrity": "sha512-CCZCDJuduB9OUkFkY2IgppNZMi2lBQgD2qzwXkEia16cge2pijY/aXi96CJMquDMn3nJdlPV1A5KrJEXwfLNzQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.0.0 || ^14.0.0 || >=16.0.0"
      }
    },
    "node_modules/@eslint/eslintrc": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/@eslint/eslintrc/-/eslintrc-2.1.4.tgz",
      "integrity": "sha512-269Z39MS6wVJtsoUl10L60WdkhJVdPG24Q4eZTH3nnF6lpvSShEK3wQjDX9JRWAUPvPh7COouPpU9IrqaZFvtQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ajv": "^6.12.4",
        "debug": "^4.3.2",
        "espree": "^9.6.0",
        "globals": "^13.19.0",
        "ignore": "^5.2.0",
        "import-fresh": "^3.2.1",
        "js-yaml": "^4.1.0",
        "minimatch": "^3.1.2",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@eslint/eslintrc/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@eslint/js": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/@eslint/js/-/js-8.57.1.tgz",
      "integrity": "sha512-d9zaMRSTIKDLhctzH12MtXvJKSSUhaHcjV+2Z+GK+EEY7XKpP5yR4x+N3TAcHTcu963nIr+TMcCb4DBCYX1z6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      }
    },
    "node_modules/@hapi/hoek": {
      "version": "9.3.0",
      "resolved": "https://registry.npmjs.org/@hapi/hoek/-/hoek-9.3.0.tgz",
      "integrity": "sha512-/c6rf4UJlmHlC9b5BaNvzAcFv7HZ2QHaV0D4/HNlBdvFnvQq8RI4kYdhyPCl7Xj+oWvTWQ8ujhqS53LIgAe6KQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@hapi/topo": {
      "version": "5.1.0",
      "resolved": "https://registry.npmjs.org/@hapi/topo/-/topo-5.1.0.tgz",
      "integrity": "sha512-foQZKJig7Ob0BMAYBfcJk8d77QtOe7Wo4ox7ff1lQYoNNAb6jwcY1ncdoy2e9wQZzvNy7ODZCYJkK8kzmcAnAg==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@hapi/hoek": "^9.0.0"
      }
    },
    "node_modules/@humanwhocodes/config-array": {
      "version": "0.13.0",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/config-array/-/config-array-0.13.0.tgz",
      "integrity": "sha512-DZLEEqFWQFiyK6h5YIeynKx7JlvCYWL0cImfSRXZ9l4Sg2efkFGTuFf6vzXjK1cq6IYkU+Eg/JizXw+TD2vRNw==",
      "deprecated": "Use @eslint/config-array instead",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "@humanwhocodes/object-schema": "^2.0.3",
        "debug": "^4.3.1",
        "minimatch": "^3.0.5"
      },
      "engines": {
        "node": ">=10.10.0"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/@humanwhocodes/config-array/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/@humanwhocodes/module-importer": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/module-importer/-/module-importer-1.0.1.tgz",
      "integrity": "sha512-bxveV4V8v5Yb4ncFTT3rPSgZBOpCkjfK0y4oVVVJwIuDVBRMDXrPyXRL988i5ap9m9bnyEEjWfm5WkBmtffLfA==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=12.22"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/nzakas"
      }
    },
    "node_modules/@humanwhocodes/object-schema": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@humanwhocodes/object-schema/-/object-schema-2.0.3.tgz",
      "integrity": "sha512-93zYdMES/c1D69yZiKDBj0V24vqNzB/koF26KPaagAfd3P/4gUlh3Dys5ogAK+Exi9QyzlD8x/08Zt7wIKcDcA==",
      "deprecated": "Use @eslint/object-schema instead",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/@istanbuljs/load-nyc-config": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@istanbuljs/load-nyc-config/-/load-nyc-config-1.1.0.tgz",
      "integrity": "sha512-VjeHSlIzpv/NyD3N0YuHfXOPDIixcA1q2ZV98wsMqcYlPmv2n3Yb2lYP9XMElnaFVXg5A7YLTeLu6V84uQDjmQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "camelcase": "^5.3.1",
        "find-up": "^4.1.0",
        "get-package-type": "^0.1.0",
        "js-yaml": "^3.13.1",
        "resolve-from": "^5.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/argparse": {
      "version": "1.0.10",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-1.0.10.tgz",
      "integrity": "sha512-o5Roy6tNG4SL/FOkCAN6RzjiakZS25RLYFrcMttJqbdd8BWrnA+fGz57iN5Pb06pvBGvl5gQ0B48dJlslXvoTg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "sprintf-js": "~1.0.2"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/find-up": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-4.1.0.tgz",
      "integrity": "sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^5.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/js-yaml": {
      "version": "3.14.1",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-3.14.1.tgz",
      "integrity": "sha512-okMH7OXXJ7YrN9Ok3/SXrnu4iX9yOk+25nqX4imS2npuvTYDmo/QEZoqwZkYaIDk3jVvBOTOIEgEhaLOynBS9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^1.0.7",
        "esprima": "^4.0.0"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/locate-path": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-5.0.0.tgz",
      "integrity": "sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^4.1.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/p-limit": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-2.3.0.tgz",
      "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-try": "^2.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/p-locate": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-4.1.0.tgz",
      "integrity": "sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^2.2.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/load-nyc-config/node_modules/resolve-from": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
      "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@istanbuljs/schema": {
      "version": "0.1.3",
      "resolved": "https://registry.npmjs.org/@istanbuljs/schema/-/schema-0.1.3.tgz",
      "integrity": "sha512-ZXRY4jNvVgSVQ8DL3LTcakaAtXwTVUxE81hslsyD2AtoXW/wVob10HkOJ1X/pAlcI7D+2YoZKg5do8G/w6RYgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/@jest/console": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/console/-/console-29.7.0.tgz",
      "integrity": "sha512-5Ni4CU7XHQi32IJ398EEP4RrB8eV09sXP2ROqD4bksHrnTree52PsxvX8tpL8LvTZ3pFzXyPbNQReSN41CAhOg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/core": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/core/-/core-29.7.0.tgz",
      "integrity": "sha512-n7aeXWKMnGtDA48y8TLWJPJmLmmZ642Ceo78cYWEpiD7FzDgmNDV/GCVRorPABdXLJZ/9wzzgZAlHjXjxDHGsg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/reporters": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "ansi-escapes": "^4.2.1",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "exit": "^0.1.2",
        "graceful-fs": "^4.2.9",
        "jest-changed-files": "^29.7.0",
        "jest-config": "^29.7.0",
        "jest-haste-map": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-resolve-dependencies": "^29.7.0",
        "jest-runner": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "jest-watcher": "^29.7.0",
        "micromatch": "^4.0.4",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/@jest/environment": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/environment/-/environment-29.7.0.tgz",
      "integrity": "sha512-aQIfHDq33ExsN4jP1NWGXhxgQ/wixs60gDiKO+XVMd8Mn0NWPWgc34ZQDTb2jKaUWQ7MuwoitXAsN2XVXNMpAw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/fake-timers": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-mock": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/expect": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/expect/-/expect-29.7.0.tgz",
      "integrity": "sha512-8uMeAMycttpva3P1lBHB8VciS9V0XAr3GymPpipdyQXbBcuhkLQOSe8E/p92RyAdToS6ZD1tFkX+CkhoECE0dQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "expect": "^29.7.0",
        "jest-snapshot": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/expect-utils": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/expect-utils/-/expect-utils-29.7.0.tgz",
      "integrity": "sha512-GlsNBWiFQFCVi9QVSx7f5AgMeLxe9YCCs5PuP2O2LdjDAA8Jh9eX7lA1Jq/xdXw3Wb3hyvlFNfZIfcRetSzYcA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-get-type": "^29.6.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/fake-timers": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/fake-timers/-/fake-timers-29.7.0.tgz",
      "integrity": "sha512-q4DH1Ha4TTFPdxLsqDXK1d3+ioSL7yL5oCMJZgDYm6i+6CygW5E5xVr/D1HdsGxjt1ZWSfUAs9OxSB/BNelWrQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@sinonjs/fake-timers": "^10.0.2",
        "@types/node": "*",
        "jest-message-util": "^29.7.0",
        "jest-mock": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/globals": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/globals/-/globals-29.7.0.tgz",
      "integrity": "sha512-mpiz3dutLbkW2MNFubUGUEVLkTGiqW6yLVTA+JbP6fI6J5iL9Y0Nlg8k95pcF8ctKwCS7WVxteBs29hhfAotzQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/expect": "^29.7.0",
        "@jest/types": "^29.6.3",
        "jest-mock": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/reporters": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/reporters/-/reporters-29.7.0.tgz",
      "integrity": "sha512-DApq0KJbJOEzAFYjHADNNxAE3KbhxQB1y5Kplb5Waqw6zVbuWatSnMjE5gs8FUgEPmNsnZA3NCWl9NG0ia04Pg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@bcoe/v8-coverage": "^0.2.3",
        "@jest/console": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@jridgewell/trace-mapping": "^0.3.18",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "collect-v8-coverage": "^1.0.0",
        "exit": "^0.1.2",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "istanbul-lib-coverage": "^3.0.0",
        "istanbul-lib-instrument": "^6.0.0",
        "istanbul-lib-report": "^3.0.0",
        "istanbul-lib-source-maps": "^4.0.0",
        "istanbul-reports": "^3.1.3",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-worker": "^29.7.0",
        "slash": "^3.0.0",
        "string-length": "^4.0.1",
        "strip-ansi": "^6.0.0",
        "v8-to-istanbul": "^9.0.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/@jest/schemas": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/schemas/-/schemas-29.6.3.tgz",
      "integrity": "sha512-mo5j5X+jIZmJQveBKeS/clAueipV7KgiX1vMgCxam1RNYiqE1w62n0/tJJnHtjW8ZHcQco5gY85jA3mi0L+nSA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@sinclair/typebox": "^0.27.8"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/source-map": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/source-map/-/source-map-29.6.3.tgz",
      "integrity": "sha512-MHjT95QuipcPrpLM+8JMSzFx6eHp5Bm+4XeFDJlwsvVBjmKNiIAvasGK2fxz2WbGRlnvqehFbh07MMa7n3YJnw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/trace-mapping": "^0.3.18",
        "callsites": "^3.0.0",
        "graceful-fs": "^4.2.9"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/test-result": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/test-result/-/test-result-29.7.0.tgz",
      "integrity": "sha512-Fdx+tv6x1zlkJPcWXmMDAG2HBnaR9XPSd5aDWQVsfrZmLVT3lU1cwyxLgRmXR9yrq4NBoEm9BMsfgFzTQAbJYA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/istanbul-lib-coverage": "^2.0.0",
        "collect-v8-coverage": "^1.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/test-sequencer": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/test-sequencer/-/test-sequencer-29.7.0.tgz",
      "integrity": "sha512-GQwJ5WZVrKnOJuiYiAF52UNUJXgTZx1NHjFSEB0qEMmSZKAkdMoIzw/Cj6x6NF4AvV23AUqDpFzQkN/eYCYTxw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/test-result": "^29.7.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/transform": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/@jest/transform/-/transform-29.7.0.tgz",
      "integrity": "sha512-ok/BTPFzFKVMwO5eOHRrvnBVHdRy9IrsrW1GpMaQ9MCnilNLXQKmAX8s1YXDFaai9xJpac2ySzV0YeRRECr2Vw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@jest/types": "^29.6.3",
        "@jridgewell/trace-mapping": "^0.3.18",
        "babel-plugin-istanbul": "^6.1.1",
        "chalk": "^4.0.0",
        "convert-source-map": "^2.0.0",
        "fast-json-stable-stringify": "^2.1.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-util": "^29.7.0",
        "micromatch": "^4.0.4",
        "pirates": "^4.0.4",
        "slash": "^3.0.0",
        "write-file-atomic": "^4.0.2"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jest/types": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/@jest/types/-/types-29.6.3.tgz",
      "integrity": "sha512-u3UPsIilWKOM3F9CXtrG8LEJmNxwoCQC/XVj4IKYXvvpx7QIi/Kg1LI5uDmDpKlac62NUtX7eLjRh+jVZcLOzw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/schemas": "^29.6.3",
        "@types/istanbul-lib-coverage": "^2.0.0",
        "@types/istanbul-reports": "^3.0.0",
        "@types/node": "*",
        "@types/yargs": "^17.0.8",
        "chalk": "^4.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/@jridgewell/gen-mapping": {
      "version": "0.3.13",
      "resolved": "https://registry.npmjs.org/@jridgewell/gen-mapping/-/gen-mapping-0.3.13.tgz",
      "integrity": "sha512-2kkt/7niJ6MgEPxF0bYdQ6etZaA+fQvDcLKckhy1yIQOzaoKjBBjSj63/aLVjYE3qhRt5dvM+uUyfCg6UKCBbA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/sourcemap-codec": "^1.5.0",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/remapping": {
      "version": "2.3.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/remapping/-/remapping-2.3.5.tgz",
      "integrity": "sha512-LI9u/+laYG4Ds1TDKSJW2YPrIlcVYOwi2fUC6xB43lueCjgxV4lffOCZCtYFiH6TNOX+tQKXx97T4IKHbhyHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/gen-mapping": "^0.3.5",
        "@jridgewell/trace-mapping": "^0.3.24"
      }
    },
    "node_modules/@jridgewell/resolve-uri": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/@jridgewell/resolve-uri/-/resolve-uri-3.1.2.tgz",
      "integrity": "sha512-bRISgCIjP20/tbWSPWMEi54QVPRZExkuD9lJL+UIxUKtwVJA8wW1Trb1jMs1RFXo1CBTNZ/5hpC9QvmKWdopKw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/@jridgewell/sourcemap-codec": {
      "version": "1.5.5",
      "resolved": "https://registry.npmjs.org/@jridgewell/sourcemap-codec/-/sourcemap-codec-1.5.5.tgz",
      "integrity": "sha512-cYQ9310grqxueWbl+WuIUIaiUaDcj7WOq5fVhEljNVgRfOUhY9fy2zTvfoqWsnebh8Sl70VScFbICvJnLKB0Og==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@jridgewell/trace-mapping": {
      "version": "0.3.30",
      "resolved": "https://registry.npmjs.org/@jridgewell/trace-mapping/-/trace-mapping-0.3.30.tgz",
      "integrity": "sha512-GQ7Nw5G2lTu/BtHTKfXhKHok2WGetd4XYcVKGx00SjAk8GMwgJM3zr6zORiPGuOE+/vkc90KtTosSSvaCjKb2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jridgewell/resolve-uri": "^3.1.0",
        "@jridgewell/sourcemap-codec": "^1.4.14"
      }
    },
    "node_modules/@noble/hashes": {
      "version": "1.8.0",
      "resolved": "https://registry.npmjs.org/@noble/hashes/-/hashes-1.8.0.tgz",
      "integrity": "sha512-jCs9ldd7NwzpgXDIf6P3+NrHh9/sD6CQdxHyjQI+h/6rDNo88ypBxxz45UDuZHz9r3tNz7N/VInSVoVdtXEI4A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.21.3 || >=16"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      }
    },
    "node_modules/@nodelib/fs.scandir": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.scandir/-/fs.scandir-2.1.5.tgz",
      "integrity": "sha512-vq24Bq3ym5HEQm2NKCr3yXDwjc7vTsEThRDnkp2DK9p1uqLR+DHurm/NOTo0KG7HYHU7eppKZj3MyqYuMBf62g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "2.0.5",
        "run-parallel": "^1.1.9"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.stat": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.stat/-/fs.stat-2.0.5.tgz",
      "integrity": "sha512-RkhPPp2zrqDAQA/2jNhnztcPAlv64XdhIp7a7454A5ovI7Bukxgt7MX7udwAu3zg1DcpPU0rz3VV1SeaqvY4+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@nodelib/fs.walk": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/@nodelib/fs.walk/-/fs.walk-1.2.8.tgz",
      "integrity": "sha512-oGB+UxlgWcgQkgwo8GcEGwemoTFt3FIO9ababBmaGwXIoBKZ+GTy0pP185beGg7Llih/NSHSV2XAs1lnznocSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.scandir": "2.1.5",
        "fastq": "^1.6.0"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/@paralleldrive/cuid2": {
      "version": "2.2.2",
      "resolved": "https://registry.npmjs.org/@paralleldrive/cuid2/-/cuid2-2.2.2.tgz",
      "integrity": "sha512-ZOBkgDwEdoYVlSeRbYYXs0S9MejQofiVYoTbKzy/6GQa39/q5tQU2IX46+shYnUkpEl3wc+J6wRlar7r2EK2xA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@noble/hashes": "^1.1.5"
      }
    },
    "node_modules/@redis/bloom": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@redis/bloom/-/bloom-1.2.0.tgz",
      "integrity": "sha512-HG2DFjYKbpNmVXsa0keLHp/3leGJz1mjh09f2RLGGLQZzSHpkmZWuwJbAvo3QcRY8p80m5+ZdXZdYOSBLlp7Cg==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/client": {
      "version": "1.6.1",
      "resolved": "https://registry.npmjs.org/@redis/client/-/client-1.6.1.tgz",
      "integrity": "sha512-/KCsg3xSlR+nCK8/8ZYSknYxvXHwubJrU82F3Lm1Fp6789VQ0/3RJKfsmRXjqfaTA++23CvC3hqmqe/2GEt6Kw==",
      "license": "MIT",
      "dependencies": {
        "cluster-key-slot": "1.1.2",
        "generic-pool": "3.9.0",
        "yallist": "4.0.0"
      },
      "engines": {
        "node": ">=14"
      }
    },
    "node_modules/@redis/client/node_modules/yallist": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-4.0.0.tgz",
      "integrity": "sha512-3wdGidZyq5PB084XLES5TpOSRA3wjXAlIWMhum2kRcv/41Sn2emQ0dycQW4uZXLejwKvg6EsvbdlVL+FYEct7A==",
      "license": "ISC"
    },
    "node_modules/@redis/graph": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/@redis/graph/-/graph-1.1.1.tgz",
      "integrity": "sha512-FEMTcTHZozZciLRl6GiiIB4zGm5z5F3F6a6FZCyrfxdKOhFlGkiAqlexWMBzCi4DcRoyiOsuLfW+cjlGWyExOw==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/json": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/@redis/json/-/json-1.0.7.tgz",
      "integrity": "sha512-6UyXfjVaTBTJtKNG4/9Z8PSpKE6XgSyEb8iwaqDcy+uKrd/DGYHTWkUdnQDyzm727V7p21WUMhsqz5oy65kPcQ==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/search": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/@redis/search/-/search-1.2.0.tgz",
      "integrity": "sha512-tYoDBbtqOVigEDMAcTGsRlMycIIjwMCgD8eR2t0NANeQmgK/lvxNAvYyb6bZDD4frHRhIHkJu2TBRvB0ERkOmw==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@redis/time-series": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/@redis/time-series/-/time-series-1.1.0.tgz",
      "integrity": "sha512-c1Q99M5ljsIuc4YdaCwfUEXsofakb9c8+Zse2qxTadu8TalLXuAESzLvFAvNVbkmSlvlzIQOLpBCmWI9wTOt+g==",
      "license": "MIT",
      "peerDependencies": {
        "@redis/client": "^1.0.0"
      }
    },
    "node_modules/@sideway/address": {
      "version": "4.1.5",
      "resolved": "https://registry.npmjs.org/@sideway/address/-/address-4.1.5.tgz",
      "integrity": "sha512-IqO/DUQHUkPeixNQ8n0JA6102hT9CmaljNTPmQ1u8MEhBo/R4Q8eKLN/vGZxuebwOroDB4cbpjheD4+/sKFK4Q==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@hapi/hoek": "^9.0.0"
      }
    },
    "node_modules/@sideway/formula": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/@sideway/formula/-/formula-3.0.1.tgz",
      "integrity": "sha512-/poHZJJVjx3L+zVD6g9KgHfYnb443oi7wLu/XKojDviHy6HOEOA6z1Trk5aR1dGcmPenJEgb2sK2I80LeS3MIg==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@sideway/pinpoint": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/@sideway/pinpoint/-/pinpoint-2.0.0.tgz",
      "integrity": "sha512-RNiOoTPkptFtSVzQevY/yWtZwf/RxyVnPy/OcA9HBM3MlGDnBEYL5B41H0MTn0Uec8Hi+2qUtTfG2WWZBmMejQ==",
      "license": "BSD-3-Clause"
    },
    "node_modules/@sinclair/typebox": {
      "version": "0.27.8",
      "resolved": "https://registry.npmjs.org/@sinclair/typebox/-/typebox-0.27.8.tgz",
      "integrity": "sha512-+Fj43pSMwJs4KRrH/938Uf+uAELIgVBmQzg/q1YG10djyfA3TnrU8N8XzqCh/okZdszqBQTZf96idMfE5lnwTA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@sinonjs/commons": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/@sinonjs/commons/-/commons-3.0.1.tgz",
      "integrity": "sha512-K3mCHKQ9sVh8o1C9cxkwxaOmXoAMlDxC1mYyHrjqOWEcBjYr76t96zL2zlj5dUGZ3HSw240X1qgH3Mjf1yJWpQ==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "type-detect": "4.0.8"
      }
    },
    "node_modules/@sinonjs/fake-timers": {
      "version": "10.3.0",
      "resolved": "https://registry.npmjs.org/@sinonjs/fake-timers/-/fake-timers-10.3.0.tgz",
      "integrity": "sha512-V4BG07kuYSUkTCSBHG8G8TNhM+F19jXFWnQtzj+we8DrkpSBCee9Z3Ms8yiGer/dlmhe35/Xdgyo3/0rQKg7YA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@sinonjs/commons": "^3.0.0"
      }
    },
    "node_modules/@tsconfig/node10": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@tsconfig/node10/-/node10-1.0.11.tgz",
      "integrity": "sha512-DcRjDCujK/kCk/cUe8Xz8ZSpm8mS3mNNpta+jGCA6USEDfktlNvm1+IuZ9eTcDbNk41BHwpHHeW+N1lKCz4zOw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node12": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/@tsconfig/node12/-/node12-1.0.11.tgz",
      "integrity": "sha512-cqefuRsh12pWyGsIoBKJA9luFu3mRxCA+ORZvA4ktLSzIuCUtWVxGIuXigEwO5/ywWFMZ2QEGKWvkZG1zDMTag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node14": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/@tsconfig/node14/-/node14-1.0.3.tgz",
      "integrity": "sha512-ysT8mhdixWK6Hw3i1V2AeRqZ5WfXg1G43mqoYlM2nc6388Fq5jcXyr5mRsqViLx/GJYdoL0bfXD8nmF+Zn/Iow==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@tsconfig/node16": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/@tsconfig/node16/-/node16-1.0.4.tgz",
      "integrity": "sha512-vxhUy4J8lyeyinH7Azl1pdd43GJhZH/tP2weN8TntQblOY+A0XbT8DJk1/oCPuOOyg/Ja757rG0CgHcWC8OfMA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/babel__core": {
      "version": "7.20.5",
      "resolved": "https://registry.npmjs.org/@types/babel__core/-/babel__core-7.20.5.tgz",
      "integrity": "sha512-qoQprZvz5wQFJwMDqeseRXWv3rqMvhgpbXFfVyWhbx9X47POIA6i/+dXefEmZKoAgOaTdaIgNSMqMIU61yRyzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.20.7",
        "@babel/types": "^7.20.7",
        "@types/babel__generator": "*",
        "@types/babel__template": "*",
        "@types/babel__traverse": "*"
      }
    },
    "node_modules/@types/babel__generator": {
      "version": "7.27.0",
      "resolved": "https://registry.npmjs.org/@types/babel__generator/-/babel__generator-7.27.0.tgz",
      "integrity": "sha512-ufFd2Xi92OAVPYsy+P4n7/U7e68fex0+Ee8gSG9KX7eo084CWiQ4sdxktvdl0bOPupXtVJPY19zk6EwWqUQ8lg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__template": {
      "version": "7.4.4",
      "resolved": "https://registry.npmjs.org/@types/babel__template/-/babel__template-7.4.4.tgz",
      "integrity": "sha512-h/NUaSyG5EyxBIp8YRxo4RMe2/qQgvyowRwVMzhYhBCONbW8PUsg4lkFMrhgZhUe5z3L3MiLDuvyJ/CaPa2A8A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/parser": "^7.1.0",
        "@babel/types": "^7.0.0"
      }
    },
    "node_modules/@types/babel__traverse": {
      "version": "7.28.0",
      "resolved": "https://registry.npmjs.org/@types/babel__traverse/-/babel__traverse-7.28.0.tgz",
      "integrity": "sha512-8PvcXf70gTDZBgt9ptxJ8elBeBjcLOAcOtoO/mPJjtji1+CdGbHgm77om1GrsPxsiE+uXIpNSK64UYaIwQXd4Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/types": "^7.28.2"
      }
    },
    "node_modules/@types/bcryptjs": {
      "version": "2.4.6",
      "resolved": "https://registry.npmjs.org/@types/bcryptjs/-/bcryptjs-2.4.6.tgz",
      "integrity": "sha512-9xlo6R2qDs5uixm0bcIqCeMCE6HiQsIyel9KQySStiyqNl2tnj2mP3DX1Nf56MD6KMenNNlBBsy3LJ7gUEQPXQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/body-parser": {
      "version": "1.19.6",
      "resolved": "https://registry.npmjs.org/@types/body-parser/-/body-parser-1.19.6.tgz",
      "integrity": "sha512-HLFeCYgz89uk22N5Qg3dvGvsv46B8GLvKKo1zKG4NybA8U2DiEO3w9lqGg29t/tfLRJpJ6iQxnVw4OnB7MoM9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/connect": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/compression": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/@types/compression/-/compression-1.8.1.tgz",
      "integrity": "sha512-kCFuWS0ebDbmxs0AXYn6e2r2nrGAb5KwQhknjSPSPgJcGd8+HVSILlUyFhGqML2gk39HcG7D1ydW9/qpYkN00Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/express": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/connect": {
      "version": "3.4.38",
      "resolved": "https://registry.npmjs.org/@types/connect/-/connect-3.4.38.tgz",
      "integrity": "sha512-K6uROf1LD88uDQqJCktA4yzL1YYAK6NgfsI0v/mTgyPKWsX1CnJ0XPSDhViejru1GcRkLWb8RlzFYJRqGUbaug==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/cookiejar": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/@types/cookiejar/-/cookiejar-2.1.5.tgz",
      "integrity": "sha512-he+DHOWReW0nghN24E1WUqM0efK4kI9oTqDm6XmK8ZPe2djZ90BSNdGnIyCLzCPw7/pogPlGbzI2wHGGmi4O/Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/cors": {
      "version": "2.8.19",
      "resolved": "https://registry.npmjs.org/@types/cors/-/cors-2.8.19.tgz",
      "integrity": "sha512-mFNylyeyqN93lfe/9CSxOGREz8cpzAhH+E93xJ4xWQf62V8sQ/24reV2nyzUWM6H6Xji+GGHpkbLe7pVoUEskg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/express": {
      "version": "5.0.3",
      "resolved": "https://registry.npmjs.org/@types/express/-/express-5.0.3.tgz",
      "integrity": "sha512-wGA0NX93b19/dZC1J18tKWVIYWyyF2ZjT9vin/NRu0qzzvfVzWjs04iq2rQ3H65vCTQYlRqs3YHfY7zjdV+9Kw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/body-parser": "*",
        "@types/express-serve-static-core": "^5.0.0",
        "@types/serve-static": "*"
      }
    },
    "node_modules/@types/express-serve-static-core": {
      "version": "5.0.7",
      "resolved": "https://registry.npmjs.org/@types/express-serve-static-core/-/express-serve-static-core-5.0.7.tgz",
      "integrity": "sha512-R+33OsgWw7rOhD1emjU7dzCDHucJrgJXMA5PYCzJxVil0dsyx5iBEPHqpPfiKNJQb7lZ1vxwoLR4Z87bBUpeGQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "@types/qs": "*",
        "@types/range-parser": "*",
        "@types/send": "*"
      }
    },
    "node_modules/@types/graceful-fs": {
      "version": "4.1.9",
      "resolved": "https://registry.npmjs.org/@types/graceful-fs/-/graceful-fs-4.1.9.tgz",
      "integrity": "sha512-olP3sd1qOEe5dXTSaFvQG+02VdRXcdytWLAZsAq1PecU8uqQAhkrnbli7DagjtXKW/Bl7YJbUsa8MPcuc8LHEQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/helmet": {
      "version": "0.0.48",
      "resolved": "https://registry.npmjs.org/@types/helmet/-/helmet-0.0.48.tgz",
      "integrity": "sha512-C7MpnvSDrunS1q2Oy1VWCY7CDWHozqSnM8P4tFeRTuzwqni+PYOjEredwcqWG+kLpYcgLsgcY3orHB54gbx2Jw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/express": "*"
      }
    },
    "node_modules/@types/http-errors": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/@types/http-errors/-/http-errors-2.0.5.tgz",
      "integrity": "sha512-r8Tayk8HJnX0FztbZN7oVqGccWgw98T/0neJphO91KkmOzug1KkofZURD4UaD5uH8AqcFLfdPErnBod0u71/qg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/istanbul-lib-coverage": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/@types/istanbul-lib-coverage/-/istanbul-lib-coverage-2.0.6.tgz",
      "integrity": "sha512-2QF/t/auWm0lsy8XtKVPG19v3sSOQlJe/YHZgfjb/KBBHOGSV+J2q/S671rcq9uTBrLAXmZpqJiaQbMT+zNU1w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/istanbul-lib-report": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/@types/istanbul-lib-report/-/istanbul-lib-report-3.0.3.tgz",
      "integrity": "sha512-NQn7AHQnk/RSLOxrBbGyJM/aVQ+pjj5HCgasFxc0K/KhoATfQ/47AyUl15I2yBUpihjmas+a+VJBOqecrFH+uA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/istanbul-lib-coverage": "*"
      }
    },
    "node_modules/@types/istanbul-reports": {
      "version": "3.0.4",
      "resolved": "https://registry.npmjs.org/@types/istanbul-reports/-/istanbul-reports-3.0.4.tgz",
      "integrity": "sha512-pk2B1NWalF9toCRu6gjBzR69syFjP4Od8WRAX+0mmf9lAjCRicLOWc+ZrxZHx/0XRjotgkF9t6iaMJ+aXcOdZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/istanbul-lib-report": "*"
      }
    },
    "node_modules/@types/jest": {
      "version": "29.5.14",
      "resolved": "https://registry.npmjs.org/@types/jest/-/jest-29.5.14.tgz",
      "integrity": "sha512-ZN+4sdnLUbo8EVvVc2ao0GFW6oVrQRPn4K2lglySj7APvSrgzxHiNNK99us4WDMi57xxA2yggblIAMNhXOotLQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "expect": "^29.0.0",
        "pretty-format": "^29.0.0"
      }
    },
    "node_modules/@types/json-schema": {
      "version": "7.0.15",
      "resolved": "https://registry.npmjs.org/@types/json-schema/-/json-schema-7.0.15.tgz",
      "integrity": "sha512-5+fP8P8MFNC+AyZCDxrB2pkZFPGzqQWUzpSeuuVLvm8VMcorNYavBqoFcxK8bQz4Qsbn4oUEEem4wDLfcysGHA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/jsonwebtoken": {
      "version": "9.0.10",
      "resolved": "https://registry.npmjs.org/@types/jsonwebtoken/-/jsonwebtoken-9.0.10.tgz",
      "integrity": "sha512-asx5hIG9Qmf/1oStypjanR7iKTv0gXQ1Ov/jfrX6kS/EO0OFni8orbmGCn0672NHR3kXHwpAwR+B368ZGN/2rA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/ms": "*",
        "@types/node": "*"
      }
    },
    "node_modules/@types/methods": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/@types/methods/-/methods-1.1.4.tgz",
      "integrity": "sha512-ymXWVrDiCxTBE3+RIrrP533E70eA+9qu7zdWoHuOmGujkYtzf4HQF96b8nwHLqhuf4ykX61IGRIB38CC6/sImQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/mime": {
      "version": "1.3.5",
      "resolved": "https://registry.npmjs.org/@types/mime/-/mime-1.3.5.tgz",
      "integrity": "sha512-/pyBZWSLD2n0dcHE3hq8s8ZvcETHtEuF+3E7XVt0Ig2nvsVQXdghHVcEkIWjy9A0wKfTn97a/PSDYohKIlnP/w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/morgan": {
      "version": "1.9.10",
      "resolved": "https://registry.npmjs.org/@types/morgan/-/morgan-1.9.10.tgz",
      "integrity": "sha512-sS4A1zheMvsADRVfT0lYbJ4S9lmsey8Zo2F7cnbYjWHP67Q0AwMYuuzLlkIM2N8gAbb9cubhIVFwcIN2XyYCkA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*"
      }
    },
    "node_modules/@types/ms": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/@types/ms/-/ms-2.1.0.tgz",
      "integrity": "sha512-GsCCIZDE/p3i96vtEqx+7dBUGXrc7zeSK3wwPHIaRThS+9OhWIXRqzs4d6k1SVU8g91DrNRWxWUGhp5KXQb2VA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/multer": {
      "version": "1.4.13",
      "resolved": "https://registry.npmjs.org/@types/multer/-/multer-1.4.13.tgz",
      "integrity": "sha512-bhhdtPw7JqCiEfC9Jimx5LqX9BDIPJEh2q/fQ4bqbBPtyEZYr3cvF22NwG0DmPZNYA0CAf2CnqDB4KIGGpJcaw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/express": "*"
      }
    },
    "node_modules/@types/node": {
      "version": "20.19.13",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-20.19.13.tgz",
      "integrity": "sha512-yCAeZl7a0DxgNVteXFHt9+uyFbqXGy/ShC4BlcHkoE0AfGXYv/BUiplV72DjMYXHDBXFjhvr6DD1NiRVfB4j8g==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~6.21.0"
      }
    },
    "node_modules/@types/node-cron": {
      "version": "3.0.11",
      "resolved": "https://registry.npmjs.org/@types/node-cron/-/node-cron-3.0.11.tgz",
      "integrity": "sha512-0ikrnug3/IyneSHqCBeslAhlK2aBfYek1fGo4bP4QnZPmiqSGRK+Oy7ZMisLWkesffJvQ1cqAcBnJC+8+nxIAg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/node-fetch": {
      "version": "2.6.13",
      "resolved": "https://registry.npmjs.org/@types/node-fetch/-/node-fetch-2.6.13.tgz",
      "integrity": "sha512-QGpRVpzSaUs30JBSGPjOg4Uveu384erbHBoT1zeONvyCfwQxIkUshLAOqN/k9EjGviPRmWTTe6aH2qySWKTVSw==",
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "form-data": "^4.0.4"
      }
    },
    "node_modules/@types/pg": {
      "version": "8.15.5",
      "resolved": "https://registry.npmjs.org/@types/pg/-/pg-8.15.5.tgz",
      "integrity": "sha512-LF7lF6zWEKxuT3/OR8wAZGzkg4ENGXFNyiV/JeOt9z5B+0ZVwbql9McqX5c/WStFq1GaGso7H1AzP/qSzmlCKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "pg-protocol": "*",
        "pg-types": "^2.2.0"
      }
    },
    "node_modules/@types/qs": {
      "version": "6.14.0",
      "resolved": "https://registry.npmjs.org/@types/qs/-/qs-6.14.0.tgz",
      "integrity": "sha512-eOunJqu0K1923aExK6y8p6fsihYEn/BYuQ4g0CxAAgFc4b/ZLN4CrsRZ55srTdqoiLzU2B2evC+apEIxprEzkQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/range-parser": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/@types/range-parser/-/range-parser-1.2.7.tgz",
      "integrity": "sha512-hKormJbkJqzQGhziax5PItDUTMAM9uE2XXQmM37dyd4hVM+5aVl7oVxMVUiVQn2oCQFN/LKCZdvSM0pFRqbSmQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/semver": {
      "version": "7.7.1",
      "resolved": "https://registry.npmjs.org/@types/semver/-/semver-7.7.1.tgz",
      "integrity": "sha512-FmgJfu+MOcQ370SD0ev7EI8TlCAfKYU+B4m5T3yXc1CiRN94g/SZPtsCkk506aUDtlMnFZvasDwHHUcZUEaYuA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/send": {
      "version": "0.17.5",
      "resolved": "https://registry.npmjs.org/@types/send/-/send-0.17.5.tgz",
      "integrity": "sha512-z6F2D3cOStZvuk2SaP6YrwkNO65iTZcwA2ZkSABegdkAh/lf+Aa/YQndZVfmEXT5vgAp6zv06VQ3ejSVjAny4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/mime": "^1",
        "@types/node": "*"
      }
    },
    "node_modules/@types/serve-static": {
      "version": "1.15.8",
      "resolved": "https://registry.npmjs.org/@types/serve-static/-/serve-static-1.15.8.tgz",
      "integrity": "sha512-roei0UY3LhpOJvjbIP6ZZFngyLKl5dskOtDhxY5THRSpO+ZI+nzJ+m5yUMzGrp89YRa7lvknKkMYjqQFGwA7Sg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/http-errors": "*",
        "@types/node": "*",
        "@types/send": "*"
      }
    },
    "node_modules/@types/stack-utils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/@types/stack-utils/-/stack-utils-2.0.3.tgz",
      "integrity": "sha512-9aEbYZ3TbYMznPdcdr3SmIrLXwC/AKZXQeCf9Pgao5CKb8CyHuEX5jzWPTkvregvhRJHcpRO6BFoGW9ycaOkYw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/superagent": {
      "version": "8.1.9",
      "resolved": "https://registry.npmjs.org/@types/superagent/-/superagent-8.1.9.tgz",
      "integrity": "sha512-pTVjI73witn+9ILmoJdajHGW2jkSaOzhiFYF1Rd3EQ94kymLqB9PjD9ISg7WaALC7+dCHT0FGe9T2LktLq/3GQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/cookiejar": "^2.1.5",
        "@types/methods": "^1.1.4",
        "@types/node": "*",
        "form-data": "^4.0.0"
      }
    },
    "node_modules/@types/supertest": {
      "version": "2.0.16",
      "resolved": "https://registry.npmjs.org/@types/supertest/-/supertest-2.0.16.tgz",
      "integrity": "sha512-6c2ogktZ06tr2ENoZivgm7YnprnhYE4ZoXGMY+oA7IuAf17M8FWvujXZGmxLv8y0PTyts4x5A+erSwVUFA8XSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/superagent": "*"
      }
    },
    "node_modules/@types/triple-beam": {
      "version": "1.3.5",
      "resolved": "https://registry.npmjs.org/@types/triple-beam/-/triple-beam-1.3.5.tgz",
      "integrity": "sha512-6WaYesThRMCl19iryMYP7/x2OVgCtbIVflDGFpWnb9irXI3UjYE4AzmYuiUKY1AJstGijoY+MgUszMgRxIYTYw==",
      "license": "MIT"
    },
    "node_modules/@types/uuid": {
      "version": "9.0.8",
      "resolved": "https://registry.npmjs.org/@types/uuid/-/uuid-9.0.8.tgz",
      "integrity": "sha512-jg+97EGIcY9AGHJJRaaPVgetKDsrTgbRjQ5Msgjh/DQKEFl0DtyRr/VCOyD1T2R1MNeWPK/u7JoGhlDZnKBAfA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@types/yargs": {
      "version": "17.0.33",
      "resolved": "https://registry.npmjs.org/@types/yargs/-/yargs-17.0.33.tgz",
      "integrity": "sha512-WpxBCKWPLr4xSsHgz511rFJAM+wS28w2zEO1QDNY5zM/S8ok70NNfztH0xwhqKyaK0OHCbN98LDAZuy1ctxDkA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/yargs-parser": "*"
      }
    },
    "node_modules/@types/yargs-parser": {
      "version": "21.0.3",
      "resolved": "https://registry.npmjs.org/@types/yargs-parser/-/yargs-parser-21.0.3.tgz",
      "integrity": "sha512-I4q9QU9MQv4oEOz4tAHJtNz1cwuLxn2F3xcc2iV5WdqLPpUnj30aUuxt1mAxYTG+oe8CZMV/+6rU4S4gRDzqtQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/@typescript-eslint/eslint-plugin": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/eslint-plugin/-/eslint-plugin-6.21.0.tgz",
      "integrity": "sha512-oy9+hTPCUFpngkEZUSzbf9MxI65wbKFoQYsgPdILTfbUldp5ovUuphZVe4i30emU9M/kP+T64Di0mxl7dSw3MA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/regexpp": "^4.5.1",
        "@typescript-eslint/scope-manager": "6.21.0",
        "@typescript-eslint/type-utils": "6.21.0",
        "@typescript-eslint/utils": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0",
        "debug": "^4.3.4",
        "graphemer": "^1.4.0",
        "ignore": "^5.2.4",
        "natural-compare": "^1.4.0",
        "semver": "^7.5.4",
        "ts-api-utils": "^1.0.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "@typescript-eslint/parser": "^6.0.0 || ^6.0.0-alpha",
        "eslint": "^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/parser": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/parser/-/parser-6.21.0.tgz",
      "integrity": "sha512-tbsV1jPne5CkFQCgPBcDOt30ItF7aJoZL997JSF7MhGQqOeT3svWRYxiqlfA5RUdlHN6Fi+EI9bxqbdyAUZjYQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@typescript-eslint/scope-manager": "6.21.0",
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/typescript-estree": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0",
        "debug": "^4.3.4"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/scope-manager": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/scope-manager/-/scope-manager-6.21.0.tgz",
      "integrity": "sha512-OwLUIWZJry80O99zvqXVEioyniJMa+d2GrqpUTqi5/v5D5rOrppJVBPa0yKCblcigC0/aYAzxxqQ1B+DS2RYsg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/type-utils": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/type-utils/-/type-utils-6.21.0.tgz",
      "integrity": "sha512-rZQI7wHfao8qMX3Rd3xqeYSMCL3SoiSQLBATSiVKARdFGCYSRvmViieZjqc58jKgs8Y8i9YvVVhRbHSTA4VBag==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/typescript-estree": "6.21.0",
        "@typescript-eslint/utils": "6.21.0",
        "debug": "^4.3.4",
        "ts-api-utils": "^1.0.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^7.0.0 || ^8.0.0"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/types/-/types-6.21.0.tgz",
      "integrity": "sha512-1kFmZ1rOm5epu9NZEZm1kckCDGj5UJEf7P1kliH4LKu/RkwpsfqqGmY2OOcUs18lSlQBKLDYBOGxRVtrMN5lpg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@typescript-eslint/typescript-estree": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/typescript-estree/-/typescript-estree-6.21.0.tgz",
      "integrity": "sha512-6npJTkZcO+y2/kr+z0hc4HwNfrrP4kNYh57ek7yCNlrBjWQ1Y0OS7jiZTkgumrvkX5HkEKXFZkkdFNkaW2wmUQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/visitor-keys": "6.21.0",
        "debug": "^4.3.4",
        "globby": "^11.1.0",
        "is-glob": "^4.0.3",
        "minimatch": "9.0.3",
        "semver": "^7.5.4",
        "ts-api-utils": "^1.0.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependenciesMeta": {
        "typescript": {
          "optional": true
        }
      }
    },
    "node_modules/@typescript-eslint/utils": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/utils/-/utils-6.21.0.tgz",
      "integrity": "sha512-NfWVaC8HP9T8cbKQxHcsJBY5YE1O33+jpMwN45qzWWaPDZgLIbo12toGMWnmhvCpd3sIxkpDw3Wv1B3dYrbDQQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.4.0",
        "@types/json-schema": "^7.0.12",
        "@types/semver": "^7.5.0",
        "@typescript-eslint/scope-manager": "6.21.0",
        "@typescript-eslint/types": "6.21.0",
        "@typescript-eslint/typescript-estree": "6.21.0",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      },
      "peerDependencies": {
        "eslint": "^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/@typescript-eslint/visitor-keys": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/@typescript-eslint/visitor-keys/-/visitor-keys-6.21.0.tgz",
      "integrity": "sha512-JJtkDduxLi9bivAB+cYOVMtbkqdPOhZ+ZI5LC47MIRrDV4Yn2o+ZnW10Nkmr28xRpSpdJ6Sm42Hjf2+REYXm0A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@typescript-eslint/types": "6.21.0",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^16.0.0 || >=18.0.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/typescript-eslint"
      }
    },
    "node_modules/@ungap/structured-clone": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/@ungap/structured-clone/-/structured-clone-1.3.0.tgz",
      "integrity": "sha512-WmoN8qaIAo7WTYWbAZuG8PYEhn5fkz7dZrqTBZ7dtt//lL2Gwms1IcnQ5yHqjDfX8Ft5j4YzDM23f87zBfDe9g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/abort-controller": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/abort-controller/-/abort-controller-3.0.0.tgz",
      "integrity": "sha512-h8lQ8tacZYnR3vNQTgibj+tODHI5/+l06Au2Pcriv/Gmet0eaj4TwWH41sO9wnHDiQsEj19q0drzdWdeAHtweg==",
      "license": "MIT",
      "dependencies": {
        "event-target-shim": "^5.0.0"
      },
      "engines": {
        "node": ">=6.5"
      }
    },
    "node_modules/accepts": {
      "version": "1.3.8",
      "resolved": "https://registry.npmjs.org/accepts/-/accepts-1.3.8.tgz",
      "integrity": "sha512-PYAthTa2m2VKxuvSD3DPC/Gy+U+sOA1LAuT8mkmRuvw+NACSaeXEQ+NHcVF7rONl6qcaxV3Uuemwawk+7+SJLw==",
      "license": "MIT",
      "dependencies": {
        "mime-types": "~2.1.34",
        "negotiator": "0.6.3"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/accepts/node_modules/negotiator": {
      "version": "0.6.3",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.3.tgz",
      "integrity": "sha512-+EUsqGPLsM+j/zdChZjsnX51g4XrHFOIXwfnCVPGlQk/k5giakcKsuxCObBRu6DSm9opw/O6slWbJdghQM4bBg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/acorn": {
      "version": "8.15.0",
      "resolved": "https://registry.npmjs.org/acorn/-/acorn-8.15.0.tgz",
      "integrity": "sha512-NZyJarBfL7nWwIq+FDL6Zp/yHEhePMNnnJ0y3qfieCrmNvYct8uvtiV41UvlSe6apAfk0fY1FbWx+NwfmpvtTg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "acorn": "bin/acorn"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/acorn-jsx": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/acorn-jsx/-/acorn-jsx-5.3.2.tgz",
      "integrity": "sha512-rq9s+JNhf0IChjtDXxllJ7g41oZk5SlXtp0LHwyA5cejwn7vKmKp4pPri6YEePv2PU65sAsegbXtIinmDFDXgQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "acorn": "^6.0.0 || ^7.0.0 || ^8.0.0"
      }
    },
    "node_modules/acorn-walk": {
      "version": "8.3.4",
      "resolved": "https://registry.npmjs.org/acorn-walk/-/acorn-walk-8.3.4.tgz",
      "integrity": "sha512-ueEepnujpqee2o5aIYnvHU6C0A42MNdsIDeqy5BydrkuC5R1ZuUFnm27EeFJGoEHJQgn3uleRvmTXaJgfXbt4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "acorn": "^8.11.0"
      },
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/adler-32": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/adler-32/-/adler-32-1.3.1.tgz",
      "integrity": "sha512-ynZ4w/nUUv5rrsR8UUGoe1VC9hZj6V5hU9Qw1HlMDJGEJw5S7TfTErWTjMys6M7vr0YWcPqs3qAr4ss0nDfP+A==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/agentkeepalive": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/agentkeepalive/-/agentkeepalive-4.6.0.tgz",
      "integrity": "sha512-kja8j7PjmncONqaTsB8fQ+wE2mSU2DJ9D4XKoJ5PFWIdRMa6SLSN1ff4mOr4jCbfRSsxR4keIiySJU0N9T5hIQ==",
      "license": "MIT",
      "dependencies": {
        "humanize-ms": "^1.2.1"
      },
      "engines": {
        "node": ">= 8.0.0"
      }
    },
    "node_modules/ajv": {
      "version": "6.12.6",
      "resolved": "https://registry.npmjs.org/ajv/-/ajv-6.12.6.tgz",
      "integrity": "sha512-j3fVLgvTo527anyYyJOGTYJbG+vnnQYvE0m5mmkc1TK+nxAppkCLMIL0aZ4dblVCNoGShhm+kzE4ZUykBoMg4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-deep-equal": "^3.1.1",
        "fast-json-stable-stringify": "^2.0.0",
        "json-schema-traverse": "^0.4.1",
        "uri-js": "^4.2.2"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/epoberezkin"
      }
    },
    "node_modules/ansi-escapes": {
      "version": "4.3.2",
      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-4.3.2.tgz",
      "integrity": "sha512-gKXj5ALrKWQLsYG9jlTRmR/xKluxHV+Z9QEwNIgCfM1/uwPMCuzVVnh5mwTd+OuBZcwSIMbqssNWRm1lE51QaQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.21.3"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ansi-escapes/node_modules/type-fest": {
      "version": "0.21.3",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.21.3.tgz",
      "integrity": "sha512-t0rzBq87m3fVcduHDUFhKmyyX+9eo6WQjZvf51Ea/M0Q7+T374Jp1aUiyUl0GKxp8M/OETVHSDvmkyPgvX+X2w==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ansi-regex": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-5.0.1.tgz",
      "integrity": "sha512-quJQXlTSUGL2LH9SUXo8VwsY4soanhgo6LNSm84E1LBcE8s3O0wpdiRzyR9z/ZZJMlMWv37qOOb9pdJlMUEKFQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/ansi-styles": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-4.3.0.tgz",
      "integrity": "sha512-zbB9rCJAT1rbjiVDb2hqKFHNYLxgtk8NURxZ3IZwD3F6NtxbXZQCnnSi1Lkx+IDohdPlFp222wVALIheZJQSEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-convert": "^2.0.1"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/anymatch": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/anymatch/-/anymatch-3.1.3.tgz",
      "integrity": "sha512-KMReFUr0B4t+D+OBkjR3KYqvocp2XaSzO55UcB6mgQMd3KbcE+mWTyvVV7D/zsdEbNnV6acZUutkiHQXvTr1Rw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "normalize-path": "^3.0.0",
        "picomatch": "^2.0.4"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/append-field": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/append-field/-/append-field-1.0.0.tgz",
      "integrity": "sha512-klpgFSWLW1ZEs8svjfb7g4qWY0YS5imI82dTg+QahUvJ8YqAY0P10Uk8tTyh9ZGuYEZEMaeJYCF5BFuX552hsw==",
      "license": "MIT"
    },
    "node_modules/arg": {
      "version": "4.1.3",
      "resolved": "https://registry.npmjs.org/arg/-/arg-4.1.3.tgz",
      "integrity": "sha512-58S9QDqG0Xx27YwPSt9fJxivjYl432YCwfDMfZ+71RAqUrZef7LrKQZ3LHLOwCS4FLNBplP533Zx895SeOCHvA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/argparse": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/argparse/-/argparse-2.0.1.tgz",
      "integrity": "sha512-8+9WqebbFzpX9OR+Wa6O29asIogeRMzcGtAINdpMHHyAg10f05aSFVBbcEqGf/PXw1EjAZ+q2/bEBg3DvurK3Q==",
      "dev": true,
      "license": "Python-2.0"
    },
    "node_modules/array-flatten": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/array-flatten/-/array-flatten-1.1.1.tgz",
      "integrity": "sha512-PCVAQswWemu6UdxsDFFX/+gVeYqKAod3D3UVm91jHwynguOwAvYPhx8nNlM++NqRcK6CxxpUafjmhIdKiHibqg==",
      "license": "MIT"
    },
    "node_modules/array-union": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/array-union/-/array-union-2.1.0.tgz",
      "integrity": "sha512-HGyxoOTYUyCM6stUe6EJgnd4EoewAI7zMdfqO+kGjnlZmBDz/cR5pf8r/cR4Wq60sL/p0IkcjUEEPwS3GFrIyw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/asap": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/asap/-/asap-2.0.6.tgz",
      "integrity": "sha512-BSHWgDSAiKs50o2Re8ppvp3seVHXSRM44cdSsT9FfNEUUZLOGWVCsiWaRPWM1Znn+mqZ1OfVZ3z3DWEzSp7hRA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/async": {
      "version": "3.2.6",
      "resolved": "https://registry.npmjs.org/async/-/async-3.2.6.tgz",
      "integrity": "sha512-htCUDlxyyCLMgaM3xXg0C0LW2xqfuQ6p05pCEIsXuyQ+a1koYKTuBMzRNwmybfLgvJDMd0r1LTn4+E0Ti6C2AA==",
      "license": "MIT"
    },
    "node_modules/asynckit": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/asynckit/-/asynckit-0.4.0.tgz",
      "integrity": "sha512-Oei9OH4tRh0YqU3GxhX79dM/mwVgvbZJaSNaRk+bshkj0S5cfHcgYakreBjrHwatXKbz+IoIdYLxrKim2MjW0Q==",
      "license": "MIT"
    },
    "node_modules/axios": {
      "version": "1.11.0",
      "resolved": "https://registry.npmjs.org/axios/-/axios-1.11.0.tgz",
      "integrity": "sha512-1Lx3WLFQWm3ooKDYZD1eXmoGO9fxYQjrycfHFC8P0sCfQVXyROp0p9PFWBehewBOdCwHc+f/b8I0fMto5eSfwA==",
      "license": "MIT",
      "dependencies": {
        "follow-redirects": "^1.15.6",
        "form-data": "^4.0.4",
        "proxy-from-env": "^1.1.0"
      }
    },
    "node_modules/babel-jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/babel-jest/-/babel-jest-29.7.0.tgz",
      "integrity": "sha512-BrvGY3xZSwEcCzKvKsCi2GgHqDqsYkOP4/by5xCgIwGXQxIEh+8ew3gmrE1y7XRR6LHZIj6yLYnUi/mm2KXKBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/transform": "^29.7.0",
        "@types/babel__core": "^7.1.14",
        "babel-plugin-istanbul": "^6.1.1",
        "babel-preset-jest": "^29.6.3",
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.8.0"
      }
    },
    "node_modules/babel-plugin-istanbul": {
      "version": "6.1.1",
      "resolved": "https://registry.npmjs.org/babel-plugin-istanbul/-/babel-plugin-istanbul-6.1.1.tgz",
      "integrity": "sha512-Y1IQok9821cC9onCx5otgFfRm7Lm+I+wwxOx738M/WLPZ9Q42m4IG5W0FNX8WLL2gYMZo3JkuXIH2DOpWM+qwA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/helper-plugin-utils": "^7.0.0",
        "@istanbuljs/load-nyc-config": "^1.0.0",
        "@istanbuljs/schema": "^0.1.2",
        "istanbul-lib-instrument": "^5.0.4",
        "test-exclude": "^6.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/babel-plugin-istanbul/node_modules/istanbul-lib-instrument": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-instrument/-/istanbul-lib-instrument-5.2.1.tgz",
      "integrity": "sha512-pzqtp31nLv/XFOzXGuvhCb8qhjmTVo5vjVk19XE4CRlSWz0KoeJ3bw9XsA7nOp9YBf4qHjwBxkDzKcME/J29Yg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/core": "^7.12.3",
        "@babel/parser": "^7.14.7",
        "@istanbuljs/schema": "^0.1.2",
        "istanbul-lib-coverage": "^3.2.0",
        "semver": "^6.3.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/babel-plugin-istanbul/node_modules/semver": {
      "version": "6.3.1",
      "resolved": "https://registry.npmjs.org/semver/-/semver-6.3.1.tgz",
      "integrity": "sha512-BR7VvDCVHO+q2xBEWskxS6DJE1qRnb7DxzUrogb71CWoSficBxYsiAGd+Kl0mmq/MprG9yArRkyrQxTO6XjMzA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      }
    },
    "node_modules/babel-plugin-jest-hoist": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/babel-plugin-jest-hoist/-/babel-plugin-jest-hoist-29.6.3.tgz",
      "integrity": "sha512-ESAc/RJvGTFEzRwOTT4+lNDk/GNHMkKbNzsvT0qKRfDyyYTskxB5rnU2njIDYVxXCBHHEI1c0YwHob3WaYujOg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/template": "^7.3.3",
        "@babel/types": "^7.3.3",
        "@types/babel__core": "^7.1.14",
        "@types/babel__traverse": "^7.0.6"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/babel-preset-current-node-syntax": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/babel-preset-current-node-syntax/-/babel-preset-current-node-syntax-1.2.0.tgz",
      "integrity": "sha512-E/VlAEzRrsLEb2+dv8yp3bo4scof3l9nR4lrld+Iy5NyVqgVYUJnDAmunkhPMisRI32Qc4iRiz425d8vM++2fg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/plugin-syntax-async-generators": "^7.8.4",
        "@babel/plugin-syntax-bigint": "^7.8.3",
        "@babel/plugin-syntax-class-properties": "^7.12.13",
        "@babel/plugin-syntax-class-static-block": "^7.14.5",
        "@babel/plugin-syntax-import-attributes": "^7.24.7",
        "@babel/plugin-syntax-import-meta": "^7.10.4",
        "@babel/plugin-syntax-json-strings": "^7.8.3",
        "@babel/plugin-syntax-logical-assignment-operators": "^7.10.4",
        "@babel/plugin-syntax-nullish-coalescing-operator": "^7.8.3",
        "@babel/plugin-syntax-numeric-separator": "^7.10.4",
        "@babel/plugin-syntax-object-rest-spread": "^7.8.3",
        "@babel/plugin-syntax-optional-catch-binding": "^7.8.3",
        "@babel/plugin-syntax-optional-chaining": "^7.8.3",
        "@babel/plugin-syntax-private-property-in-object": "^7.14.5",
        "@babel/plugin-syntax-top-level-await": "^7.14.5"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0 || ^8.0.0-0"
      }
    },
    "node_modules/babel-preset-jest": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/babel-preset-jest/-/babel-preset-jest-29.6.3.tgz",
      "integrity": "sha512-0B3bhxR6snWXJZtR/RliHTDPRgn1sNHOR0yVtq/IiQFyuOVjFS+wuio/R4gSNkyYmKmJB4wGZv2NZanmKmTnNA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "babel-plugin-jest-hoist": "^29.6.3",
        "babel-preset-current-node-syntax": "^1.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@babel/core": "^7.0.0"
      }
    },
    "node_modules/balanced-match": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/balanced-match/-/balanced-match-1.0.2.tgz",
      "integrity": "sha512-3oSeUO0TMV67hN1AmbXsK4yaqU7tjiHlbxRDZOpH0KW9+CeX4bRAaX0Anxt0tx2MrpRpWwQaPwIlISEJhYU5Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/basic-auth": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/basic-auth/-/basic-auth-2.0.1.tgz",
      "integrity": "sha512-NF+epuEdnUYVlGuhaxbbq+dvJttwLnGY+YixlXlME5KpQ5W3CnXA5cVTneY3SPbPDRkcjMbifrwmFYcClgOZeg==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.1.2"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/basic-auth/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "license": "MIT"
    },
    "node_modules/bcryptjs": {
      "version": "2.4.3",
      "resolved": "https://registry.npmjs.org/bcryptjs/-/bcryptjs-2.4.3.tgz",
      "integrity": "sha512-V/Hy/X9Vt7f3BbPJEi8BdVFMByHi+jNXrYkW3huaybV/kQ0KJg0Y6PkEMbn+zeT+i+SiKZ/HMqJGIIt4LZDqNQ==",
      "license": "MIT"
    },
    "node_modules/binary-extensions": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/binary-extensions/-/binary-extensions-2.3.0.tgz",
      "integrity": "sha512-Ceh+7ox5qe7LJuLHoY0feh3pHuUDHAcRUeyL2VYghZwfpkNIy/+8Ocg0a3UuSoYzavmylwuLWQOf3hl0jjMMIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/bintrees": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/bintrees/-/bintrees-1.0.2.tgz",
      "integrity": "sha512-VOMgTMwjAaUG580SXn3LacVgjurrbMme7ZZNYGSSV7mmtY6QQRh0Eg3pwIcntQ77DErK1L0NxkbetjcoXzVwKw==",
      "license": "MIT"
    },
    "node_modules/body-parser": {
      "version": "1.20.3",
      "resolved": "https://registry.npmjs.org/body-parser/-/body-parser-1.20.3.tgz",
      "integrity": "sha512-7rAxByjUMqQ3/bHJy7D6OGXvx/MMc4IqBn/X0fcM1QUcAItpZrBEYhWGem+tzXH90c+G01ypMcYJBO9Y30203g==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "content-type": "~1.0.5",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "on-finished": "2.4.1",
        "qs": "6.13.0",
        "raw-body": "2.5.2",
        "type-is": "~1.6.18",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/body-parser/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/body-parser/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/brace-expansion": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-2.0.2.tgz",
      "integrity": "sha512-Jt0vHyM+jmUBqojB7E1NIYadt0vI0Qxjxd2TErW94wDz+E2LAm5vKMXXwg6ZZBTHPuUlDgQHKXvjGBdfcF1ZDQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0"
      }
    },
    "node_modules/braces": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/braces/-/braces-3.0.3.tgz",
      "integrity": "sha512-yQbXgO/OSZVD2IsiLlro+7Hf6Q18EJrKSEsdoMzKePKXct3gvD8oLcOQdIzGupr5Fj+EDe8gO/lxc1BzfMpxvA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fill-range": "^7.1.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/browserslist": {
      "version": "4.25.4",
      "resolved": "https://registry.npmjs.org/browserslist/-/browserslist-4.25.4.tgz",
      "integrity": "sha512-4jYpcjabC606xJ3kw2QwGEZKX0Aw7sgQdZCvIK9dhVSPh76BKo+C+btT1RRofH7B+8iNpEbgGNVWiLki5q93yg==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "caniuse-lite": "^1.0.30001737",
        "electron-to-chromium": "^1.5.211",
        "node-releases": "^2.0.19",
        "update-browserslist-db": "^1.1.3"
      },
      "bin": {
        "browserslist": "cli.js"
      },
      "engines": {
        "node": "^6 || ^7 || ^8 || ^9 || ^10 || ^11 || ^12 || >=13.7"
      }
    },
    "node_modules/bs-logger": {
      "version": "0.2.6",
      "resolved": "https://registry.npmjs.org/bs-logger/-/bs-logger-0.2.6.tgz",
      "integrity": "sha512-pd8DCoxmbgc7hyPKOvxtqNcjYoOsABPQdcCUjGp3d42VR2CX1ORhk2A87oqqu5R1kk+76nsxZupkmyd+MVtCog==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "fast-json-stable-stringify": "2.x"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/bser": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/bser/-/bser-2.1.1.tgz",
      "integrity": "sha512-gQxTNE/GAfIIrmHLUE3oJyp5FO6HRBfhjnw4/wMmA63ZGDJnWBmgY/lyQBpnDUkGmAhbSe39tx2d/iTOAfglwQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "node-int64": "^0.4.0"
      }
    },
    "node_modules/buffer-equal-constant-time": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/buffer-equal-constant-time/-/buffer-equal-constant-time-1.0.1.tgz",
      "integrity": "sha512-zRpUiDwd/xk6ADqPMATG8vc9VPrkck7T07OIx0gnjmJAnHnTVXNQG3vfvWNuiZIkwu9KrKdA1iJKfsfTVxE6NA==",
      "license": "BSD-3-Clause"
    },
    "node_modules/buffer-from": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/buffer-from/-/buffer-from-1.1.2.tgz",
      "integrity": "sha512-E+XQCRwSbaaiChtv6k6Dwgc+bx+Bs6vuKJHHl5kox/BaKbhiXzqQOwK4cO22yElGp2OCmjwVhT3HmxgyPGnJfQ==",
      "license": "MIT"
    },
    "node_modules/busboy": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/busboy/-/busboy-1.6.0.tgz",
      "integrity": "sha512-8SFQbg/0hQ9xy3UNTB0YEnsNBbWfhf7RtnzpL7TkBiTBRfrQ9Fxcnz7VJsleJpyp6rVLvXiuORqjlHi5q+PYuA==",
      "dependencies": {
        "streamsearch": "^1.1.0"
      },
      "engines": {
        "node": ">=10.16.0"
      }
    },
    "node_modules/bytes": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/bytes/-/bytes-3.1.2.tgz",
      "integrity": "sha512-/Nf7TyzTx6S3yRJObOAV7956r8cr2+Oj8AC5dt8wSP3BQAoeX58NoHyCU8P8zGkNXStjTSi6fzO6F0pBdcYbEg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/call-bind-apply-helpers": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/call-bind-apply-helpers/-/call-bind-apply-helpers-1.0.2.tgz",
      "integrity": "sha512-Sp1ablJ0ivDkSzjcaJdxEunN5/XvksFJ2sMBFfq6x0ryhQV/2b/KwFe21cMpmHtPOSij8K99/wSfoEuTObmuMQ==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/call-bound": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/call-bound/-/call-bound-1.0.4.tgz",
      "integrity": "sha512-+ys997U96po4Kx/ABpBCqhA9EuxJaQWDQg7295H4hBphv3IZg0boBKuwYpt4YXp6MZ5AmZQnU/tyMTlRpaSejg==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "get-intrinsic": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/callsites": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/callsites/-/callsites-3.1.0.tgz",
      "integrity": "sha512-P8BjAsXvZS+VIDUI11hHCQEv74YT67YUi5JJFNWIqL235sBmjX4+qx9Muvls5ivyNENctx46xQLQ3aTuE7ssaQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/camelcase": {
      "version": "5.3.1",
      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-5.3.1.tgz",
      "integrity": "sha512-L28STB170nwWS63UjtlEOE3dldQApaJXZkOI1uMFfzf3rRuPegHaHesyee+YxQ+W6SvRDQV6UrdOdRiR153wJg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/caniuse-lite": {
      "version": "1.0.30001741",
      "resolved": "https://registry.npmjs.org/caniuse-lite/-/caniuse-lite-1.0.30001741.tgz",
      "integrity": "sha512-QGUGitqsc8ARjLdgAfxETDhRbJ0REsP6O3I96TAth/mVjh2cYzN2u+3AzPP3aVSm2FehEItaJw1xd+IGBXWeSw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/caniuse-lite"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "CC-BY-4.0"
    },
    "node_modules/cfb": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/cfb/-/cfb-1.2.2.tgz",
      "integrity": "sha512-KfdUZsSOw19/ObEWasvBP/Ac4reZvAGauZhs6S/gqNhXhI7cKwvlH7ulj+dOEYnca4bm4SGo8C1bTAQvnTjgQA==",
      "license": "Apache-2.0",
      "dependencies": {
        "adler-32": "~1.3.0",
        "crc-32": "~1.2.0"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/chalk": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-4.1.2.tgz",
      "integrity": "sha512-oKnbhFyRIXpUuez8iBMmyEa4nbj4IOQyuhc/wy9kY7/WVPcwIO9VA668Pu8RkO7+0G76SLROeyw9CpQ061i4mA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.1.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/char-regex": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/char-regex/-/char-regex-1.0.2.tgz",
      "integrity": "sha512-kWWXztvZ5SBQV+eRgKFeh8q5sLuZY2+8WUIzlxWVTg+oGwY14qylx1KbKzHd8P6ZYkAg0xyIDU9JMHhyJMZ1jw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/chokidar": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/chokidar/-/chokidar-3.6.0.tgz",
      "integrity": "sha512-7VT13fmjotKpGipCW9JEQAusEPE+Ei8nl6/g4FBAmIm0GOOLMua9NDDo/DWp0ZAxCr3cPq5ZpBqmPAQgDda2Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "anymatch": "~3.1.2",
        "braces": "~3.0.2",
        "glob-parent": "~5.1.2",
        "is-binary-path": "~2.1.0",
        "is-glob": "~4.0.1",
        "normalize-path": "~3.0.0",
        "readdirp": "~3.6.0"
      },
      "engines": {
        "node": ">= 8.10.0"
      },
      "funding": {
        "url": "https://paulmillr.com/funding/"
      },
      "optionalDependencies": {
        "fsevents": "~2.3.2"
      }
    },
    "node_modules/chokidar/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/ci-info": {
      "version": "3.9.0",
      "resolved": "https://registry.npmjs.org/ci-info/-/ci-info-3.9.0.tgz",
      "integrity": "sha512-NIxF55hv4nSqQswkAeiOi1r83xy8JldOFDTWiug55KBu9Jnblncd2U6ViHmYgHf01TPZS77NJBhBMKdWj9HQMQ==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/sibiraj-s"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cjs-module-lexer": {
      "version": "1.4.3",
      "resolved": "https://registry.npmjs.org/cjs-module-lexer/-/cjs-module-lexer-1.4.3.tgz",
      "integrity": "sha512-9z8TZaGM1pfswYeXrUpzPrkx8UnWYdhJclsiYMm6x/w5+nN+8Tf/LnAgfLGQCm59qAOxU8WwHEq2vNwF6i4j+Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cli-cursor": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/cli-cursor/-/cli-cursor-4.0.0.tgz",
      "integrity": "sha512-VGtlMu3x/4DOtIUwEkRezxUZ2lBacNJCHash0N0WeZDBS+7Ux1dm3XWAgWYxLJFMMdOeXMHXorshEFhbMSGelg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "restore-cursor": "^4.0.0"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/cli-truncate": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/cli-truncate/-/cli-truncate-3.1.0.tgz",
      "integrity": "sha512-wfOBkjXteqSnI59oPcJkcPl/ZmwvMMOj340qUIY1SKZCv0B9Cf4D4fAucRkIKQmsIuYK3x1rrgU7MeGRruiuiA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "slice-ansi": "^5.0.0",
        "string-width": "^5.0.0"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/cliui": {
      "version": "8.0.1",
      "resolved": "https://registry.npmjs.org/cliui/-/cliui-8.0.1.tgz",
      "integrity": "sha512-BSeNnyus75C4//NQ9gQt1/csTXyo/8Sb+afLAkzAptFuMsod9HFokGNudZpi/oQV73hnVK+sR+5PVRMd+Dr7YQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "string-width": "^4.2.0",
        "strip-ansi": "^6.0.1",
        "wrap-ansi": "^7.0.0"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/cliui/node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cliui/node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cliui/node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/cliui/node_modules/wrap-ansi": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-7.0.0.tgz",
      "integrity": "sha512-YVGIj2kamLSTxw6NsZjoBxfSwsn0ycdesmc4p+Q21c5zPuZ1pl+NfxVdxPtdHvmNVOQ6XSYG4AUtyt/Fi7D16Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^4.0.0",
        "string-width": "^4.1.0",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/cluster-key-slot": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/cluster-key-slot/-/cluster-key-slot-1.1.2.tgz",
      "integrity": "sha512-RMr0FhtfXemyinomL4hrWcYJxmX6deFdCxpJzhDttxgO1+bcCnkk+9drydLVDmAMG7NE6aN/fl4F7ucU/90gAA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/co": {
      "version": "4.6.0",
      "resolved": "https://registry.npmjs.org/co/-/co-4.6.0.tgz",
      "integrity": "sha512-QVb0dM5HvG+uaxitm8wONl7jltx8dqhfU33DcqtOZcLSVIKSDDLDi7+0LbAKiyI8hD9u42m2YxXSkMGWThaecQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">= 1.0.0",
        "node": ">= 0.12.0"
      }
    },
    "node_modules/codepage": {
      "version": "1.15.0",
      "resolved": "https://registry.npmjs.org/codepage/-/codepage-1.15.0.tgz",
      "integrity": "sha512-3g6NUTPd/YtuuGrhMnOMRjFc+LJw/bnMp3+0r/Wcz3IXUuCosKRJvMphm5+Q+bvTVGcJJuRvVLuYba+WojaFaA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/collect-v8-coverage": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/collect-v8-coverage/-/collect-v8-coverage-1.0.2.tgz",
      "integrity": "sha512-lHl4d5/ONEbLlJvaJNtsF/Lz+WvB07u2ycqTYbdrq7UypDXailES4valYb2eWiJFxZlVmpGekfqoxQhzyFdT4Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/color": {
      "version": "3.2.1",
      "resolved": "https://registry.npmjs.org/color/-/color-3.2.1.tgz",
      "integrity": "sha512-aBl7dZI9ENN6fUGC7mWpMTPNHmWUSNan9tuWN6ahh5ZLNk9baLJOnSMlrQkHcrfFgz2/RigjUVAjdx36VcemKA==",
      "license": "MIT",
      "dependencies": {
        "color-convert": "^1.9.3",
        "color-string": "^1.6.0"
      }
    },
    "node_modules/color-convert": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-2.0.1.tgz",
      "integrity": "sha512-RRECPsj7iu/xb5oKYcsFHSppFNnsj/52OVTRKb4zP5onXwVF3zVmmToNcOfGC+CRDpfK/U584fMg38ZHCaElKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "color-name": "~1.1.4"
      },
      "engines": {
        "node": ">=7.0.0"
      }
    },
    "node_modules/color-name": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.4.tgz",
      "integrity": "sha512-dOy+3AuW3a2wNbZHIuMZpTcgjGuLU/uBL/ubcZF9OXbDo8ff4O8yVp5Bf0efS8uEoYo5q4Fx7dY9OgQGXgAsQA==",
      "license": "MIT"
    },
    "node_modules/color-string": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/color-string/-/color-string-1.9.1.tgz",
      "integrity": "sha512-shrVawQFojnZv6xM40anx4CkoDP+fZsw/ZerEMsW/pyzsRbElpsL/DBVW7q3ExxwusdNXI3lXpuhEZkzs8p5Eg==",
      "license": "MIT",
      "dependencies": {
        "color-name": "^1.0.0",
        "simple-swizzle": "^0.2.2"
      }
    },
    "node_modules/color/node_modules/color-convert": {
      "version": "1.9.3",
      "resolved": "https://registry.npmjs.org/color-convert/-/color-convert-1.9.3.tgz",
      "integrity": "sha512-QfAUtd+vFdAtFQcC8CCyYt1fYWxSqAiK2cSD6zDB8N3cpsEBAvRxp9zOGg6G/SHHJYAT88/az/IuDGALsNVbGg==",
      "license": "MIT",
      "dependencies": {
        "color-name": "1.1.3"
      }
    },
    "node_modules/color/node_modules/color-name": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/color-name/-/color-name-1.1.3.tgz",
      "integrity": "sha512-72fSenhMw2HZMTVHeCA9KCmpEIbzWiQsjN+BHcBbS9vr1mtt+vJjPdksIBNUmKAW8TFUDPJK5SUU3QhE9NEXDw==",
      "license": "MIT"
    },
    "node_modules/colorette": {
      "version": "2.0.20",
      "resolved": "https://registry.npmjs.org/colorette/-/colorette-2.0.20.tgz",
      "integrity": "sha512-IfEDxwoWIjkeXL1eXcDiow4UbKjhLdq6/EuSVR9GMN7KVH3r9gQ83e73hsz1Nd1T3ijd5xv1wcWRYO+D6kCI2w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/colorspace": {
      "version": "1.1.4",
      "resolved": "https://registry.npmjs.org/colorspace/-/colorspace-1.1.4.tgz",
      "integrity": "sha512-BgvKJiuVu1igBUF2kEjRCZXol6wiiGbY5ipL/oVPwm0BL9sIpMIzM8IK7vwuxIIzOXMV3Ey5w+vxhm0rR/TN8w==",
      "license": "MIT",
      "dependencies": {
        "color": "^3.1.3",
        "text-hex": "1.0.x"
      }
    },
    "node_modules/combined-stream": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/combined-stream/-/combined-stream-1.0.8.tgz",
      "integrity": "sha512-FQN4MRfuJeHf7cBbBMJFXhKSDq+2kAArBlmRBvcvFE5BB1HZKXtSFASDhdlz9zOYwxh8lDdnvmMOe/+5cdoEdg==",
      "license": "MIT",
      "dependencies": {
        "delayed-stream": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/commander": {
      "version": "11.0.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-11.0.0.tgz",
      "integrity": "sha512-9HMlXtt/BNoYr8ooyjjNRdIilOTkVJXB+GhxMTtOKwk0R4j4lS4NpjuqmRxroBfnfTSHQIHQB7wryHhXarNjmQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=16"
      }
    },
    "node_modules/component-emitter": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/component-emitter/-/component-emitter-1.3.1.tgz",
      "integrity": "sha512-T0+barUSQRTUQASh8bx02dl+DhF54GtIDY13Y3m9oWTklKbb3Wv974meRpeZ3lp1JpLVECWWNHC4vaG2XHXouQ==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/compressible": {
      "version": "2.0.18",
      "resolved": "https://registry.npmjs.org/compressible/-/compressible-2.0.18.tgz",
      "integrity": "sha512-AF3r7P5dWxL8MxyITRMlORQNaOA2IkAFaTr4k7BUumjPtRpGDTZpl0Pb1XCO6JeDCBdp126Cgs9sMxqSjgYyRg==",
      "license": "MIT",
      "dependencies": {
        "mime-db": ">= 1.43.0 < 2"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/compression": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/compression/-/compression-1.8.1.tgz",
      "integrity": "sha512-9mAqGPHLakhCLeNyxPkK4xVo746zQ/czLH1Ky+vkitMnWfWZps8r0qXuwhwizagCRttsL4lfG4pIOvaWLpAP0w==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "compressible": "~2.0.18",
        "debug": "2.6.9",
        "negotiator": "~0.6.4",
        "on-headers": "~1.1.0",
        "safe-buffer": "5.2.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/compression/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/compression/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/concat-map": {
      "version": "0.0.1",
      "resolved": "https://registry.npmjs.org/concat-map/-/concat-map-0.0.1.tgz",
      "integrity": "sha512-/Srv4dswyQNBfohGpz9o6Yb3Gz3SrUDqBH5rTuhGR7ahtlbYKnVxw2bCFMRljaA7EXHaXZ8wsHdodFvbkhKmqg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/concat-stream": {
      "version": "1.6.2",
      "resolved": "https://registry.npmjs.org/concat-stream/-/concat-stream-1.6.2.tgz",
      "integrity": "sha512-27HBghJxjiZtIk3Ycvn/4kbJk/1uZuJFfuPEns6LaEvpvG1f0hTea8lilrouyo9mVc2GWdcEZ8OLoGmSADlrCw==",
      "engines": [
        "node >= 0.8"
      ],
      "license": "MIT",
      "dependencies": {
        "buffer-from": "^1.0.0",
        "inherits": "^2.0.3",
        "readable-stream": "^2.2.2",
        "typedarray": "^0.0.6"
      }
    },
    "node_modules/content-disposition": {
      "version": "0.5.4",
      "resolved": "https://registry.npmjs.org/content-disposition/-/content-disposition-0.5.4.tgz",
      "integrity": "sha512-FveZTNuGw04cxlAiWbzi6zTAL/lhehaWbTtgluJh4/E95DqMwTmha3KZN1aAWA8cFIhHzMZUvLevkw5Rqk+tSQ==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "5.2.1"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/content-type": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/content-type/-/content-type-1.0.5.tgz",
      "integrity": "sha512-nTjqfcBFEipKdXCv4YDQWCfmcLZKm81ldF0pAopTvyrFGVbcR6P/VAAd5G7N+0tTr8QqiU0tFadD6FK4NtJwOA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/convert-source-map": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/convert-source-map/-/convert-source-map-2.0.0.tgz",
      "integrity": "sha512-Kvp459HrV2FEJ1CAsi1Ku+MY3kasH19TFykTz2xWmMeq6bk2NU3XXvfJ+Q61m0xktWwt+1HSYf3JZsTms3aRJg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cookie": {
      "version": "0.7.1",
      "resolved": "https://registry.npmjs.org/cookie/-/cookie-0.7.1.tgz",
      "integrity": "sha512-6DnInpx7SJ2AK3+CTUE/ZM0vWTUboZCegxhC2xiIydHR9jNuTAASBrfEpHhiGOZw/nX51bHt6YQl8jsGo4y/0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/cookie-signature": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/cookie-signature/-/cookie-signature-1.0.6.tgz",
      "integrity": "sha512-QADzlaHc8icV8I7vbaJXJwod9HWYp8uCqf1xa4OfNu1T7JVxQIrUgOWtHdNDtPiywmFbiS12VjotIXLrKM3orQ==",
      "license": "MIT"
    },
    "node_modules/cookiejar": {
      "version": "2.1.4",
      "resolved": "https://registry.npmjs.org/cookiejar/-/cookiejar-2.1.4.tgz",
      "integrity": "sha512-LDx6oHrK+PhzLKJU9j5S7/Y3jM/mUHvD/DeI1WQmJn652iPC5Y4TBzC9l+5OMOXlyTTA+SmVUPm0HQUwpD5Jqw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/core-util-is": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/core-util-is/-/core-util-is-1.0.3.tgz",
      "integrity": "sha512-ZQBvi1DcpJ4GDqanjucZ2Hj3wEO5pZDS89BWbkcrvdxksJorwUDDZamX9ldFkp9aw2lmBDLgkObEA4DWNJ9FYQ==",
      "license": "MIT"
    },
    "node_modules/cors": {
      "version": "2.8.5",
      "resolved": "https://registry.npmjs.org/cors/-/cors-2.8.5.tgz",
      "integrity": "sha512-KIHbLJqu73RGr/hnbrO9uBeixNGuvSQjul/jdFvS/KFSIH1hWVd1ng7zOHx+YrEfInLG7q4n6GHQ9cDtxv/P6g==",
      "license": "MIT",
      "dependencies": {
        "object-assign": "^4",
        "vary": "^1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/crc-32": {
      "version": "1.2.2",
      "resolved": "https://registry.npmjs.org/crc-32/-/crc-32-1.2.2.tgz",
      "integrity": "sha512-ROmzCKrTnOwybPcJApAA6WBWij23HVfGVNKqqrZpuyZOHqK2CwHSvpGuyt/UNNvaIjEd8X5IFGp4Mh+Ie1IHJQ==",
      "license": "Apache-2.0",
      "bin": {
        "crc32": "bin/crc32.njs"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/create-jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/create-jest/-/create-jest-29.7.0.tgz",
      "integrity": "sha512-Adz2bdH0Vq3F53KEMJOoftQFutWCukm6J24wbPWRO4k1kMY7gS7ds/uoJkNuV8wDCtWWnuwGcJwpWcih+zEW1Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "exit": "^0.1.2",
        "graceful-fs": "^4.2.9",
        "jest-config": "^29.7.0",
        "jest-util": "^29.7.0",
        "prompts": "^2.0.1"
      },
      "bin": {
        "create-jest": "bin/create-jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/create-require": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/create-require/-/create-require-1.1.1.tgz",
      "integrity": "sha512-dcKFX3jn0MpIaXjisoRvexIJVEKzaq7z2rZKxf+MSr9TkdmHmsU4m2lcLojrj/FHl8mk5VxMmYA+ftRkP/3oKQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/cross-env": {
      "version": "10.0.0",
      "resolved": "https://registry.npmjs.org/cross-env/-/cross-env-10.0.0.tgz",
      "integrity": "sha512-aU8qlEK/nHYtVuN4p7UQgAwVljzMg8hB4YK5ThRqD2l/ziSnryncPNn7bMLt5cFYsKVKBh8HqLqyCoTupEUu7Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@epic-web/invariant": "^1.0.0",
        "cross-spawn": "^7.0.6"
      },
      "bin": {
        "cross-env": "dist/bin/cross-env.js",
        "cross-env-shell": "dist/bin/cross-env-shell.js"
      },
      "engines": {
        "node": ">=20"
      }
    },
    "node_modules/cross-spawn": {
      "version": "7.0.6",
      "resolved": "https://registry.npmjs.org/cross-spawn/-/cross-spawn-7.0.6.tgz",
      "integrity": "sha512-uV2QOWP2nWzsy2aMp8aRibhi9dlzF5Hgh5SHaB9OiTGEyDTiJJyx0uy51QXdyWbtAHNua4XJzUKca3OzKUd3vA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.1.0",
        "shebang-command": "^2.0.0",
        "which": "^2.0.1"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/csv-parser": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/csv-parser/-/csv-parser-3.2.0.tgz",
      "integrity": "sha512-fgKbp+AJbn1h2dcAHKIdKNSSjfp43BZZykXsCjzALjKy80VXQNHPFJ6T9Afwdzoj24aMkq8GwDS7KGcDPpejrA==",
      "license": "MIT",
      "bin": {
        "csv-parser": "bin/csv-parser"
      },
      "engines": {
        "node": ">= 10"
      }
    },
    "node_modules/cwic-platform": {
      "resolved": "../..",
      "link": true
    },
    "node_modules/debug": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.4.1.tgz",
      "integrity": "sha512-KcKCqiftBJcZr++7ykoDIEwSa3XWowTfNPo92BYxjXiyYEVrUQh2aLyhxBCwww+heortUFxEJYcRzosstTEBYQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "^2.1.3"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/dedent": {
      "version": "1.7.0",
      "resolved": "https://registry.npmjs.org/dedent/-/dedent-1.7.0.tgz",
      "integrity": "sha512-HGFtf8yhuhGhqO07SV79tRp+br4MnbdjeVxotpn1QBl30pcLLCQjX5b2295ll0fv8RKDKsmWYrl05usHM9CewQ==",
      "dev": true,
      "license": "MIT",
      "peerDependencies": {
        "babel-plugin-macros": "^3.1.0"
      },
      "peerDependenciesMeta": {
        "babel-plugin-macros": {
          "optional": true
        }
      }
    },
    "node_modules/deep-is": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/deep-is/-/deep-is-0.1.4.tgz",
      "integrity": "sha512-oIPzksmTg4/MriiaYGO+okXDT7ztn/w3Eptv/+gSIdMdKsJo0u4CfYNFJPy+4SKMuCqGw2wxnA+URMg3t8a/bQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/deepmerge": {
      "version": "4.3.1",
      "resolved": "https://registry.npmjs.org/deepmerge/-/deepmerge-4.3.1.tgz",
      "integrity": "sha512-3sUqbMEc77XqpdNO7FRyRog+eW3ph+GYCbj+rK+uYyRMuwsVy0rMiVtPn+QJlKFvWP/1PYpapqYn0Me2knFn+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/delayed-stream": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/delayed-stream/-/delayed-stream-1.0.0.tgz",
      "integrity": "sha512-ZySD7Nf91aLB0RxL4KGrKHBXl7Eds1DAmEdcoVawXnLD7SDhpNgtuII2aAkg7a7QS41jxPSZ17p4VdGnMHk3MQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4.0"
      }
    },
    "node_modules/depd": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/depd/-/depd-2.0.0.tgz",
      "integrity": "sha512-g7nH6P6dyDioJogAAGprGpCtVImJhpPk/roCzdb3fIh61/s/nPsfR6onyMwkCAR/OlC3yBC0lESvUoQEAssIrw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/destroy": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/destroy/-/destroy-1.2.0.tgz",
      "integrity": "sha512-2sJGJTaXIIaR1w4iJSNoN0hnMY7Gpc/n8D4qSCJw8QqFWXf7cuAgnEHxBpweaVcPevC2l3KpjYCx3NypQQgaJg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8",
        "npm": "1.2.8000 || >= 1.4.16"
      }
    },
    "node_modules/detect-newline": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/detect-newline/-/detect-newline-3.1.0.tgz",
      "integrity": "sha512-TLz+x/vEXm/Y7P7wn1EJFNLxYpUD4TgMosxY6fAVJUnJMbupHBOncxyWUG9OpTaH9EBD7uFI5LfEgmMOc54DsA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/dezalgo": {
      "version": "1.0.4",
      "resolved": "https://registry.npmjs.org/dezalgo/-/dezalgo-1.0.4.tgz",
      "integrity": "sha512-rXSP0bf+5n0Qonsb+SVVfNfIsimO4HEtmnIpPHY8Q1UCzKlQrDMfdobr8nJOOsRgWCyMRqeSBQzmWUMq7zvVig==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "asap": "^2.0.0",
        "wrappy": "1"
      }
    },
    "node_modules/diff": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/diff/-/diff-4.0.2.tgz",
      "integrity": "sha512-58lmxKSA4BNyLz+HHMUzlOEpg09FV+ev6ZMe3vJihgdxzgcwZ8VoEEPmALCZG9LmqfVoNMMKpttIYTVG6uDY7A==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.3.1"
      }
    },
    "node_modules/diff-sequences": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/diff-sequences/-/diff-sequences-29.6.3.tgz",
      "integrity": "sha512-EjePK1srD3P08o2j4f0ExnylqRs5B9tJjcp9t1krH2qRi8CCdsYfwe9JgSLurFBWwq4uOlipzfk5fHNvwFKr8Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/dir-glob": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/dir-glob/-/dir-glob-3.0.1.tgz",
      "integrity": "sha512-WkrWp9GR4KXfKGYzOLmTuGVi1UWFfws377n9cc55/tb6DuqyF6pcQ5AbiHEshaDpY9v6oaSr2XCDidGmMwdzIA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-type": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/doctrine": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/doctrine/-/doctrine-3.0.0.tgz",
      "integrity": "sha512-yS+Q5i3hBf7GBkd4KG8a7eBNNWNGLTaEwwYWUijIYM7zrlYDM0BFXHjjPWlWZ1Rg7UaddZeIDmi9jF3HmqiQ2w==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "esutils": "^2.0.2"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/dotenv": {
      "version": "16.6.1",
      "resolved": "https://registry.npmjs.org/dotenv/-/dotenv-16.6.1.tgz",
      "integrity": "sha512-uBq4egWHTcTt33a72vpSG0z3HnPuIl6NqYcTrKEg2azoEyl2hpW0zqlxysq2pK9HlDIHyHyakeYaYnSAwd8bow==",
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://dotenvx.com"
      }
    },
    "node_modules/dunder-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/dunder-proto/-/dunder-proto-1.0.1.tgz",
      "integrity": "sha512-KIN/nDJBQRcXw0MLVhZE9iQHmG68qAVIBg9CqmUYjmQIhgij9U5MFvrqkUL5FbtyyzZuOeOt0zdeRe4UY7ct+A==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.1",
        "es-errors": "^1.3.0",
        "gopd": "^1.2.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/eastasianwidth": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/eastasianwidth/-/eastasianwidth-0.2.0.tgz",
      "integrity": "sha512-I88TYZWc9XiYHRQ4/3c5rjjfgkjhLyW2luGIheGERbNQ6OY7yTybanSpDXZa8y7VUP9YmDcYa+eyq4ca7iLqWA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/ecdsa-sig-formatter": {
      "version": "1.0.11",
      "resolved": "https://registry.npmjs.org/ecdsa-sig-formatter/-/ecdsa-sig-formatter-1.0.11.tgz",
      "integrity": "sha512-nagl3RYrbNv6kQkeJIpt6NJZy8twLB/2vtz6yN9Z4vRKHN4/QZJIEbqohALSgwKdnksuY3k5Addp5lg8sVoVcQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/ee-first": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/ee-first/-/ee-first-1.1.1.tgz",
      "integrity": "sha512-WMwm9LhRUo+WUaRN+vRuETqG89IgZphVSNkdFgeb6sS/E4OrDIN7t48CAewSHXc6C8lefD8KKfr5vY61brQlow==",
      "license": "MIT"
    },
    "node_modules/electron-to-chromium": {
      "version": "1.5.214",
      "resolved": "https://registry.npmjs.org/electron-to-chromium/-/electron-to-chromium-1.5.214.tgz",
      "integrity": "sha512-TpvUNdha+X3ybfU78NoQatKvQEm1oq3lf2QbnmCEdw+Bd9RuIAY+hJTvq1avzHM0f7EJfnH3vbCnbzKzisc/9Q==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/emittery": {
      "version": "0.13.1",
      "resolved": "https://registry.npmjs.org/emittery/-/emittery-0.13.1.tgz",
      "integrity": "sha512-DeWwawk6r5yR9jFgnDKYt4sLS0LmHJJi3ZOnb5/JdbYwj3nW+FxQnHIjhBKz8YLC7oRNPVM9NQ47I3CVx34eqQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/emittery?sponsor=1"
      }
    },
    "node_modules/emoji-regex": {
      "version": "9.2.2",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-9.2.2.tgz",
      "integrity": "sha512-L18DaJsXSUk2+42pv8mLs5jJT2hqFkFE4j21wOmgbUqsZ2hL72NsUU785g9RXgo3s0ZNgVl42TiHp3ZtOv/Vyg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/enabled": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/enabled/-/enabled-2.0.0.tgz",
      "integrity": "sha512-AKrN98kuwOzMIdAizXGI86UFBoo26CL21UM763y1h/GMSJ4/OHU9k2YlsmBpyScFo/wbLzWQJBMCW4+IO3/+OQ==",
      "license": "MIT"
    },
    "node_modules/encodeurl": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-2.0.0.tgz",
      "integrity": "sha512-Q0n9HRi4m6JuGIV1eFlmvJB7ZEVxu93IrMyiMsGC0lrMJMWzRgx6WGquyfQgZVb31vhGgXnfmPNNXmxnOkRBrg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/error-ex": {
      "version": "1.3.2",
      "resolved": "https://registry.npmjs.org/error-ex/-/error-ex-1.3.2.tgz",
      "integrity": "sha512-7dFHNmqeFSEt2ZBsCriorKnn3Z2pj+fd9kmI6QoWw4//DL+icEBfc0U7qJCisqrTsKTjw4fNFy2pW9OqStD84g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-arrayish": "^0.2.1"
      }
    },
    "node_modules/es-define-property": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/es-define-property/-/es-define-property-1.0.1.tgz",
      "integrity": "sha512-e3nRfgfUZ4rNGL232gUgX06QNyyez04KdjFrF+LTRoOXmrOgFKDg4BCdsjW8EnT69eqdYGmRpJwiPVYNrCaW3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-errors": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/es-errors/-/es-errors-1.3.0.tgz",
      "integrity": "sha512-Zf5H2Kxt2xjTvbJvP2ZWLEICxA6j+hAmMzIlypy4xcBg1vKVnx89Wy0GbS+kf5cwCVFFzdCFh2XSCFNULS6csw==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-object-atoms": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/es-object-atoms/-/es-object-atoms-1.1.1.tgz",
      "integrity": "sha512-FGgH2h8zKNim9ljj7dankFPcICIK9Cp5bm+c2gQSYePhpaG5+esrLODihIorn+Pe6FGJzWhXQotPv73jTaldXA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/es-set-tostringtag": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/es-set-tostringtag/-/es-set-tostringtag-2.1.0.tgz",
      "integrity": "sha512-j6vWzfrGVfyXxge+O0x5sh6cvxAog0a/4Rdd2K36zCMV5eJ+/+tOAngRO8cODMNWbVRdVlmGZQL2YS3yR8bIUA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.6",
        "has-tostringtag": "^1.0.2",
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/escalade": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/escalade/-/escalade-3.2.0.tgz",
      "integrity": "sha512-WUj2qlxaQtO4g6Pq5c29GTcWGDyd8itL8zTlipgECz3JesAiiOKotd8JU6otB3PACgG6xkJUyVhboMS+bje/jA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/escape-html": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/escape-html/-/escape-html-1.0.3.tgz",
      "integrity": "sha512-NiSupZ4OeuGwr68lGIeym/ksIZMJodUGOSCZ/FSnTxcrekbvqrgdUxlJOMpijaKZVjAJrWrGs/6Jy8OMuyj9ow==",
      "license": "MIT"
    },
    "node_modules/escape-string-regexp": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-4.0.0.tgz",
      "integrity": "sha512-TtpcNJ3XAzx3Gq8sWRzJaVajRs0uVxA2YAkdb1jm2YkPz4G6egUFAyA3n5vtEIZefPk5Wa4UXbKuS5fKkJWdgA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/eslint": {
      "version": "8.57.1",
      "resolved": "https://registry.npmjs.org/eslint/-/eslint-8.57.1.tgz",
      "integrity": "sha512-ypowyDxpVSYpkXr9WPv2PAZCtNip1Mv5KTW0SCurXv/9iOpcrH9PaqUElksqEB6pChqHGDRCFTyrZlGhnLNGiA==",
      "deprecated": "This version is no longer supported. Please see https://eslint.org/version-support for other options.",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@eslint-community/eslint-utils": "^4.2.0",
        "@eslint-community/regexpp": "^4.6.1",
        "@eslint/eslintrc": "^2.1.4",
        "@eslint/js": "8.57.1",
        "@humanwhocodes/config-array": "^0.13.0",
        "@humanwhocodes/module-importer": "^1.0.1",
        "@nodelib/fs.walk": "^1.2.8",
        "@ungap/structured-clone": "^1.2.0",
        "ajv": "^6.12.4",
        "chalk": "^4.0.0",
        "cross-spawn": "^7.0.2",
        "debug": "^4.3.2",
        "doctrine": "^3.0.0",
        "escape-string-regexp": "^4.0.0",
        "eslint-scope": "^7.2.2",
        "eslint-visitor-keys": "^3.4.3",
        "espree": "^9.6.1",
        "esquery": "^1.4.2",
        "esutils": "^2.0.2",
        "fast-deep-equal": "^3.1.3",
        "file-entry-cache": "^6.0.1",
        "find-up": "^5.0.0",
        "glob-parent": "^6.0.2",
        "globals": "^13.19.0",
        "graphemer": "^1.4.0",
        "ignore": "^5.2.0",
        "imurmurhash": "^0.1.4",
        "is-glob": "^4.0.0",
        "is-path-inside": "^3.0.3",
        "js-yaml": "^4.1.0",
        "json-stable-stringify-without-jsonify": "^1.0.1",
        "levn": "^0.4.1",
        "lodash.merge": "^4.6.2",
        "minimatch": "^3.1.2",
        "natural-compare": "^1.4.0",
        "optionator": "^0.9.3",
        "strip-ansi": "^6.0.1",
        "text-table": "^0.2.0"
      },
      "bin": {
        "eslint": "bin/eslint.js"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-scope": {
      "version": "7.2.2",
      "resolved": "https://registry.npmjs.org/eslint-scope/-/eslint-scope-7.2.2.tgz",
      "integrity": "sha512-dOt21O7lTMhDM+X9mB4GX+DZrZtCUJPL/wlcTqxyrx5IvO0IYtILdtrQGQp+8n5S0gwSVmOf9NQrjMOgfQZlIg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "esrecurse": "^4.3.0",
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint-visitor-keys": {
      "version": "3.4.3",
      "resolved": "https://registry.npmjs.org/eslint-visitor-keys/-/eslint-visitor-keys-3.4.3.tgz",
      "integrity": "sha512-wpc+LXeiyiisxPlEkUzU6svyS1frIO3Mgxj1fdy7Pm8Ygzguax2N3Fa/D/ag1WqbOprdI+uY6wMUl8/a2G+iag==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/eslint/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/eslint/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/espree": {
      "version": "9.6.1",
      "resolved": "https://registry.npmjs.org/espree/-/espree-9.6.1.tgz",
      "integrity": "sha512-oruZaFkjorTpF32kDSI5/75ViwGeZginGGy2NoOSg3Q9bnwlnmDm4HLnkl0RE3n+njDXR037aY1+x58Z/zFdwQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "acorn": "^8.9.0",
        "acorn-jsx": "^5.3.2",
        "eslint-visitor-keys": "^3.4.1"
      },
      "engines": {
        "node": "^12.22.0 || ^14.17.0 || >=16.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/eslint"
      }
    },
    "node_modules/esprima": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/esprima/-/esprima-4.0.1.tgz",
      "integrity": "sha512-eGuFFw7Upda+g4p+QHvnW0RyTX/SVeJBDM/gCtMARO0cLuT2HcEKnTPvhjV6aGeqrCB/sbNop0Kszm0jsaWU4A==",
      "dev": true,
      "license": "BSD-2-Clause",
      "bin": {
        "esparse": "bin/esparse.js",
        "esvalidate": "bin/esvalidate.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/esquery": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/esquery/-/esquery-1.6.0.tgz",
      "integrity": "sha512-ca9pw9fomFcKPvFLXhBKUK90ZvGibiGOvRJNbjljY7s7uq/5YO4BOzcYtJqExdx99rF6aAcnRxHmcUHcz6sQsg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "estraverse": "^5.1.0"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/esrecurse": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/esrecurse/-/esrecurse-4.3.0.tgz",
      "integrity": "sha512-KmfKL3b6G+RXvP8N1vr3Tq1kL/oCFgn2NYXEtqP8/L3pKapUA4G8cFVaoF3SU323CD4XypR/ffioHmkti6/Tag==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "estraverse": "^5.2.0"
      },
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/estraverse": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/estraverse/-/estraverse-5.3.0.tgz",
      "integrity": "sha512-MMdARuVEQziNTeJD8DgMqmhwR11BRQ/cBP+pLtYdSTnf3MIO8fFeiINEbX36ZdNlfU/7A9f3gUw49B3oQsvwBA==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=4.0"
      }
    },
    "node_modules/esutils": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/esutils/-/esutils-2.0.3.tgz",
      "integrity": "sha512-kVscqXk4OCp68SZ0dkgEKVi6/8ij300KBWTJq32P/dYeWTSwK41WyTxalN1eRmA5Z9UU/LX9D7FWSmV9SAYx6g==",
      "dev": true,
      "license": "BSD-2-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/etag": {
      "version": "1.8.1",
      "resolved": "https://registry.npmjs.org/etag/-/etag-1.8.1.tgz",
      "integrity": "sha512-aIL5Fx7mawVa300al2BnEE4iNvo1qETxLrPI/o05L7z6go7fCw1J6EQmbK4FmJ2AS7kgVF/KEZWufBfdClMcPg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/event-target-shim": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/event-target-shim/-/event-target-shim-5.0.1.tgz",
      "integrity": "sha512-i/2XbnSz/uxRCU6+NdVJgKWDTM427+MqYbkQzD321DuCQJUqOuJKIA0IM2+W2xtYHdKOmZ4dR6fExsd4SXL+WQ==",
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/eventemitter3": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/eventemitter3/-/eventemitter3-5.0.1.tgz",
      "integrity": "sha512-GWkBvjiSZK87ELrYOSESUYeVIc9mvLLf/nXalMOS5dYrgZq9o5OVkbZAVM06CVxYsCwH9BDZFPlQTlPA1j4ahA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/execa": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/execa/-/execa-5.1.1.tgz",
      "integrity": "sha512-8uSpZZocAZRBAPIEINJj3Lo9HyGitllczc27Eh5YYojjMFMn8yHMDMaUHE2Jqfq05D/wucwI4JGURyXt1vchyg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cross-spawn": "^7.0.3",
        "get-stream": "^6.0.0",
        "human-signals": "^2.1.0",
        "is-stream": "^2.0.0",
        "merge-stream": "^2.0.0",
        "npm-run-path": "^4.0.1",
        "onetime": "^5.1.2",
        "signal-exit": "^3.0.3",
        "strip-final-newline": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/execa?sponsor=1"
      }
    },
    "node_modules/exit": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/exit/-/exit-0.1.2.tgz",
      "integrity": "sha512-Zk/eNKV2zbjpKzrsQ+n1G6poVbErQxJ0LBOJXaKZ1EViLzH+hrLu9cdXI4zw9dBQJslwBEpbQ2P1oS7nDxs6jQ==",
      "dev": true,
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/expect": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/expect/-/expect-29.7.0.tgz",
      "integrity": "sha512-2Zks0hf1VLFYI1kbh0I5jP3KHHyCHpkfyHBzsSXRFgl/Bg9mWYfMW8oD+PdMPlEwy5HNsR9JutYy6pMeOh61nw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/expect-utils": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/express": {
      "version": "4.21.2",
      "resolved": "https://registry.npmjs.org/express/-/express-4.21.2.tgz",
      "integrity": "sha512-28HqgMZAmih1Czt9ny7qr6ek2qddF4FclbMzwhCREB6OFfH+rXAnuNCwo1/wFvrtbgsQDb4kSbX9de9lFbrXnA==",
      "license": "MIT",
      "dependencies": {
        "accepts": "~1.3.8",
        "array-flatten": "1.1.1",
        "body-parser": "1.20.3",
        "content-disposition": "0.5.4",
        "content-type": "~1.0.4",
        "cookie": "0.7.1",
        "cookie-signature": "1.0.6",
        "debug": "2.6.9",
        "depd": "2.0.0",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "finalhandler": "1.3.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "merge-descriptors": "1.0.3",
        "methods": "~1.1.2",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "path-to-regexp": "0.1.12",
        "proxy-addr": "~2.0.7",
        "qs": "6.13.0",
        "range-parser": "~1.2.1",
        "safe-buffer": "5.2.1",
        "send": "0.19.0",
        "serve-static": "1.16.2",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "type-is": "~1.6.18",
        "utils-merge": "1.0.1",
        "vary": "~1.1.2"
      },
      "engines": {
        "node": ">= 0.10.0"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/express"
      }
    },
    "node_modules/express-rate-limit": {
      "version": "6.11.2",
      "resolved": "https://registry.npmjs.org/express-rate-limit/-/express-rate-limit-6.11.2.tgz",
      "integrity": "sha512-a7uwwfNTh1U60ssiIkuLFWHt4hAC5yxlLGU2VP0X4YNlyEDZAqF4tK3GD3NSitVBrCQmQ0++0uOyFOgC2y4DDw==",
      "license": "MIT",
      "engines": {
        "node": ">= 14"
      },
      "peerDependencies": {
        "express": "^4 || ^5"
      }
    },
    "node_modules/express-validator": {
      "version": "7.2.1",
      "resolved": "https://registry.npmjs.org/express-validator/-/express-validator-7.2.1.tgz",
      "integrity": "sha512-CjNE6aakfpuwGaHQZ3m8ltCG2Qvivd7RHtVMS/6nVxOM7xVGqr4bhflsm4+N5FP5zI7Zxp+Hae+9RE+o8e3ZOQ==",
      "license": "MIT",
      "dependencies": {
        "lodash": "^4.17.21",
        "validator": "~13.12.0"
      },
      "engines": {
        "node": ">= 8.0.0"
      }
    },
    "node_modules/express/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/express/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/fast-deep-equal": {
      "version": "3.1.3",
      "resolved": "https://registry.npmjs.org/fast-deep-equal/-/fast-deep-equal-3.1.3.tgz",
      "integrity": "sha512-f3qQ9oQy9j2AhBe/H9VC91wLmKBCCU/gDOnKNAYG5hswO7BLKj09Hc5HYNz9cGI++xlpDCIgDaitVs03ATR84Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-glob": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/fast-glob/-/fast-glob-3.3.3.tgz",
      "integrity": "sha512-7MptL8U0cqcFdzIzwOTHoilX9x5BrNqye7Z/LuC7kCMRio1EMSyqRK3BEAUD7sXRq4iT4AzTVuZdhgQ2TCvYLg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@nodelib/fs.stat": "^2.0.2",
        "@nodelib/fs.walk": "^1.2.3",
        "glob-parent": "^5.1.2",
        "merge2": "^1.3.0",
        "micromatch": "^4.0.8"
      },
      "engines": {
        "node": ">=8.6.0"
      }
    },
    "node_modules/fast-glob/node_modules/glob-parent": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-5.1.2.tgz",
      "integrity": "sha512-AOIgSQCepiJYwP3ARnGx+5VnTu2HBYdzbGP45eLw1vr3zB3vZLeyed1sC9hnbcOc9/SrMyM5RPQrkGz4aS9Zow==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/fast-json-stable-stringify": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/fast-json-stable-stringify/-/fast-json-stable-stringify-2.1.0.tgz",
      "integrity": "sha512-lhd/wF+Lk98HZoTCtlVraHtfh5XYijIjalXck7saUtuanSDyLMxnHhSXEDJqHxD7msR8D0uCmqlkwjCV8xvwHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-levenshtein": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/fast-levenshtein/-/fast-levenshtein-2.0.6.tgz",
      "integrity": "sha512-DCXu6Ifhqcks7TZKY3Hxp3y6qphY5SJZmrWMDrKcERSOXWQdMhU9Ig/PYrzyw/ul9jOIyh0N4M0tbC5hodg8dw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fast-safe-stringify": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/fast-safe-stringify/-/fast-safe-stringify-2.1.1.tgz",
      "integrity": "sha512-W+KJc2dmILlPplD/H4K9l9LcAHAfPtP6BY84uVLXQ6Evcz9Lcg33Y2z1IVblT6xdY54PXYVHEv+0Wpq8Io6zkA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/fastq": {
      "version": "1.19.1",
      "resolved": "https://registry.npmjs.org/fastq/-/fastq-1.19.1.tgz",
      "integrity": "sha512-GwLTyxkCXjXbxqIhTsMI2Nui8huMPtnxg7krajPJAjnEG/iiOS7i+zCtWGZR9G0NBKbXKh6X9m9UIsYX/N6vvQ==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "reusify": "^1.0.4"
      }
    },
    "node_modules/fb-watchman": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/fb-watchman/-/fb-watchman-2.0.2.tgz",
      "integrity": "sha512-p5161BqbuCaSnB8jIbzQHOlpgsPmK5rJVDfDKO91Axs5NC1uu3HRQm6wt9cd9/+GtQQIO53JdGXXoyDpTAsgYA==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "bser": "2.1.1"
      }
    },
    "node_modules/fecha": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/fecha/-/fecha-4.2.3.tgz",
      "integrity": "sha512-OP2IUU6HeYKJi3i0z4A19kHMQoLVs4Hc+DPqqxI2h/DPZHTm/vjsfC6P0b4jCMy14XizLBqvndQ+UilD7707Jw==",
      "license": "MIT"
    },
    "node_modules/file-entry-cache": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/file-entry-cache/-/file-entry-cache-6.0.1.tgz",
      "integrity": "sha512-7Gps/XWymbLk2QLYK4NzpMOrYjMhdIxXuIvy2QBsLE6ljuodKvdkWs/cpyJJ3CVIVpH0Oi1Hvg1ovbMzLdFBBg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flat-cache": "^3.0.4"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/file-stream-rotator": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/file-stream-rotator/-/file-stream-rotator-0.6.1.tgz",
      "integrity": "sha512-u+dBid4PvZw17PmDeRcNOtCP9CCK/9lRN2w+r1xIS7yOL9JFrIBKTvrYsxT4P0pGtThYTn++QS5ChHaUov3+zQ==",
      "license": "MIT",
      "dependencies": {
        "moment": "^2.29.1"
      }
    },
    "node_modules/fill-range": {
      "version": "7.1.1",
      "resolved": "https://registry.npmjs.org/fill-range/-/fill-range-7.1.1.tgz",
      "integrity": "sha512-YsGpe3WHLK8ZYi4tWDg2Jy3ebRz2rXowDxnld4bkQB00cc/1Zw9AWnC0i9ztDJitivtQvaI9KaLyKrc+hBW0yg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "to-regex-range": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/finalhandler": {
      "version": "1.3.1",
      "resolved": "https://registry.npmjs.org/finalhandler/-/finalhandler-1.3.1.tgz",
      "integrity": "sha512-6BN9trH7bp3qvnrRyzsBz+g3lZxTNZTbVO2EV1CS0WIcDbawYVdYvGflME/9QP0h0pYlCDBCTjYa9nZzMDpyxQ==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "on-finished": "2.4.1",
        "parseurl": "~1.3.3",
        "statuses": "2.0.1",
        "unpipe": "~1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/finalhandler/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/finalhandler/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/find-up": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-5.0.0.tgz",
      "integrity": "sha512-78/PXT1wlLLDgTzDs7sjq9hzz0vXD+zn+7wypEe4fXQxCmdmqfGsEPQxmiCSQI3ajFV91bVSsvNtrJRiW6nGng==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^6.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/flat-cache": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/flat-cache/-/flat-cache-3.2.0.tgz",
      "integrity": "sha512-CYcENa+FtcUKLmhhqyctpclsq7QF38pKjZHsGNiSQF5r4FtoKDWabFDl3hzaEQMvT1LHEysw5twgLvpYYb4vbw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "flatted": "^3.2.9",
        "keyv": "^4.5.3",
        "rimraf": "^3.0.2"
      },
      "engines": {
        "node": "^10.12.0 || >=12.0.0"
      }
    },
    "node_modules/flatted": {
      "version": "3.3.3",
      "resolved": "https://registry.npmjs.org/flatted/-/flatted-3.3.3.tgz",
      "integrity": "sha512-GX+ysw4PBCz0PzosHDepZGANEuFCMLrnRTiEy9McGjmkCQYwRq4A/X786G/fjM/+OjsWSU1ZrY5qyARZmO/uwg==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fn.name": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/fn.name/-/fn.name-1.1.0.tgz",
      "integrity": "sha512-GRnmB5gPyJpAhTQdSZTSp9uaPSvl09KoYcMQtsB9rQoOmzs9dH6ffeccH+Z+cv6P68Hu5bC6JjRh4Ah/mHSNRw==",
      "license": "MIT"
    },
    "node_modules/follow-redirects": {
      "version": "1.15.11",
      "resolved": "https://registry.npmjs.org/follow-redirects/-/follow-redirects-1.15.11.tgz",
      "integrity": "sha512-deG2P0JfjrTxl50XGCDyfI97ZGVCxIpfKYmfyrQ54n5FO/0gfIES8C/Psl6kWVDolizcaaxZJnTS0QSMxvnsBQ==",
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/RubenVerborgh"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=4.0"
      },
      "peerDependenciesMeta": {
        "debug": {
          "optional": true
        }
      }
    },
    "node_modules/form-data": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/form-data/-/form-data-4.0.4.tgz",
      "integrity": "sha512-KrGhL9Q4zjj0kiUt5OO4Mr/A/jlI2jDYs5eHBpYHPcBEVSiipAvn2Ko2HnPe20rmcuuvMHNdZFp+4IlGTMF0Ow==",
      "license": "MIT",
      "dependencies": {
        "asynckit": "^0.4.0",
        "combined-stream": "^1.0.8",
        "es-set-tostringtag": "^2.1.0",
        "hasown": "^2.0.2",
        "mime-types": "^2.1.12"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/form-data-encoder": {
      "version": "1.7.2",
      "resolved": "https://registry.npmjs.org/form-data-encoder/-/form-data-encoder-1.7.2.tgz",
      "integrity": "sha512-qfqtYan3rxrnCk1VYaA4H+Ms9xdpPqvLZa6xmMgFvhO32x7/3J/ExcTd6qpxM0vH2GdMI+poehyBZvqfMTto8A==",
      "license": "MIT"
    },
    "node_modules/formdata-node": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/formdata-node/-/formdata-node-4.4.1.tgz",
      "integrity": "sha512-0iirZp3uVDjVGt9p49aTaqjk84TrglENEDuqfdlZQ1roC9CWlPk6Avf8EEnZNcAqPonwkG35x4n3ww/1THYAeQ==",
      "license": "MIT",
      "dependencies": {
        "node-domexception": "1.0.0",
        "web-streams-polyfill": "4.0.0-beta.3"
      },
      "engines": {
        "node": ">= 12.20"
      }
    },
    "node_modules/formidable": {
      "version": "2.1.5",
      "resolved": "https://registry.npmjs.org/formidable/-/formidable-2.1.5.tgz",
      "integrity": "sha512-Oz5Hwvwak/DCaXVVUtPn4oLMLLy1CdclLKO1LFgU7XzDpVMUU5UjlSLpGMocyQNNk8F6IJW9M/YdooSn2MRI+Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@paralleldrive/cuid2": "^2.2.2",
        "dezalgo": "^1.0.4",
        "once": "^1.4.0",
        "qs": "^6.11.0"
      },
      "funding": {
        "url": "https://ko-fi.com/tunnckoCore/commissions"
      }
    },
    "node_modules/forwarded": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/forwarded/-/forwarded-0.2.0.tgz",
      "integrity": "sha512-buRG0fpBtRHSTCOASe6hD258tEubFoRLb4ZNA6NxMVHNw2gOcwHo9wyablzMzOA5z9xA9L1KNjk/Nt6MT9aYow==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/frac": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/frac/-/frac-1.1.2.tgz",
      "integrity": "sha512-w/XBfkibaTl3YDqASwfDUqkna4Z2p9cFSr1aHDt0WoMTECnRfBOv2WArlZILlqgWlmdIlALXGpM2AOhEk5W3IA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/fresh": {
      "version": "0.5.2",
      "resolved": "https://registry.npmjs.org/fresh/-/fresh-0.5.2.tgz",
      "integrity": "sha512-zJ2mQYM18rEFOudeV4GShTGIQ7RbzA7ozbU9I/XBpm7kqgMywgmylMwXHxZJmkVoYkna9d2pVXVXPdYTP9ej8Q==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/fs.realpath": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/fs.realpath/-/fs.realpath-1.0.0.tgz",
      "integrity": "sha512-OO0pH2lK6a0hZnAdau5ItzHPI6pUlvI7jMVnxUQRtw4owF2wk8lOSabtGDCTP4Ggrg2MbGnWO9X8K1t4+fGMDw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/fsevents": {
      "version": "2.3.3",
      "resolved": "https://registry.npmjs.org/fsevents/-/fsevents-2.3.3.tgz",
      "integrity": "sha512-5xoDfX+fL7faATnagmWPpbFtwh/R77WmMMqqHGS65C3vvB0YHrgF+B1YmZ3441tMj5n63k0212XNoJwzlhffQw==",
      "dev": true,
      "hasInstallScript": true,
      "license": "MIT",
      "optional": true,
      "os": [
        "darwin"
      ],
      "engines": {
        "node": "^8.16.0 || ^10.6.0 || >=11.0.0"
      }
    },
    "node_modules/function-bind": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/function-bind/-/function-bind-1.1.2.tgz",
      "integrity": "sha512-7XHNxH7qX9xG5mIwxkhumTox/MIRNcOgDrxWsMt2pAr23WHp6MrRlN7FBSFpCpr+oVO0F744iUgR82nJMfG2SA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/generic-pool": {
      "version": "3.9.0",
      "resolved": "https://registry.npmjs.org/generic-pool/-/generic-pool-3.9.0.tgz",
      "integrity": "sha512-hymDOu5B53XvN4QT9dBmZxPX4CWhBPPLguTZ9MMFeFa/Kg0xWVfylOVNlJji/E7yTZWFd/q9GO5TxDLq156D7g==",
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/gensync": {
      "version": "1.0.0-beta.2",
      "resolved": "https://registry.npmjs.org/gensync/-/gensync-1.0.0-beta.2.tgz",
      "integrity": "sha512-3hN7NaskYvMDLQY55gnW3NQ+mesEAepTqlg+VEbj7zzqEMBVNhzcGYYeqFo/TlYz6eQiFcp1HcsCZO+nGgS8zg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6.9.0"
      }
    },
    "node_modules/get-caller-file": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/get-caller-file/-/get-caller-file-2.0.5.tgz",
      "integrity": "sha512-DyFP3BM/3YHTQOCUL/w0OZHR0lpKeGrxotcHWcqNEdnltqFwXVfhEBQ94eIo34AfQpo0rGki4cyIiftY06h2Fg==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": "6.* || 8.* || >= 10.*"
      }
    },
    "node_modules/get-intrinsic": {
      "version": "1.3.0",
      "resolved": "https://registry.npmjs.org/get-intrinsic/-/get-intrinsic-1.3.0.tgz",
      "integrity": "sha512-9fSjSaos/fRIVIp+xSJlE6lfwhES7LNtKaCBIamHsjr2na1BiABJPo0mOjjz8GJDURarmCPGqaiVg5mfjb98CQ==",
      "license": "MIT",
      "dependencies": {
        "call-bind-apply-helpers": "^1.0.2",
        "es-define-property": "^1.0.1",
        "es-errors": "^1.3.0",
        "es-object-atoms": "^1.1.1",
        "function-bind": "^1.1.2",
        "get-proto": "^1.0.1",
        "gopd": "^1.2.0",
        "has-symbols": "^1.1.0",
        "hasown": "^2.0.2",
        "math-intrinsics": "^1.1.0"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/get-package-type": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/get-package-type/-/get-package-type-0.1.0.tgz",
      "integrity": "sha512-pjzuKtY64GYfWizNAJ0fr9VqttZkNiK2iS430LtIHzjBEr6bX8Am2zm4sW4Ro5wjWW5cAlRL1qAMTcXbjNAO2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.0.0"
      }
    },
    "node_modules/get-proto": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/get-proto/-/get-proto-1.0.1.tgz",
      "integrity": "sha512-sTSfBjoXBp89JvIKIefqw7U2CCebsc74kiY6awiGogKtoSGbgjYE/G/+l9sF3MWFPNc9IcoOC4ODfKHfxFmp0g==",
      "license": "MIT",
      "dependencies": {
        "dunder-proto": "^1.0.1",
        "es-object-atoms": "^1.0.0"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/get-stream": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/get-stream/-/get-stream-6.0.1.tgz",
      "integrity": "sha512-ts6Wi+2j3jQjqi70w5AlN8DFnkSwC+MqmxEzdEALB2qXZYV3X/b1CTfgPLGJNMeAWxdPfU8FO1ms3NUfaHCPYg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/get-tsconfig": {
      "version": "4.10.1",
      "resolved": "https://registry.npmjs.org/get-tsconfig/-/get-tsconfig-4.10.1.tgz",
      "integrity": "sha512-auHyJ4AgMz7vgS8Hp3N6HXSmlMdUyhSUrfBF16w153rxtLIEOE+HGqaBppczZvnHLqQJfiHotCYpNhl0lUROFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-pkg-maps": "^1.0.0"
      },
      "funding": {
        "url": "https://github.com/privatenumber/get-tsconfig?sponsor=1"
      }
    },
    "node_modules/glob": {
      "version": "7.2.3",
      "resolved": "https://registry.npmjs.org/glob/-/glob-7.2.3.tgz",
      "integrity": "sha512-nFR0zLpU2YCaRxwoCJvL6UvCH2JFyFVIvwTLsIf21AuHlMskA1hhTdk+LlYJtOlYt9v6dvszD2BGRqBL+iQK9Q==",
      "deprecated": "Glob versions prior to v9 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "fs.realpath": "^1.0.0",
        "inflight": "^1.0.4",
        "inherits": "2",
        "minimatch": "^3.1.1",
        "once": "^1.3.0",
        "path-is-absolute": "^1.0.0"
      },
      "engines": {
        "node": "*"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/glob-parent": {
      "version": "6.0.2",
      "resolved": "https://registry.npmjs.org/glob-parent/-/glob-parent-6.0.2.tgz",
      "integrity": "sha512-XxwI8EOhVQgWp6iDL+3b0r86f4d6AX6zSU55HfB4ydCEuXLXc5FcYeOu+nnGftS4TEju/11rt4KJPTMgbfmv4A==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "is-glob": "^4.0.3"
      },
      "engines": {
        "node": ">=10.13.0"
      }
    },
    "node_modules/glob/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/glob/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/globals": {
      "version": "13.24.0",
      "resolved": "https://registry.npmjs.org/globals/-/globals-13.24.0.tgz",
      "integrity": "sha512-AhO5QUcj8llrbG09iWhPU2B204J1xnPeL8kQmVorSsy+Sjj1sk8gIyh6cUocGmH4L0UuhAJy+hJMRA4mgA4mFQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^0.20.2"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/globby": {
      "version": "11.1.0",
      "resolved": "https://registry.npmjs.org/globby/-/globby-11.1.0.tgz",
      "integrity": "sha512-jhIXaOzy1sb8IyocaruWSn1TjmnBVs8Ayhcy83rmxNJ8q2uWKCAj3CnJY+KpGSXCueAPc0i05kVvVKtP1t9S3g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "array-union": "^2.1.0",
        "dir-glob": "^3.0.1",
        "fast-glob": "^3.2.9",
        "ignore": "^5.2.0",
        "merge2": "^1.4.1",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/gopd": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/gopd/-/gopd-1.2.0.tgz",
      "integrity": "sha512-ZUKRh6/kUFoAiTAtTYPZJ3hw9wNxx+BIBOijnlG9PnrJsCcSjs1wyyD6vJpaYtgnzDrKYRSqf3OO6Rfa93xsRg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/graceful-fs": {
      "version": "4.2.11",
      "resolved": "https://registry.npmjs.org/graceful-fs/-/graceful-fs-4.2.11.tgz",
      "integrity": "sha512-RbJ5/jmFcNNCcDV5o9eTnBLJ/HszWV0P73bc+Ff4nS/rJj+YaS6IGyiOL0VoBYX+l1Wrl3k63h/KrH+nhJ0XvQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/graphemer": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/graphemer/-/graphemer-1.4.0.tgz",
      "integrity": "sha512-EtKwoO6kxCL9WO5xipiHTZlSzBm7WLT627TqC/uVRd0HKmq8NXyebnNYxDoBi7wt8eTWrUrKXCOVaFq9x1kgag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/handlebars": {
      "version": "4.7.8",
      "resolved": "https://registry.npmjs.org/handlebars/-/handlebars-4.7.8.tgz",
      "integrity": "sha512-vafaFqs8MZkRrSX7sFVUdo3ap/eNiLnb4IakshzvP56X5Nr1iGKAIqdX6tMlm6HcNRIkr6AxO5jFEoJzzpT8aQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "minimist": "^1.2.5",
        "neo-async": "^2.6.2",
        "source-map": "^0.6.1",
        "wordwrap": "^1.0.0"
      },
      "bin": {
        "handlebars": "bin/handlebars"
      },
      "engines": {
        "node": ">=0.4.7"
      },
      "optionalDependencies": {
        "uglify-js": "^3.1.4"
      }
    },
    "node_modules/has-flag": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-4.0.0.tgz",
      "integrity": "sha512-EykJT/Q1KjTWctppgIAgfSO0tKVuZUjhgMr17kqTumMl6Afv3EISleU7qZUzoXDFTAHTDC4NOoG/ZxU3EvlMPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/has-symbols": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/has-symbols/-/has-symbols-1.1.0.tgz",
      "integrity": "sha512-1cDNdwJ2Jaohmb3sg4OmKaMBwuC48sYni5HUw2DvsC8LjGTLK9h+eb1X6RyuOHe4hT0ULCW68iomhjUoKUqlPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/has-tostringtag": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/has-tostringtag/-/has-tostringtag-1.0.2.tgz",
      "integrity": "sha512-NqADB8VjPFLM2V0VvHUewwwsw0ZWBaIdgo+ieHtK3hasLz4qeCRjYcqfB6AQrBggRKppKF8L52/VqdVsO47Dlw==",
      "license": "MIT",
      "dependencies": {
        "has-symbols": "^1.0.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/hasown": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/hasown/-/hasown-2.0.2.tgz",
      "integrity": "sha512-0hJU9SCPvmMzIBdZFqNPXWa6dqh7WdH0cII9y+CyS8rG3nL48Bclra9HmKhVVUHyPWNH5Y7xDwAB7bfgSjkUMQ==",
      "license": "MIT",
      "dependencies": {
        "function-bind": "^1.1.2"
      },
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/helmet": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/helmet/-/helmet-7.2.0.tgz",
      "integrity": "sha512-ZRiwvN089JfMXokizgqEPXsl2Guk094yExfoDXR0cBYWxtBbaSww/w+vT4WEJsBW2iTUi1GgZ6swmoug3Oy4Xw==",
      "license": "MIT",
      "engines": {
        "node": ">=16.0.0"
      }
    },
    "node_modules/html-escaper": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/html-escaper/-/html-escaper-2.0.2.tgz",
      "integrity": "sha512-H2iMtd0I4Mt5eYiapRdIDjp+XzelXQ0tFE4JS7YFwFevXXMmOp9myNrUvCg0D6ws8iqkRPBfKHgbwig1SmlLfg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/http-errors": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/http-errors/-/http-errors-2.0.0.tgz",
      "integrity": "sha512-FtwrG/euBzaEjYeRqOgly7G0qviiXoJWnvEH2Z1plBdXgbyjv34pHTSb9zoeHMyDy33+DWy5Wt9Wo+TURtOYSQ==",
      "license": "MIT",
      "dependencies": {
        "depd": "2.0.0",
        "inherits": "2.0.4",
        "setprototypeof": "1.2.0",
        "statuses": "2.0.1",
        "toidentifier": "1.0.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/human-signals": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-2.1.0.tgz",
      "integrity": "sha512-B4FFZ6q/T2jhhksgkbEW3HBvWIfDW85snkQgawt07S7J5QXTk6BkNV+0yAeZrM5QpMAdYlocGoljn0sJ/WQkFw==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=10.17.0"
      }
    },
    "node_modules/humanize-ms": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/humanize-ms/-/humanize-ms-1.2.1.tgz",
      "integrity": "sha512-Fl70vYtsAFb/C06PTS9dZBo7ihau+Tu/DNCk/OyHhea07S+aeMWpFFkUaXRa8fI+ScZbEI8dfSxwY7gxZ9SAVQ==",
      "license": "MIT",
      "dependencies": {
        "ms": "^2.0.0"
      }
    },
    "node_modules/husky": {
      "version": "8.0.3",
      "resolved": "https://registry.npmjs.org/husky/-/husky-8.0.3.tgz",
      "integrity": "sha512-+dQSyqPh4x1hlO1swXBiNb2HzTDN1I2IGLQx1GrBuiqFJfoMrnZWwVmatvSiO+Iz8fBUnf+lekwNo4c2LlXItg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "husky": "lib/bin.js"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/sponsors/typicode"
      }
    },
    "node_modules/iconv-lite": {
      "version": "0.4.24",
      "resolved": "https://registry.npmjs.org/iconv-lite/-/iconv-lite-0.4.24.tgz",
      "integrity": "sha512-v3MXnZAcvnywkTUEZomIActle7RXXeedOR31wwl7VlyoXO4Qi9arvSenNQWne1TcRwhCL1HwLI21bEqdpj8/rA==",
      "license": "MIT",
      "dependencies": {
        "safer-buffer": ">= 2.1.2 < 3"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/ignore": {
      "version": "5.3.2",
      "resolved": "https://registry.npmjs.org/ignore/-/ignore-5.3.2.tgz",
      "integrity": "sha512-hsBTNUqQTDwkWtcdYI2i06Y/nUBEsNEDJKjWdigLvegy8kDuJAS8uRlpkkcQpyEXL0Z/pjDy5HBmMjRCJ2gq+g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 4"
      }
    },
    "node_modules/ignore-by-default": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/ignore-by-default/-/ignore-by-default-1.0.1.tgz",
      "integrity": "sha512-Ius2VYcGNk7T90CppJqcIkS5ooHUZyIQK+ClZfMfMNFEF9VSE73Fq+906u/CWu92x4gzZMWOwfFYckPObzdEbA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/import-fresh": {
      "version": "3.3.1",
      "resolved": "https://registry.npmjs.org/import-fresh/-/import-fresh-3.3.1.tgz",
      "integrity": "sha512-TR3KfrTZTYLPB6jUjfx6MF9WcWrHL9su5TObK4ZkYgBdWKPOFoSoQIdEuTuR82pmtxH2spWG9h6etwfr1pLBqQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "parent-module": "^1.0.0",
        "resolve-from": "^4.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/import-local": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/import-local/-/import-local-3.2.0.tgz",
      "integrity": "sha512-2SPlun1JUPWoM6t3F0dw0FkCF/jWY8kttcY4f599GLTSjh2OCuuhdTkJQsEcZzBqbXZGKMK2OqW1oZsjtf/gQA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "pkg-dir": "^4.2.0",
        "resolve-cwd": "^3.0.0"
      },
      "bin": {
        "import-local-fixture": "fixtures/cli.js"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/imurmurhash": {
      "version": "0.1.4",
      "resolved": "https://registry.npmjs.org/imurmurhash/-/imurmurhash-0.1.4.tgz",
      "integrity": "sha512-JmXMZ6wuvDmLiHEml9ykzqO6lwFbof0GG4IkcGaENdCRDDmMVnny7s5HsIgHCbaq0w2MyPhDqkhTUgS2LU2PHA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.8.19"
      }
    },
    "node_modules/inflight": {
      "version": "1.0.6",
      "resolved": "https://registry.npmjs.org/inflight/-/inflight-1.0.6.tgz",
      "integrity": "sha512-k92I/b08q4wvFscXCLvqfsHCrjrF7yiXsQuIVvVE7N82W3+aqpzuUdBbfhWcy/FZR3/4IgflMgKLOsvPDrGCJA==",
      "deprecated": "This module is not supported, and leaks memory. Do not use it. Check out lru-cache if you want a good and tested way to coalesce async requests by a key value, which is much more comprehensive and powerful.",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "once": "^1.3.0",
        "wrappy": "1"
      }
    },
    "node_modules/inherits": {
      "version": "2.0.4",
      "resolved": "https://registry.npmjs.org/inherits/-/inherits-2.0.4.tgz",
      "integrity": "sha512-k/vGaX4/Yla3WzyMCvTQOXYeIHvqOKtnqBduzTHpzpQZzAskKMhZ2K+EnBiSM9zGSoIFeMpXKxa4dYeZIQqewQ==",
      "license": "ISC"
    },
    "node_modules/ipaddr.js": {
      "version": "1.9.1",
      "resolved": "https://registry.npmjs.org/ipaddr.js/-/ipaddr.js-1.9.1.tgz",
      "integrity": "sha512-0KI/607xoxSToH7GjN1FfSbLoU0+btTicjsQSWQlh/hZykN8KpmMf7uYwPW3R+akZ6R/w18ZlXSHBYXiYUPO3g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/is-arrayish": {
      "version": "0.2.1",
      "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.2.1.tgz",
      "integrity": "sha512-zz06S8t0ozoDXMG+ube26zeCTNXcKIPJZJi8hBrF4idCLms4CG9QtK7qBl1boi5ODzFpjswb5JPmHCbMpjaYzg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/is-binary-path": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-binary-path/-/is-binary-path-2.1.0.tgz",
      "integrity": "sha512-ZMERYes6pDydyuGidse7OsHxtbI7WVeUEozgR/g7rd0xUimYNlvZRE/K2MgZTjWy725IfelLeVcEM97mmtRGXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "binary-extensions": "^2.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-core-module": {
      "version": "2.16.1",
      "resolved": "https://registry.npmjs.org/is-core-module/-/is-core-module-2.16.1.tgz",
      "integrity": "sha512-UfoeMA6fIJ8wTYFEUjelnaGI67v6+N7qXJEvQuIGa99l4xsCruSYOVSQ0uPANn4dAzm8lkYPaKLrrijLq7x23w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "hasown": "^2.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/is-extglob": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/is-extglob/-/is-extglob-2.1.1.tgz",
      "integrity": "sha512-SbKbANkN603Vi4jEZv49LeVJMn4yGwsbzZworEoyEiutsN3nJYdbO36zfhGJ6QEDpOZIFkDtnq5JRxmvl3jsoQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-fullwidth-code-point": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-4.0.0.tgz",
      "integrity": "sha512-O4L094N2/dZ7xqVdrXhh9r1KODPJpFms8B5sGdJLPy664AgvXsreZUyCQQNItZRDlYug4xStLjNp/sz3HvBowQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/is-generator-fn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/is-generator-fn/-/is-generator-fn-2.1.0.tgz",
      "integrity": "sha512-cTIB4yPYL/Grw0EaSzASzg6bBy9gqCofvWN8okThAYIxKJZC+udlRAmGbM0XLeniEJSs8uEgHPGuHSe1XsOLSQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/is-glob": {
      "version": "4.0.3",
      "resolved": "https://registry.npmjs.org/is-glob/-/is-glob-4.0.3.tgz",
      "integrity": "sha512-xelSayHH36ZgE7ZWhli7pW34hNbNl8Ojv5KVmkJD4hBdD3th8Tfk9vYasLM+mXWOZhFkgZfxhLSnrwRr4elSSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-extglob": "^2.1.1"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/is-number": {
      "version": "7.0.0",
      "resolved": "https://registry.npmjs.org/is-number/-/is-number-7.0.0.tgz",
      "integrity": "sha512-41Cifkg6e8TylSpdtTpeLVMqvSBEVzTttHvERD741+pnZ8ANv0004MRL43QKPDlK9cGvNp6NZWZUBlbGXYxxng==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.12.0"
      }
    },
    "node_modules/is-path-inside": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/is-path-inside/-/is-path-inside-3.0.3.tgz",
      "integrity": "sha512-Fd4gABb+ycGAmKou8eMftCupSir5lRxqf4aD/vd0cD2qc4HL07OjCeuHMr8Ro4CoMaeCKDB0/ECBOVWjTwUvPQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/is-stream": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-2.0.1.tgz",
      "integrity": "sha512-hFoiJiTl63nn+kstHGBtewWSKnQLpyb155KHheA1l39uvtO9nWIop1p3udqPcUd/xbF1VLMO4n7OI6p7RbngDg==",
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/isarray": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/isarray/-/isarray-1.0.0.tgz",
      "integrity": "sha512-VLghIWNM6ELQzo7zwmcg0NmTVyWKYjvIeM83yjp0wRDTmUnrM678fQbcKBo6n2CJEF0szoG//ytg+TKla89ALQ==",
      "license": "MIT"
    },
    "node_modules/isexe": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/isexe/-/isexe-2.0.0.tgz",
      "integrity": "sha512-RHxMLp9lnKHGHRng9QFhRCMbYAcVpn69smSGcq3f36xjgVVWThj4qqLbTLlq7Ssj8B+fIQ1EuCEGI2lKsyQeIw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/istanbul-lib-coverage": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/istanbul-lib-coverage/-/istanbul-lib-coverage-3.2.2.tgz",
      "integrity": "sha512-O8dpsF+r0WV/8MNRKfnmrtCWhuKjxrq2w+jpzBL5UZKTi2LeVWnWOmWRxFlesJONmc+wLAGvKQZEOanko0LFTg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/istanbul-lib-instrument": {
      "version": "6.0.3",
      "resolved": "https://registry.npmjs.org/istanbul-lib-instrument/-/istanbul-lib-instrument-6.0.3.tgz",
      "integrity": "sha512-Vtgk7L/R2JHyyGW07spoFlB8/lpjiOLTjMdms6AFMraYt3BaJauod/NGrfnVG/y4Ix1JEuMRPDPEj2ua+zz1/Q==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "@babel/core": "^7.23.9",
        "@babel/parser": "^7.23.9",
        "@istanbuljs/schema": "^0.1.3",
        "istanbul-lib-coverage": "^3.2.0",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-lib-report": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-report/-/istanbul-lib-report-3.0.1.tgz",
      "integrity": "sha512-GCfE1mtsHGOELCU8e/Z7YWzpmybrx/+dSTfLrvY8qRmaY6zXTKWn6WQIjaAFw069icm6GVMNkgu0NzI4iPZUNw==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "istanbul-lib-coverage": "^3.0.0",
        "make-dir": "^4.0.0",
        "supports-color": "^7.1.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-lib-source-maps": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/istanbul-lib-source-maps/-/istanbul-lib-source-maps-4.0.1.tgz",
      "integrity": "sha512-n3s8EwkdFIJCG3BPKBYvskgXGoy88ARzvegkitk60NxRdwltLOTaH7CUiMRXvwYorl0Q712iEjcWB+fK/MrWVw==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "debug": "^4.1.1",
        "istanbul-lib-coverage": "^3.0.0",
        "source-map": "^0.6.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/istanbul-reports": {
      "version": "3.2.0",
      "resolved": "https://registry.npmjs.org/istanbul-reports/-/istanbul-reports-3.2.0.tgz",
      "integrity": "sha512-HGYWWS/ehqTV3xN10i23tkPkpH46MLCIMFNCaaKNavAXTF1RkqxawEPtnjnGZ6XKSInBKkiOA5BKS+aZiY3AvA==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "html-escaper": "^2.0.0",
        "istanbul-lib-report": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/jest": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest/-/jest-29.7.0.tgz",
      "integrity": "sha512-NIy3oAFp9shda19hy4HK0HRTWKtPJmGdnvywu01nOqNC2vZg+Z+fvJDxpMQA88eb2I9EcafcdjYgsDthnYTvGw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/core": "^29.7.0",
        "@jest/types": "^29.6.3",
        "import-local": "^3.0.2",
        "jest-cli": "^29.7.0"
      },
      "bin": {
        "jest": "bin/jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/jest-changed-files": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-changed-files/-/jest-changed-files-29.7.0.tgz",
      "integrity": "sha512-fEArFiwf1BpQ+4bXSprcDc3/x4HSzL4al2tozwVpDFpsxALjLYdyiIK4e5Vz66GQJIbXJ82+35PtysofptNX2w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "execa": "^5.0.0",
        "jest-util": "^29.7.0",
        "p-limit": "^3.1.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-circus": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-circus/-/jest-circus-29.7.0.tgz",
      "integrity": "sha512-3E1nCMgipcTkCocFwM90XXQab9bS+GMsjdpmPrlelaxwD93Ad8iVEjX/vvHPdLPnFf+L40u+5+iutRdA1N9myw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/expect": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "co": "^4.6.0",
        "dedent": "^1.0.0",
        "is-generator-fn": "^2.0.0",
        "jest-each": "^29.7.0",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "p-limit": "^3.1.0",
        "pretty-format": "^29.7.0",
        "pure-rand": "^6.0.0",
        "slash": "^3.0.0",
        "stack-utils": "^2.0.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-cli": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-cli/-/jest-cli-29.7.0.tgz",
      "integrity": "sha512-OVVobw2IubN/GSYsxETi+gOe7Ka59EFMR/twOU3Jb2GnKKeMGJB5SGUUrEz3SFVmJASUdZUzy83sLNNQ2gZslg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/core": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "create-jest": "^29.7.0",
        "exit": "^0.1.2",
        "import-local": "^3.0.2",
        "jest-config": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "yargs": "^17.3.1"
      },
      "bin": {
        "jest": "bin/jest.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "node-notifier": "^8.0.1 || ^9.0.0 || ^10.0.0"
      },
      "peerDependenciesMeta": {
        "node-notifier": {
          "optional": true
        }
      }
    },
    "node_modules/jest-config": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-config/-/jest-config-29.7.0.tgz",
      "integrity": "sha512-uXbpfeQ7R6TZBqI3/TxCU4q4ttk3u0PJeC+E0zbfSoSjq6bJ7buBPxzQPL0ifrkY4DNu4JUdk0ImlBUYi840eQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@jest/test-sequencer": "^29.7.0",
        "@jest/types": "^29.6.3",
        "babel-jest": "^29.7.0",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "deepmerge": "^4.2.2",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "jest-circus": "^29.7.0",
        "jest-environment-node": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-runner": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "micromatch": "^4.0.4",
        "parse-json": "^5.2.0",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "strip-json-comments": "^3.1.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "peerDependencies": {
        "@types/node": "*",
        "ts-node": ">=9.0.0"
      },
      "peerDependenciesMeta": {
        "@types/node": {
          "optional": true
        },
        "ts-node": {
          "optional": true
        }
      }
    },
    "node_modules/jest-diff": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-diff/-/jest-diff-29.7.0.tgz",
      "integrity": "sha512-LMIgiIrhigmPrs03JHpxUh2yISK3vLFPkAodPeo0+BuF7wA2FoQbkEg1u8gBYBThncu7e1oEDUfIXVuTqLRUjw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "diff-sequences": "^29.6.3",
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-docblock": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-docblock/-/jest-docblock-29.7.0.tgz",
      "integrity": "sha512-q617Auw3A612guyaFgsbFeYpNP5t2aoUNLwBUbc/0kD1R4t9ixDbyFTHd1nok4epoVFpr7PmeWHrhvuV3XaJ4g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "detect-newline": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-each": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-each/-/jest-each-29.7.0.tgz",
      "integrity": "sha512-gns+Er14+ZrEoC5fhOfYCY1LOHHr0TI+rQUHZS8Ttw2l7gl+80eHc/gFf2Ktkw0+SIACDTeWvpFcv3B04VembQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "chalk": "^4.0.0",
        "jest-get-type": "^29.6.3",
        "jest-util": "^29.7.0",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-environment-node": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-environment-node/-/jest-environment-node-29.7.0.tgz",
      "integrity": "sha512-DOSwCRqXirTOyheM+4d5YZOrWcdu0LNZ87ewUoywbcb2XR4wKgqiG8vNeYwhjFMbEkfju7wx2GYH0P2gevGvFw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/fake-timers": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-mock": "^29.7.0",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-get-type": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/jest-get-type/-/jest-get-type-29.6.3.tgz",
      "integrity": "sha512-zrteXnqYxfQh7l5FHyL38jL39di8H8rHoecLH3JNxH3BwOrBsNeabdap5e0I23lD4HHI8W5VFBZqG4Eaq5LNcw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-haste-map": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-haste-map/-/jest-haste-map-29.7.0.tgz",
      "integrity": "sha512-fP8u2pyfqx0K1rGn1R9pyE0/KTn+G7PxktWidOBTqFPLYX0b9ksaMFkhK5vrS3DVun09pckLdlx90QthlW7AmA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/graceful-fs": "^4.1.3",
        "@types/node": "*",
        "anymatch": "^3.0.3",
        "fb-watchman": "^2.0.0",
        "graceful-fs": "^4.2.9",
        "jest-regex-util": "^29.6.3",
        "jest-util": "^29.7.0",
        "jest-worker": "^29.7.0",
        "micromatch": "^4.0.4",
        "walker": "^1.0.8"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      },
      "optionalDependencies": {
        "fsevents": "^2.3.2"
      }
    },
    "node_modules/jest-leak-detector": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-leak-detector/-/jest-leak-detector-29.7.0.tgz",
      "integrity": "sha512-kYA8IJcSYtST2BY9I+SMC32nDpBT3J2NvWJx8+JCuCdl/CR1I4EKUJROiP8XtCcxqgTTBGJNdbB1A8XRKbTetw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-matcher-utils": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-matcher-utils/-/jest-matcher-utils-29.7.0.tgz",
      "integrity": "sha512-sBkD+Xi9DtcChsI3L3u0+N0opgPYnCRPtGcQYrgXmR+hmt/fYfWAL0xRXYU8eWOdfuLgBe0YCW3AFtnRLagq/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "jest-diff": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-message-util": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-message-util/-/jest-message-util-29.7.0.tgz",
      "integrity": "sha512-GBEV4GRADeP+qtB2+6u61stea8mGcOT4mCtrYISZwfu9/ISHFJ/5zOMXYbpBE9RsS5+Gb63DW4FgmnKJ79Kf6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.12.13",
        "@jest/types": "^29.6.3",
        "@types/stack-utils": "^2.0.0",
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "micromatch": "^4.0.4",
        "pretty-format": "^29.7.0",
        "slash": "^3.0.0",
        "stack-utils": "^2.0.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-mock": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-mock/-/jest-mock-29.7.0.tgz",
      "integrity": "sha512-ITOMZn+UkYS4ZFh83xYAOzWStloNzJFO2s8DWrE4lhtGD+AorgnbkiKERe4wQVBydIGPx059g6riW5Btp6Llnw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "jest-util": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-pnp-resolver": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/jest-pnp-resolver/-/jest-pnp-resolver-1.2.3.tgz",
      "integrity": "sha512-+3NpwQEnRoIBtx4fyhblQDPgJI0H1IEIkX7ShLUjPGA7TtUTvI1oiKi3SR4oBR0hQhQR80l4WAe5RrXBwWMA8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      },
      "peerDependencies": {
        "jest-resolve": "*"
      },
      "peerDependenciesMeta": {
        "jest-resolve": {
          "optional": true
        }
      }
    },
    "node_modules/jest-regex-util": {
      "version": "29.6.3",
      "resolved": "https://registry.npmjs.org/jest-regex-util/-/jest-regex-util-29.6.3.tgz",
      "integrity": "sha512-KJJBsRCyyLNWCNBOvZyRDnAIfUiRJ8v+hOBQYGn8gDyF3UegwiP4gwRR3/SDa42g1YbVycTidUF3rKjyLFDWbg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-resolve": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-resolve/-/jest-resolve-29.7.0.tgz",
      "integrity": "sha512-IOVhZSrg+UvVAshDSDtHyFCCBUl/Q3AAJv8iZ6ZjnZ74xzvwuzLXid9IIIPgTnY62SJjfuupMKZsZQRsCvxEgA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "^4.0.0",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-pnp-resolver": "^1.2.2",
        "jest-util": "^29.7.0",
        "jest-validate": "^29.7.0",
        "resolve": "^1.20.0",
        "resolve.exports": "^2.0.0",
        "slash": "^3.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-resolve-dependencies": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-resolve-dependencies/-/jest-resolve-dependencies-29.7.0.tgz",
      "integrity": "sha512-un0zD/6qxJ+S0et7WxeI3H5XSe9lTBBR7bOHCHXkKR6luG5mwDDlIzVQ0V5cZCuoTgEdcdwzTghYkTWfubi+nA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "jest-regex-util": "^29.6.3",
        "jest-snapshot": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-runner": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-runner/-/jest-runner-29.7.0.tgz",
      "integrity": "sha512-fsc4N6cPCAahybGBfTRcq5wFR6fpLznMg47sY5aDpsoejOcVYFb07AHuSnR0liMcPTgBsA3ZJL6kFOjPdoNipQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/console": "^29.7.0",
        "@jest/environment": "^29.7.0",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "emittery": "^0.13.1",
        "graceful-fs": "^4.2.9",
        "jest-docblock": "^29.7.0",
        "jest-environment-node": "^29.7.0",
        "jest-haste-map": "^29.7.0",
        "jest-leak-detector": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-resolve": "^29.7.0",
        "jest-runtime": "^29.7.0",
        "jest-util": "^29.7.0",
        "jest-watcher": "^29.7.0",
        "jest-worker": "^29.7.0",
        "p-limit": "^3.1.0",
        "source-map-support": "0.5.13"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-runtime": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-runtime/-/jest-runtime-29.7.0.tgz",
      "integrity": "sha512-gUnLjgwdGqW7B4LvOIkbKs9WGbn+QLqRQQ9juC6HndeDiezIwhDP+mhMwHWCEcfQ5RUXa6OPnFF8BJh5xegwwQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/environment": "^29.7.0",
        "@jest/fake-timers": "^29.7.0",
        "@jest/globals": "^29.7.0",
        "@jest/source-map": "^29.6.3",
        "@jest/test-result": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "cjs-module-lexer": "^1.0.0",
        "collect-v8-coverage": "^1.0.0",
        "glob": "^7.1.3",
        "graceful-fs": "^4.2.9",
        "jest-haste-map": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-mock": "^29.7.0",
        "jest-regex-util": "^29.6.3",
        "jest-resolve": "^29.7.0",
        "jest-snapshot": "^29.7.0",
        "jest-util": "^29.7.0",
        "slash": "^3.0.0",
        "strip-bom": "^4.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-snapshot": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-snapshot/-/jest-snapshot-29.7.0.tgz",
      "integrity": "sha512-Rm0BMWtxBcioHr1/OX5YCP8Uov4riHvKPknOGs804Zg9JGZgmIBkbtlxJC/7Z4msKYVbIJtfU+tKb8xlYNfdkw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/core": "^7.11.6",
        "@babel/generator": "^7.7.2",
        "@babel/plugin-syntax-jsx": "^7.7.2",
        "@babel/plugin-syntax-typescript": "^7.7.2",
        "@babel/types": "^7.3.3",
        "@jest/expect-utils": "^29.7.0",
        "@jest/transform": "^29.7.0",
        "@jest/types": "^29.6.3",
        "babel-preset-current-node-syntax": "^1.0.0",
        "chalk": "^4.0.0",
        "expect": "^29.7.0",
        "graceful-fs": "^4.2.9",
        "jest-diff": "^29.7.0",
        "jest-get-type": "^29.6.3",
        "jest-matcher-utils": "^29.7.0",
        "jest-message-util": "^29.7.0",
        "jest-util": "^29.7.0",
        "natural-compare": "^1.4.0",
        "pretty-format": "^29.7.0",
        "semver": "^7.5.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-util": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-util/-/jest-util-29.7.0.tgz",
      "integrity": "sha512-z6EbKajIpqGKU56y5KBUgy1dt1ihhQJgWzUlZHArA/+X2ad7Cb5iF+AK1EWVL/Bo7Rz9uurpqw6SiBCefUbCGA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "chalk": "^4.0.0",
        "ci-info": "^3.2.0",
        "graceful-fs": "^4.2.9",
        "picomatch": "^2.2.3"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-validate": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-validate/-/jest-validate-29.7.0.tgz",
      "integrity": "sha512-ZB7wHqaRGVw/9hST/OuFUReG7M8vKeq0/J2egIGLdvjHCmYqGARhzXmtgi+gVeZ5uXFF219aOc3Ls2yLg27tkw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/types": "^29.6.3",
        "camelcase": "^6.2.0",
        "chalk": "^4.0.0",
        "jest-get-type": "^29.6.3",
        "leven": "^3.1.0",
        "pretty-format": "^29.7.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-validate/node_modules/camelcase": {
      "version": "6.3.0",
      "resolved": "https://registry.npmjs.org/camelcase/-/camelcase-6.3.0.tgz",
      "integrity": "sha512-Gmy6FhYlCY7uOElZUSbxo2UCDH8owEk996gkbrpsgGtrJLM3J7jGxl9Ic7Qwwj4ivOE5AWZWRMecDdF7hqGjFA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/jest-watcher": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-watcher/-/jest-watcher-29.7.0.tgz",
      "integrity": "sha512-49Fg7WXkU3Vl2h6LbLtMQ/HyB6rXSIX7SqvBLQmssRBGN9I0PNvPmAmCWSOY6SOvrjhI/F7/bGAv9RtnsPA03g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/test-result": "^29.7.0",
        "@jest/types": "^29.6.3",
        "@types/node": "*",
        "ansi-escapes": "^4.2.1",
        "chalk": "^4.0.0",
        "emittery": "^0.13.1",
        "jest-util": "^29.7.0",
        "string-length": "^4.0.1"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-worker": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/jest-worker/-/jest-worker-29.7.0.tgz",
      "integrity": "sha512-eIz2msL/EzL9UFTFFx7jBTkeZfku0yUAyZZZmJ93H2TYEiroIx2PQjEXcwYtYl8zXCxb+PAmA2hLIt/6ZEkPHw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@types/node": "*",
        "jest-util": "^29.7.0",
        "merge-stream": "^2.0.0",
        "supports-color": "^8.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/jest-worker/node_modules/supports-color": {
      "version": "8.1.1",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-8.1.1.tgz",
      "integrity": "sha512-MpUEN2OodtUzxvKQl72cUF7RQ5EiHsGvSsVG0ia9c5RbWGL2CI4C7EpPS8UTBIplnlzZiNuV56w+FuNxy3ty2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/supports-color?sponsor=1"
      }
    },
    "node_modules/joi": {
      "version": "17.13.3",
      "resolved": "https://registry.npmjs.org/joi/-/joi-17.13.3.tgz",
      "integrity": "sha512-otDA4ldcIx+ZXsKHWmp0YizCweVRZG96J10b0FevjfuncLO1oX59THoAmHkNubYJ+9gWsYsp5k8v4ib6oDv1fA==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "@hapi/hoek": "^9.3.0",
        "@hapi/topo": "^5.1.0",
        "@sideway/address": "^4.1.5",
        "@sideway/formula": "^3.0.1",
        "@sideway/pinpoint": "^2.0.0"
      }
    },
    "node_modules/js-tokens": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/js-tokens/-/js-tokens-4.0.0.tgz",
      "integrity": "sha512-RdJUflcE3cUzKiMqQgsCu06FPu9UdIJO0beYbPhHN4k6apgJtifcoCtT9bcxOpYBtpD2kCM6Sbzg4CausW/PKQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/js-yaml": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/js-yaml/-/js-yaml-4.1.0.tgz",
      "integrity": "sha512-wpxZs9NoxZaJESJGIZTyDEaYpl0FKSA+FB9aJiyemKhMwkxQg63h4T1KJgUGHpTqPDNRcmmYLugrRjJlBtWvRA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "argparse": "^2.0.1"
      },
      "bin": {
        "js-yaml": "bin/js-yaml.js"
      }
    },
    "node_modules/jsesc": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/jsesc/-/jsesc-3.1.0.tgz",
      "integrity": "sha512-/sM3dO2FOzXjKQhJuo0Q173wf2KOo8t4I8vHy6lF9poUp7bKT0/NHE8fPX23PwfhnykfqnC2xRxOnVw5XuGIaA==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "jsesc": "bin/jsesc"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/json-buffer": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/json-buffer/-/json-buffer-3.0.1.tgz",
      "integrity": "sha512-4bV5BfR2mqfQTJm+V5tPPdf+ZpuhiIvTuAB5g8kcrXOZpTT/QwwVRWBywX1ozr6lEuPdbHxwaJlm9G6mI2sfSQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-parse-even-better-errors": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/json-parse-even-better-errors/-/json-parse-even-better-errors-2.3.1.tgz",
      "integrity": "sha512-xyFwyhro/JEof6Ghe2iz2NcXoj2sloNsWr/XsERDK/oiPCfaNhl5ONfp+jQdAZRQQ0IJWNzH9zIZF7li91kh2w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-schema-traverse": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/json-schema-traverse/-/json-schema-traverse-0.4.1.tgz",
      "integrity": "sha512-xbbCH5dCYU5T8LcEhhuh7HJ88HXuW3qsI3Y0zOZFKfZEHcpWiHU/Jxzk629Brsab/mMiHQti9wMP+845RPe3Vg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json-stable-stringify-without-jsonify": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/json-stable-stringify-without-jsonify/-/json-stable-stringify-without-jsonify-1.0.1.tgz",
      "integrity": "sha512-Bdboy+l7tA3OGW6FjyFHWkP5LuByj1Tk33Ljyq0axyzdk9//JSi2u3fP1QSmd1KNwq6VOKYGlAu87CisVir6Pw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/json5": {
      "version": "2.2.3",
      "resolved": "https://registry.npmjs.org/json5/-/json5-2.2.3.tgz",
      "integrity": "sha512-XmOWe7eyHYH14cLdVPoyg+GOH3rYX++KpzrylJwSW98t3Nk+U8XOl8FWKOgwtzdb8lXGf6zYwDUzeHMWfxasyg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "json5": "lib/cli.js"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/jsonwebtoken": {
      "version": "9.0.2",
      "resolved": "https://registry.npmjs.org/jsonwebtoken/-/jsonwebtoken-9.0.2.tgz",
      "integrity": "sha512-PRp66vJ865SSqOlgqS8hujT5U4AOgMfhrwYIuIhfKaoSCZcirrmASQr8CX7cUg+RMih+hgznrjp99o+W4pJLHQ==",
      "license": "MIT",
      "dependencies": {
        "jws": "^3.2.2",
        "lodash.includes": "^4.3.0",
        "lodash.isboolean": "^3.0.3",
        "lodash.isinteger": "^4.0.4",
        "lodash.isnumber": "^3.0.3",
        "lodash.isplainobject": "^4.0.6",
        "lodash.isstring": "^4.0.1",
        "lodash.once": "^4.0.0",
        "ms": "^2.1.1",
        "semver": "^7.5.4"
      },
      "engines": {
        "node": ">=12",
        "npm": ">=6"
      }
    },
    "node_modules/jwa": {
      "version": "1.4.2",
      "resolved": "https://registry.npmjs.org/jwa/-/jwa-1.4.2.tgz",
      "integrity": "sha512-eeH5JO+21J78qMvTIDdBXidBd6nG2kZjg5Ohz/1fpa28Z4CcsWUzJ1ZZyFq/3z3N17aZy+ZuBoHljASbL1WfOw==",
      "license": "MIT",
      "dependencies": {
        "buffer-equal-constant-time": "^1.0.1",
        "ecdsa-sig-formatter": "1.0.11",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/jws": {
      "version": "3.2.2",
      "resolved": "https://registry.npmjs.org/jws/-/jws-3.2.2.tgz",
      "integrity": "sha512-YHlZCB6lMTllWDtSPHz/ZXTsi8S00usEV6v1tjq8tOUZzw7DpSDWVXjXDre6ed1w/pd495ODpHZYSdkRTsa0HA==",
      "license": "MIT",
      "dependencies": {
        "jwa": "^1.4.1",
        "safe-buffer": "^5.0.1"
      }
    },
    "node_modules/keyv": {
      "version": "4.5.4",
      "resolved": "https://registry.npmjs.org/keyv/-/keyv-4.5.4.tgz",
      "integrity": "sha512-oxVHkHR/EJf2CNXnWxRLW6mg7JyCCUcG0DtEGmL2ctUo1PNTin1PUil+r/+4r5MpVgC/fn1kjsx7mjSujKqIpw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json-buffer": "3.0.1"
      }
    },
    "node_modules/kleur": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/kleur/-/kleur-3.0.3.tgz",
      "integrity": "sha512-eTIzlVOSUR+JxdDFepEYcBMtZ9Qqdef+rnzWdRZuMbOywu5tO2w2N7rqjoANZ5k9vywhL6Br1VRjUIgTQx4E8w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/kuler": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/kuler/-/kuler-2.0.0.tgz",
      "integrity": "sha512-Xq9nH7KlWZmXAtodXDDRE7vs6DU1gTU8zYDHDiWLSip45Egwq3plLHzPn27NgvzL2r1LMPC1vdqh98sQxtqj4A==",
      "license": "MIT"
    },
    "node_modules/leven": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/leven/-/leven-3.1.0.tgz",
      "integrity": "sha512-qsda+H8jTaUaN/x5vzW2rzc+8Rw4TAQ/4KjB46IwK5VH+IlVeeeje/EoZRpiXvIqjFgK84QffqPztGI3VBLG1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/levn": {
      "version": "0.4.1",
      "resolved": "https://registry.npmjs.org/levn/-/levn-0.4.1.tgz",
      "integrity": "sha512-+bT2uH4E5LGE7h/n3evcS/sQlJXCpIp6ym8OWJ5eV6+67Dsql/LaaT7qJBAt2rzfoa/5QBGBhxDix1dMt2kQKQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1",
        "type-check": "~0.4.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/lilconfig": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/lilconfig/-/lilconfig-2.1.0.tgz",
      "integrity": "sha512-utWOt/GHzuUxnLKxB6dk81RoOeoNeHgbrXiuGk4yyF5qlRz+iIVWu56E2fqGHFrXz0QNUhLB/8nKqvRH66JKGQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/lines-and-columns": {
      "version": "1.2.4",
      "resolved": "https://registry.npmjs.org/lines-and-columns/-/lines-and-columns-1.2.4.tgz",
      "integrity": "sha512-7ylylesZQ/PV29jhEDl3Ufjo6ZX7gCqJr5F7PKrqc93v7fzSymt1BpwEU8nAUXs8qzzvqhbjhK5QZg6Mt/HkBg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lint-staged": {
      "version": "13.3.0",
      "resolved": "https://registry.npmjs.org/lint-staged/-/lint-staged-13.3.0.tgz",
      "integrity": "sha512-mPRtrYnipYYv1FEE134ufbWpeggNTo+O/UPzngoaKzbzHAthvR55am+8GfHTnqNRQVRRrYQLGW9ZyUoD7DsBHQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chalk": "5.3.0",
        "commander": "11.0.0",
        "debug": "4.3.4",
        "execa": "7.2.0",
        "lilconfig": "2.1.0",
        "listr2": "6.6.1",
        "micromatch": "4.0.5",
        "pidtree": "0.6.0",
        "string-argv": "0.3.2",
        "yaml": "2.3.1"
      },
      "bin": {
        "lint-staged": "bin/lint-staged.js"
      },
      "engines": {
        "node": "^16.14.0 || >=18.0.0"
      },
      "funding": {
        "url": "https://opencollective.com/lint-staged"
      }
    },
    "node_modules/lint-staged/node_modules/chalk": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/chalk/-/chalk-5.3.0.tgz",
      "integrity": "sha512-dLitG79d+GV1Nb/VYcCDFivJeK1hiukt9QjRNVOsUtTy1rR1YJsmpGGTZ3qJos+uw7WmWF4wUwBd9jxjocFC2w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.17.0 || ^14.13 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/chalk/chalk?sponsor=1"
      }
    },
    "node_modules/lint-staged/node_modules/debug": {
      "version": "4.3.4",
      "resolved": "https://registry.npmjs.org/debug/-/debug-4.3.4.tgz",
      "integrity": "sha512-PRWFHuSU3eDtQJPvnNY7Jcket1j0t5OuOsFzPPzsekD52Zl8qUfFIPEiswXqIvHWGVHOgX+7G/vCNNhehwxfkQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ms": "2.1.2"
      },
      "engines": {
        "node": ">=6.0"
      },
      "peerDependenciesMeta": {
        "supports-color": {
          "optional": true
        }
      }
    },
    "node_modules/lint-staged/node_modules/execa": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/execa/-/execa-7.2.0.tgz",
      "integrity": "sha512-UduyVP7TLB5IcAQl+OzLyLcS/l32W/GLg+AhHJ+ow40FOk2U3SAllPwR44v4vmdFwIWqpdwxxpQbF1n5ta9seA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cross-spawn": "^7.0.3",
        "get-stream": "^6.0.1",
        "human-signals": "^4.3.0",
        "is-stream": "^3.0.0",
        "merge-stream": "^2.0.0",
        "npm-run-path": "^5.1.0",
        "onetime": "^6.0.0",
        "signal-exit": "^3.0.7",
        "strip-final-newline": "^3.0.0"
      },
      "engines": {
        "node": "^14.18.0 || ^16.14.0 || >=18.0.0"
      },
      "funding": {
        "url": "https://github.com/sindresorhus/execa?sponsor=1"
      }
    },
    "node_modules/lint-staged/node_modules/human-signals": {
      "version": "4.3.1",
      "resolved": "https://registry.npmjs.org/human-signals/-/human-signals-4.3.1.tgz",
      "integrity": "sha512-nZXjEF2nbo7lIw3mgYjItAfgQXog3OjJogSbKa2CQIIvSGWcKgeJnQlNXip6NglNzYH45nSRiEVimMvYL8DDqQ==",
      "dev": true,
      "license": "Apache-2.0",
      "engines": {
        "node": ">=14.18.0"
      }
    },
    "node_modules/lint-staged/node_modules/is-stream": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-stream/-/is-stream-3.0.0.tgz",
      "integrity": "sha512-LnQR4bZ9IADDRSkvpqMGvt/tEJWclzklNgSw48V5EAaAeDd6qGvN8ei6k5p0tvxSR171VmGyHuTiAOfxAbr8kA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lint-staged/node_modules/micromatch": {
      "version": "4.0.5",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.5.tgz",
      "integrity": "sha512-DMy+ERcEW2q8Z2Po+WNXuw3c5YaUSFjAO5GsJqfEl7UjvtIuFKO6ZrKvcItdy98dwFI2N1tg3zNIdKaQT+aNdA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.2",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/lint-staged/node_modules/mimic-fn": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-4.0.0.tgz",
      "integrity": "sha512-vqiC06CuhBTUdZH+RYl8sFrL096vA45Ok5ISO6sE/Mr1jRbGH4Csnhi8f3wKVl7x8mO4Au7Ir9D3Oyv1VYMFJw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lint-staged/node_modules/ms": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.2.tgz",
      "integrity": "sha512-sGkPx+VjMtmA6MX27oA4FBFELFCZZ4S4XqeGOXCv68tT+jb3vk/RyaKWP0PTKyWtmLSM0b+adUTEvbs1PEaH2w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lint-staged/node_modules/npm-run-path": {
      "version": "5.3.0",
      "resolved": "https://registry.npmjs.org/npm-run-path/-/npm-run-path-5.3.0.tgz",
      "integrity": "sha512-ppwTtiJZq0O/ai0z7yfudtBpWIoxM8yE6nHi1X47eFR2EWORqfbu6CnPlNsjeN683eT0qG6H/Pyf9fCcvjnnnQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^4.0.0"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lint-staged/node_modules/onetime": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/onetime/-/onetime-6.0.0.tgz",
      "integrity": "sha512-1FlR+gjXK7X+AsAHso35MnyN5KqGwJRi/31ft6x0M194ht7S+rWAvd7PHss9xSKMzE0asv1pyIHaJYq+BbacAQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mimic-fn": "^4.0.0"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lint-staged/node_modules/path-key": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-4.0.0.tgz",
      "integrity": "sha512-haREypq7xkM7ErfgIyA0z+Bj4AGKlMSdlQE2jvJo6huWD1EdkKYV+G/T4nq0YEF2vgTT8kqMFKo1uHn950r4SQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lint-staged/node_modules/strip-final-newline": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-final-newline/-/strip-final-newline-3.0.0.tgz",
      "integrity": "sha512-dOESqjYr96iWYylGObzd39EuNTa5VJxyvVAEm5Jnh7KGo75V43Hk1odPQkNDyXNmUR6k+gEiDVXnjB8HJ3crXw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/listr2": {
      "version": "6.6.1",
      "resolved": "https://registry.npmjs.org/listr2/-/listr2-6.6.1.tgz",
      "integrity": "sha512-+rAXGHh0fkEWdXBmX+L6mmfmXmXvDGEKzkjxO+8mP3+nI/r/CWznVBvsibXdxda9Zz0OW2e2ikphN3OwCT/jSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cli-truncate": "^3.1.0",
        "colorette": "^2.0.20",
        "eventemitter3": "^5.0.1",
        "log-update": "^5.0.1",
        "rfdc": "^1.3.0",
        "wrap-ansi": "^8.1.0"
      },
      "engines": {
        "node": ">=16.0.0"
      },
      "peerDependencies": {
        "enquirer": ">= 2.3.0 < 3"
      },
      "peerDependenciesMeta": {
        "enquirer": {
          "optional": true
        }
      }
    },
    "node_modules/locate-path": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-6.0.0.tgz",
      "integrity": "sha512-iPZK6eYjbxRu3uB4/WZ3EsEIMJFMqAoopl3R+zuq0UjcAm/MO6KCweDgPfP3elTztoKP3KtnVHxTn2NHBSDVUw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^5.0.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/lodash": {
      "version": "4.17.21",
      "resolved": "https://registry.npmjs.org/lodash/-/lodash-4.17.21.tgz",
      "integrity": "sha512-v2kDEe57lecTulaDIuNTPy3Ry4gLGJ6Z1O3vE1krgXZNrsQ+LFTGHVxVjcXPs17LhbZVGedAJv8XZ1tvj5FvSg==",
      "license": "MIT"
    },
    "node_modules/lodash.includes": {
      "version": "4.3.0",
      "resolved": "https://registry.npmjs.org/lodash.includes/-/lodash.includes-4.3.0.tgz",
      "integrity": "sha512-W3Bx6mdkRTGtlJISOvVD/lbqjTlPPUDTMnlXZFnVwi9NKJ6tiAk6LVdlhZMm17VZisqhKcgzpO5Wz91PCt5b0w==",
      "license": "MIT"
    },
    "node_modules/lodash.isboolean": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isboolean/-/lodash.isboolean-3.0.3.tgz",
      "integrity": "sha512-Bz5mupy2SVbPHURB98VAcw+aHh4vRV5IPNhILUCsOzRmsTmSQ17jIuqopAentWoehktxGd9e/hbIXq980/1QJg==",
      "license": "MIT"
    },
    "node_modules/lodash.isinteger": {
      "version": "4.0.4",
      "resolved": "https://registry.npmjs.org/lodash.isinteger/-/lodash.isinteger-4.0.4.tgz",
      "integrity": "sha512-DBwtEWN2caHQ9/imiNeEA5ys1JoRtRfY3d7V9wkqtbycnAmTvRRmbHKDV4a0EYc678/dia0jrte4tjYwVBaZUA==",
      "license": "MIT"
    },
    "node_modules/lodash.isnumber": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/lodash.isnumber/-/lodash.isnumber-3.0.3.tgz",
      "integrity": "sha512-QYqzpfwO3/CWf3XP+Z+tkQsfaLL/EnUlXWVkIk5FUPc4sBdTehEqZONuyRt2P67PXAk+NXmTBcc97zw9t1FQrw==",
      "license": "MIT"
    },
    "node_modules/lodash.isplainobject": {
      "version": "4.0.6",
      "resolved": "https://registry.npmjs.org/lodash.isplainobject/-/lodash.isplainobject-4.0.6.tgz",
      "integrity": "sha512-oSXzaWypCMHkPC3NvBEaPHf0KsA5mvPrOPgQWDsbg8n7orZ290M0BmC/jgRZ4vcJ6DTAhjrsSYgdsW/F+MFOBA==",
      "license": "MIT"
    },
    "node_modules/lodash.isstring": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/lodash.isstring/-/lodash.isstring-4.0.1.tgz",
      "integrity": "sha512-0wJxfxH1wgO3GrbuP+dTTk7op+6L41QCXbGINEmD+ny/G/eCqGzxyCsh7159S+mgDDcoarnBw6PC1PS5+wUGgw==",
      "license": "MIT"
    },
    "node_modules/lodash.memoize": {
      "version": "4.1.2",
      "resolved": "https://registry.npmjs.org/lodash.memoize/-/lodash.memoize-4.1.2.tgz",
      "integrity": "sha512-t7j+NzmgnQzTAYXcsHYLgimltOV1MXHtlOWf6GjL9Kj8GK5FInw5JotxvbOs+IvV1/Dzo04/fCGfLVs7aXb4Ag==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.merge": {
      "version": "4.6.2",
      "resolved": "https://registry.npmjs.org/lodash.merge/-/lodash.merge-4.6.2.tgz",
      "integrity": "sha512-0KpjqXRVvrYyCsX1swR/XTK0va6VQkQM6MNo7PqW77ByjAhoARA8EfrP1N4+KlKj8YS0ZUCtRT/YUuhyYDujIQ==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/lodash.once": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/lodash.once/-/lodash.once-4.1.1.tgz",
      "integrity": "sha512-Sb487aTOCr9drQVL8pIxOzVhafOjZN9UU54hiN8PU3uAiSV7lx1yYNpbNmex2PK6dSJoNTSJUUswT651yww3Mg==",
      "license": "MIT"
    },
    "node_modules/log-update": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/log-update/-/log-update-5.0.1.tgz",
      "integrity": "sha512-5UtUDQ/6edw4ofyljDNcOVJQ4c7OjDro4h3y8e1GQL5iYElYclVHJ3zeWchylvMaKnDbDilC8irOVyexnA/Slw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-escapes": "^5.0.0",
        "cli-cursor": "^4.0.0",
        "slice-ansi": "^5.0.0",
        "strip-ansi": "^7.0.1",
        "wrap-ansi": "^8.0.1"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/log-update/node_modules/ansi-escapes": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/ansi-escapes/-/ansi-escapes-5.0.0.tgz",
      "integrity": "sha512-5GFMVX8HqE/TB+FuBJGuO5XG0WrsA6ptUqoODaT/n9mmUaZFkqnBueB4leqGBCmrUHnCnC4PCZTCd0E7QQ83bA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "type-fest": "^1.0.2"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/log-update/node_modules/ansi-regex": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.0.tgz",
      "integrity": "sha512-TKY5pyBkHyADOPYlRT9Lx6F544mPl0vS5Ew7BJ45hA08Q+t3GjbueLliBWN3sMICk6+y7HdyxSzC4bWS8baBdg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/log-update/node_modules/strip-ansi": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.0.tgz",
      "integrity": "sha512-iq6eVVI64nQQTRYq2KtEg2d2uU7LElhTJwsH4YzIHZshxlgZms/wIc4VoDQTlG/IvVIrBKG06CrZnp0qv7hkcQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/log-update/node_modules/type-fest": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-1.4.0.tgz",
      "integrity": "sha512-yGSza74xk0UG8k+pLh5oeoYirvIiWo5t0/o3zHHAO2tRDiZcxWP7fywNlXhqb6/r6sWvwi+RsyQMWhVLe4BVuA==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/logform": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/logform/-/logform-2.7.0.tgz",
      "integrity": "sha512-TFYA4jnP7PVbmlBIfhlSe+WKxs9dklXMTEGcBCIvLhE/Tn3H6Gk1norupVW7m5Cnd4bLcr08AytbyV/xj7f/kQ==",
      "license": "MIT",
      "dependencies": {
        "@colors/colors": "1.6.0",
        "@types/triple-beam": "^1.3.2",
        "fecha": "^4.2.0",
        "ms": "^2.1.1",
        "safe-stable-stringify": "^2.3.1",
        "triple-beam": "^1.3.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/lru-cache": {
      "version": "5.1.1",
      "resolved": "https://registry.npmjs.org/lru-cache/-/lru-cache-5.1.1.tgz",
      "integrity": "sha512-KpNARQA3Iwv+jTA0utUVVbrh+Jlrr1Fv0e56GGzAFOXN7dk/FviaDW8LHmK52DlcH4WP2n6gI8vN1aesBFgo9w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "yallist": "^3.0.2"
      }
    },
    "node_modules/make-dir": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/make-dir/-/make-dir-4.0.0.tgz",
      "integrity": "sha512-hXdUTZYIVOt1Ex//jAQi+wTZZpUpwBj/0QsOzqegb3rGMMeJiSEu5xLHnYfBrRV4RH2+OCSOO95Is/7x1WJ4bw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.5.3"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/make-error": {
      "version": "1.3.6",
      "resolved": "https://registry.npmjs.org/make-error/-/make-error-1.3.6.tgz",
      "integrity": "sha512-s8UhlNe7vPKomQhC1qFelMokr/Sc3AgNbso3n74mVPA5LTZwkB9NlXf4XPamLxJE8h0gh73rM94xvwRT2CVInw==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/makeerror": {
      "version": "1.0.12",
      "resolved": "https://registry.npmjs.org/makeerror/-/makeerror-1.0.12.tgz",
      "integrity": "sha512-JmqCvUhmt43madlpFzG4BQzG2Z3m6tvQDNKdClZnO3VbIudJYmxsT0FNJMeiB2+JTSlTQTSbU8QdesVmwJcmLg==",
      "dev": true,
      "license": "BSD-3-Clause",
      "dependencies": {
        "tmpl": "1.0.5"
      }
    },
    "node_modules/math-intrinsics": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/math-intrinsics/-/math-intrinsics-1.1.0.tgz",
      "integrity": "sha512-/IXtbwEk5HTPyEwyKX6hGkYXxM9nbj64B+ilVJnC/R6B0pH5G4V3b0pVbL7DBj4tkhBAppbQUlf6F6Xl9LHu1g==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      }
    },
    "node_modules/media-typer": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/media-typer/-/media-typer-0.3.0.tgz",
      "integrity": "sha512-dq+qelQ9akHpcOl/gUVRTxVIOkAJ1wR3QAvb4RsVjS8oVoFjDGTc679wJYmUmknUF5HwMLOgb5O+a3KxfWapPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/merge-descriptors": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/merge-descriptors/-/merge-descriptors-1.0.3.tgz",
      "integrity": "sha512-gaNvAS7TZ897/rVaZ0nMtAyxNyi/pdbjbAwUpFQpN70GqnVfOiXpeUUMKRBmzXaSQ8DdTX4/0ms62r2K+hE6mQ==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/merge-stream": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/merge-stream/-/merge-stream-2.0.0.tgz",
      "integrity": "sha512-abv/qOcuPfk3URPfDzmZU1LKmuw8kT+0nIHvKrKgFrwifol/doWcdA4ZqsWQ8ENrFKkd67Mfpo/LovbIUsbt3w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/merge2": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/merge2/-/merge2-1.4.1.tgz",
      "integrity": "sha512-8q7VEgMJW4J8tcfVPy8g09NcQwZdbwFEqhe/WZkoIzjn/3TGDwtOCYtXGxA3O8tPzpczCCDgv+P2P5y00ZJOOg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/methods": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/methods/-/methods-1.1.2.tgz",
      "integrity": "sha512-iclAHeNqNm68zFtnZ0e+1L2yUIdvzNoauKU4WBA3VvH/vPFieF7qfRlwUZU+DA9P9bPXIS90ulxoUoCH23sV2w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/micromatch": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/micromatch/-/micromatch-4.0.8.tgz",
      "integrity": "sha512-PXwfBhYu0hBCPw8Dn0E+WDYb7af3dSLVWKi3HGv84IdF4TyFoC0ysxFd0Goxw7nSv4T/PzEJQxsYsEiFCKo2BA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "braces": "^3.0.3",
        "picomatch": "^2.3.1"
      },
      "engines": {
        "node": ">=8.6"
      }
    },
    "node_modules/mime": {
      "version": "1.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-1.6.0.tgz",
      "integrity": "sha512-x0Vn8spI+wuJ1O6S7gnbaQg8Pxh4NNHb7KSINmEWKiPE4RKOplvijn+NkmYmmRgP68mc70j2EbeTFRsrswaQeg==",
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/mime-db": {
      "version": "1.54.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.54.0.tgz",
      "integrity": "sha512-aU5EJuIN2WDemCcAp2vFBfp/m4EAhWJnUNSSw0ixs7/kXbd6Pg64EmwJkNdFhB8aWt1sH2CTXrLxo/iAGV3oPQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types": {
      "version": "2.1.35",
      "resolved": "https://registry.npmjs.org/mime-types/-/mime-types-2.1.35.tgz",
      "integrity": "sha512-ZDY+bPm5zTTF+YpCrAU9nK0UgICYPT0QtT1NZWFv4s++TNkcgVaT0g6+4R2uI4MjQjzysHB1zxuWL50hzaeXiw==",
      "license": "MIT",
      "dependencies": {
        "mime-db": "1.52.0"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mime-types/node_modules/mime-db": {
      "version": "1.52.0",
      "resolved": "https://registry.npmjs.org/mime-db/-/mime-db-1.52.0.tgz",
      "integrity": "sha512-sPU4uV7dYlvtWJxwwxHD0PuihVNiE7TyAbQ5SWxDCB9mUYvOgroQOwYQQOKPJ8CIbE+1ETVlOoK1UC2nU3gYvg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/mimic-fn": {
      "version": "2.1.0",
      "resolved": "https://registry.npmjs.org/mimic-fn/-/mimic-fn-2.1.0.tgz",
      "integrity": "sha512-OqbOk5oEQeAZ8WXWydlu9HJjz9WVdEIvamMCcXmuqUYjTknH/sqsWvhQ3vgwKFRR1HpjvNBKQ37nbJgYzGqGcg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/minimatch": {
      "version": "9.0.3",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-9.0.3.tgz",
      "integrity": "sha512-RHiac9mvaRw0x3AYRgDC1CxAP7HTcNrrECeA8YYJeWnpo+2Q5CegtZjaotWTWxDG3UeGA1coE05iH1mPjT/2mg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^2.0.1"
      },
      "engines": {
        "node": ">=16 || 14 >=14.17"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/minimist": {
      "version": "1.2.8",
      "resolved": "https://registry.npmjs.org/minimist/-/minimist-1.2.8.tgz",
      "integrity": "sha512-2yyAR8qBkN3YuheJanUpWC5U3bb5osDywNB8RzDVlDwDHbocAJveqqj1u8+SVD7jkWT4yvsHCpWqqWqAxb0zCA==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/mkdirp": {
      "version": "0.5.6",
      "resolved": "https://registry.npmjs.org/mkdirp/-/mkdirp-0.5.6.tgz",
      "integrity": "sha512-FP+p8RB8OWpF3YZBCrP5gtADmtXApB5AMLn+vdyA+PyxCjrCs00mjyUozssO33cwDeT3wNGdLxJ5M//YqtHAJw==",
      "license": "MIT",
      "dependencies": {
        "minimist": "^1.2.6"
      },
      "bin": {
        "mkdirp": "bin/cmd.js"
      }
    },
    "node_modules/moment": {
      "version": "2.30.1",
      "resolved": "https://registry.npmjs.org/moment/-/moment-2.30.1.tgz",
      "integrity": "sha512-uEmtNhbDOrWPFS+hdjFCBfy9f2YoyzRpwcl+DqpC6taX21FzsTLQVbMV/W7PzNSX6x/bhC1zA3c2UQ5NzH6how==",
      "license": "MIT",
      "engines": {
        "node": "*"
      }
    },
    "node_modules/morgan": {
      "version": "1.10.1",
      "resolved": "https://registry.npmjs.org/morgan/-/morgan-1.10.1.tgz",
      "integrity": "sha512-223dMRJtI/l25dJKWpgij2cMtywuG/WiUKXdvwfbhGKBhy1puASqXwFzmWZ7+K73vUPoR7SS2Qz2cI/g9MKw0A==",
      "license": "MIT",
      "dependencies": {
        "basic-auth": "~2.0.1",
        "debug": "2.6.9",
        "depd": "~2.0.0",
        "on-finished": "~2.3.0",
        "on-headers": "~1.1.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/morgan/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/morgan/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/morgan/node_modules/on-finished": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.3.0.tgz",
      "integrity": "sha512-ikqdkGAAyf/X/gPhXGvfgAytDZtDbr+bkNUJ0N9h5MI/dmdgCs3l6hoHrcUv41sRKew3jIwrp4qQDXiK99Utww==",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/ms": {
      "version": "2.1.3",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.1.3.tgz",
      "integrity": "sha512-6FlzubTLZG3J2a/NVCAleEhjzq5oxgHyaCU9yYXvcLsvoVaHJq/s5xXI6/XXP6tz7R9xAOtHnSO/tXtF3WRTlA==",
      "license": "MIT"
    },
    "node_modules/multer": {
      "version": "1.4.5-lts.2",
      "resolved": "https://registry.npmjs.org/multer/-/multer-1.4.5-lts.2.tgz",
      "integrity": "sha512-VzGiVigcG9zUAoCNU+xShztrlr1auZOlurXynNvO9GiWD1/mTBbUljOKY+qMeazBqXgRnjzeEgJI/wyjJUHg9A==",
      "deprecated": "Multer 1.x is impacted by a number of vulnerabilities, which have been patched in 2.x. You should upgrade to the latest 2.x version.",
      "license": "MIT",
      "dependencies": {
        "append-field": "^1.0.0",
        "busboy": "^1.0.0",
        "concat-stream": "^1.5.2",
        "mkdirp": "^0.5.4",
        "object-assign": "^4.1.1",
        "type-is": "^1.6.4",
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">= 6.0.0"
      }
    },
    "node_modules/mylas": {
      "version": "2.1.13",
      "resolved": "https://registry.npmjs.org/mylas/-/mylas-2.1.13.tgz",
      "integrity": "sha512-+MrqnJRtxdF+xngFfUUkIMQrUUL0KsxbADUkn23Z/4ibGg192Q+z+CQyiYwvWTsYjJygmMR8+w3ZDa98Zh6ESg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12.0.0"
      },
      "funding": {
        "type": "github",
        "url": "https://github.com/sponsors/raouldeheer"
      }
    },
    "node_modules/natural-compare": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/natural-compare/-/natural-compare-1.4.0.tgz",
      "integrity": "sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/negotiator": {
      "version": "0.6.4",
      "resolved": "https://registry.npmjs.org/negotiator/-/negotiator-0.6.4.tgz",
      "integrity": "sha512-myRT3DiWPHqho5PrJaIRyaMv2kgYf0mUVgBNOYMuCH5Ki1yEiQaf/ZJuQ62nvpc44wL5WDbTX7yGJi1Neevw8w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/neo-async": {
      "version": "2.6.2",
      "resolved": "https://registry.npmjs.org/neo-async/-/neo-async-2.6.2.tgz",
      "integrity": "sha512-Yd3UES5mWCSqR+qNT93S3UoYUkqAZ9lLg8a7g9rimsWmYGK8cVToA4/sF3RrshdyV3sAGMXVUmpMYOw+dLpOuw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-cron": {
      "version": "3.0.3",
      "resolved": "https://registry.npmjs.org/node-cron/-/node-cron-3.0.3.tgz",
      "integrity": "sha512-dOal67//nohNgYWb+nWmg5dkFdIwDm8EpeGYMekPMrngV3637lqnX0lbUcCtgibHTz6SEz7DAIjKvKDFYCnO1A==",
      "license": "ISC",
      "dependencies": {
        "uuid": "8.3.2"
      },
      "engines": {
        "node": ">=6.0.0"
      }
    },
    "node_modules/node-cron/node_modules/uuid": {
      "version": "8.3.2",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-8.3.2.tgz",
      "integrity": "sha512-+NYs2QeMWy+GWFOEm9xnn6HCDp0l7QBD7ml8zLUmJ+93Q5NF0NocErnwkTkXVFNiX3/fpC6afS8Dhb/gz7R7eg==",
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/node-domexception": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/node-domexception/-/node-domexception-1.0.0.tgz",
      "integrity": "sha512-/jKZoMpw0F8GRwl4/eLROPA3cfcXtLApP0QzLmUT/HuPCZWyB7IY9ZrMeKw2O/nFIqPQB3PVM9aYm0F312AXDQ==",
      "deprecated": "Use your platform's native DOMException instead",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/jimmywarting"
        },
        {
          "type": "github",
          "url": "https://paypal.me/jimmywarting"
        }
      ],
      "license": "MIT",
      "engines": {
        "node": ">=10.5.0"
      }
    },
    "node_modules/node-fetch": {
      "version": "2.7.0",
      "resolved": "https://registry.npmjs.org/node-fetch/-/node-fetch-2.7.0.tgz",
      "integrity": "sha512-c4FRfUm/dbcWZ7U+1Wq0AwCyFL+3nt2bEw05wfxSz+DWpWsitgmSgYmy2dQdWyKC1694ELPqMs/YzUSNozLt8A==",
      "license": "MIT",
      "dependencies": {
        "whatwg-url": "^5.0.0"
      },
      "engines": {
        "node": "4.x || >=6.0.0"
      },
      "peerDependencies": {
        "encoding": "^0.1.0"
      },
      "peerDependenciesMeta": {
        "encoding": {
          "optional": true
        }
      }
    },
    "node_modules/node-int64": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/node-int64/-/node-int64-0.4.0.tgz",
      "integrity": "sha512-O5lz91xSOeoXP6DulyHfllpq+Eg00MWitZIbtPfoSEvqIHdl5gfcY6hYzDWnj0qD5tz52PI08u9qUvSVeUBeHw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/node-releases": {
      "version": "2.0.20",
      "resolved": "https://registry.npmjs.org/node-releases/-/node-releases-2.0.20.tgz",
      "integrity": "sha512-7gK6zSXEH6neM212JgfYFXe+GmZQM+fia5SsusuBIUgnPheLFBmIPhtFoAQRj8/7wASYQnbDlHPVwY0BefoFgA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/nodemon": {
      "version": "3.1.10",
      "resolved": "https://registry.npmjs.org/nodemon/-/nodemon-3.1.10.tgz",
      "integrity": "sha512-WDjw3pJ0/0jMFmyNDp3gvY2YizjLmmOUQo6DEBY+JgdvW/yQ9mEeSw6H5ythl5Ny2ytb7f9C2nIbjSxMNzbJXw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chokidar": "^3.5.2",
        "debug": "^4",
        "ignore-by-default": "^1.0.1",
        "minimatch": "^3.1.2",
        "pstree.remy": "^1.1.8",
        "semver": "^7.5.3",
        "simple-update-notifier": "^2.0.0",
        "supports-color": "^5.5.0",
        "touch": "^3.1.0",
        "undefsafe": "^2.0.5"
      },
      "bin": {
        "nodemon": "bin/nodemon.js"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "type": "opencollective",
        "url": "https://opencollective.com/nodemon"
      }
    },
    "node_modules/nodemon/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/nodemon/node_modules/has-flag": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/has-flag/-/has-flag-3.0.0.tgz",
      "integrity": "sha512-sKJf1+ceQBr4SMkvQnBDNDtf4TXpVhVGateu0t918bl30FnbE2m4vNLX+VWe/dpjlb+HugGYzW7uQXH98HPEYw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/nodemon/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/nodemon/node_modules/supports-color": {
      "version": "5.5.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-5.5.0.tgz",
      "integrity": "sha512-QjVjwdXIt408MIiAqCX4oUKsgU2EqAGzs2Ppkm4aQYbjm+ZEWEcW4SfFNTr4uMNZma0ey4f5lgLrkB0aX0QMow==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^3.0.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/normalize-path": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/normalize-path/-/normalize-path-3.0.0.tgz",
      "integrity": "sha512-6eZs5Ls3WtCisHWp9S2GUy8dqkpGi4BVSz3GaqiE6ezub0512ESztXUwUB6C6IKbQkY2Pnb/mD4WYojCRwcwLA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/npm-run-path": {
      "version": "4.0.1",
      "resolved": "https://registry.npmjs.org/npm-run-path/-/npm-run-path-4.0.1.tgz",
      "integrity": "sha512-S48WzZW777zhNIrn7gxOlISNAqi9ZC/uQFnRdbeIHhZhCA6UqpkOT8T1G7BvfdgP4Er8gF4sUbaS0i7QvIfCWw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "path-key": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/object-assign": {
      "version": "4.1.1",
      "resolved": "https://registry.npmjs.org/object-assign/-/object-assign-4.1.1.tgz",
      "integrity": "sha512-rJgTQnkUnH1sFw8yT6VSU3zD3sWmu6sZhIseY8VX+GRu3P6F7Fu+JNDoXfklElbLJSnc3FUQHVe4cU5hj+BcUg==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/object-hash": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/object-hash/-/object-hash-2.2.0.tgz",
      "integrity": "sha512-gScRMn0bS5fH+IuwyIFgnh9zBdo4DV+6GhygmWM9HyNJSgS0hScp1f5vjtm7oIIOiT9trXrShAkLFSc2IqKNgw==",
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/object-inspect": {
      "version": "1.13.4",
      "resolved": "https://registry.npmjs.org/object-inspect/-/object-inspect-1.13.4.tgz",
      "integrity": "sha512-W67iLl4J2EXEGTbfeHCffrjDfitvLANg0UlX3wFUUSTx92KXRFegMHUVgSqE+wvhAbi4WqjGg9czysTV2Epbew==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/on-finished": {
      "version": "2.4.1",
      "resolved": "https://registry.npmjs.org/on-finished/-/on-finished-2.4.1.tgz",
      "integrity": "sha512-oVlzkg3ENAhCk2zdv7IJwd/QUD4z2RxRwpkcGY8psCVcCYZNq4wYnVWALHM+brtuJjePWiYF/ClmuDr8Ch5+kg==",
      "license": "MIT",
      "dependencies": {
        "ee-first": "1.1.1"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/on-headers": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/on-headers/-/on-headers-1.1.0.tgz",
      "integrity": "sha512-737ZY3yNnXy37FHkQxPzt4UZ2UWPWiCZWLvFZ4fu5cueciegX0zGPnrlY6bwRg4FdQOe9YU8MkmJwGhoMybl8A==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/once": {
      "version": "1.4.0",
      "resolved": "https://registry.npmjs.org/once/-/once-1.4.0.tgz",
      "integrity": "sha512-lNaJgI+2Q5URQBkccEKHTQOPaXdUxnZZElQTZY0MFUAuaEqe1E+Nyvgdz/aIyNi6Z9MzO5dv1H8n58/GELp3+w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "wrappy": "1"
      }
    },
    "node_modules/one-time": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/one-time/-/one-time-1.0.0.tgz",
      "integrity": "sha512-5DXOiRKwuSEcQ/l0kGCF6Q3jcADFv5tSmRaJck/OqkVFcOzutB134KRSfF0xDrL39MNnqxbHBbUUcjZIhTgb2g==",
      "license": "MIT",
      "dependencies": {
        "fn.name": "1.x.x"
      }
    },
    "node_modules/onetime": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/onetime/-/onetime-5.1.2.tgz",
      "integrity": "sha512-kbpaSSGJTWdAY5KPVeMOKXSrPtr8C8C7wodJbcsd51jRnmD+GZu8Y0VoU6Dm5Z4vWr0Ig/1NKuWRKf7j5aaYSg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "mimic-fn": "^2.1.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/openai": {
      "version": "4.104.0",
      "resolved": "https://registry.npmjs.org/openai/-/openai-4.104.0.tgz",
      "integrity": "sha512-p99EFNsA/yX6UhVO93f5kJsDRLAg+CTA2RBqdHK4RtK8u5IJw32Hyb2dTGKbnnFmnuoBv5r7Z2CURI9sGZpSuA==",
      "license": "Apache-2.0",
      "dependencies": {
        "@types/node": "^18.11.18",
        "@types/node-fetch": "^2.6.4",
        "abort-controller": "^3.0.0",
        "agentkeepalive": "^4.2.1",
        "form-data-encoder": "1.7.2",
        "formdata-node": "^4.3.2",
        "node-fetch": "^2.6.7"
      },
      "bin": {
        "openai": "bin/cli"
      },
      "peerDependencies": {
        "ws": "^8.18.0",
        "zod": "^3.23.8"
      },
      "peerDependenciesMeta": {
        "ws": {
          "optional": true
        },
        "zod": {
          "optional": true
        }
      }
    },
    "node_modules/openai/node_modules/@types/node": {
      "version": "18.19.124",
      "resolved": "https://registry.npmjs.org/@types/node/-/node-18.19.124.tgz",
      "integrity": "sha512-hY4YWZFLs3ku6D2Gqo3RchTd9VRCcrjqp/I0mmohYeUVA5Y8eCXKJEasHxLAJVZRJuQogfd1GiJ9lgogBgKeuQ==",
      "license": "MIT",
      "dependencies": {
        "undici-types": "~5.26.4"
      }
    },
    "node_modules/openai/node_modules/undici-types": {
      "version": "5.26.5",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-5.26.5.tgz",
      "integrity": "sha512-JlCMO+ehdEIKqlFxk6IfVoAUVmgz7cU7zD/h9XZ0qzeosSHmUJVOzSQvvYSYWXkFXC+IfLKSIffhv0sVZup6pA==",
      "license": "MIT"
    },
    "node_modules/optionator": {
      "version": "0.9.4",
      "resolved": "https://registry.npmjs.org/optionator/-/optionator-0.9.4.tgz",
      "integrity": "sha512-6IpQ7mKUxRcZNLIObR0hz7lxsapSSIYNZJwXPGeF0mTVqGKFIXj1DQcMoT22S3ROcLyY/rz0PWaWZ9ayWmad9g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "deep-is": "^0.1.3",
        "fast-levenshtein": "^2.0.6",
        "levn": "^0.4.1",
        "prelude-ls": "^1.2.1",
        "type-check": "^0.4.0",
        "word-wrap": "^1.2.5"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/p-limit": {
      "version": "3.1.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-3.1.0.tgz",
      "integrity": "sha512-TYOanM3wGwNGsZN2cVTYPArw454xnXj5qmWF1bEoAc4+cU/ol7GVh7odevjp1FNHduHc3KZMcFduxU5Xc6uJRQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "yocto-queue": "^0.1.0"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-locate": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-5.0.0.tgz",
      "integrity": "sha512-LaNjtRWUBY++zB5nE/NwcaoMylSPk+S+ZHNB1TzdbMJMny6dynpAGt7X/tl/QYq3TIeE6nxHppbo2LGymrG5Pw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^3.0.2"
      },
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/p-try": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/p-try/-/p-try-2.2.0.tgz",
      "integrity": "sha512-R4nPAVTAU0B9D35/Gk3uJf/7XYbQcyohSKdvAxIRSNghFl4e71hVoGnBNQz9cWaXxO2I10KTC+3jMdvvoKw6dQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parent-module": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/parent-module/-/parent-module-1.0.1.tgz",
      "integrity": "sha512-GQ2EWRpQV8/o+Aw8YqtfZZPfNRWZYkbidE9k5rpl/hC3vtHHBfGm2Ifi6qWV+coDGkrUKZAxE3Lot5kcsRlh+g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "callsites": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/parse-json": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/parse-json/-/parse-json-5.2.0.tgz",
      "integrity": "sha512-ayCKvm/phCGxOkYRSCM82iDwct8/EonSEgCSxWxD7ve6jHggsFl4fZVQBPRNgQoKiuV/odhFrGzQXZwbifC8Rg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@babel/code-frame": "^7.0.0",
        "error-ex": "^1.3.1",
        "json-parse-even-better-errors": "^2.3.0",
        "lines-and-columns": "^1.1.6"
      },
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/parseurl": {
      "version": "1.3.3",
      "resolved": "https://registry.npmjs.org/parseurl/-/parseurl-1.3.3.tgz",
      "integrity": "sha512-CiyeOxFT/JZyN5m0z9PfXw4SCBJ6Sygz1Dpl0wqjlhDEGGBP1GnsUVEL0p63hoG1fcj3fHynXi9NYO4nWOL+qQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/path-exists": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-exists/-/path-exists-4.0.0.tgz",
      "integrity": "sha512-ak9Qy5Q7jYb2Wwcey5Fpvg2KoAc/ZIhLSLOSBmRmygPsGwkVVt0fZa0qrtMz+m6tJTAHfZQ8FnmB4MG4LWy7/w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-is-absolute": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/path-is-absolute/-/path-is-absolute-1.0.1.tgz",
      "integrity": "sha512-AVbw3UJ2e9bq64vSaS9Am0fje1Pa8pbGqTTsmXfaIiMpnr5DlDhfJOuLj9Sf95ZPVDAUerDfEk88MPmPe7UCQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/path-key": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/path-key/-/path-key-3.1.1.tgz",
      "integrity": "sha512-ojmeN0qd+y0jszEtoY48r0Peq5dwMEkIlCOu6Q5f41lfkswXuKtYrhgoTpLnyIcHm24Uhqx+5Tqm2InSwLhE6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/path-parse": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/path-parse/-/path-parse-1.0.7.tgz",
      "integrity": "sha512-LDJzPVEEEPR+y48z93A0Ed0yXb8pAByGWo/k5YYdYgpY2/2EsOsksJrq7lOHxryrVOn1ejG6oAp8ahvOIQD8sw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/path-to-regexp": {
      "version": "0.1.12",
      "resolved": "https://registry.npmjs.org/path-to-regexp/-/path-to-regexp-0.1.12.tgz",
      "integrity": "sha512-RA1GjUVMnvYFxuqovrEqZoxxW5NUZqbwKtYz/Tt7nXerk0LbLblQmrsgdeOxV5SFHf0UDggjS/bSeOZwt1pmEQ==",
      "license": "MIT"
    },
    "node_modules/path-type": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/path-type/-/path-type-4.0.0.tgz",
      "integrity": "sha512-gDKb8aZMDeD/tZWs9P6+q0J9Mwkdl6xMV8TjnGP3qJVJ06bdMgkbBlLU8IdfOsIsFz2BW1rNVT3XuNEl8zPAvw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pg": {
      "version": "8.16.3",
      "resolved": "https://registry.npmjs.org/pg/-/pg-8.16.3.tgz",
      "integrity": "sha512-enxc1h0jA/aq5oSDMvqyW3q89ra6XIIDZgCX9vkMrnz5DFTw/Ny3Li2lFQ+pt3L6MCgm/5o2o8HW9hiJji+xvw==",
      "license": "MIT",
      "dependencies": {
        "pg-connection-string": "^2.9.1",
        "pg-pool": "^3.10.1",
        "pg-protocol": "^1.10.3",
        "pg-types": "2.2.0",
        "pgpass": "1.0.5"
      },
      "engines": {
        "node": ">= 16.0.0"
      },
      "optionalDependencies": {
        "pg-cloudflare": "^1.2.7"
      },
      "peerDependencies": {
        "pg-native": ">=3.0.1"
      },
      "peerDependenciesMeta": {
        "pg-native": {
          "optional": true
        }
      }
    },
    "node_modules/pg-cloudflare": {
      "version": "1.2.7",
      "resolved": "https://registry.npmjs.org/pg-cloudflare/-/pg-cloudflare-1.2.7.tgz",
      "integrity": "sha512-YgCtzMH0ptvZJslLM1ffsY4EuGaU0cx4XSdXLRFae8bPP4dS5xL1tNB3k2o/N64cHJpwU7dxKli/nZ2lUa5fLg==",
      "license": "MIT",
      "optional": true
    },
    "node_modules/pg-connection-string": {
      "version": "2.9.1",
      "resolved": "https://registry.npmjs.org/pg-connection-string/-/pg-connection-string-2.9.1.tgz",
      "integrity": "sha512-nkc6NpDcvPVpZXxrreI/FOtX3XemeLl8E0qFr6F2Lrm/I8WOnaWNhIPK2Z7OHpw7gh5XJThi6j6ppgNoaT1w4w==",
      "license": "MIT"
    },
    "node_modules/pg-int8": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/pg-int8/-/pg-int8-1.0.1.tgz",
      "integrity": "sha512-WCtabS6t3c8SkpDBUlb1kjOs7l66xsGdKpIPZsg4wR+B3+u9UAum2odSsF9tnvxg80h4ZxLWMy4pRjOsFIqQpw==",
      "license": "ISC",
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/pg-pool": {
      "version": "3.10.1",
      "resolved": "https://registry.npmjs.org/pg-pool/-/pg-pool-3.10.1.tgz",
      "integrity": "sha512-Tu8jMlcX+9d8+QVzKIvM/uJtp07PKr82IUOYEphaWcoBhIYkoHpLXN3qO59nAI11ripznDsEzEv8nUxBVWajGg==",
      "license": "MIT",
      "peerDependencies": {
        "pg": ">=8.0"
      }
    },
    "node_modules/pg-protocol": {
      "version": "1.10.3",
      "resolved": "https://registry.npmjs.org/pg-protocol/-/pg-protocol-1.10.3.tgz",
      "integrity": "sha512-6DIBgBQaTKDJyxnXaLiLR8wBpQQcGWuAESkRBX/t6OwA8YsqP+iVSiond2EDy6Y/dsGk8rh/jtax3js5NeV7JQ==",
      "license": "MIT"
    },
    "node_modules/pg-types": {
      "version": "2.2.0",
      "resolved": "https://registry.npmjs.org/pg-types/-/pg-types-2.2.0.tgz",
      "integrity": "sha512-qTAAlrEsl8s4OiEQY69wDvcMIdQN6wdz5ojQiOy6YRMuynxenON0O5oCpJI6lshc6scgAY8qvJ2On/p+CXY0GA==",
      "license": "MIT",
      "dependencies": {
        "pg-int8": "1.0.1",
        "postgres-array": "~2.0.0",
        "postgres-bytea": "~1.0.0",
        "postgres-date": "~1.0.4",
        "postgres-interval": "^1.1.0"
      },
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/pgpass": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/pgpass/-/pgpass-1.0.5.tgz",
      "integrity": "sha512-FdW9r/jQZhSeohs1Z3sI1yxFQNFvMcnmfuj4WBMUTxOrAyLMaTcE1aAMBiTlbMNaXvBCQuVi0R7hd8udDSP7ug==",
      "license": "MIT",
      "dependencies": {
        "split2": "^4.1.0"
      }
    },
    "node_modules/picocolors": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/picocolors/-/picocolors-1.1.1.tgz",
      "integrity": "sha512-xceH2snhtb5M9liqDsmEw56le376mTZkEX/jEb/RxNFyegNul7eNslCXP9FDj/Lcu0X8KEyMceP2ntpaHrDEVA==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/picomatch": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/picomatch/-/picomatch-2.3.1.tgz",
      "integrity": "sha512-JU3teHTNjmE2VCGFzuY8EXzCDVwEqB2a8fsIvwaStHhAWJEeVd1o1QD80CU6+ZdEXXSLbSsuLwJjkCBWqRQUVA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/jonschlinkert"
      }
    },
    "node_modules/pidtree": {
      "version": "0.6.0",
      "resolved": "https://registry.npmjs.org/pidtree/-/pidtree-0.6.0.tgz",
      "integrity": "sha512-eG2dWTVw5bzqGRztnHExczNxt5VGsE6OwTeCG3fdUf9KBsZzO3R5OIIIzWR+iZA0NtZ+RDVdaoE2dK1cn6jH4g==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "pidtree": "bin/pidtree.js"
      },
      "engines": {
        "node": ">=0.10"
      }
    },
    "node_modules/pirates": {
      "version": "4.0.7",
      "resolved": "https://registry.npmjs.org/pirates/-/pirates-4.0.7.tgz",
      "integrity": "sha512-TfySrs/5nm8fQJDcBDuUng3VOUKsd7S+zqvbOTiGXHfxX4wK31ard+hoNuvkicM/2YFzlpDgABOevKSsB4G/FA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/pkg-dir": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/pkg-dir/-/pkg-dir-4.2.0.tgz",
      "integrity": "sha512-HRDzbaKjC+AOWVXxAU/x54COGeIv9eb+6CkDSQoNTt4XyWoIJvuPsXizxu/Fr23EiekbtZwmh1IcIG/l/a10GQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "find-up": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pkg-dir/node_modules/find-up": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/find-up/-/find-up-4.1.0.tgz",
      "integrity": "sha512-PpOwAdQ/YlXQ2vj8a3h8IipDuYRi3wceVQQGYWxNINccq40Anw7BlsEXCMbt1Zt+OLA6Fq9suIpIWD0OsnISlw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "locate-path": "^5.0.0",
        "path-exists": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pkg-dir/node_modules/locate-path": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/locate-path/-/locate-path-5.0.0.tgz",
      "integrity": "sha512-t7hw9pI+WvuwNJXwk5zVHpyhIqzg2qTlklJOf0mVxGSbe3Fp2VieZcduNYjaLDoy6p9uGpQEGWG87WpMKlNq8g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-locate": "^4.1.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/pkg-dir/node_modules/p-limit": {
      "version": "2.3.0",
      "resolved": "https://registry.npmjs.org/p-limit/-/p-limit-2.3.0.tgz",
      "integrity": "sha512-//88mFWSJx8lxCzwdAABTJL2MyWB12+eIY7MDL2SqLmAkeKU9qxRvWuSyTjm3FUmpBEMuFfckAIqEaVGUDxb6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-try": "^2.0.0"
      },
      "engines": {
        "node": ">=6"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/pkg-dir/node_modules/p-locate": {
      "version": "4.1.0",
      "resolved": "https://registry.npmjs.org/p-locate/-/p-locate-4.1.0.tgz",
      "integrity": "sha512-R79ZZ/0wAxKGu3oYMlz8jy/kbhsNrS7SKZ7PxEHBgJ5+F2mtFW2fK2cOtBh1cHYkQsbzFV7I+EoRKe6Yt0oK7A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "p-limit": "^2.2.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/plimit-lit": {
      "version": "1.6.1",
      "resolved": "https://registry.npmjs.org/plimit-lit/-/plimit-lit-1.6.1.tgz",
      "integrity": "sha512-B7+VDyb8Tl6oMJT9oSO2CW8XC/T4UcJGrwOVoNGwOQsQYhlpfajmrMj5xeejqaASq3V/EqThyOeATEOMuSEXiA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "queue-lit": "^1.5.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/postgres-array": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/postgres-array/-/postgres-array-2.0.0.tgz",
      "integrity": "sha512-VpZrUqU5A69eQyW2c5CA1jtLecCsN2U/bD6VilrFDWq5+5UIEVO7nazS3TEcHf1zuPYO/sqGvUvW62g86RXZuA==",
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/postgres-bytea": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/postgres-bytea/-/postgres-bytea-1.0.0.tgz",
      "integrity": "sha512-xy3pmLuQqRBZBXDULy7KbaitYqLcmxigw14Q5sj8QBVLqEwXfeybIKVWiqAXTlcvdvb0+xkOtDbfQMOf4lST1w==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-date": {
      "version": "1.0.7",
      "resolved": "https://registry.npmjs.org/postgres-date/-/postgres-date-1.0.7.tgz",
      "integrity": "sha512-suDmjLVQg78nMK2UZ454hAG+OAW+HQPZ6n++TNDUX+L0+uUlLywnoxJKDou51Zm+zTCjrCl0Nq6J9C5hP9vK/Q==",
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/postgres-interval": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/postgres-interval/-/postgres-interval-1.2.0.tgz",
      "integrity": "sha512-9ZhXKM/rw350N1ovuWHbGxnGh/SNJ4cnxHiM0rxE4VN41wsg8P8zWn9hv/buK00RP4WvlOyr/RBDiptyxVbkZQ==",
      "license": "MIT",
      "dependencies": {
        "xtend": "^4.0.0"
      },
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/prelude-ls": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/prelude-ls/-/prelude-ls-1.2.1.tgz",
      "integrity": "sha512-vkcDPrRZo1QZLbn5RLGPpg/WmIQ65qoWWhcGKf/b5eplkkarX0m9z8ppCat4mlOqUsWpyNuYgO3VRyrYHSzX5g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/prettier": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/prettier/-/prettier-3.6.2.tgz",
      "integrity": "sha512-I7AIg5boAr5R0FFtJ6rCfD+LFsWHp81dolrFD8S79U9tb8Az2nGrJncnMSnys+bpQJfRUzqs9hnA81OAA3hCuQ==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "prettier": "bin/prettier.cjs"
      },
      "engines": {
        "node": ">=14"
      },
      "funding": {
        "url": "https://github.com/prettier/prettier?sponsor=1"
      }
    },
    "node_modules/pretty-format": {
      "version": "29.7.0",
      "resolved": "https://registry.npmjs.org/pretty-format/-/pretty-format-29.7.0.tgz",
      "integrity": "sha512-Pdlw/oPxN+aXdmM9R00JVC9WVFoCLTKJvDVLgmJ+qAffBMxsV85l/Lu7sNx4zSzPyoL2euImuEwHhOXdEgNFZQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@jest/schemas": "^29.6.3",
        "ansi-styles": "^5.0.0",
        "react-is": "^18.0.0"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || >=18.0.0"
      }
    },
    "node_modules/pretty-format/node_modules/ansi-styles": {
      "version": "5.2.0",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-5.2.0.tgz",
      "integrity": "sha512-Cxwpt2SfTzTtXcfOlzGEee8O+c+MmUgGrNiBcXnuWxuFJHe6a5Hz7qwhwe5OgaSYI0IJvkLqWX1ASG+cJOkEiA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/process-nextick-args": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/process-nextick-args/-/process-nextick-args-2.0.1.tgz",
      "integrity": "sha512-3ouUOpQhtgrbOa17J7+uxOTpITYWaGP7/AhoR3+A+/1e9skrzelGi/dXzEYyvbxubEF6Wn2ypscTKiKJFFn1ag==",
      "license": "MIT"
    },
    "node_modules/prom-client": {
      "version": "14.2.0",
      "resolved": "https://registry.npmjs.org/prom-client/-/prom-client-14.2.0.tgz",
      "integrity": "sha512-sF308EhTenb/pDRPakm+WgiN+VdM/T1RaHj1x+MvAuT8UiQP8JmOEbxVqtkbfR4LrvOg5n7ic01kRBDGXjYikA==",
      "license": "Apache-2.0",
      "dependencies": {
        "tdigest": "^0.1.1"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/prompts": {
      "version": "2.4.2",
      "resolved": "https://registry.npmjs.org/prompts/-/prompts-2.4.2.tgz",
      "integrity": "sha512-NxNv/kLguCA7p3jE8oL2aEBsrJWgAakBpgmgK6lpPWV+WuOmY6r2/zbAVnP+T8bQlA0nzHXSJSJW0Hq7ylaD2Q==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "kleur": "^3.0.3",
        "sisteransi": "^1.0.5"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/proxy-addr": {
      "version": "2.0.7",
      "resolved": "https://registry.npmjs.org/proxy-addr/-/proxy-addr-2.0.7.tgz",
      "integrity": "sha512-llQsMLSUDUPT44jdrU/O37qlnifitDP+ZwrmmZcoSKyLKvtZxpyV0n2/bD/N4tBAAZ/gJEdZU7KMraoK1+XYAg==",
      "license": "MIT",
      "dependencies": {
        "forwarded": "0.2.0",
        "ipaddr.js": "1.9.1"
      },
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/proxy-from-env": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/proxy-from-env/-/proxy-from-env-1.1.0.tgz",
      "integrity": "sha512-D+zkORCbA9f1tdWRK0RaCR3GPv50cMxcrz4X8k5LTSUD1Dkw47mKJEZQNunItRTkWwgtaUSo1RVFRIG9ZXiFYg==",
      "license": "MIT"
    },
    "node_modules/pstree.remy": {
      "version": "1.1.8",
      "resolved": "https://registry.npmjs.org/pstree.remy/-/pstree.remy-1.1.8.tgz",
      "integrity": "sha512-77DZwxQmxKnu3aR542U+X8FypNzbfJ+C5XQDk3uWjWxn6151aIMGthWYRXTqT1E5oJvg+ljaa2OJi+VfvCOQ8w==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/punycode": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/punycode/-/punycode-2.3.1.tgz",
      "integrity": "sha512-vYt7UD1U9Wg6138shLtLOvdAu+8DsC/ilFtEVHcH+wydcSpNE20AfSOduf6MkRFahL5FY7X1oU7nKVZFtfq8Fg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/pure-rand": {
      "version": "6.1.0",
      "resolved": "https://registry.npmjs.org/pure-rand/-/pure-rand-6.1.0.tgz",
      "integrity": "sha512-bVWawvoZoBYpp6yIoQtQXHZjmz35RSVHnUOTefl8Vcjr8snTPY1wnpSPMWekcFwbxI6gtmT7rSYPFvz71ldiOA==",
      "dev": true,
      "funding": [
        {
          "type": "individual",
          "url": "https://github.com/sponsors/dubzzz"
        },
        {
          "type": "opencollective",
          "url": "https://opencollective.com/fast-check"
        }
      ],
      "license": "MIT"
    },
    "node_modules/qs": {
      "version": "6.13.0",
      "resolved": "https://registry.npmjs.org/qs/-/qs-6.13.0.tgz",
      "integrity": "sha512-+38qI9SOr8tfZ4QmJNplMUxqjbe7LKvvZgWdExBOmd+egZTtjLB67Gu0HRX3u/XOq7UU2Nx6nsjvS16Z9uwfpg==",
      "license": "BSD-3-Clause",
      "dependencies": {
        "side-channel": "^1.0.6"
      },
      "engines": {
        "node": ">=0.6"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/queue-lit": {
      "version": "1.5.2",
      "resolved": "https://registry.npmjs.org/queue-lit/-/queue-lit-1.5.2.tgz",
      "integrity": "sha512-tLc36IOPeMAubu8BkW8YDBV+WyIgKlYU7zUNs0J5Vk9skSZ4JfGlPOqplP0aHdfv7HL0B2Pg6nwiq60Qc6M2Hw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/queue-microtask": {
      "version": "1.2.3",
      "resolved": "https://registry.npmjs.org/queue-microtask/-/queue-microtask-1.2.3.tgz",
      "integrity": "sha512-NuaNSa6flKT5JaSYQzJok04JzTL1CA6aGhv5rfLW3PgqA+M2ChpZQnAC8h8i4ZFkBS8X5RqkDBHA7r4hej3K9A==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/range-parser": {
      "version": "1.2.1",
      "resolved": "https://registry.npmjs.org/range-parser/-/range-parser-1.2.1.tgz",
      "integrity": "sha512-Hrgsx+orqoygnmhFbKaHE6c296J+HTAQXoxEF6gNupROmmGJRoyzfG3ccAveqCBrwr/2yxQ5BVd/GTl5agOwSg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/raw-body": {
      "version": "2.5.2",
      "resolved": "https://registry.npmjs.org/raw-body/-/raw-body-2.5.2.tgz",
      "integrity": "sha512-8zGqypfENjCIqGhgXToC8aB2r7YrBX+AQAfIPs/Mlk+BtPTztOvTS01NRW/3Eh60J+a48lt8qsCzirQ6loCVfA==",
      "license": "MIT",
      "dependencies": {
        "bytes": "3.1.2",
        "http-errors": "2.0.0",
        "iconv-lite": "0.4.24",
        "unpipe": "1.0.0"
      },
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/react-is": {
      "version": "18.3.1",
      "resolved": "https://registry.npmjs.org/react-is/-/react-is-18.3.1.tgz",
      "integrity": "sha512-/LLMVyas0ljjAtoYiPqYiL8VWXzUUdThrmU5+n20DZv+a+ClRoevUzw5JxU+Ieh5/c87ytoTBV9G1FiKfNJdmg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/readable-stream": {
      "version": "2.3.8",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-2.3.8.tgz",
      "integrity": "sha512-8p0AUk4XODgIewSi0l8Epjs+EVnWiK7NoDIEGU0HhE7+ZyY8D1IMY7odu5lRrFXGg71L15KG8QrPmum45RTtdA==",
      "license": "MIT",
      "dependencies": {
        "core-util-is": "~1.0.0",
        "inherits": "~2.0.3",
        "isarray": "~1.0.0",
        "process-nextick-args": "~2.0.0",
        "safe-buffer": "~5.1.1",
        "string_decoder": "~1.1.1",
        "util-deprecate": "~1.0.1"
      }
    },
    "node_modules/readable-stream/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "license": "MIT"
    },
    "node_modules/readdirp": {
      "version": "3.6.0",
      "resolved": "https://registry.npmjs.org/readdirp/-/readdirp-3.6.0.tgz",
      "integrity": "sha512-hOS089on8RduqdbhvQ5Z37A0ESjsqz6qnRcffsMU3495FuTdqSm+7bhJ29JvIOsBDEEnan5DPu9t3To9VRlMzA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "picomatch": "^2.2.1"
      },
      "engines": {
        "node": ">=8.10.0"
      }
    },
    "node_modules/redis": {
      "version": "4.7.1",
      "resolved": "https://registry.npmjs.org/redis/-/redis-4.7.1.tgz",
      "integrity": "sha512-S1bJDnqLftzHXHP8JsT5II/CtHWQrASX5K96REjWjlmWKrviSOLWmM7QnRLstAWsu1VBBV1ffV6DzCvxNP0UJQ==",
      "license": "MIT",
      "workspaces": [
        "./packages/*"
      ],
      "dependencies": {
        "@redis/bloom": "1.2.0",
        "@redis/client": "1.6.1",
        "@redis/graph": "1.1.1",
        "@redis/json": "1.0.7",
        "@redis/search": "1.2.0",
        "@redis/time-series": "1.1.0"
      }
    },
    "node_modules/require-directory": {
      "version": "2.1.1",
      "resolved": "https://registry.npmjs.org/require-directory/-/require-directory-2.1.1.tgz",
      "integrity": "sha512-fGxEI7+wsG9xrvdjsrlmL22OMTTiHRwAMroiEeMgq8gzoLC/PQr7RsRDSTLUg/bZAZtF+TVIkHc6/4RIKrui+Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/resolve": {
      "version": "1.22.10",
      "resolved": "https://registry.npmjs.org/resolve/-/resolve-1.22.10.tgz",
      "integrity": "sha512-NPRy+/ncIMeDlTAsuqwKIiferiawhefFJtkNSW0qZJEqMEb+qBt/77B/jGeeek+F0uOeN05CDa6HXbbIgtVX4w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-core-module": "^2.16.0",
        "path-parse": "^1.0.7",
        "supports-preserve-symlinks-flag": "^1.0.0"
      },
      "bin": {
        "resolve": "bin/resolve"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/resolve-cwd": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/resolve-cwd/-/resolve-cwd-3.0.0.tgz",
      "integrity": "sha512-OrZaX2Mb+rJCpH/6CpSqt9xFVpN++x01XnN2ie9g6P5/3xelLAkXWVADpdz1IHD/KFfEXyE6V0U01OQ3UO2rEg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "resolve-from": "^5.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/resolve-cwd/node_modules/resolve-from": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-5.0.0.tgz",
      "integrity": "sha512-qYg9KP24dD5qka9J47d0aVky0N+b4fTU89LN9iDnjB5waksiC49rvMB0PrUJQGoTmH50XPiqOvAjDfaijGxYZw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/resolve-from": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/resolve-from/-/resolve-from-4.0.0.tgz",
      "integrity": "sha512-pb/MYmXstAkysRFx8piNI1tGFNQIFA3vkE3Gq4EuA1dF6gHp/+vgZqsCGJapvy8N3Q+4o7FwvquPJcnZ7RYy4g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/resolve-pkg-maps": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/resolve-pkg-maps/-/resolve-pkg-maps-1.0.0.tgz",
      "integrity": "sha512-seS2Tj26TBVOC2NIc2rOe2y2ZO7efxITtLZcGSOnHHNOQ7CkiUBfw0Iw2ck6xkIhPwLhKNLS8BO+hEpngQlqzw==",
      "dev": true,
      "license": "MIT",
      "funding": {
        "url": "https://github.com/privatenumber/resolve-pkg-maps?sponsor=1"
      }
    },
    "node_modules/resolve.exports": {
      "version": "2.0.3",
      "resolved": "https://registry.npmjs.org/resolve.exports/-/resolve.exports-2.0.3.tgz",
      "integrity": "sha512-OcXjMsGdhL4XnbShKpAcSqPMzQoYkYyhbEaeSko47MjRP9NfEQMhZkXL1DoFlt9LWQn4YttrdnV6X2OiyzBi+A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/restore-cursor": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/restore-cursor/-/restore-cursor-4.0.0.tgz",
      "integrity": "sha512-I9fPXU9geO9bHOt9pHHOhOkYerIMsmVaWB0rA2AI9ERh/+x/i7MV5HKBNrg+ljO5eoPVgCcnFuRjJ9uH6I/3eg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "onetime": "^5.1.0",
        "signal-exit": "^3.0.2"
      },
      "engines": {
        "node": "^12.20.0 || ^14.13.1 || >=16.0.0"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/reusify": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/reusify/-/reusify-1.1.0.tgz",
      "integrity": "sha512-g6QUff04oZpHs0eG5p83rFLhHeV00ug/Yf9nZM6fLeUrPguBTkTQOdpAWWspMh55TZfVQDPaN3NQJfbVRAxdIw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "iojs": ">=1.0.0",
        "node": ">=0.10.0"
      }
    },
    "node_modules/rfdc": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/rfdc/-/rfdc-1.4.1.tgz",
      "integrity": "sha512-q1b3N5QkRUWUl7iyylaaj3kOpIT0N2i9MqIEQXP73GVsN9cw3fdx8X63cEmWhJGi2PPCF23Ijp7ktmd39rawIA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/rimraf": {
      "version": "3.0.2",
      "resolved": "https://registry.npmjs.org/rimraf/-/rimraf-3.0.2.tgz",
      "integrity": "sha512-JZkJMZkAGFFPP2YqXZXPbMlMBgsxzE8ILs4lMIX/2o0L9UBw9O/Y3o6wFw/i9YLapcUJWwqbi3kdxIPdC62TIA==",
      "deprecated": "Rimraf versions prior to v4 are no longer supported",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "glob": "^7.1.3"
      },
      "bin": {
        "rimraf": "bin.js"
      },
      "funding": {
        "url": "https://github.com/sponsors/isaacs"
      }
    },
    "node_modules/run-parallel": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/run-parallel/-/run-parallel-1.2.0.tgz",
      "integrity": "sha512-5l4VyZR86LZ/lDxZTR6jqL8AFE2S0IFLMP26AbjsLVADxHdhB/c0GUsH+y39UfCi3dzz8OlQuPmnaJOMoDHQBA==",
      "dev": true,
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "queue-microtask": "^1.2.2"
      }
    },
    "node_modules/safe-buffer": {
      "version": "5.2.1",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.2.1.tgz",
      "integrity": "sha512-rp3So07KcdmmKbGvgaNxQSJr7bGVSVk5S9Eq1F+ppbRo70+YeaDxkw5Dd8NPN+GD6bjnYm2VuPuCXmpuYvmCXQ==",
      "funding": [
        {
          "type": "github",
          "url": "https://github.com/sponsors/feross"
        },
        {
          "type": "patreon",
          "url": "https://www.patreon.com/feross"
        },
        {
          "type": "consulting",
          "url": "https://feross.org/support"
        }
      ],
      "license": "MIT"
    },
    "node_modules/safe-stable-stringify": {
      "version": "2.5.0",
      "resolved": "https://registry.npmjs.org/safe-stable-stringify/-/safe-stable-stringify-2.5.0.tgz",
      "integrity": "sha512-b3rppTKm9T+PsVCBEOUR46GWI7fdOs00VKZ1+9c1EWDaDMvjQc6tUwuFyIprgGgTcWoVHSKrU8H31ZHA2e0RHA==",
      "license": "MIT",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/safer-buffer": {
      "version": "2.1.2",
      "resolved": "https://registry.npmjs.org/safer-buffer/-/safer-buffer-2.1.2.tgz",
      "integrity": "sha512-YZo3K82SD7Riyi0E1EQPojLz7kpepnSQI9IyPbHHg1XXXevb5dJI7tpyN2ADxGcQbHG7vcyRHk0cbwqcQriUtg==",
      "license": "MIT"
    },
    "node_modules/semver": {
      "version": "7.7.2",
      "resolved": "https://registry.npmjs.org/semver/-/semver-7.7.2.tgz",
      "integrity": "sha512-RF0Fw+rO5AMf9MAyaRXI4AV0Ulj5lMHqVxxdSgiVbixSCXoEmmX/jk0CuJw4+3SqroYO9VoUh+HcuJivvtJemA==",
      "license": "ISC",
      "bin": {
        "semver": "bin/semver.js"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/send": {
      "version": "0.19.0",
      "resolved": "https://registry.npmjs.org/send/-/send-0.19.0.tgz",
      "integrity": "sha512-dW41u5VfLXu8SJh5bwRmyYUbAoSB3c9uQh6L8h/KtsFREPWpbX1lrljJo186Jc4nmci/sGUZ9a0a0J2zgfq2hw==",
      "license": "MIT",
      "dependencies": {
        "debug": "2.6.9",
        "depd": "2.0.0",
        "destroy": "1.2.0",
        "encodeurl": "~1.0.2",
        "escape-html": "~1.0.3",
        "etag": "~1.8.1",
        "fresh": "0.5.2",
        "http-errors": "2.0.0",
        "mime": "1.6.0",
        "ms": "2.1.3",
        "on-finished": "2.4.1",
        "range-parser": "~1.2.1",
        "statuses": "2.0.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/send/node_modules/debug": {
      "version": "2.6.9",
      "resolved": "https://registry.npmjs.org/debug/-/debug-2.6.9.tgz",
      "integrity": "sha512-bC7ElrdJaJnPbAP+1EotYvqZsb3ecl5wi6Bfi6BJTUcNowp6cvspg0jXznRTKDjm/E7AdgFBVeAPVMNcKGsHMA==",
      "license": "MIT",
      "dependencies": {
        "ms": "2.0.0"
      }
    },
    "node_modules/send/node_modules/debug/node_modules/ms": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/ms/-/ms-2.0.0.tgz",
      "integrity": "sha512-Tpp60P6IUJDTuOq/5Z8cdskzJujfwqfOTkrwIwj7IRISpnkJnT6SyJ4PCPnGMoFjC9ddhal5KVIYtAt97ix05A==",
      "license": "MIT"
    },
    "node_modules/send/node_modules/encodeurl": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/encodeurl/-/encodeurl-1.0.2.tgz",
      "integrity": "sha512-TPJXq8JqFaVYm2CWmPvnP2Iyo4ZSM7/QKcSmuMLDObfpH5fi7RUGmd/rTDf+rut/saiDiQEeVTNgAmJEdAOx0w==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/serve-static": {
      "version": "1.16.2",
      "resolved": "https://registry.npmjs.org/serve-static/-/serve-static-1.16.2.tgz",
      "integrity": "sha512-VqpjJZKadQB/PEbEwvFdO43Ax5dFBZ2UECszz8bQ7pi7wt//PWe1P6MN7eCnjsatYtBT6EuiClbjSWP2WrIoTw==",
      "license": "MIT",
      "dependencies": {
        "encodeurl": "~2.0.0",
        "escape-html": "~1.0.3",
        "parseurl": "~1.3.3",
        "send": "0.19.0"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/setprototypeof": {
      "version": "1.2.0",
      "resolved": "https://registry.npmjs.org/setprototypeof/-/setprototypeof-1.2.0.tgz",
      "integrity": "sha512-E5LDX7Wrp85Kil5bhZv46j8jOeboKq5JMmYM3gVGdGH8xFpPWXUMsNrlODCrkoxMEeNi/XZIwuRvY4XNwYMJpw==",
      "license": "ISC"
    },
    "node_modules/shebang-command": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/shebang-command/-/shebang-command-2.0.0.tgz",
      "integrity": "sha512-kHxr2zZpYtdmrN1qDjrrX/Z1rR1kG8Dx+gkpK1G4eXmvXswmcE1hTWBWYUzlraYw1/yZp6YuDY77YtvbN0dmDA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "shebang-regex": "^3.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/shebang-regex": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/shebang-regex/-/shebang-regex-3.0.0.tgz",
      "integrity": "sha512-7++dFhtcx3353uBaq8DDR4NuxBetBzC7ZQOhmTQInHEd6bSrXdiEyzCvG07Z44UYdLShWUyXt5M/yhz8ekcb1A==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/side-channel": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/side-channel/-/side-channel-1.1.0.tgz",
      "integrity": "sha512-ZX99e6tRweoUXqR+VBrslhda51Nh5MTQwou5tnUDgbtyM0dBgmhEDtWGP/xbKn6hqfPRHujUNwz5fy/wbbhnpw==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3",
        "side-channel-list": "^1.0.0",
        "side-channel-map": "^1.0.1",
        "side-channel-weakmap": "^1.0.2"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-list": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/side-channel-list/-/side-channel-list-1.0.0.tgz",
      "integrity": "sha512-FCLHtRD/gnpCiCHEiJLOwdmFP+wzCmDEkc9y7NsYxeF4u7Btsn1ZuwgwJGxImImHicJArLP4R0yX4c2KCrMrTA==",
      "license": "MIT",
      "dependencies": {
        "es-errors": "^1.3.0",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-map": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/side-channel-map/-/side-channel-map-1.0.1.tgz",
      "integrity": "sha512-VCjCNfgMsby3tTdo02nbjtM/ewra6jPHmpThenkTYh8pG9ucZ/1P8So4u4FGBek/BjpOVsDCMoLA/iuBKIFXRA==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/side-channel-weakmap": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/side-channel-weakmap/-/side-channel-weakmap-1.0.2.tgz",
      "integrity": "sha512-WPS/HvHQTYnHisLo9McqBHOJk2FkHO/tlpvldyrnem4aeQp4hai3gythswg6p01oSoTl58rcpiFAjF2br2Ak2A==",
      "license": "MIT",
      "dependencies": {
        "call-bound": "^1.0.2",
        "es-errors": "^1.3.0",
        "get-intrinsic": "^1.2.5",
        "object-inspect": "^1.13.3",
        "side-channel-map": "^1.0.1"
      },
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/signal-exit": {
      "version": "3.0.7",
      "resolved": "https://registry.npmjs.org/signal-exit/-/signal-exit-3.0.7.tgz",
      "integrity": "sha512-wnD2ZE+l+SPC/uoS0vXeE9L1+0wuaMqKlfz9AMUo38JsyLSBWSFcHR1Rri62LZc12vLr1gb3jl7iwQhgwpAbGQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/simple-swizzle": {
      "version": "0.2.2",
      "resolved": "https://registry.npmjs.org/simple-swizzle/-/simple-swizzle-0.2.2.tgz",
      "integrity": "sha512-JA//kQgZtbuY83m+xT+tXJkmJncGMTFT+C+g2h2R9uxkYIrE2yy9sgmcLhCnw57/WSD+Eh3J97FPEDFnbXnDUg==",
      "license": "MIT",
      "dependencies": {
        "is-arrayish": "^0.3.1"
      }
    },
    "node_modules/simple-swizzle/node_modules/is-arrayish": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/is-arrayish/-/is-arrayish-0.3.2.tgz",
      "integrity": "sha512-eVRqCvVlZbuw3GrM63ovNSNAeA1K16kaR/LRY/92w0zxQ5/1YzwblUX652i4Xs9RwAGjW9d9y6X88t8OaAJfWQ==",
      "license": "MIT"
    },
    "node_modules/simple-update-notifier": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/simple-update-notifier/-/simple-update-notifier-2.0.0.tgz",
      "integrity": "sha512-a2B9Y0KlNXl9u/vsW6sTIu9vGEpfKu2wRV6l1H3XEas/0gUIzGzBoP/IouTcUQbm9JWZLH3COxyn03TYlFax6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "semver": "^7.5.3"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/sisteransi": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/sisteransi/-/sisteransi-1.0.5.tgz",
      "integrity": "sha512-bLGGlR1QxBcynn2d5YmDX4MGjlZvy2MRBDRNHLJ8VI6l6+9FUiyTFNJ0IveOSP0bcXgVDPRcfGqA0pjaqUpfVg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/slash": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/slash/-/slash-3.0.0.tgz",
      "integrity": "sha512-g9Q1haeby36OSStwb4ntCGGGaKsaVSjQ68fBxoQcutl5fS1vuY18H3wSt3jFyFtrkx+Kz0V1G85A4MyAdDMi2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/slice-ansi": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/slice-ansi/-/slice-ansi-5.0.0.tgz",
      "integrity": "sha512-FC+lgizVPfie0kkhqUScwRu1O/lF6NOgJmlCgK+/LYxDCTk8sGelYaHDhFcDN+Sn3Cv+3VSa4Byeo+IMCzpMgQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^6.0.0",
        "is-fullwidth-code-point": "^4.0.0"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/slice-ansi?sponsor=1"
      }
    },
    "node_modules/slice-ansi/node_modules/ansi-styles": {
      "version": "6.2.1",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.1.tgz",
      "integrity": "sha512-bN798gFfQX+viw3R7yrGWRqnrN2oRkEkUjjl4JNn4E8GxxbjtG3FbrEIIY3l8/hrwUwIeCZvi4QuOTP4MErVug==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/source-map": {
      "version": "0.6.1",
      "resolved": "https://registry.npmjs.org/source-map/-/source-map-0.6.1.tgz",
      "integrity": "sha512-UjgapumWlbMhkBgzT7Ykc5YXUT46F0iKu8SGXq0bcwP5dz/h0Plj6enJqjz1Zbq2l5WaqYnrVbwWOWMyF3F47g==",
      "dev": true,
      "license": "BSD-3-Clause",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/source-map-support": {
      "version": "0.5.13",
      "resolved": "https://registry.npmjs.org/source-map-support/-/source-map-support-0.5.13.tgz",
      "integrity": "sha512-SHSKFHadjVA5oR4PPqhtAVdcBWwRYVd6g6cAXnIbRiIwc2EhPrTuKUBdSLvlEKyIP3GCf89fltvcZiP9MMFA1w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "buffer-from": "^1.0.0",
        "source-map": "^0.6.0"
      }
    },
    "node_modules/split2": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/split2/-/split2-4.2.0.tgz",
      "integrity": "sha512-UcjcJOWknrNkF6PLX83qcHM6KHgVKNkV62Y8a5uYDVv9ydGQVwAHMKqHdJje1VTWpljG0WYpCDhrCdAOYH4TWg==",
      "license": "ISC",
      "engines": {
        "node": ">= 10.x"
      }
    },
    "node_modules/sprintf-js": {
      "version": "1.0.3",
      "resolved": "https://registry.npmjs.org/sprintf-js/-/sprintf-js-1.0.3.tgz",
      "integrity": "sha512-D9cPgkvLlV3t3IzL0D0YLvGA9Ahk4PcvVwUbN0dSGr1aP0Nrt4AEnTUbuGvquEC0mA64Gqt1fzirlRs5ibXx8g==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/ssf": {
      "version": "0.11.2",
      "resolved": "https://registry.npmjs.org/ssf/-/ssf-0.11.2.tgz",
      "integrity": "sha512-+idbmIXoYET47hH+d7dfm2epdOMUDjqcB4648sTZ+t2JwoyBFL/insLfB/racrDmsKB3diwsDA696pZMieAC5g==",
      "license": "Apache-2.0",
      "dependencies": {
        "frac": "~1.1.2"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/stack-trace": {
      "version": "0.0.10",
      "resolved": "https://registry.npmjs.org/stack-trace/-/stack-trace-0.0.10.tgz",
      "integrity": "sha512-KGzahc7puUKkzyMt+IqAep+TVNbKP+k2Lmwhub39m1AsTSkaDutx56aDCo+HLDzf/D26BIHTJWNiTG1KAJiQCg==",
      "license": "MIT",
      "engines": {
        "node": "*"
      }
    },
    "node_modules/stack-utils": {
      "version": "2.0.6",
      "resolved": "https://registry.npmjs.org/stack-utils/-/stack-utils-2.0.6.tgz",
      "integrity": "sha512-XlkWvfIm6RmsWtNJx+uqtKLS8eqFbxUg0ZzLXqY0caEy9l7hruX8IpiDnjsLavoBgqCCR71TqWO8MaXYheJ3RQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "escape-string-regexp": "^2.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/stack-utils/node_modules/escape-string-regexp": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/escape-string-regexp/-/escape-string-regexp-2.0.0.tgz",
      "integrity": "sha512-UpzcLCXolUWcNu5HtVMHYdXJjArjsF9C0aNnquZYY4uW/Vu0miy5YoWvbV345HauVvcAUnpRuhMMcqTcGOY2+w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/statuses": {
      "version": "2.0.1",
      "resolved": "https://registry.npmjs.org/statuses/-/statuses-2.0.1.tgz",
      "integrity": "sha512-RwNA9Z/7PrK06rYLIzFMlaF+l73iwpzsqRIFgbMLbTcLD6cOao82TaWefPXQvB2fOC4AjuYSEndS7N/mTCbkdQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/streamsearch": {
      "version": "1.1.0",
      "resolved": "https://registry.npmjs.org/streamsearch/-/streamsearch-1.1.0.tgz",
      "integrity": "sha512-Mcc5wHehp9aXz1ax6bZUyY5afg9u2rv5cqQI3mRrYkGC8rW2hM02jWuwjtL++LS5qinSyhj2QfLyNsuc+VsExg==",
      "engines": {
        "node": ">=10.0.0"
      }
    },
    "node_modules/string_decoder": {
      "version": "1.1.1",
      "resolved": "https://registry.npmjs.org/string_decoder/-/string_decoder-1.1.1.tgz",
      "integrity": "sha512-n/ShnvDi6FHbbVfviro+WojiFzv+s8MPMHBczVePfUpDJLwoLT0ht1l4YwBCbi8pJAveEEdnkHyPyTP/mzRfwg==",
      "license": "MIT",
      "dependencies": {
        "safe-buffer": "~5.1.0"
      }
    },
    "node_modules/string_decoder/node_modules/safe-buffer": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/safe-buffer/-/safe-buffer-5.1.2.tgz",
      "integrity": "sha512-Gd2UZBJDkXlY7GbJxfsE8/nvKkUEU1G38c1siN6QP6a9PT9MmHB8GnpscSmMJSoF8LOIrt8ud/wPtojys4G6+g==",
      "license": "MIT"
    },
    "node_modules/string-argv": {
      "version": "0.3.2",
      "resolved": "https://registry.npmjs.org/string-argv/-/string-argv-0.3.2.tgz",
      "integrity": "sha512-aqD2Q0144Z+/RqG52NeHEkZauTAUWJO8c6yTftGJKO3Tja5tUgIfmIl6kExvhtxSDP7fXB6DvzkfMpCd/F3G+Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.6.19"
      }
    },
    "node_modules/string-length": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/string-length/-/string-length-4.0.2.tgz",
      "integrity": "sha512-+l6rNN5fYHNhZZy41RXsYptCjA2Igmq4EG7kZAYFQI1E1VTXarr6ZPXBg6eq7Y6eK4FEhY6AJlyuFIb/v/S0VQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "char-regex": "^1.0.2",
        "strip-ansi": "^6.0.0"
      },
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/string-width": {
      "version": "5.1.2",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-5.1.2.tgz",
      "integrity": "sha512-HnLOCR3vjcY8beoNLtcjZ5/nxn2afmME6lhrDrebokqMap+XbeW8n9TXpPDOqdGK5qcI3oT0GKTW6wC7EMiVqA==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "eastasianwidth": "^0.2.0",
        "emoji-regex": "^9.2.2",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/string-width/node_modules/ansi-regex": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.0.tgz",
      "integrity": "sha512-TKY5pyBkHyADOPYlRT9Lx6F544mPl0vS5Ew7BJ45hA08Q+t3GjbueLliBWN3sMICk6+y7HdyxSzC4bWS8baBdg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/string-width/node_modules/strip-ansi": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.0.tgz",
      "integrity": "sha512-iq6eVVI64nQQTRYq2KtEg2d2uU7LElhTJwsH4YzIHZshxlgZms/wIc4VoDQTlG/IvVIrBKG06CrZnp0qv7hkcQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/strip-ansi": {
      "version": "6.0.1",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-6.0.1.tgz",
      "integrity": "sha512-Y38VPSHcqkFrCpFnQ9vuSXmquuv5oXOKpGeT6aGrr3o3Gc9AlVa6JBfUSOCnbxGGZF+/0ooI7KrPuUSztUdU5A==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^5.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-bom": {
      "version": "4.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-4.0.0.tgz",
      "integrity": "sha512-3xurFv5tEgii33Zi8Jtp55wEIILR9eh34FAW00PZf+JnSsTmV/ioewSgQl97JHvgjoRGwPShsWm+IdrxB35d0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/strip-final-newline": {
      "version": "2.0.0",
      "resolved": "https://registry.npmjs.org/strip-final-newline/-/strip-final-newline-2.0.0.tgz",
      "integrity": "sha512-BrpvfNAE3dcvq7ll3xVumzjKjZQ5tI1sEUIKr3Uoks0XUl45St3FlatVqef9prk4jRDzhW6WZg+3bk93y6pLjA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/strip-json-comments": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/strip-json-comments/-/strip-json-comments-3.1.1.tgz",
      "integrity": "sha512-6fPc+R4ihwqP6N/aIv2f1gMH8lOVtWQHoqC4yK6oSDVVocumAsfCqjkXnqiYMhmMwS/mEHLp7Vehlt3ql6lEig==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/superagent": {
      "version": "8.1.2",
      "resolved": "https://registry.npmjs.org/superagent/-/superagent-8.1.2.tgz",
      "integrity": "sha512-6WTxW1EB6yCxV5VFOIPQruWGHqc3yI7hEmZK6h+pyk69Lk/Ut7rLUY6W/ONF2MjBuGjvmMiIpsrVJ2vjrHlslA==",
      "deprecated": "Please upgrade to superagent v10.2.2+, see release notes at https://github.com/forwardemail/superagent/releases/tag/v10.2.2 - maintenance is supported by Forward Email @ https://forwardemail.net",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "component-emitter": "^1.3.0",
        "cookiejar": "^2.1.4",
        "debug": "^4.3.4",
        "fast-safe-stringify": "^2.1.1",
        "form-data": "^4.0.0",
        "formidable": "^2.1.2",
        "methods": "^1.1.2",
        "mime": "2.6.0",
        "qs": "^6.11.0",
        "semver": "^7.3.8"
      },
      "engines": {
        "node": ">=6.4.0 <13 || >=14"
      }
    },
    "node_modules/superagent/node_modules/mime": {
      "version": "2.6.0",
      "resolved": "https://registry.npmjs.org/mime/-/mime-2.6.0.tgz",
      "integrity": "sha512-USPkMeET31rOMiarsBNIHZKLGgvKc/LrjofAnBlOttf5ajRvqiRA8QsenbcooctK6d6Ts6aqZXBA+XbkKthiQg==",
      "dev": true,
      "license": "MIT",
      "bin": {
        "mime": "cli.js"
      },
      "engines": {
        "node": ">=4.0.0"
      }
    },
    "node_modules/supertest": {
      "version": "6.3.4",
      "resolved": "https://registry.npmjs.org/supertest/-/supertest-6.3.4.tgz",
      "integrity": "sha512-erY3HFDG0dPnhw4U+udPfrzXa4xhSG+n4rxfRuZWCUvjFWwKl+OxWf/7zk50s84/fAAs7vf5QAb9uRa0cCykxw==",
      "deprecated": "Please upgrade to supertest v7.1.3+, see release notes at https://github.com/forwardemail/supertest/releases/tag/v7.1.3 - maintenance is supported by Forward Email @ https://forwardemail.net",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "methods": "^1.1.2",
        "superagent": "^8.1.2"
      },
      "engines": {
        "node": ">=6.4.0"
      }
    },
    "node_modules/supports-color": {
      "version": "7.2.0",
      "resolved": "https://registry.npmjs.org/supports-color/-/supports-color-7.2.0.tgz",
      "integrity": "sha512-qpCAvRl9stuOHveKsn7HncJRvv501qIacKzQlO/+Lwxc9+0q2wLyv4Dfvt80/DPn2pqOBsJdDiogXGR9+OvwRw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "has-flag": "^4.0.0"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/supports-preserve-symlinks-flag": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/supports-preserve-symlinks-flag/-/supports-preserve-symlinks-flag-1.0.0.tgz",
      "integrity": "sha512-ot0WnXS9fgdkgIcePe6RHNk1WA8+muPa6cSjeR3V8K27q9BB1rTE3R1p7Hv0z1ZyAc8s6Vvv8DIyWf681MAt0w==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">= 0.4"
      },
      "funding": {
        "url": "https://github.com/sponsors/ljharb"
      }
    },
    "node_modules/tdigest": {
      "version": "0.1.2",
      "resolved": "https://registry.npmjs.org/tdigest/-/tdigest-0.1.2.tgz",
      "integrity": "sha512-+G0LLgjjo9BZX2MfdvPfH+MKLCrxlXSYec5DaPYP1fe6Iyhf0/fSmJ0bFiZ1F8BT6cGXl2LpltQptzjXKWEkKA==",
      "license": "MIT",
      "dependencies": {
        "bintrees": "1.0.2"
      }
    },
    "node_modules/test-exclude": {
      "version": "6.0.0",
      "resolved": "https://registry.npmjs.org/test-exclude/-/test-exclude-6.0.0.tgz",
      "integrity": "sha512-cAGWPIyOHU6zlmg88jwm7VRyXnMN7iV68OGAbYDk/Mh/xC/pzVPlQtY6ngoIH/5/tciuhGfvESU8GrHrcxD56w==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@istanbuljs/schema": "^0.1.2",
        "glob": "^7.1.4",
        "minimatch": "^3.0.4"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/test-exclude/node_modules/brace-expansion": {
      "version": "1.1.12",
      "resolved": "https://registry.npmjs.org/brace-expansion/-/brace-expansion-1.1.12.tgz",
      "integrity": "sha512-9T9UjW3r0UW5c1Q7GTwllptXwhvYmEzFhzMfZ9H7FQWt+uZePjZPjBP/W1ZEyZ1twGWom5/56TF4lPcqjnDHcg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "balanced-match": "^1.0.0",
        "concat-map": "0.0.1"
      }
    },
    "node_modules/test-exclude/node_modules/minimatch": {
      "version": "3.1.2",
      "resolved": "https://registry.npmjs.org/minimatch/-/minimatch-3.1.2.tgz",
      "integrity": "sha512-J7p63hRiAjw1NDEww1W7i37+ByIrOWO5XQQAzZ3VOcL0PNybwpfmV/N05zFAzwQ9USyEcX6t3UO+K5aqBQOIHw==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "brace-expansion": "^1.1.7"
      },
      "engines": {
        "node": "*"
      }
    },
    "node_modules/text-hex": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/text-hex/-/text-hex-1.0.0.tgz",
      "integrity": "sha512-uuVGNWzgJ4yhRaNSiubPY7OjISw4sw4E5Uv0wbjp+OzcbmVU/rsT8ujgcXJhn9ypzsgr5vlzpPqP+MBBKcGvbg==",
      "license": "MIT"
    },
    "node_modules/text-table": {
      "version": "0.2.0",
      "resolved": "https://registry.npmjs.org/text-table/-/text-table-0.2.0.tgz",
      "integrity": "sha512-N+8UisAXDGk8PFXP4HAzVR9nbfmVJ3zYLAWiTIoqC5v5isinhr+r5uaO8+7r3BMfuNIufIsA7RdpVgacC2cSpw==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/tmpl": {
      "version": "1.0.5",
      "resolved": "https://registry.npmjs.org/tmpl/-/tmpl-1.0.5.tgz",
      "integrity": "sha512-3f0uOEAQwIqGuWW2MVzYg8fV/QNnc/IpuJNG837rLuczAaLVHslWHZQj4IGiEl5Hs3kkbhwL9Ab7Hrsmuj+Smw==",
      "dev": true,
      "license": "BSD-3-Clause"
    },
    "node_modules/to-regex-range": {
      "version": "5.0.1",
      "resolved": "https://registry.npmjs.org/to-regex-range/-/to-regex-range-5.0.1.tgz",
      "integrity": "sha512-65P7iz6X5yEr1cwcgvQxbbIw7Uk3gOy5dIdtZ4rDveLqhrdJP+Li/Hx6tyK0NEb+2GCyneCMJiGqrADCSNk8sQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "is-number": "^7.0.0"
      },
      "engines": {
        "node": ">=8.0"
      }
    },
    "node_modules/toidentifier": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/toidentifier/-/toidentifier-1.0.1.tgz",
      "integrity": "sha512-o5sSPKEkg/DIQNmH43V0/uerLrpzVedkUh8tGNvaeXpfpuwjKenlSox/2O/BTlZUtEe+JG7s5YhEz608PlAHRA==",
      "license": "MIT",
      "engines": {
        "node": ">=0.6"
      }
    },
    "node_modules/touch": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/touch/-/touch-3.1.1.tgz",
      "integrity": "sha512-r0eojU4bI8MnHr8c5bNo7lJDdI2qXlWWJk6a9EAFG7vbhTjElYhBVS3/miuE0uOuoLdb8Mc/rVfsmm6eo5o9GA==",
      "dev": true,
      "license": "ISC",
      "bin": {
        "nodetouch": "bin/nodetouch.js"
      }
    },
    "node_modules/tr46": {
      "version": "0.0.3",
      "resolved": "https://registry.npmjs.org/tr46/-/tr46-0.0.3.tgz",
      "integrity": "sha512-N3WMsuqV66lT30CrXNbEjx4GEwlow3v6rr4mCcv6prnfwhS01rkgyFdjPNBYd9br7LpXV1+Emh01fHnq2Gdgrw==",
      "license": "MIT"
    },
    "node_modules/triple-beam": {
      "version": "1.4.1",
      "resolved": "https://registry.npmjs.org/triple-beam/-/triple-beam-1.4.1.tgz",
      "integrity": "sha512-aZbgViZrg1QNcG+LULa7nhZpJTZSLm/mXnHXnbAbjmN5aSa0y7V+wvv6+4WaBtpISJzThKy+PIPxc1Nq1EJ9mg==",
      "license": "MIT",
      "engines": {
        "node": ">= 14.0.0"
      }
    },
    "node_modules/ts-api-utils": {
      "version": "1.4.3",
      "resolved": "https://registry.npmjs.org/ts-api-utils/-/ts-api-utils-1.4.3.tgz",
      "integrity": "sha512-i3eMG77UTMD0hZhgRS562pv83RC6ukSAC2GMNWc+9dieh/+jDM5u5YG+NHX6VNDRHQcHwmsTHctP9LhbC3WxVw==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=16"
      },
      "peerDependencies": {
        "typescript": ">=4.2.0"
      }
    },
    "node_modules/ts-jest": {
      "version": "29.4.1",
      "resolved": "https://registry.npmjs.org/ts-jest/-/ts-jest-29.4.1.tgz",
      "integrity": "sha512-SaeUtjfpg9Uqu8IbeDKtdaS0g8lS6FT6OzM3ezrDfErPJPHNDo/Ey+VFGP1bQIDfagYDLyRpd7O15XpG1Es2Uw==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "bs-logger": "^0.2.6",
        "fast-json-stable-stringify": "^2.1.0",
        "handlebars": "^4.7.8",
        "json5": "^2.2.3",
        "lodash.memoize": "^4.1.2",
        "make-error": "^1.3.6",
        "semver": "^7.7.2",
        "type-fest": "^4.41.0",
        "yargs-parser": "^21.1.1"
      },
      "bin": {
        "ts-jest": "cli.js"
      },
      "engines": {
        "node": "^14.15.0 || ^16.10.0 || ^18.0.0 || >=20.0.0"
      },
      "peerDependencies": {
        "@babel/core": ">=7.0.0-beta.0 <8",
        "@jest/transform": "^29.0.0 || ^30.0.0",
        "@jest/types": "^29.0.0 || ^30.0.0",
        "babel-jest": "^29.0.0 || ^30.0.0",
        "jest": "^29.0.0 || ^30.0.0",
        "jest-util": "^29.0.0 || ^30.0.0",
        "typescript": ">=4.3 <6"
      },
      "peerDependenciesMeta": {
        "@babel/core": {
          "optional": true
        },
        "@jest/transform": {
          "optional": true
        },
        "@jest/types": {
          "optional": true
        },
        "babel-jest": {
          "optional": true
        },
        "esbuild": {
          "optional": true
        },
        "jest-util": {
          "optional": true
        }
      }
    },
    "node_modules/ts-jest/node_modules/type-fest": {
      "version": "4.41.0",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-4.41.0.tgz",
      "integrity": "sha512-TeTSQ6H5YHvpqVwBRcnLDCBnDOHWYu7IvGbHT6N8AOymcr9PJGjc1GTtiWZTYg0NCgYwvnYWEkVChQAr9bjfwA==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=16"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/ts-node": {
      "version": "10.9.2",
      "resolved": "https://registry.npmjs.org/ts-node/-/ts-node-10.9.2.tgz",
      "integrity": "sha512-f0FFpIdcHgn8zcPSbf1dRevwt047YMnaiJM3u2w2RewrB+fob/zePZcrOyQoLMMO7aBIddLcQIEK5dYjkLnGrQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "@cspotcode/source-map-support": "^0.8.0",
        "@tsconfig/node10": "^1.0.7",
        "@tsconfig/node12": "^1.0.7",
        "@tsconfig/node14": "^1.0.0",
        "@tsconfig/node16": "^1.0.2",
        "acorn": "^8.4.1",
        "acorn-walk": "^8.1.1",
        "arg": "^4.1.0",
        "create-require": "^1.1.0",
        "diff": "^4.0.1",
        "make-error": "^1.1.1",
        "v8-compile-cache-lib": "^3.0.1",
        "yn": "3.1.1"
      },
      "bin": {
        "ts-node": "dist/bin.js",
        "ts-node-cwd": "dist/bin-cwd.js",
        "ts-node-esm": "dist/bin-esm.js",
        "ts-node-script": "dist/bin-script.js",
        "ts-node-transpile-only": "dist/bin-transpile.js",
        "ts-script": "dist/bin-script-deprecated.js"
      },
      "peerDependencies": {
        "@swc/core": ">=1.2.50",
        "@swc/wasm": ">=1.2.50",
        "@types/node": "*",
        "typescript": ">=2.7"
      },
      "peerDependenciesMeta": {
        "@swc/core": {
          "optional": true
        },
        "@swc/wasm": {
          "optional": true
        }
      }
    },
    "node_modules/tsc-alias": {
      "version": "1.8.16",
      "resolved": "https://registry.npmjs.org/tsc-alias/-/tsc-alias-1.8.16.tgz",
      "integrity": "sha512-QjCyu55NFyRSBAl6+MTFwplpFcnm2Pq01rR/uxfqJoLMm6X3O14KEGtaSDZpJYaE1bJBGDjD0eSuiIWPe2T58g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "chokidar": "^3.5.3",
        "commander": "^9.0.0",
        "get-tsconfig": "^4.10.0",
        "globby": "^11.0.4",
        "mylas": "^2.1.9",
        "normalize-path": "^3.0.0",
        "plimit-lit": "^1.2.6"
      },
      "bin": {
        "tsc-alias": "dist/bin/index.js"
      },
      "engines": {
        "node": ">=16.20.2"
      }
    },
    "node_modules/tsc-alias/node_modules/commander": {
      "version": "9.5.0",
      "resolved": "https://registry.npmjs.org/commander/-/commander-9.5.0.tgz",
      "integrity": "sha512-KRs7WVDKg86PWiuAqhDrAQnTXZKraVcCc6vFdL14qrZ/DcWwuRo7VoiYXalXO7S5GKpqYiVEwCbgFDfxNHKJBQ==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": "^12.20.0 || >=14"
      }
    },
    "node_modules/tsconfig-paths": {
      "version": "4.2.0",
      "resolved": "https://registry.npmjs.org/tsconfig-paths/-/tsconfig-paths-4.2.0.tgz",
      "integrity": "sha512-NoZ4roiN7LnbKn9QqE1amc9DJfzvZXxF4xDavcOWt1BPkdx+m+0gJuPM+S0vCe7zTJMYUP0R8pO2XMr+Y8oLIg==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "json5": "^2.2.2",
        "minimist": "^1.2.6",
        "strip-bom": "^3.0.0"
      },
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/tsconfig-paths/node_modules/strip-bom": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/strip-bom/-/strip-bom-3.0.0.tgz",
      "integrity": "sha512-vavAMRXOgBVNF6nyEEmL3DBK19iRpDcoIwW+swQ+CbGiu7lju6t+JklA1MHweoWtadgt4ISVUsXLyDq34ddcwA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/type-check": {
      "version": "0.4.0",
      "resolved": "https://registry.npmjs.org/type-check/-/type-check-0.4.0.tgz",
      "integrity": "sha512-XleUoc9uwGXqjWwXaUTZAmzMcFZ5858QA2vvx1Ur5xIcixXIP+8LnFDgRplU30us6teqdlskFfu+ae4K79Ooew==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "prelude-ls": "^1.2.1"
      },
      "engines": {
        "node": ">= 0.8.0"
      }
    },
    "node_modules/type-detect": {
      "version": "4.0.8",
      "resolved": "https://registry.npmjs.org/type-detect/-/type-detect-4.0.8.tgz",
      "integrity": "sha512-0fr/mIH1dlO+x7TlcMy+bIDqKPsw/70tVyeHW787goQjhmqaZe10uwLujubK9q9Lg6Fiho1KUKDYz0Z7k7g5/g==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=4"
      }
    },
    "node_modules/type-fest": {
      "version": "0.20.2",
      "resolved": "https://registry.npmjs.org/type-fest/-/type-fest-0.20.2.tgz",
      "integrity": "sha512-Ne+eE4r0/iWnpAxD852z3A+N0Bt5RN//NjJwRd2VFHEmrywxf5vsZlh4R6lixl6B+wz/8d+maTSAkN1FIkI3LQ==",
      "dev": true,
      "license": "(MIT OR CC0-1.0)",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/type-is": {
      "version": "1.6.18",
      "resolved": "https://registry.npmjs.org/type-is/-/type-is-1.6.18.tgz",
      "integrity": "sha512-TkRKr9sUTxEH8MdfuCSP7VizJyzRNMjj2J2do2Jr3Kym598JVdEksuzPQCnlFPW4ky9Q+iA+ma9BGm06XQBy8g==",
      "license": "MIT",
      "dependencies": {
        "media-typer": "0.3.0",
        "mime-types": "~2.1.24"
      },
      "engines": {
        "node": ">= 0.6"
      }
    },
    "node_modules/typedarray": {
      "version": "0.0.6",
      "resolved": "https://registry.npmjs.org/typedarray/-/typedarray-0.0.6.tgz",
      "integrity": "sha512-/aCDEGatGvZ2BIk+HmLf4ifCJFwvKFNb9/JeZPMulfgFracn9QFcAf5GO8B/mweUjSoblS5In0cWhqpfs/5PQA==",
      "license": "MIT"
    },
    "node_modules/typescript": {
      "version": "5.9.2",
      "resolved": "https://registry.npmjs.org/typescript/-/typescript-5.9.2.tgz",
      "integrity": "sha512-CWBzXQrc/qOkhidw1OzBTQuYRbfyxDXJMVJ1XNwUHGROVmuaeiEm3OslpZ1RV96d7SKKjZKrSJu3+t/xlw3R9A==",
      "dev": true,
      "license": "Apache-2.0",
      "bin": {
        "tsc": "bin/tsc",
        "tsserver": "bin/tsserver"
      },
      "engines": {
        "node": ">=14.17"
      }
    },
    "node_modules/uglify-js": {
      "version": "3.19.3",
      "resolved": "https://registry.npmjs.org/uglify-js/-/uglify-js-3.19.3.tgz",
      "integrity": "sha512-v3Xu+yuwBXisp6QYTcH4UbH+xYJXqnq2m/LtQVWKWzYc1iehYnLixoQDN9FH6/j9/oybfd6W9Ghwkl8+UMKTKQ==",
      "dev": true,
      "license": "BSD-2-Clause",
      "optional": true,
      "bin": {
        "uglifyjs": "bin/uglifyjs"
      },
      "engines": {
        "node": ">=0.8.0"
      }
    },
    "node_modules/undefsafe": {
      "version": "2.0.5",
      "resolved": "https://registry.npmjs.org/undefsafe/-/undefsafe-2.0.5.tgz",
      "integrity": "sha512-WxONCrssBM8TSPRqN5EmsjVrsv4A8X12J4ArBiiayv3DyyG3ZlIg6yysuuSYdZsVz3TKcTg2fd//Ujd4CHV1iA==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/undici-types": {
      "version": "6.21.0",
      "resolved": "https://registry.npmjs.org/undici-types/-/undici-types-6.21.0.tgz",
      "integrity": "sha512-iwDZqg0QAGrg9Rav5H4n0M64c3mkR59cJ6wQp+7C4nI0gsmExaedaYLNO44eT4AtBBwjbTiGPMlt2Md0T9H9JQ==",
      "license": "MIT"
    },
    "node_modules/unpipe": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/unpipe/-/unpipe-1.0.0.tgz",
      "integrity": "sha512-pjy2bYhSsufwWlKwPc+l3cN7+wuJlK6uz0YdJEOlQDbl6jo/YlPi4mb8agUkVC8BF7V8NuzeyPNqRksA3hztKQ==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/update-browserslist-db": {
      "version": "1.1.3",
      "resolved": "https://registry.npmjs.org/update-browserslist-db/-/update-browserslist-db-1.1.3.tgz",
      "integrity": "sha512-UxhIZQ+QInVdunkDAaiazvvT/+fXL5Osr0JZlJulepYu6Jd7qJtDZjlur0emRlT71EN3ScPoE7gvsuIKKNavKw==",
      "dev": true,
      "funding": [
        {
          "type": "opencollective",
          "url": "https://opencollective.com/browserslist"
        },
        {
          "type": "tidelift",
          "url": "https://tidelift.com/funding/github/npm/browserslist"
        },
        {
          "type": "github",
          "url": "https://github.com/sponsors/ai"
        }
      ],
      "license": "MIT",
      "dependencies": {
        "escalade": "^3.2.0",
        "picocolors": "^1.1.1"
      },
      "bin": {
        "update-browserslist-db": "cli.js"
      },
      "peerDependencies": {
        "browserslist": ">= 4.21.0"
      }
    },
    "node_modules/uri-js": {
      "version": "4.4.1",
      "resolved": "https://registry.npmjs.org/uri-js/-/uri-js-4.4.1.tgz",
      "integrity": "sha512-7rKUyy33Q1yc98pQ1DAmLtwX109F7TIfWlW1Ydo8Wl1ii1SeHieeh0HHfPeL2fMXK6z0s8ecKs9frCuLJvndBg==",
      "dev": true,
      "license": "BSD-2-Clause",
      "dependencies": {
        "punycode": "^2.1.0"
      }
    },
    "node_modules/util-deprecate": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/util-deprecate/-/util-deprecate-1.0.2.tgz",
      "integrity": "sha512-EPD5q1uXyFxJpCrLnCc1nHnq3gOa6DZBocAIiI2TaSCA7VCJ1UJDMagCzIkXNsUYfD1daK//LTEQ8xiIbrHtcw==",
      "license": "MIT"
    },
    "node_modules/utils-merge": {
      "version": "1.0.1",
      "resolved": "https://registry.npmjs.org/utils-merge/-/utils-merge-1.0.1.tgz",
      "integrity": "sha512-pMZTvIkT1d+TFGvDOqodOclx0QWkkgi6Tdoa8gC8ffGAAqz9pzPTZWAybbsHHoED/ztMtkv/VoYTYyShUn81hA==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.4.0"
      }
    },
    "node_modules/uuid": {
      "version": "9.0.1",
      "resolved": "https://registry.npmjs.org/uuid/-/uuid-9.0.1.tgz",
      "integrity": "sha512-b+1eJOlsR9K8HJpow9Ok3fiWOWSIcIzXodvv0rQjVoOVNpWMpxf1wZNpt4y9h10odCNrqnYp1OBzRktckBe3sA==",
      "funding": [
        "https://github.com/sponsors/broofa",
        "https://github.com/sponsors/ctavan"
      ],
      "license": "MIT",
      "bin": {
        "uuid": "dist/bin/uuid"
      }
    },
    "node_modules/v8-compile-cache-lib": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/v8-compile-cache-lib/-/v8-compile-cache-lib-3.0.1.tgz",
      "integrity": "sha512-wa7YjyUGfNZngI/vtK0UHAN+lgDCxBPCylVXGp0zu59Fz5aiGtNXaq3DhIov063MorB+VfufLh3JlF2KdTK3xg==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/v8-to-istanbul": {
      "version": "9.3.0",
      "resolved": "https://registry.npmjs.org/v8-to-istanbul/-/v8-to-istanbul-9.3.0.tgz",
      "integrity": "sha512-kiGUalWN+rgBJ/1OHZsBtU4rXZOfj/7rKQxULKlIzwzQSvMJUUNgPwJEEh7gU6xEVxC0ahoOBvN2YI8GH6FNgA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "@jridgewell/trace-mapping": "^0.3.12",
        "@types/istanbul-lib-coverage": "^2.0.1",
        "convert-source-map": "^2.0.0"
      },
      "engines": {
        "node": ">=10.12.0"
      }
    },
    "node_modules/validator": {
      "version": "13.12.0",
      "resolved": "https://registry.npmjs.org/validator/-/validator-13.12.0.tgz",
      "integrity": "sha512-c1Q0mCiPlgdTVVVIJIrBuxNicYE+t/7oKeI9MWLj3fh/uq2Pxh/3eeWbVZ4OcGW1TUf53At0njHw5SMdA3tmMg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.10"
      }
    },
    "node_modules/vary": {
      "version": "1.1.2",
      "resolved": "https://registry.npmjs.org/vary/-/vary-1.1.2.tgz",
      "integrity": "sha512-BNGbWLfd0eUPabhkXUVm0j8uuvREyTh5ovRa/dyow/BqAbZJyC+5fU+IzQOzmAKzYqYRAISoRhdQr3eIZ/PXqg==",
      "license": "MIT",
      "engines": {
        "node": ">= 0.8"
      }
    },
    "node_modules/walker": {
      "version": "1.0.8",
      "resolved": "https://registry.npmjs.org/walker/-/walker-1.0.8.tgz",
      "integrity": "sha512-ts/8E8l5b7kY0vlWLewOkDXMmPdLcVV4GmOQLyxuSswIJsweeFZtAsMF7k1Nszz+TYBQrlYRmzOnr398y1JemQ==",
      "dev": true,
      "license": "Apache-2.0",
      "dependencies": {
        "makeerror": "1.0.12"
      }
    },
    "node_modules/web-streams-polyfill": {
      "version": "4.0.0-beta.3",
      "resolved": "https://registry.npmjs.org/web-streams-polyfill/-/web-streams-polyfill-4.0.0-beta.3.tgz",
      "integrity": "sha512-QW95TCTaHmsYfHDybGMwO5IJIM93I/6vTRk+daHTWFPhwh+C8Cg7j7XyKrwrj8Ib6vYXe0ocYNrmzY4xAAN6ug==",
      "license": "MIT",
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/webidl-conversions": {
      "version": "3.0.1",
      "resolved": "https://registry.npmjs.org/webidl-conversions/-/webidl-conversions-3.0.1.tgz",
      "integrity": "sha512-2JAn3z8AR6rjK8Sm8orRC0h/bcl/DqL7tRPdGZ4I1CjdF+EaMLmYxBHyXuKL849eucPFhvBoxMsflfOb8kxaeQ==",
      "license": "BSD-2-Clause"
    },
    "node_modules/whatwg-url": {
      "version": "5.0.0",
      "resolved": "https://registry.npmjs.org/whatwg-url/-/whatwg-url-5.0.0.tgz",
      "integrity": "sha512-saE57nupxk6v3HY35+jzBwYa0rKSy0XR8JSxZPwgLr7ys0IBzhGviA1/TUGJLmSVqs8pb9AnvICXEuOHLprYTw==",
      "license": "MIT",
      "dependencies": {
        "tr46": "~0.0.3",
        "webidl-conversions": "^3.0.0"
      }
    },
    "node_modules/which": {
      "version": "2.0.2",
      "resolved": "https://registry.npmjs.org/which/-/which-2.0.2.tgz",
      "integrity": "sha512-BLI3Tl1TW3Pvl70l3yq3Y64i+awpwXqsGBYWkkqMtnbXgrMD+yj7rhW0kuEDxzJaYXGjEW5ogapKNMEKNMjibA==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "isexe": "^2.0.0"
      },
      "bin": {
        "node-which": "bin/node-which"
      },
      "engines": {
        "node": ">= 8"
      }
    },
    "node_modules/winston": {
      "version": "3.17.0",
      "resolved": "https://registry.npmjs.org/winston/-/winston-3.17.0.tgz",
      "integrity": "sha512-DLiFIXYC5fMPxaRg832S6F5mJYvePtmO5G9v9IgUFPhXm9/GkXarH/TUrBAVzhTCzAj9anE/+GjrgXp/54nOgw==",
      "license": "MIT",
      "dependencies": {
        "@colors/colors": "^1.6.0",
        "@dabh/diagnostics": "^2.0.2",
        "async": "^3.2.3",
        "is-stream": "^2.0.0",
        "logform": "^2.7.0",
        "one-time": "^1.0.0",
        "readable-stream": "^3.4.0",
        "safe-stable-stringify": "^2.3.1",
        "stack-trace": "0.0.x",
        "triple-beam": "^1.3.0",
        "winston-transport": "^4.9.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/winston-daily-rotate-file": {
      "version": "4.7.1",
      "resolved": "https://registry.npmjs.org/winston-daily-rotate-file/-/winston-daily-rotate-file-4.7.1.tgz",
      "integrity": "sha512-7LGPiYGBPNyGHLn9z33i96zx/bd71pjBn9tqQzO3I4Tayv94WPmBNwKC7CO1wPHdP9uvu+Md/1nr6VSH9h0iaA==",
      "license": "MIT",
      "dependencies": {
        "file-stream-rotator": "^0.6.1",
        "object-hash": "^2.0.1",
        "triple-beam": "^1.3.0",
        "winston-transport": "^4.4.0"
      },
      "engines": {
        "node": ">=8"
      },
      "peerDependencies": {
        "winston": "^3"
      }
    },
    "node_modules/winston-transport": {
      "version": "4.9.0",
      "resolved": "https://registry.npmjs.org/winston-transport/-/winston-transport-4.9.0.tgz",
      "integrity": "sha512-8drMJ4rkgaPo1Me4zD/3WLfI/zPdA9o2IipKODunnGDcuqbHwjsbB79ylv04LCGGzU0xQ6vTznOMpQGaLhhm6A==",
      "license": "MIT",
      "dependencies": {
        "logform": "^2.7.0",
        "readable-stream": "^3.6.2",
        "triple-beam": "^1.3.0"
      },
      "engines": {
        "node": ">= 12.0.0"
      }
    },
    "node_modules/winston-transport/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/winston/node_modules/readable-stream": {
      "version": "3.6.2",
      "resolved": "https://registry.npmjs.org/readable-stream/-/readable-stream-3.6.2.tgz",
      "integrity": "sha512-9u/sniCrY3D5WdsERHzHE4G2YCXqoG5FTHUiCC4SIbr6XcLZBY05ya9EKjYek9O5xOAwjGq+1JdGBAS7Q9ScoA==",
      "license": "MIT",
      "dependencies": {
        "inherits": "^2.0.3",
        "string_decoder": "^1.1.1",
        "util-deprecate": "^1.0.1"
      },
      "engines": {
        "node": ">= 6"
      }
    },
    "node_modules/wmf": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wmf/-/wmf-1.0.2.tgz",
      "integrity": "sha512-/p9K7bEh0Dj6WbXg4JG0xvLQmIadrner1bi45VMJTfnbVHsc7yIajZyoSoK60/dtVBs12Fm6WkUI5/3WAVsNMw==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/word": {
      "version": "0.3.0",
      "resolved": "https://registry.npmjs.org/word/-/word-0.3.0.tgz",
      "integrity": "sha512-OELeY0Q61OXpdUfTp+oweA/vtLVg5VDOXh+3he3PNzLGG/y0oylSOC1xRVj0+l4vQ3tj/bB1HVHv1ocXkQceFA==",
      "license": "Apache-2.0",
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/word-wrap": {
      "version": "1.2.5",
      "resolved": "https://registry.npmjs.org/word-wrap/-/word-wrap-1.2.5.tgz",
      "integrity": "sha512-BN22B5eaMMI9UMtjrGd5g5eCYPpCPDUy0FJXbYsaT5zYxjFOckS53SQDE3pWkVoWpHXVb3BrYcEN4Twa55B5cA==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=0.10.0"
      }
    },
    "node_modules/wordwrap": {
      "version": "1.0.0",
      "resolved": "https://registry.npmjs.org/wordwrap/-/wordwrap-1.0.0.tgz",
      "integrity": "sha512-gvVzJFlPycKc5dZN4yPkP8w7Dc37BtP1yczEneOb4uq34pXZcvrtRTmWV8W+Ume+XCxKgbjM+nevkyFPMybd4Q==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/wrap-ansi": {
      "version": "8.1.0",
      "resolved": "https://registry.npmjs.org/wrap-ansi/-/wrap-ansi-8.1.0.tgz",
      "integrity": "sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-styles": "^6.1.0",
        "string-width": "^5.0.1",
        "strip-ansi": "^7.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/wrap-ansi?sponsor=1"
      }
    },
    "node_modules/wrap-ansi/node_modules/ansi-regex": {
      "version": "6.2.0",
      "resolved": "https://registry.npmjs.org/ansi-regex/-/ansi-regex-6.2.0.tgz",
      "integrity": "sha512-TKY5pyBkHyADOPYlRT9Lx6F544mPl0vS5Ew7BJ45hA08Q+t3GjbueLliBWN3sMICk6+y7HdyxSzC4bWS8baBdg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-regex?sponsor=1"
      }
    },
    "node_modules/wrap-ansi/node_modules/ansi-styles": {
      "version": "6.2.1",
      "resolved": "https://registry.npmjs.org/ansi-styles/-/ansi-styles-6.2.1.tgz",
      "integrity": "sha512-bN798gFfQX+viw3R7yrGWRqnrN2oRkEkUjjl4JNn4E8GxxbjtG3FbrEIIY3l8/hrwUwIeCZvi4QuOTP4MErVug==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/ansi-styles?sponsor=1"
      }
    },
    "node_modules/wrap-ansi/node_modules/strip-ansi": {
      "version": "7.1.0",
      "resolved": "https://registry.npmjs.org/strip-ansi/-/strip-ansi-7.1.0.tgz",
      "integrity": "sha512-iq6eVVI64nQQTRYq2KtEg2d2uU7LElhTJwsH4YzIHZshxlgZms/wIc4VoDQTlG/IvVIrBKG06CrZnp0qv7hkcQ==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "ansi-regex": "^6.0.1"
      },
      "engines": {
        "node": ">=12"
      },
      "funding": {
        "url": "https://github.com/chalk/strip-ansi?sponsor=1"
      }
    },
    "node_modules/wrappy": {
      "version": "1.0.2",
      "resolved": "https://registry.npmjs.org/wrappy/-/wrappy-1.0.2.tgz",
      "integrity": "sha512-l4Sp/DRseor9wL6EvV2+TuQn63dMkPjZ/sp9XkghTEbV9KlPS1xUsZ3u7/IQO4wxtcFB4bgpQPRcR3QCvezPcQ==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/write-file-atomic": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/write-file-atomic/-/write-file-atomic-4.0.2.tgz",
      "integrity": "sha512-7KxauUdBmSdWnmpaGFg+ppNjKF8uNLry8LyzjauQDOVONfFLNKrKvQOxZ/VuTIcS/gge/YNahf5RIIQWTSarlg==",
      "dev": true,
      "license": "ISC",
      "dependencies": {
        "imurmurhash": "^0.1.4",
        "signal-exit": "^3.0.7"
      },
      "engines": {
        "node": "^12.13.0 || ^14.15.0 || >=16.0.0"
      }
    },
    "node_modules/xlsx": {
      "version": "0.18.5",
      "resolved": "https://registry.npmjs.org/xlsx/-/xlsx-0.18.5.tgz",
      "integrity": "sha512-dmg3LCjBPHZnQp5/F/+nnTa+miPJxUXB6vtk42YjBBKayDNagxGEeIdWApkYPOf3Z3pm3k62Knjzp7lMeTEtFQ==",
      "license": "Apache-2.0",
      "dependencies": {
        "adler-32": "~1.3.0",
        "cfb": "~1.2.1",
        "codepage": "~1.15.0",
        "crc-32": "~1.2.1",
        "ssf": "~0.11.2",
        "wmf": "~1.0.1",
        "word": "~0.3.0"
      },
      "bin": {
        "xlsx": "bin/xlsx.njs"
      },
      "engines": {
        "node": ">=0.8"
      }
    },
    "node_modules/xtend": {
      "version": "4.0.2",
      "resolved": "https://registry.npmjs.org/xtend/-/xtend-4.0.2.tgz",
      "integrity": "sha512-LKYU1iAXJXUgAXn9URjiu+MWhyUXHsvfp7mcuYm9dSUKK0/CjtrUwFAxD82/mCWbtLsGjFIad0wIsod4zrTAEQ==",
      "license": "MIT",
      "engines": {
        "node": ">=0.4"
      }
    },
    "node_modules/y18n": {
      "version": "5.0.8",
      "resolved": "https://registry.npmjs.org/y18n/-/y18n-5.0.8.tgz",
      "integrity": "sha512-0pfFzegeDWJHJIAmTLRP2DwHjdF5s7jo9tuztdQxAhINCdvS+3nGINqPd00AphqJR/0LhANUS6/+7SCb98YOfA==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=10"
      }
    },
    "node_modules/yallist": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yallist/-/yallist-3.1.1.tgz",
      "integrity": "sha512-a4UGQaWPH59mOXUYnAG2ewncQS4i4F43Tv3JoAM+s2VDAmS9NsK8GpDMLrCHPksFT7h3K6TOoUNn2pb7RoXx4g==",
      "dev": true,
      "license": "ISC"
    },
    "node_modules/yaml": {
      "version": "2.3.1",
      "resolved": "https://registry.npmjs.org/yaml/-/yaml-2.3.1.tgz",
      "integrity": "sha512-2eHWfjaoXgTBC2jNM1LRef62VQa0umtvRiDSk6HSzW7RvS5YtkabJrwYLLEKWBc8a5U2PTSCs+dJjUTJdlHsWQ==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">= 14"
      }
    },
    "node_modules/yargs": {
      "version": "17.7.2",
      "resolved": "https://registry.npmjs.org/yargs/-/yargs-17.7.2.tgz",
      "integrity": "sha512-7dSzzRQ++CKnNI/krKnYRV7JKKPUXMEh61soaHKg9mrWEhzFWhFnxPxGl+69cD1Ou63C13NUPCnmIcrvqCuM6w==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "cliui": "^8.0.1",
        "escalade": "^3.1.1",
        "get-caller-file": "^2.0.5",
        "require-directory": "^2.1.1",
        "string-width": "^4.2.3",
        "y18n": "^5.0.5",
        "yargs-parser": "^21.1.1"
      },
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs-parser": {
      "version": "21.1.1",
      "resolved": "https://registry.npmjs.org/yargs-parser/-/yargs-parser-21.1.1.tgz",
      "integrity": "sha512-tVpsJW7DdjecAiFpbIB1e3qxIQsE6NoPc5/eTdrbbIC4h0LVsWhnoa3g+m2HclBIujHzsxZ4VJVA+GUuc2/LBw==",
      "dev": true,
      "license": "ISC",
      "engines": {
        "node": ">=12"
      }
    },
    "node_modules/yargs/node_modules/emoji-regex": {
      "version": "8.0.0",
      "resolved": "https://registry.npmjs.org/emoji-regex/-/emoji-regex-8.0.0.tgz",
      "integrity": "sha512-MSjYzcWNOA0ewAHpz0MxpYFvwg6yjy1NG3xteoqz644VCo/RPgnr1/GGt+ic3iJTzQ8Eu3TdM14SawnVUmGE6A==",
      "dev": true,
      "license": "MIT"
    },
    "node_modules/yargs/node_modules/is-fullwidth-code-point": {
      "version": "3.0.0",
      "resolved": "https://registry.npmjs.org/is-fullwidth-code-point/-/is-fullwidth-code-point-3.0.0.tgz",
      "integrity": "sha512-zymm5+u+sCsSWyD9qNaejV3DFvhCKclKdizYaJUuHA83RLjb7nSuGnddCHGv0hk+KY7BMAlsWeK4Ueg6EV6XQg==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/yargs/node_modules/string-width": {
      "version": "4.2.3",
      "resolved": "https://registry.npmjs.org/string-width/-/string-width-4.2.3.tgz",
      "integrity": "sha512-wKyQRQpjJ0sIp62ErSZdGsjMJWsap5oRNihHhu6G7JVO/9jIB6UyevL+tXuOqrng8j/cxKTWyWUwvSTriiZz/g==",
      "dev": true,
      "license": "MIT",
      "dependencies": {
        "emoji-regex": "^8.0.0",
        "is-fullwidth-code-point": "^3.0.0",
        "strip-ansi": "^6.0.1"
      },
      "engines": {
        "node": ">=8"
      }
    },
    "node_modules/yn": {
      "version": "3.1.1",
      "resolved": "https://registry.npmjs.org/yn/-/yn-3.1.1.tgz",
      "integrity": "sha512-Ux4ygGWsu2c7isFWe8Yu1YluJmqVhxqK2cLXNQA5AcC3QfbGNpM7fu0Y8b/z16pXLnFxZYvWhd3fhBY9DLmC6Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=6"
      }
    },
    "node_modules/yocto-queue": {
      "version": "0.1.0",
      "resolved": "https://registry.npmjs.org/yocto-queue/-/yocto-queue-0.1.0.tgz",
      "integrity": "sha512-rVksvsnNCdJ/ohGc6xgPwyN8eheCxsiLM8mxuE/t/mOVqJewPuO1miLpTHQiRgTKCLexL4MeAFVagts7HmNZ2Q==",
      "dev": true,
      "license": "MIT",
      "engines": {
        "node": ">=10"
      },
      "funding": {
        "url": "https://github.com/sponsors/sindresorhus"
      }
    },
    "node_modules/zod": {
      "version": "3.25.76",
      "resolved": "https://registry.npmjs.org/zod/-/zod-3.25.76.tgz",
      "integrity": "sha512-gzUt/qt81nXsFGKIFcC3YnfEAx5NkunCfnDlvuBSSFS02bcXu4Lmea0AFIUwbLWxWPx3d9p8S5QoaujKcNQxcQ==",
      "license": "MIT",
      "funding": {
        "url": "https://github.com/sponsors/colinhacks"
      }
    }
  }
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\app.ts
--------------------------------------------------------------------------------
// src/app.ts
import compression from 'compression';
import cors from 'cors';
import express, { Application, NextFunction, Request, RequestHandler, Response } from 'express';
import helmet from 'helmet';
import morgan from 'morgan';


class App {
  public app: Application;

  constructor() {
    this.app = express();
    console.log('ðŸ”„ Creating Express app...');
    this.initializeMiddlewares();
    console.log('âœ… Express app created');
    this.initializeRoutes();
    console.log('ðŸ”„ Initializing basic middlewares...');
    this.initializeErrorHandling();
    console.log('âœ… Basic middlewares initialized');
  }

  private initializeMiddlewares(): void {
    // Security middleware
    this.app.use(helmet({
      contentSecurityPolicy: {
        directives: {
          defaultSrc: ["'self'"],
          styleSrc: ["'self'", "'unsafe-inline'"],
          scriptSrc: ["'self'"],
          imgSrc: ["'self'", "data:", "https:"],
        },
      },
      crossOriginEmbedderPolicy: false
    }) as RequestHandler);

    // CORS configuration
    const corsOptions = {
      origin: process.env.NODE_ENV === 'production' 
        ? process.env.CORS_ORIGINS?.split(',') || ['https://your-frontend-domain.com']
        : ['http://localhost:3000', 'http://127.0.0.1:3000', 'http://localhost:5173'],
      credentials: true,
      optionsSuccessStatus: 200
    };
    this.app.use(cors(corsOptions) as RequestHandler);

    // Compression
    this.app.use(compression() as RequestHandler);

    // Body parsing
    this.app.use(express.json({ limit: '10mb' }) as RequestHandler);
    this.app.use(express.urlencoded({ extended: true, limit: '10mb' }) as RequestHandler);

    // Logging
    const morganFormat = process.env.NODE_ENV === 'production' ? 'combined' : 'dev';
    this.app.use(morgan(morganFormat) as RequestHandler);

    // Request ID middleware
    this.app.use((req: Request, _res: Response, next: NextFunction) => {
      (req as any).id = `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
      next();
    });

    // Security headers
    this.app.use((_req: Request, res: Response, next: NextFunction) => {
      res.setHeader('X-Content-Type-Options', 'nosniff');
      res.setHeader('X-Frame-Options', 'DENY');
      res.setHeader('X-XSS-Protection', '1; mode=block');
      res.setHeader('Referrer-Policy', 'strict-origin-when-cross-origin');
      res.removeHeader('X-Powered-By');
      next();
    });
  }

  private initializeRoutes(): void {
    console.log('ðŸ”„ Initializing basic routes...');
    
    // Health check (before any middleware that might block it)
    this.app.get('/health', (_req: Request, res: Response) => {
      const memoryUsage = process.memoryUsage();
      res.status(200).json({
        status: 'healthy',
        service: 'ai-service',
        timestamp: new Date().toISOString(),
        version: process.env.APP_VERSION || '1.0.0',
        uptime: Math.floor(process.uptime()),
        environment: process.env.NODE_ENV || 'development',
        memory: {
          used: Math.round(memoryUsage.heapUsed / 1024 / 1024),
          total: Math.round(memoryUsage.heapTotal / 1024 / 1024),
          usage: Math.round((memoryUsage.heapUsed / memoryUsage.heapTotal) * 100)
        }
      });
    });

    // Root endpoint
    this.app.get('/', (_req: Request, res: Response) => {
      res.status(200).json({
        message: 'CWIC AI Service',
        version: process.env.APP_VERSION || '1.0.0',
        status: 'running',
        endpoints: {
          health: '/health',
          api: '/api',
          docs: '/api/docs'
        },
        timestamp: new Date().toISOString()
      });
    });

    // API documentation endpoint
    this.app.get('/api/docs', (_req: Request, res: Response) => {
      res.status(200).json({
        service: 'CWIC AI Service',
        version: process.env.APP_VERSION || '1.0.0',
        description: 'AI-powered data governance and discovery service',
        endpoints: {
          discovery: {
            'POST /api/discovery': 'Start data discovery session',
            'GET /api/discovery/:sessionId': 'Get discovery status',
            'POST /api/discovery/query': 'Natural language queries',
            'POST /api/discovery/quality-rules': 'Generate quality rules'
          },
          analysis: {
            'POST /api/analysis/schema': 'Analyze database schema',
            'POST /api/analysis/quality': 'Data quality analysis'
          },
          health: {
            'GET /health': 'Service health check',
            'GET /health/ready': 'Readiness probe',
            'GET /health/live': 'Liveness probe'
          }
        }
      });
    });

    // API status endpoint (fallback)
    this.app.get('/api/status', (_req: Request, res: Response) => {
      res.status(200).json({
        status: 'AI Service API Ready',
        timestamp: new Date().toISOString(),
        routes: 'Basic routes loaded'
      });
    });

    // Try to load API routes (gracefully handle if not available)
   try {
  // IMPORTANT: prefer require here because ts-node is already running with tsconfig-paths/register
  // If this throws, you'll see the exact error below.
    const routes = require('./routes');
    this.app.use('/api', routes.default || routes);
    console.log('âœ… API routes loaded successfully');
  } catch (routeError: any) {
    console.error('âŒ Failed to load API routes:', {
      message: routeError?.message,
      stack: routeError?.stack,
    });

    // Fallback API route (keep this so app still runs)
    this.app.use('/api', (_req: Request, res: Response) => {
      res.status(503).json({
        error: 'API routes failed to load',
        message: routeError?.message || 'Service is starting up',
        retry: 'Fix the routes import error shown in server logs',
      });
    });
  }

    console.log('âœ… Basic routes initialized');
  }

  private initializeErrorHandling(): void {
    // 404 handler
    this.app.use((_req: Request, res: Response) => {
      res.status(404).json({
        success: false,
        error: {
          code: 'NOT_FOUND',
          message: 'The requested resource was not found',
          path: _req.path
        },
        timestamp: new Date().toISOString()
      });
    });

    // Global error handler
    this.app.use((error: unknown, _req: Request, res: Response, _next: NextFunction) => {
      // Type guard to check if error is an Error object
      const isError = error instanceof Error;
      const errorMessage = isError ? error.message : 'Unknown error occurred';
      const errorStack = isError ? error.stack : undefined;

      // Log error safely
      if (typeof console !== 'undefined') {
        console.error('âŒ Application Error:', {
          message: errorMessage,
          stack: errorStack,
          url: _req.url,
          method: _req.method
        });
      }

      // Determine status code
      let statusCode = 500;
      if (isError && 'statusCode' in error) {
        statusCode = (error as any).statusCode || 500;
      }

      // Send error response
      const response: any = {
        success: false,
        error: {
          code: 'INTERNAL_SERVER_ERROR',
          message: process.env.NODE_ENV === 'development' 
            ? errorMessage 
            : 'An internal server error occurred'
        },
        timestamp: new Date().toISOString()
      };

      // Include stack trace in development
      if (process.env.NODE_ENV === 'development' && errorStack) {
        response.error.stack = errorStack;
      }

      if (!res.headersSent) {
        res.status(statusCode).json(response);
      }
    });
  }

  public getApp(): Application {
    return this.app;
  }

  public async shutdown(): Promise<void> {
    console.log('ðŸ”„ Shutting down application...');
    // Add cleanup logic here if needed
    console.log('âœ… Application shutdown complete');
  }
}

export default App;


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\config\database.ts
--------------------------------------------------------------------------------
import { logger } from '@utils/logger';
import { Pool } from 'pg';

class DatabaseConfig {
  private pool: Pool | null = null;

  constructor() {
    this.initializePool();
  }

  private initializePool(): void {
    try {
      this.pool = new Pool({
        connectionString: process.env.DATABASE_URL,
        min: parseInt(process.env.DATABASE_POOL_MIN || '2'),
        max: parseInt(process.env.DATABASE_POOL_MAX || '10'),
        idleTimeoutMillis: 30000,
        connectionTimeoutMillis: 2000,
        ssl: process.env.NODE_ENV === 'production' ? { rejectUnauthorized: false } : false
      });

      // Handle pool errors
      this.pool.on('error', (err) => {
        logger.error('Database pool error:', err);
      });

      // Handle client connection errors
      this.pool.on('connect', () => {
        logger.debug('New database client connected');
      });

    } catch (error) {
      logger.error('Failed to initialize database pool:', error);
      throw error;
    }
  }

  public getPool(): Pool {
    if (!this.pool) {
      throw new Error('Database pool not initialized');
    }
    return this.pool;
  }

  public async query(text: string, params?: any[]): Promise<any> {
    const client = await this.getPool().connect();
    try {
      const start = Date.now();
      const result = await client.query(text, params);
      const duration = Date.now() - start;
      
      logger.debug('Query executed', {
        query: text,
        duration: `${duration}ms`,
        rows: result.rowCount
      });
      
      return result;
    } catch (error) {
      logger.error('Database query error:', { query: text, error });
      throw error;
    } finally {
      client.release();
    }
  }

  public async transaction(callback: (client: any) => Promise<any>): Promise<any> {
    const client = await this.getPool().connect();
    try {
      await client.query('BEGIN');
      const result = await callback(client);
      await client.query('COMMIT');
      return result;
    } catch (error) {
      await client.query('ROLLBACK');
      logger.error('Transaction error:', error);
      throw error;
    } finally {
      client.release();
    }
  }

  public async close(): Promise<void> {
    if (this.pool) {
      await this.pool.end();
      this.pool = null;
      logger.info('Database pool closed');
    }
  }
}

export const db = new DatabaseConfig();

export async function connectDatabase(): Promise<void> {
  try {
    await db.query('SELECT 1');
    logger.info('Database connection verified');
  } catch (error) {
    logger.error('Database connection failed:', error);
    throw error;
  }
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\config\openai.ts
--------------------------------------------------------------------------------
// src/config/openai.ts
import { logger } from '@utils/logger';
import OpenAI from 'openai';

type ChatRole = 'system' | 'user' | 'assistant';

export interface ChatMessage {
  role: ChatRole;
  content: string;
}

export interface ChatArgs {
  model?: string;
  messages: ChatMessage[];
  max_tokens?: number;
  temperature?: number;
  response_format?: { type: 'json_object' | 'text' };
}

export interface ChatResponse {
  choices: Array<{ message: { content: string } }>;
}

class OpenAIAdapter {
  private client: OpenAI | null = null;
  private enabled = false;

  constructor() {
    const apiKey = process.env.OPENAI_API_KEY?.trim();
    if (apiKey) {
      try {
        this.client = new OpenAI({ apiKey });
        this.enabled = true;
        logger.info('OpenAI client initialized');
      } catch (err) {
        this.client = null;
        this.enabled = false;
        logger.error('Failed to initialize OpenAI client (using stub):', err as any);
      }
    } else {
      logger.warn('OPENAI_API_KEY not set. Using stub OpenAI client.');
      this.enabled = false;
    }
  }

  public isAvailable(): boolean {
    return this.enabled && !!this.client;
  }

  /**
   * Mirrors the shape your AIService expects:
   * await openai.createChatCompletion({...})
   * -> returns { choices: [{ message: { content: string } }] }
   */
  public async createChatCompletion(args: ChatArgs): Promise<ChatResponse> {
    // Real client path
    if (this.isAvailable() && this.client) {
      const model = args.model || process.env.OPENAI_MODEL || 'gpt-4o-mini';
      const res = await this.client.chat.completions.create({
        model,
        messages: args.messages,
        max_tokens: args.max_tokens,
        temperature: args.temperature,
        // The SDK accepts response_format on chat.completions
        response_format: args.response_format as any,
      });

      // Conform to your expected return type
      return {
        choices: [
          {
            message: {
              content: res.choices?.[0]?.message?.content ?? '',
            },
          },
        ],
      };
    }

    // Stubbed fallback (no API key): return a JSON-ish payload so your services can parse it.
    const stubJson = JSON.stringify({
      // field discovery defaults
      fields: [],
      recommendations: { governance: [], quality: [], compliance: [] },
      confidence: 0.5,
      // nlq defaults
      sql: 'SELECT 1;',
      explanation: 'OpenAI disabled; returning stubbed content.',
      tables: [],
      fieldsUsed: [],
      warnings: ['OpenAI disabled (stub)'],
    });

    logger.warn('OpenAI call intercepted by stub. Set OPENAI_API_KEY to enable real calls.');
    return { choices: [{ message: { content: stubJson } }] };
  }
}

export const openai = new OpenAIAdapter();



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\config\redis.ts
--------------------------------------------------------------------------------
import { logger } from '@utils/logger';
import { createClient, RedisClientType } from 'redis';

class RedisConfig {
  private client: RedisClientType | null = null;

  constructor() {
    this.initializeClient();
  }

  private initializeClient(): void {
    try {
      this.client = createClient({
        url: process.env.REDIS_URL || 'redis://localhost:6379',
        socket: {
          reconnectStrategy: (retries) => Math.min(retries * 50, 1000)
        }
      });

      this.client.on('error', (err) => {
        logger.error('Redis client error:', err);
      });

      this.client.on('connect', () => {
        logger.info('Redis client connected');
      });

      this.client.on('ready', () => {
        logger.info('Redis client ready');
      });

      this.client.on('end', () => {
        logger.info('Redis client disconnected');
      });

    } catch (error) {
      logger.error('Failed to initialize Redis client:', error);
      throw error;
    }
  }

  public getClient(): RedisClientType {
    if (!this.client) {
      throw new Error('Redis client not initialized');
    }
    return this.client;
  }

  public async set(key: string, value: string, ttl?: number): Promise<void> {
    try {
      if (ttl) {
        await this.getClient().setEx(key, ttl, value);
      } else {
        await this.getClient().set(key, value);
      }
    } catch (error) {
      logger.error('Redis SET error:', { key, error });
      throw error;
    }
  }

  public async get(key: string): Promise<string | null> {
    try {
      return await this.getClient().get(key);
    } catch (error) {
      logger.error('Redis GET error:', { key, error });
      throw error;
    }
  }

  public async del(key: string): Promise<void> {
    try {
      await this.getClient().del(key);
    } catch (error) {
      logger.error('Redis DEL error:', { key, error });
      throw error;
    }
  }

  public async exists(key: string): Promise<boolean> {
    try {
      const result = await this.getClient().exists(key);
      return result === 1;
    } catch (error) {
      logger.error('Redis EXISTS error:', { key, error });
      throw error;
    }
  }

  public async close(): Promise<void> {
    if (this.client) {
      await this.client.quit();
      this.client = null;
      logger.info('Redis client closed');
    }
  }
}

export const redis = new RedisConfig();

export async function connectRedis(): Promise<void> {
  try {
    await redis.getClient().connect();
    logger.info('Redis connection established');
  } catch (error) {
    logger.error('Redis connection failed:', error);
    throw error;
  }
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\controllers\AnalysisController.ts
--------------------------------------------------------------------------------
import { AnalysisService } from '@/services/AnalysisService';
import { APIError } from '@/utils/errors';
import { logger } from '@/utils/logger';
import { successResponse } from '@/utils/responses';
import { NextFunction, Request, Response } from 'express';

export class AnalysisController {
  private analysisService: AnalysisService;

  constructor() {
    this.analysisService = new AnalysisService();
  }

  public analyzeSchema = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { schema } = req.body;
      const userId = (req as any).user.id;

      if (!schema) {
        throw new APIError('Schema information is required', 400);
      }

      const analysis = await this.analysisService.analyzeSchema(schema, userId);

      logger.info('Schema analysis completed', { 
        userId, 
        schema: schema.name,
        tables: schema.tables?.length || 0
      });

      res.json(successResponse(analysis, 'Schema analysis completed'));

    } catch (error) {
      next(error);
    }
  };

  public analyzeDataSample = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { samples } = req.body;
      const userId = (req as any).user.id;

      if (!samples || !Array.isArray(samples)) {
        throw new APIError('Data samples are required', 400);
      }

      const analysis = await this.analysisService.analyzeDataSample(samples, userId);

      logger.info('Data sample analysis completed', { 
        userId,
        samplesAnalyzed: samples.length
      });

      res.json(successResponse(analysis, 'Data sample analysis completed'));

    } catch (error) {
      next(error);
    }
  };

  public performQualityCheck = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { dataSourceId, rules } = req.body;
      const userId = (req as any).user.id;

      if (!dataSourceId) {
        throw new APIError('Data source ID is required', 400);
      }

      const qualityReport = await this.analysisService.performQualityCheck(dataSourceId, rules, userId);

      logger.info('Quality check completed', { 
        userId,
        dataSourceId,
        rulesChecked: rules?.length || 0
      });

      res.json(successResponse(qualityReport, 'Quality check completed'));

    } catch (error) {
      next(error);
    }
  };
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\controllers\DiscoveryController.ts
--------------------------------------------------------------------------------
import { AIService, NaturalLanguageQuery } from '@services/AIService';
import { DiscoveryService, StartDiscoveryRequest } from '@services/DiscoveryService';
import { APIError } from '@utils/errors';
import { logger } from '@utils/logger';
import { successResponse } from '@utils/responses';
import { NextFunction, Request, Response } from 'express';

export class DiscoveryController {
  private discoveryService: DiscoveryService;
  private aiService: AIService;

  constructor() {
    this.discoveryService = new DiscoveryService();
    this.aiService = new AIService();
  }

  public startDiscovery = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { dataSourceId, schemas, tables, options } = req.body;
      const userId = (req as any).user.id;

      if (!dataSourceId) {
        throw new APIError('Data source ID is required', 400);
      }

      const request: StartDiscoveryRequest = {
        userId,
        dataSourceId,
        schemas,
        tables,
        options
      };

      const session = await this.discoveryService.startDiscovery(request);

      logger.info('Discovery started', { sessionId: session.sessionId, userId });

      res.status(201).json(successResponse(session, 'Discovery session started'));

    } catch (error) {
      next(error);
    }
  };

  public getDiscoveryStatus = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { sessionId } = req.params;
      const userId = (req as any).user.id;

      const session = await this.discoveryService.getSession(sessionId);

      if (!session) {
        throw new APIError('Discovery session not found', 404);
      }

      if (session.userId !== userId) {
        throw new APIError('Access denied', 403);
      }

      res.json(successResponse(session));

    } catch (error) {
      next(error);
    }
  };

  public listDiscoverySessions = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const userId = (req as any).user.id;
      const limit = parseInt(req.query.limit as string) || 20;
      const offset = parseInt(req.query.offset as string) || 0;

      const sessions = await this.discoveryService.listSessions(userId, limit, offset);

      res.json(successResponse({
        sessions,
        pagination: {
          limit,
          offset,
          total: sessions.length
        }
      }));

    } catch (error) {
      next(error);
    }
  };

  public deleteDiscoverySession = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { sessionId } = req.params;
      const userId = (req as any).user.id;

      await this.discoveryService.deleteSession(sessionId, userId);

      logger.info('Discovery session deleted', { sessionId, userId });

      res.json(successResponse(null, 'Discovery session deleted'));

    } catch (error) {
      next(error);
    }
  };

  public processNaturalLanguageQuery = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
  try {
    const { query, context } = req.body;
    if (!query) throw new APIError('Query is required', 400);

    const nlQuery: NaturalLanguageQuery = { query, context };
    const result = await this.aiService.processNaturalLanguageQuery(nlQuery);

    // ðŸ”§ Normalize to the frontendâ€™s expected AIResponse.data shape
    const payload = {
      message: "Hereâ€™s the SQL Iâ€™d run based on your request.",
      type: 'query' as const,
      results: {
        sql:          result.sql,
        explanation:  result.explanation,
        tables:       result.tables,
        fields:       result.fields,
        confidence:   result.confidence,
        warnings:     result.warnings,
        isAiGenerated: result.isAiGenerated
      },
      suggestions: [
        'Add a date range filter',
        'Group results by day',
        'Limit to the last 1,000 rows',
        'Explain this query step-by-step'
      ],
      actions: [
        { type: 'view_details', label: 'Copy SQL', payload: { sql: result.sql } },
        { type: 'export_data',  label: 'Export as CSV' }
      ]
    };

    res.json(successResponse(payload, 'Natural language query processed'));
  } catch (error) {
    next(error);
  }
};

  public generateQualityRules = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { fieldInfo } = req.body;

      if (!fieldInfo) {
        throw new APIError('Field information is required', 400);
      }

      const rules = await this.aiService.generateQualityRules(fieldInfo);

      res.json(successResponse({ rules }));

    } catch (error) {
      next(error);
    }
  };

  public explainViolation = async (req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      const { violation } = req.body;

      if (!violation) {
        throw new APIError('Violation information is required', 400);
      }

      const explanation = await this.aiService.explainViolation(violation);

      res.json(successResponse({ explanation }));

    } catch (error) {
      next(error);
    }
  };
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\controllers\HealthController.ts
--------------------------------------------------------------------------------
// src/controllers/HealthController.ts
import type { NextFunction, Request, Response } from 'express';
import { unlink, writeFile } from 'fs/promises';
import os from 'os';
import path from 'path';

import { db } from '@config/database';
import { openai } from '@config/openai';
import { redis } from '@config/redis';
import { APIError } from '@utils/errors';
import { logger } from '@utils/logger';
import { errorResponse, successResponse } from '@utils/responses';

type Status = 'healthy' | 'degraded' | 'unhealthy';

interface HealthCheck {
  name: string;
  status: Status;
  responseTime: number; // ms
  details?: unknown;
  error?: string;
}

interface SystemHealth {
  status: Status;
  service: string;
  version: string;
  timestamp: string;
  uptime: number;
  environment: string;
  checks: HealthCheck[];
  summary: { total: number; healthy: number; degraded: number; unhealthy: number };
  system: {
    memory: NodeJS.MemoryUsage;
    cpu: { loadAverage: number[]; usageMicros: number };
    process: { pid: number; platform: string; nodeVersion: string };
  };
}

// --- bounded timeouts to avoid crazy env values
const clamp = (n: number, min: number, max: number) => Math.max(min, Math.min(max, n));
const DEFAULT_CHECK_TIMEOUT_MS = clamp(Number(process.env.HEALTH_CHECK_TIMEOUT_MS || 2000), 250, 10_000);

// Mask detailed dependency errors in production
const mask = (msg: string) => (process.env.NODE_ENV === 'development' ? msg : 'dependency error');

export class HealthController {
  private healthChecks: Map<string, () => Promise<HealthCheck>> = new Map();

  constructor() {
    this.initializeHealthChecks();
  }

  private initializeHealthChecks(): void {
    this.healthChecks.set('database', this.checkDatabase.bind(this));
    this.healthChecks.set('redis', this.checkRedis.bind(this));
    this.healthChecks.set('openai', this.checkOpenAI.bind(this));
    this.healthChecks.set('memory', this.checkMemory.bind(this));
    this.healthChecks.set('storage', this.checkStorage.bind(this));
  }

  public checkHealth = async (_req: Request, res: Response): Promise<void> => {
    const started = Date.now();
    logger.debug('Health: starting');

    const entries = Array.from(this.healthChecks.entries());
    const checks = await Promise.all(
      entries.map(([name, fn]) => this.runWithTimeout(name, fn, DEFAULT_CHECK_TIMEOUT_MS))
    );

    const summary = {
      total: checks.length,
      healthy: checks.filter(c => c.status === 'healthy').length,
      degraded: checks.filter(c => c.status === 'degraded').length,
      unhealthy: checks.filter(c => c.status === 'unhealthy').length
    };

    const overall: Status =
      summary.unhealthy > 0 ? 'unhealthy' : summary.degraded > 0 ? 'degraded' : 'healthy';

    const system = this.getSystemInfo();
    const payload: SystemHealth = {
      status: overall,
      service: 'ai-service',
      version: process.env.APP_VERSION || '1.0.0',
      timestamp: new Date().toISOString(),
      uptime: process.uptime(),
      environment: process.env.NODE_ENV || 'development',
      checks,
      summary,
      system
    };

    logger.info('Health: completed', { status: overall, durationMs: Date.now() - started, summary });

    // prevent caches from serving stale health
    res.setHeader('Cache-Control', 'no-store, no-cache, must-revalidate, proxy-revalidate');
    res
      .status(overall === 'unhealthy' ? 503 : 200)
      .json(successResponse(payload, 'Health check completed'));
  };

  public checkReadiness = async (_req: Request, res: Response, next: NextFunction): Promise<void> => {
    try {
      logger.debug('Readiness: starting');
      const critical: Array<[string, () => Promise<HealthCheck>]> = [
        ['database', this.checkDatabase.bind(this)],
        ['redis', this.checkRedis.bind(this)],
        ['openai', this.checkOpenAI.bind(this)]
      ];

      const results = await Promise.all(
        critical.map(([name, fn]) => this.runWithTimeout(name, fn, DEFAULT_CHECK_TIMEOUT_MS))
      );

      const failures = results.filter(r => r.status === 'unhealthy');

      if (failures.length) {
        logger.warn('Readiness: failed', { failures });
        res
          .status(503)
          .json(
            errorResponse('Service not ready', 503, {
              status: 'not ready',
              service: 'ai-service',
              timestamp: new Date().toISOString(),
              failures
            })
          );
        return;
      }

      logger.info('Readiness: passed');
      res.setHeader('Cache-Control', 'no-store');
      res.json(
        successResponse(
          { status: 'ready', service: 'ai-service', timestamp: new Date().toISOString(), message: 'Service is ready to accept requests' },
          'Readiness check passed'
        )
      );
    } catch (err) {
      logger.error('Readiness: error', { err });
      next(new APIError('Readiness check failed', 503, err));
    }
  };

  public checkLiveness = async (_req: Request, res: Response): Promise<void> => {
    const status = {
      status: 'alive',
      service: 'ai-service',
      timestamp: new Date().toISOString(),
      uptime: Math.floor(process.uptime()),
      pid: process.pid,
      memory: process.memoryUsage()
    };
    logger.debug('Liveness: ok', status);
    res.setHeader('Cache-Control', 'no-store');
    res.json(successResponse(status, 'Service is alive'));
  };

  public getMetrics = async (_req: Request, res: Response): Promise<void> => {
    try {
      // short sampling window to compute delta CPU
      const snap = process.cpuUsage();
      await new Promise(r => setTimeout(r, 50));
      const delta = process.cpuUsage(snap);
      const usageMicros = delta.user + delta.system;

      const metrics = {
        service: 'ai-service',
        timestamp: new Date().toISOString(),
        uptime: process.uptime(),
        memory: process.memoryUsage(),
        cpu: { loadAverage: os.loadavg(), usageMicros },
        requests: { total: 0, active: 0, errors: 0 }, // wire your counters via middleware
        cache: await this.getCacheMetrics(),
        database: await this.getDatabaseMetrics()
      };

      res.setHeader('Cache-Control', 'no-store');
      res.json(successResponse(metrics, 'Metrics retrieved'));
    } catch (err) {
      logger.error('Metrics: failed', { err });
      res.status(500).json(errorResponse('Failed to retrieve metrics', 500));
    }
  };

  // ----- Individual checks

  private async checkDatabase(): Promise<HealthCheck> {
    const t0 = Date.now();
    try {
      await db.query('SELECT 1');
      return { name: 'database', status: 'healthy', responseTime: Date.now() - t0, details: { type: 'PostgreSQL', connection: 'active' } };
    } catch (err: any) {
      return { name: 'database', status: 'unhealthy', responseTime: Date.now() - t0, error: mask(err?.message || 'db error') };
    }
  }

  private async checkRedis(): Promise<HealthCheck> {
    const t0 = Date.now();
    try {
      const key = `health:check:${Date.now()}`;
      // Redis v4: { EX: seconds }
      await (redis as any).set?.(key, 'ok', { EX: 10 });
      const val = await (redis as any).get?.(key);
      await (redis as any).del?.(key);
      if (val !== 'ok') throw new Error('Redis read/write test failed');
      return { name: 'redis', status: 'healthy', responseTime: Date.now() - t0, details: { type: 'Redis', operation: 'read/write passed' } };
    } catch (err: any) {
      return { name: 'redis', status: 'unhealthy', responseTime: Date.now() - t0, error: mask(err?.message || 'redis error') };
    }
  }

  private async checkOpenAI(): Promise<HealthCheck> {
    const t0 = Date.now();
    try {
      let ok = false;
      if (typeof (openai as any)?.testConnection === 'function') {
        ok = await (openai as any).testConnection();
      } else if ((openai as any)?.models?.list) {
        const models = await (openai as any).models.list();
        ok = Boolean(models);
      }
      return {
        name: 'openai',
        status: ok ? 'healthy' : 'degraded',
        responseTime: Date.now() - t0,
        details: { type: 'OpenAI API', available: ok },
        ...(ok ? {} : { error: 'OpenAI API not verified' })
      };
    } catch (err: any) {
      return { name: 'openai', status: 'degraded', responseTime: Date.now() - t0, error: mask(err?.message || 'OpenAI check failed') };
    }
  }

  private async checkMemory(): Promise<HealthCheck> {
    const t0 = Date.now();
    try {
      const m = process.memoryUsage();
      const pct = (m.heapUsed / Math.max(m.heapTotal, 1)) * 100;
      let status: Status = 'healthy';
      let message = 'Memory usage normal';
      if (pct > 90) { status = 'unhealthy'; message = 'Critical memory usage'; }
      else if (pct > 75) { status = 'degraded'; message = 'High memory usage'; }

      return {
        name: 'memory',
        status,
        responseTime: Date.now() - t0,
        details: {
          usagePercent: Math.round(pct * 100) / 100,
          heapUsedMB: Math.round((m.heapUsed / 1024 / 1024) * 100) / 100,
          heapTotalMB: Math.round((m.heapTotal / 1024 / 1024) * 100) / 100,
          message
        }
      };
    } catch {
      return { name: 'memory', status: 'unhealthy', responseTime: Date.now() - t0, error: 'Failed to evaluate memory' };
    }
  }

  private async checkStorage(): Promise<HealthCheck> {
    const t0 = Date.now();
    const base = process.env.HEALTH_TMP_DIR || os.tmpdir(); // configurable for read-only FS
    const file = path.join(base, `ai-service-health-${process.pid}-${Date.now()}.tmp`);
    try {
      await writeFile(file, 'health check');
      await unlink(file);
      return { name: 'storage', status: 'healthy', responseTime: Date.now() - t0, details: { type: 'filesystem', dir: base, writable: true } };
    } catch (err: any) {
      return { name: 'storage', status: 'degraded', responseTime: Date.now() - t0, error: mask(err?.message || 'Storage write test failed') };
    }
  }

  // ----- Helpers

  private getSystemInfo() {
    const mem = process.memoryUsage();
    const cpu0 = process.cpuUsage();
    const load = os.loadavg();
    return {
      memory: mem,
      cpu: { loadAverage: load, usageMicros: cpu0.user + cpu0.system },
      process: { pid: process.pid, platform: process.platform, nodeVersion: process.version }
    };
  }

  private async getCacheMetrics() {
    try {
      if (typeof (redis as any)?.getStats === 'function') {
        const stats = await (redis as any).getStats();
        return { connected: true, stats };
      }
      const pong = await (redis as any).ping?.();
      return { connected: pong === 'PONG' || pong === true };
    } catch (err: any) {
      return { connected: false, error: mask(err?.message || 'Failed to get Redis stats') };
    }
  }

  private async getDatabaseMetrics() {
    try {
      const result = await db.query(`
        SELECT 
          pg_database_size(current_database()) as database_size,
          (SELECT count(*) FROM pg_stat_activity WHERE state = 'active') as active_connections
      `);
      const row = (result as any).rows?.[0] || {};
      return {
        connected: true,
        size: Number(row.database_size ?? 0),
        activeConnections: Number(row.active_connections ?? 0)
      };
    } catch (err: any) {
      return { connected: false, error: mask(err?.message || 'Failed to get database metrics') };
    }
  }

  private async runWithTimeout(name: string, fn: () => Promise<HealthCheck>, timeoutMs: number): Promise<HealthCheck> {
    const started = Date.now();
    try {
      const result = await Promise.race<Promise<HealthCheck>>([
        fn(),
        new Promise<HealthCheck>((_resolve, reject) => setTimeout(() => reject(new Error(`${name} check timed out after ${timeoutMs}ms`)), timeoutMs))
      ]);
      return result;
    } catch (err: any) {
      logger.warn('Health: check failed', { name, error: err?.message });
      return { name, status: 'unhealthy', responseTime: Date.now() - started, error: mask(err?.message || 'Unknown error') };
    }
  }
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\interfaces\analysis.interface.ts
--------------------------------------------------------------------------------
export interface AnalysisRequest {
  dataSourceId: string;
  analysisType: 'schema' | 'data_quality' | 'compliance' | 'performance';
  options?: AnalysisOptions;
  userId: string;
}

export interface AnalysisOptions {
  includeMetadata?: boolean;
  includeSampleData?: boolean;
  sampleSize?: number;
  analysisDepth?: 'basic' | 'detailed' | 'comprehensive';
  targetTables?: string[];
  targetSchemas?: string[];
  complianceFrameworks?: ComplianceFramework[];
}

export interface AnalysisResult {
  analysisId: string;
  dataSourceId: string;
  analysisType: string;
  status: AnalysisStatus;
  progress: number;
  startedAt: Date;
  completedAt?: Date;
  results?: AnalysisData;
  error?: string;
  userId: string;
}

export interface AnalysisData {
  schemaAnalysis?: SchemaAnalysisResult;
  qualityAnalysis?: QualityAnalysisResult;
  complianceAnalysis?: ComplianceAnalysisResult;
  performanceAnalysis?: PerformanceAnalysisResult;
  summary: AnalysisSummary;
}

export interface SchemaAnalysisResult {
  totalTables: number;
  totalColumns: number;
  tableAnalysis: TableAnalysis[];
  relationshipMap: RelationshipAnalysis[];
  dataClassification: DataClassificationSummary;
  recommendations: string[];
}

export interface TableAnalysis {
  schemaName: string;
  tableName: string;
  columnCount: number;
  estimatedRowCount?: number;
  columns: ColumnAnalysis[];
  governance: TableGovernance;
  dataQuality: TableQualityMetrics;
  relationships: TableRelationship[];
}

export interface ColumnAnalysis {
  name: string;
  dataType: string;
  nullable: boolean;
  isPrimaryKey: boolean;
  isForeignKey: boolean;
  classification: DataClassification;
  sensitivity: SensitivityLevel;
  qualityScore: number;
  patterns: DataPattern[];
  statistics?: ColumnStatistics;
  recommendations: string[];
}

export interface TableGovernance {
  classification: DataClassification;
  sensitivity: SensitivityLevel;
  complianceRequirements: ComplianceFramework[];
  accessLevel: AccessLevel;
  retentionPolicy?: RetentionPolicy;
  encryptionRequired: boolean;
  auditRequired: boolean;
}

export interface TableQualityMetrics {
  completeness: number;
  validity: number;
  consistency: number;
  accuracy: number;
  uniqueness: number;
  overallScore: number;
  issues: QualityIssue[];
}

export interface QualityAnalysisResult {
  overallScore: number;
  dimensionScores: QualityDimensionScores;
  issues: QualityIssue[];
  trends: QualityTrend[];
  recommendations: QualityRecommendation[];
}

export interface QualityDimensionScores {
  completeness: number;
  validity: number;
  consistency: number;
  accuracy: number;
  uniqueness: number;
  timeliness: number;
}

export interface QualityIssue {
  id: string;
  type: QualityIssueType;
  severity: 'Critical' | 'High' | 'Medium' | 'Low';
  table: string;
  column?: string;
  description: string;
  affectedRows: number;
  suggestion: string;
  detectedAt: Date;
  status: 'Open' | 'Acknowledged' | 'Resolved' | 'Ignored';
}

export interface ComplianceAnalysisResult {
  overallScore: number;
  frameworkResults: FrameworkComplianceResult[];
  violations: ComplianceViolation[];
  recommendations: ComplianceRecommendation[];
  riskAssessment: RiskAssessment;
}

export interface FrameworkComplianceResult {
  framework: ComplianceFramework;
  score: number;
  status: 'Compliant' | 'Partially Compliant' | 'Non-Compliant';
  requirements: RequirementResult[];
  lastAssessed: Date;
}

export interface PerformanceAnalysisResult {
  queryPerformance: QueryPerformanceMetrics;
  indexAnalysis: IndexAnalysis[];
  storageAnalysis: StorageMetrics;
  recommendations: PerformanceRecommendation[];
}

export interface AnalysisSummary {
  totalTables: number;
  totalColumns: number;
  sensitiveDataTables: number;
  qualityScore: number;
  complianceScore: number;
  criticalIssues: number;
  highPriorityRecommendations: string[];
  estimatedImprovementEffort: 'Low' | 'Medium' | 'High';
}

// Supporting Enums and Types
export enum AnalysisStatus {
  PENDING = 'pending',
  IN_PROGRESS = 'in_progress',
  COMPLETED = 'completed',
  FAILED = 'failed',
  CANCELLED = 'cancelled'
}

export enum DataClassification {
  PUBLIC = 'Public',
  INTERNAL = 'Internal',
  CONFIDENTIAL = 'Confidential',
  RESTRICTED = 'Restricted',
  PII = 'PII',
  PHI = 'PHI',
  FINANCIAL = 'Financial'
}

export enum SensitivityLevel {
  LOW = 'Low',
  MEDIUM = 'Medium',
  HIGH = 'High',
  CRITICAL = 'Critical'
}

export enum ComplianceFramework {
  GDPR = 'GDPR',
  HIPAA = 'HIPAA',
  CCPA = 'CCPA',
  SOX = 'SOX',
  PCI_DSS = 'PCI-DSS',
  ISO_27001 = 'ISO-27001',
  NIST = 'NIST'
}

export enum AccessLevel {
  PUBLIC = 'Public',
  INTERNAL = 'Internal',
  RESTRICTED = 'Restricted',
  CONFIDENTIAL = 'Confidential'
}

export enum QualityIssueType {
  NULL_VALUES = 'null_values',
  DUPLICATES = 'duplicates',
  FORMAT_INCONSISTENCY = 'format_inconsistency',
  OUTLIERS = 'outliers',
  REFERENTIAL_INTEGRITY = 'referential_integrity',
  BUSINESS_RULE_VIOLATION = 'business_rule_violation'
}

// Supporting Interfaces
export interface DataPattern {
  type: string;
  pattern: string;
  confidence: number;
  examples: string[];
}

export interface ColumnStatistics {
  nullCount: number;
  uniqueCount: number;
  minValue?: any;
  maxValue?: any;
  avgValue?: number;
  standardDeviation?: number;
  distribution?: ValueDistribution[];
}

export interface ValueDistribution {
  value: any;
  count: number;
  percentage: number;
}

export interface RelationshipAnalysis {
  sourceTable: string;
  targetTable: string;
  relationshipType: 'one-to-one' | 'one-to-many' | 'many-to-many';
  foreignKeys: ForeignKeyRelation[];
  strength: number;
}

export interface ForeignKeyRelation {
  sourceColumn: string;
  targetColumn: string;
  constraintName?: string;
}

export interface TableRelationship {
  relatedTable: string;
  relationshipType: string;
  foreignKeyColumns: string[];
  isStrong: boolean;
}

export interface DataClassificationSummary {
  byClassification: Record<DataClassification, number>;
  bySensitivity: Record<SensitivityLevel, number>;
  byCompliance: Record<ComplianceFramework, number>;
  totalSensitiveFields: number;
}

export interface RetentionPolicy {
  retentionPeriod: number;
  retentionUnit: 'days' | 'months' | 'years';
  archiveAfter?: number;
  deleteAfter?: number;
  policy: string;
}

export interface QualityTrend {
  date: Date;
  dimension: string;
  score: number;
  change: number;
}

export interface QualityRecommendation {
  id: string;
  priority: 'High' | 'Medium' | 'Low';
  category: 'Data Quality' | 'Governance' | 'Compliance' | 'Performance';
  title: string;
  description: string;
  impact: string;
  effort: 'Low' | 'Medium' | 'High';
  estimatedImprovement: number;
  implementation: string[];
}

export interface ComplianceViolation {
  id: string;
  framework: ComplianceFramework;
  requirement: string;
  severity: 'Critical' | 'High' | 'Medium' | 'Low';
  table: string;
  column?: string;
  description: string;
  remediation: string;
  dueDate?: Date;
  status: 'Open' | 'In Progress' | 'Resolved';
}

export interface ComplianceRecommendation {
  framework: ComplianceFramework;
  requirement: string;
  description: string;
  priority: 'High' | 'Medium' | 'Low';
  implementation: string[];
  timeline: string;
}

export interface RiskAssessment {
  overallRisk: 'Low' | 'Medium' | 'High' | 'Critical';
  riskFactors: RiskFactor[];
  mitigationStrategies: string[];
  businessImpact: string;
}

export interface RiskFactor {
  factor: string;
  level: 'Low' | 'Medium' | 'High' | 'Critical';
  description: string;
  likelihood: number;
  impact: number;
}

export interface RequirementResult {
  requirement: string;
  status: 'Met' | 'Partially Met' | 'Not Met';
  description: string;
  evidence?: string[];
  gaps?: string[];
}

export interface QueryPerformanceMetrics {
  avgQueryTime: number;
  slowQueries: SlowQuery[];
  queryPatterns: QueryPattern[];
  resourceUtilization: ResourceUtilization;
}

export interface SlowQuery {
  query: string;
  executionTime: number;
  frequency: number;
  table: string;
  recommendation: string;
}

export interface QueryPattern {
  pattern: string;
  frequency: number;
  avgExecutionTime: number;
  optimization: string;
}

export interface ResourceUtilization {
  cpuUsage: number;
  memoryUsage: number;
  ioWait: number;
  connectionCount: number;
}

export interface IndexAnalysis {
  table: string;
  existingIndexes: IndexInfo[];
  suggestedIndexes: SuggestedIndex[];
  unusedIndexes: string[];
}

export interface IndexInfo {
  name: string;
  columns: string[];
  type: string;
  size: number;
  usage: number;
}

export interface SuggestedIndex {
  columns: string[];
  type: string;
  rationale: string;
  estimatedImprovement: number;
}

export interface StorageMetrics {
  totalSize: number;
  tablesSizes: TableSize[];
  growthRate: number;
  projectedSize: number;
  optimization: string[];
}

export interface TableSize {
  table: string;
  size: number;
  rowCount: number;
  avgRowSize: number;
}

export interface PerformanceRecommendation {
  type: 'Index' | 'Query' | 'Schema' | 'Configuration';
  description: string;
  impact: 'High' | 'Medium' | 'Low';
  effort: 'Low' | 'Medium' | 'High';
  implementation: string;
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\interfaces\discovery.interface.ts
--------------------------------------------------------------------------------
/* eslint-disable @typescript-eslint/consistent-type-definitions */

/**
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Utility & Brand Types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 */
export type Brand<K, T extends string> = K & { readonly __brand: T };

export type UUID = Brand<string, 'uuid'>;               // e.g., '2f1a2c1e-...'
export type ISODateTime = Brand<string, 'iso-datetime'>; // e.g., new Date().toISOString()
export type ByteSize = Brand<number, 'bytes'>;
export type Percentage = Brand<number, '0..100'>;

export type NonEmptyArray<T> = readonly [T, ...T[]];
export type PositiveInt = Brand<number, 'positive-int'>;

/**
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Shared Enums / Unions
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 */
export type DiscoveryType = 'full' | 'incremental' | 'targeted';

export enum DiscoveryStatus {
  PENDING = 'pending',
  INITIALIZING = 'initializing',
  SCANNING_METADATA = 'scanning_metadata',
  SAMPLING_DATA = 'sampling_data',
  CLASSIFYING = 'classifying',
  AI_ANALYSIS = 'ai_analysis',
  QUALITY_ASSESSMENT = 'quality_assessment',
  GENERATING_INSIGHTS = 'generating_insights',
  RUNNING = 'running',
  COMPLETED = 'completed',
  FAILED = 'failed',
  CANCELLED = 'cancelled',
}

export enum PatternType {
  EMAIL = 'email',
  PHONE = 'phone',
  SSN = 'ssn',
  CREDIT_CARD = 'credit_card',
  IP_ADDRESS = 'ip_address',
  UUID = 'uuid',
  DATE = 'date',
  URL = 'url',
  CUSTOM = 'custom',
}

export type ConstraintKind = 'PRIMARY KEY' | 'FOREIGN KEY' | 'UNIQUE' | 'CHECK' | 'NOT NULL';
export type IndexMethod = 'btree' | 'hash' | 'gist' | 'gin' | 'brin' | 'spgist' | string;
export type TableLike = 'table' | 'view' | 'materialized_view';

export type DBType =
  | 'postgres'
  | 'mysql'
  | 'mariadb'
  | 'mssql'
  | 'oracle'
  | 'snowflake'
  | 'bigquery'
  | 'sqlite'
  | 'redshift'
  | string;

export type QualityDimension = 'Completeness' | 'Validity' | 'Consistency' | 'Accuracy' | 'Uniqueness';
export type DataVolume = 'Small' | 'Medium' | 'Large' | 'Very Large';
export type Criticality = 'Low' | 'Medium' | 'High' | 'Critical';
export type RiskLevel = Criticality;
export type Priority = 'Critical' | 'High' | 'Medium' | 'Low';
export type Timeline = 'Immediate' | 'Short Term' | 'Long Term';

export type GovernanceCategory = 'Access Control' | 'Data Classification' | 'Retention' | 'Compliance';

export type DataClassification =
  | 'PII'
  | 'PHI'
  | 'PCI'
  | 'Confidential'
  | 'Restricted'
  | 'Internal'
  | 'Public'
  | 'Custom';

export type SensitivityLevel = 'Low' | 'Medium' | 'High' | 'Very High';

export type ComplianceFramework =
  | 'GDPR'
  | 'HIPAA'
  | 'PCI-DSS'
  | 'SOX'
  | 'CCPA'
  | 'ISO27001'
  | 'NIST'
  | 'SOC2'
  | 'Custom';

export type ClassificationScope = 'column_name' | 'data_type' | 'data_pattern';

/**
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Request Models
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 */

export interface DiscoveryOptions {
  readonly schemas?: readonly string[];
  readonly tables?: readonly string[];
  readonly includeSystemTables?: boolean;
  readonly includeSampleData?: boolean;
  readonly sampleSize?: PositiveInt; // rows per table when sampling
  readonly analysisDepth?: 'basic' | 'detailed' | 'comprehensive';
  readonly aiAnalysis?: boolean;
  readonly classificationRules?: readonly ClassificationRule[];
  readonly customPatterns?: readonly CustomPattern[];
}

/**
 * Discriminated DiscoveryRequest:
 * - full / incremental: options optional
 * - targeted: requires at least one of schemas/tables, and they cannot be empty
 */
interface BaseDiscoveryRequest {
  readonly dataSourceId: UUID | string;
  readonly userId: UUID | string;
}

export type DiscoveryRequest =
  | (BaseDiscoveryRequest & {
      readonly discoveryType: 'full';
      readonly options?: DiscoveryOptions;
    })
  | (BaseDiscoveryRequest & {
      readonly discoveryType: 'incremental';
      readonly options?: DiscoveryOptions & { readonly since?: ISODateTime };
    })
  | (BaseDiscoveryRequest & {
      readonly discoveryType: 'targeted';
      readonly options: DiscoveryOptions & {
        readonly schemas?: NonEmptyArray<string>;
        readonly tables?: NonEmptyArray<string>;
      };
    });

/**
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Session / Results
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 */

export interface DiscoverySession {
  readonly sessionId: UUID | string;
  readonly userId: UUID | string;
  readonly dataSourceId: UUID | string;
  readonly discoveryType: DiscoveryType;
  readonly status: DiscoveryStatus;
  readonly progress: Percentage; // 0..100
  readonly currentStep?: string;
  readonly results?: DiscoveryResults;
  readonly error?: string;
  readonly startedAt: Date;
  readonly completedAt?: Date;
  readonly estimatedCompletion?: Date;
  readonly options: DiscoveryOptions;
}

export interface DiscoveryResults {
  readonly metadata: DataSourceMetadata;
  readonly classification: ClassificationResults;
  readonly aiInsights: AIInsights;
  readonly qualityAssessment: QualityAssessment;
  readonly summary: DiscoverySummary;
  readonly recommendations: readonly DiscoveryRecommendation[];
}

/**
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Metadata Shapes
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 */

export interface DataSourceMetadata {
  readonly dataSourceId: UUID | string;
  readonly connectionInfo: ConnectionInfo;
  readonly schemas: readonly SchemaMetadata[];
  readonly totalTables: number;
  readonly totalColumns: number;
  readonly totalRows?: number;
  readonly dataSize?: ByteSize;
  readonly lastUpdated: Date;
}

export interface ConnectionInfo {
  readonly type: DBType;
  readonly host?: string;
  readonly port?: number;
  readonly database?: string;
  readonly version?: string;
  readonly charset?: string;
  readonly collation?: string;
}

export interface SchemaMetadata {
  readonly name: string;
  readonly tables: readonly TableMetadata[];
  readonly views: readonly ViewMetadata[];
  readonly procedures?: readonly ProcedureMetadata[];
  readonly functions?: readonly FunctionMetadata[];
}

export interface TableMetadata {
  readonly schema: string;
  readonly name: string;
  readonly type: TableLike;
  readonly columns: readonly ColumnMetadata[];
  readonly primaryKeys: readonly string[];
  readonly foreignKeys: readonly ForeignKeyMetadata[];
  readonly indexes: readonly IndexMetadata[];
  readonly constraints: readonly ConstraintMetadata[];
  readonly rowCount?: number;
  readonly sizeBytes?: ByteSize;
  readonly lastModified?: Date;
  readonly sampleData?: readonly unknown[];
}

export interface ColumnMetadata {
  readonly name: string;
  readonly dataType: string;
  readonly length?: number;
  readonly precision?: number;
  readonly scale?: number;
  readonly nullable: boolean;
  readonly defaultValue?: unknown;
  readonly autoIncrement?: boolean;
  readonly description?: string;
  readonly position: number;
}

export interface ViewMetadata {
  readonly schema: string;
  readonly name: string;
  readonly definition: string;
  readonly columns: readonly ColumnMetadata[];
  readonly dependencies: readonly string[];
}

export interface ProcedureMetadata {
  readonly schema: string;
  readonly name: string;
  readonly parameters: readonly ParameterMetadata[];
  readonly returnType?: string;
  readonly language?: string;
}

export interface FunctionMetadata {
  readonly schema: string;
  readonly name: string;
  readonly parameters: readonly ParameterMetadata[];
  readonly returnType: string;
  readonly language?: string;
}

export interface ParameterMetadata {
  readonly name: string;
  readonly dataType: string;
  readonly direction: 'IN' | 'OUT' | 'INOUT';
  readonly defaultValue?: unknown;
}

export interface ForeignKeyMetadata {
  readonly name: string;
  readonly columns: readonly string[];
  readonly referencedTable: string; // consider "schema.table"
  readonly referencedColumns: readonly string[];
  readonly onDelete?: 'NO ACTION' | 'RESTRICT' | 'CASCADE' | 'SET NULL' | 'SET DEFAULT' | string;
  readonly onUpdate?: 'NO ACTION' | 'RESTRICT' | 'CASCADE' | 'SET NULL' | 'SET DEFAULT' | string;
}

export interface IndexMetadata {
  readonly name: string;
  readonly columns: readonly string[];
  readonly unique: boolean;
  readonly type?: string;   // btree, hash... (engine-specific)
  readonly method?: IndexMethod;
}

export interface ConstraintMetadata {
  readonly name: string;
  readonly type: ConstraintKind;
  readonly columns: readonly string[];
  readonly definition?: string;
}

/**
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Classification / Compliance
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 */

export interface ClassificationResults {
  readonly fieldClassifications: readonly FieldClassification[];
  readonly tableClassifications: readonly TableClassification[];
  readonly sensitivityMap: SensitivityMap;
  readonly complianceMapping: ComplianceMapping;
  readonly riskAssessment: DataRiskAssessment;
}

export interface FieldClassification {
  readonly schema: string;
  readonly table: string;
  readonly column: string;
  readonly dataType: string;
  readonly classification: DataClassification;
  readonly sensitivity: SensitivityLevel;
  readonly confidence: Percentage;
  readonly patterns: readonly DetectedPattern[];
  readonly tags: readonly string[];
  readonly businessContext?: string;
  readonly complianceFlags: readonly ComplianceFlag[];
}

export interface TableClassification {
  readonly schema: string;
  readonly table: string;
  readonly overallClassification: DataClassification;
  readonly overallSensitivity: SensitivityLevel;
  readonly dataVolume: DataVolume;
  readonly businessCriticality: Criticality;
  readonly accessFrequency: 'Rare' | 'Occasional' | 'Regular' | 'High';
  readonly retentionCategory: string;
  readonly complianceScope: readonly ComplianceFramework[];
}

export interface DetectedPattern {
  readonly type: PatternType;
  readonly pattern: string; // e.g., regex or named rule
  readonly confidence: Percentage;
  readonly examples: readonly string[];
  readonly description: string;
}

export interface SensitivityMap {
  readonly bySensitivity: Record<SensitivityLevel, readonly FieldClassification[]>;
  readonly byClassification: Record<DataClassification, readonly FieldClassification[]>;
  readonly sensitiveTableCount: number;
  readonly highRiskFields: readonly FieldClassification[];
}

export interface ComplianceMapping {
  readonly byFramework: Record<ComplianceFramework, ComplianceScope>;
  readonly overallComplexity: 'Low' | 'Medium' | 'High' | 'Very High';
  readonly requiredActions: readonly ComplianceAction[];
}

export interface ComplianceScope {
  readonly applicableTables: readonly string[]; // consider using "schema.table" naming
  readonly applicableFields: readonly FieldClassification[];
  readonly requirements: readonly string[];
  readonly riskLevel: RiskLevel;
}

export interface ComplianceAction {
  readonly framework: ComplianceFramework;
  readonly action: string;
  readonly priority: 'High' | 'Medium' | 'Low';
  readonly timeline: string;
  readonly effort: 'Low' | 'Medium' | 'High';
}

export interface ComplianceFlag {
  readonly framework: ComplianceFramework;
  readonly requirement: string;
  readonly severity: 'Info' | 'Warning' | 'Error';
  readonly description: string;
}

/**
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Risk / Quality / AI Insights
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 */

export interface DataRiskAssessment {
  readonly overallRisk: RiskLevel;
  readonly riskFactors: readonly DataRiskFactor[];
  readonly mitigationPriorities: readonly string[];
  readonly businessImpact: BusinessImpact;
}

export interface DataRiskFactor {
  readonly factor: string;
  readonly level: RiskLevel;
  readonly description: string;
  readonly affectedTables: readonly string[];
  readonly mitigationStrategy: string;
}

export interface BusinessImpact {
  readonly reputational: RiskLevel;
  readonly financial: RiskLevel;
  readonly operational: RiskLevel;
  readonly regulatory: RiskLevel;
}

export interface AIInsights {
  readonly fieldRecommendations: readonly AIFieldRecommendation[];
  readonly schemaInsights: readonly SchemaInsight[];
  readonly qualityPredictions: readonly QualityPrediction[];
  readonly governanceRecommendations: readonly GovernanceRecommendation[];
  readonly anomalies: readonly DataAnomaly[];
}

export interface AIFieldRecommendation {
  readonly schema: string;
  readonly table: string;
  readonly column: string;
  readonly recommendation: string;
  readonly reasoning: string;
  readonly confidence: Percentage;
  readonly impact: 'Low' | 'Medium' | 'High';
  readonly category: 'Classification' | 'Quality' | 'Governance' | 'Security';
}

export interface SchemaInsight {
  readonly type: 'Pattern' | 'Relationship' | 'Optimization' | 'Risk';
  readonly insight: string;
  readonly confidence: Percentage;
  readonly tables: readonly string[];
  readonly recommendation: string;
  readonly priority: 'Low' | 'Medium' | 'High';
}

export interface QualityPrediction {
  readonly table: string;
  readonly column?: string;
  readonly qualityDimension: QualityDimension;
  readonly predictedScore: Percentage; // 0..100
  readonly confidence: Percentage;     // 0..100
  readonly factors: readonly string[];
  readonly recommendations: readonly string[];
}

export interface GovernanceRecommendation {
  readonly scope: 'Field' | 'Table' | 'Schema' | 'Database';
  readonly target: string; // e.g., "schema.table.column"
  readonly recommendation: string;
  readonly category: GovernanceCategory;
  readonly priority: 'High' | 'Medium' | 'Low';
  readonly effort: 'Low' | 'Medium' | 'High';
  readonly benefit: string;
}

export interface DataAnomaly {
  readonly type: 'Statistical' | 'Pattern' | 'Relationship' | 'Quality';
  readonly table: string;
  readonly column?: string;
  readonly description: string;
  readonly severity: 'Info' | 'Warning' | 'Error';
  readonly confidence: Percentage;
  readonly suggestion: string;
}

export interface QualityAssessment {
  readonly overallScore: Percentage;
  readonly tableScores: readonly TableQualityScore[];
  readonly dimensionScores: QualityDimensionScores;
  readonly issues: readonly QualityIssue[];
  readonly trends?: readonly QualityTrend[];
}

export interface TableQualityScore {
  readonly schema: string;
  readonly table: string;
  readonly overallScore: Percentage;
  readonly completeness: Percentage;
  readonly validity: Percentage;
  readonly consistency: Percentage;
  readonly accuracy: Percentage;
  readonly uniqueness: Percentage;
  readonly issueCount: number;
  readonly recommendation: string;
}

export interface QualityDimensionScores {
  readonly [dimension: string]: Percentage | number; // allow dynamic dimensions
}

export interface QualityIssue {
  readonly id?: UUID | string;
  readonly schema: string;
  readonly table: string;
  readonly column?: string;
  readonly dimension: QualityDimension;
  readonly severity: 'Low' | 'Medium' | 'High';
  readonly description: string;
  readonly recommendation: string;
}

export interface QualityTrend {
  readonly timestamp: ISODateTime | string;
  readonly dimension: QualityDimension;
  readonly score: Percentage;
}

export interface DiscoverySummary {
  readonly totalTablesAnalyzed: number;
  readonly totalColumnsAnalyzed: number;
  readonly classificationsApplied: number;
  readonly sensitiveDataFound: number;
  readonly complianceFlags: number;
  readonly qualityIssues: number;
  readonly aiRecommendations: number;
  readonly executionTime: number; // ms
  readonly dataVolumeProcessed: ByteSize | number;
}

export interface DiscoveryRecommendation {
  readonly id: UUID | string;
  readonly category: Timeline;
  readonly priority: Priority;
  readonly type: 'Security' | 'Compliance' | 'Quality' | 'Governance' | 'Performance';
  readonly title: string;
  readonly description: string;
  readonly affectedTables: readonly string[];
  readonly businessImpact: string;
  readonly effort: 'Low' | 'Medium' | 'High';
  readonly timeline: string;
  readonly implementation: readonly ImplementationStep[];
}

export interface ImplementationStep {
  readonly step: number;
  readonly description: string;
  readonly estimatedTime: string;
  readonly dependencies?: readonly string[];
  readonly tools?: readonly string[];
}

export interface ClassificationRule {
  readonly name: string;
  readonly pattern: string; // regex or named rule
  readonly classification: DataClassification;
  readonly sensitivity: SensitivityLevel;
  readonly scope: ClassificationScope;
  readonly priority: number;
}

export interface CustomPattern {
  readonly name: string;
  readonly regex: string; // serialized regex
  readonly classification: DataClassification;
  readonly description: string;
  readonly examples: readonly string[];
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\interfaces\index.ts
--------------------------------------------------------------------------------
// src/interfaces/index.ts

// Namespace-style re-exports (import as `Analysis.*` or `Discovery.*`)
export * as Analysis from './analysis.interface';
export * as Discovery from './discovery.interface';

// Flatten specific items so you can `import { DiscoveryStatus } from '@/interfaces'`
export { DiscoveryStatus, DiscoveryType } from './discovery.interface';

// NOTE: Removed this because we define JobStatus/JobPriority below.
// export { JobStatus, JobPriority } from './job.interface';

// Import only for typing
import type { Request as ExpressRequest } from 'express';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Utility & Brand Types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export type Brand<K, T extends string> = K & { readonly __brand: T };

export type UUID = Brand<string, 'uuid'>;
export type ISODateTime = Brand<string, 'iso-datetime'>;

export type Maybe<T> = T | null | undefined;
export type Result<T, E = ServiceError> =
  | Readonly<{ ok: true; value: T }>
  | Readonly<{ ok: false; error: E }>;
export type NonEmptyArray<T> = readonly [T, ...T[]];

export type DeepReadonly<T> =
  T extends (...args: any[]) => any ? T :
  T extends Array<infer U> ? ReadonlyArray<DeepReadonly<U>> :
  T extends object ? { readonly [K in keyof T]: DeepReadonly<T[K]> } :
  T;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Shared entities & pagination
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export interface BaseEntity {
  readonly id: UUID | string;
  readonly createdAt: Date;
  readonly updatedAt: Date;
  readonly createdBy?: UUID | string;
  readonly updatedBy?: UUID | string;
}

export type SortOrder = 'ASC' | 'DESC';

export interface PaginationParams {
  readonly page?: number;
  readonly limit?: number;
  readonly offset?: number; // (page-1)*limit (server-calculated preferred)
  readonly sortBy?: string;
  readonly sortOrder?: SortOrder;
}

export interface PaginationInfo {
  readonly page: number;
  readonly limit: number;
  readonly total: number;
  readonly totalPages: number;
  readonly hasNext: boolean;
  readonly hasPrev: boolean;
}

export interface PaginationResult<T> {
  readonly data: readonly T[];
  readonly pagination: PaginationInfo;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Filtering / query params
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export interface DateRange {
  readonly from: Date | ISODateTime | string;
  readonly to: Date | ISODateTime | string;
}

export interface FilterParams<F extends Record<string, unknown> = Record<string, unknown>> {
  readonly search?: string;
  readonly filters?: F;
  readonly dateRange?: DateRange;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * ApiRequest & Auth
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export enum UserRole {
  SUPER_ADMIN = 'super_admin',
  ADMIN = 'admin',
  DATA_STEWARD = 'data_steward',
  ANALYST = 'analyst',
  VIEWER = 'viewer'
}

export enum Permission {
  // Discovery
  DISCOVERY_READ = 'discovery:read',
  DISCOVERY_WRITE = 'discovery:write',
  DISCOVERY_DELETE = 'discovery:delete',
  // Analysis
  ANALYSIS_READ = 'analysis:read',
  ANALYSIS_WRITE = 'analysis:write',
  ANALYSIS_DELETE = 'analysis:delete',
  // Data source
  DATASOURCE_READ = 'datasource:read',
  DATASOURCE_WRITE = 'datasource:write',
  DATASOURCE_DELETE = 'datasource:delete',
  DATASOURCE_CONNECT = 'datasource:connect',
  // Admin
  USER_MANAGEMENT = 'user:management',
  SYSTEM_CONFIG = 'system:config',
  AUDIT_LOGS = 'audit:logs',
  // AI
  AI_QUERY = 'ai:query',
  AI_TRAINING = 'ai:training'
}

export interface NotificationSettings {
  readonly email: boolean;
  readonly inApp: boolean;
  readonly sms: boolean;
  readonly slack: boolean;
  readonly webhooks: boolean;
}

export interface UserPreferences {
  readonly timezone: string;
  readonly language: string;
  readonly dateFormat: string;
  readonly notifications: NotificationSettings;
}

export interface AuthenticatedUser {
  readonly id: UUID | string;
  readonly email: string;
  readonly role: UserRole;
  readonly permissions: readonly Permission[];
  readonly organizationId?: UUID | string;
  readonly preferences?: UserPreferences;
}

/** Express Request typed with body/params/query plus user */
export type ApiRequest<
  B = unknown,
  P extends Record<string, string> = Record<string, string>,
  Q extends Record<string, unknown> = Record<string, unknown>
> = ExpressRequest<P, any, B, Q> & { user?: AuthenticatedUser };

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Service response envelopes
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export interface ServiceError {
  readonly code: string; // e.g., 'VALIDATION_ERROR', 'DB_TIMEOUT'
  readonly message: string;
  readonly details?: unknown;
  readonly stack?: string; // do not expose in prod
}

export interface ResponseMeta {
  readonly timestamp: ISODateTime | string;
  readonly requestId?: string;
  readonly version: string;
  readonly processingTime?: number; // ms
}

export interface ServiceResponse<T = unknown> {
  readonly success: boolean;
  readonly data?: T;
  readonly message?: string;
  readonly error?: ServiceError;
  readonly meta?: ResponseMeta;
}

/** Generic pagination wrapper using ApiResponse pattern */
export type PaginatedResponse<T> =
  | Readonly<{
      success: true;
      data: { items: readonly T[]; pagination: PaginationInfo };
      message?: string;
      meta?: ResponseMeta;
    }>
  | Readonly<{
      success: false;
      error: ServiceError;
      meta?: ResponseMeta;
    }>;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Health & system info
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export type HealthState = 'healthy' | 'degraded' | 'unhealthy';

export interface HealthCheck {
  readonly name: string;
  readonly status: HealthState;
  readonly responseTime: number;
  readonly details?: unknown;
  readonly error?: string;
}

export interface SystemInfo {
  readonly memory: NodeJS.MemoryUsage;
  readonly cpu: {
    readonly loadAverage: readonly number[];
    readonly usage: number; // your implementation units
  };
  readonly process: {
    readonly pid: number;
    readonly platform: string;
    readonly nodeVersion: string;
  };
}

export interface HealthStatus {
  readonly status: HealthState;
  readonly service: string;
  readonly version: string;
  readonly timestamp: ISODateTime | string;
  readonly uptime: number;
  readonly checks: readonly HealthCheck[];
  readonly system: SystemInfo;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Data sources & connection
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export enum DataSourceType {
  POSTGRESQL = 'postgresql',
  MYSQL = 'mysql',
  SQL_SERVER = 'sql_server',
  ORACLE = 'oracle',
  SNOWFLAKE = 'snowflake',
  BIGQUERY = 'bigquery',
  REDSHIFT = 'redshift',
  MONGODB = 'mongodb',
  CASSANDRA = 'cassandra',
  ELASTICSEARCH = 'elasticsearch'
}

export enum ConnectionStatus {
  CONNECTED = 'connected',
  DISCONNECTED = 'disconnected',
  ERROR = 'error',
  TESTING = 'testing',
  PENDING = 'pending',
  TIMEOUT = 'timeout'
}

export interface ConnectionConfig {
  readonly host?: string;
  readonly port?: number;
  readonly database?: string;
  readonly username?: string;
  readonly password?: string; // encrypted at rest
  readonly ssl?: boolean;
  readonly connectionTimeout?: number;
  readonly queryTimeout?: number;
  readonly poolSize?: number;
  readonly additionalProperties?: Record<string, unknown>;
}

export interface DataSource {
  readonly id: UUID | string;
  readonly name: string;
  readonly type: DataSourceType;
  readonly connectionConfig: ConnectionConfig;
  readonly status: ConnectionStatus;
  readonly lastConnected?: Date;
  readonly tags?: readonly string[];
  readonly description?: string;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Logging / audit / notifications
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export type LogLevel = 'error' | 'warn' | 'info' | 'debug';

export interface LogEntry {
  readonly level: LogLevel;
  readonly message: string;
  readonly timestamp: Date;
  readonly service: string;
  readonly requestId?: string;
  readonly userId?: UUID | string;
  readonly metadata?: Record<string, unknown>;
  readonly stack?: string;
}

export interface AuditLog extends BaseEntity {
  readonly action: string;
  readonly resource: string;
  readonly resourceId?: string;
  readonly userId: UUID | string;
  readonly ipAddress?: string;
  readonly userAgent?: string;
  readonly details?: Record<string, unknown>;
  readonly result: 'success' | 'failure';
}

export enum NotificationType {
  DISCOVERY_COMPLETED = 'discovery_completed',
  ANALYSIS_COMPLETED = 'analysis_completed',
  QUALITY_ALERT = 'quality_alert',
  COMPLIANCE_VIOLATION = 'compliance_violation',
  SYSTEM_ALERT = 'system_alert',
  SECURITY_ALERT = 'security_alert',
  DATA_BREACH = 'data_breach',
  MAINTENANCE = 'maintenance'
}

export enum NotificationChannel {
  EMAIL = 'email',
  IN_APP = 'in_app',
  SMS = 'sms',
  SLACK = 'slack',
  TEAMS = 'teams',
  WEBHOOK = 'webhook',
  PUSH = 'push'
}

export enum NotificationStatus {
  PENDING = 'pending',
  SENT = 'sent',
  DELIVERED = 'delivered',
  READ = 'read',
  FAILED = 'failed',
  CANCELLED = 'cancelled'
}

export interface Notification extends BaseEntity {
  readonly type: NotificationType;
  readonly title: string;
  readonly message: string;
  readonly userId?: UUID | string;
  readonly organizationId?: UUID | string;
  readonly channel: NotificationChannel;
  readonly status: NotificationStatus;
  readonly scheduledAt?: Date;
  readonly sentAt?: Date;
  readonly metadata?: Record<string, unknown>;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Jobs (defined here; no external file needed)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export enum JobStatus {
  PENDING = 'pending',
  RUNNING = 'running',
  COMPLETED = 'completed',
  FAILED = 'failed',
  CANCELLED = 'cancelled',
  TIMEOUT = 'timeout'
}

export enum JobPriority {
  LOW = 'low',
  NORMAL = 'normal',
  HIGH = 'high',
  CRITICAL = 'critical'
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Events
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export enum EventType {
  USER_LOGIN = 'user_login',
  USER_LOGOUT = 'user_logout',
  DATA_ACCESS = 'data_access',
  DISCOVERY_START = 'discovery_start',
  DISCOVERY_COMPLETE = 'discovery_complete',
  ANALYSIS_START = 'analysis_start',
  ANALYSIS_COMPLETE = 'analysis_complete',
  COMPLIANCE_CHECK = 'compliance_check',
  QUALITY_CHECK = 'quality_check',
  SYSTEM_ERROR = 'system_error',
  SECURITY_EVENT = 'security_event'
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * JSON types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export type JSONValue = string | number | boolean | null | JSONObject | JSONArray;
export type JSONObject = { readonly [key: string]: JSONValue };
export type JSONArray = readonly JSONValue[];

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Forms (UI helpers)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export interface ValidationRule {
  readonly required?: boolean;
  readonly minLength?: number;
  readonly maxLength?: number;
  readonly pattern?: RegExp;
  readonly custom?: (value: unknown) => boolean | string;
}

export interface FormField {
  readonly name: string;
  readonly label: string;
  readonly type: 'text' | 'email' | 'password' | 'number' | 'select' | 'checkbox' | 'textarea';
  readonly placeholder?: string;
  readonly defaultValue?: unknown;
  readonly options?: ReadonlyArray<{ label: string; value: unknown }>;
  readonly validation?: ValidationRule;
  readonly disabled?: boolean;
  readonly required?: boolean;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Configuration
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export interface DatabaseConfig {
  readonly host: string;
  readonly port: number;
  readonly database: string;
  readonly username: string;
  readonly password: string;
  readonly ssl: boolean;
  readonly poolMin: number;
  readonly poolMax: number;
  readonly timeout: number;
}

export interface RedisConfig {
  readonly host: string;
  readonly port: number;
  readonly password?: string;
  readonly db: number;
  readonly ttl: number;
}

export interface AIConfig {
  readonly provider: 'openai' | 'azure' | 'anthropic';
  readonly apiKey: string;
  readonly model: string;
  readonly maxTokens: number;
  readonly temperature: number;
  readonly timeout: number;
}

export interface SecurityConfig {
  readonly jwtSecret: string;
  readonly jwtExpiry: string;
  readonly bcryptRounds: number;
  readonly rateLimitWindow: number;
  readonly rateLimitMax: number;
  readonly corsOrigins: readonly string[];
}

export interface MonitoringConfig {
  readonly enabled: boolean;
  readonly metricsPort: number;
  readonly healthCheckInterval: number;
  readonly logLevel: LogLevel;
  readonly logRetention: number;
}

export interface ServiceConfig {
  readonly name: string;
  readonly version: string;
  readonly environment: string;
  readonly port: number;
  readonly database: DatabaseConfig;
  readonly redis: RedisConfig;
  readonly ai: AIConfig;
  readonly security: SecurityConfig;
  readonly monitoring: MonitoringConfig;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Friendly named export aliases
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export type {
  AIConfig as TAIConfig,
  DatabaseConfig as TDatabaseConfig,
  FormField as TFormField,
  ISODateTime as TISODateTime,
  JSONArray as TJSONArray,
  JSONObject as TJSONObject,
  JSONValue as TJSONValue,
  MonitoringConfig as TMonitoringConfig,
  PaginatedResponse as TPaginatedResponse,
  RedisConfig as TRedisConfig,
  SecurityConfig as TSecurityConfig,
  ServiceConfig as TServiceConfig,
  UUID as TUUID
};

// Re-export ApiResponse type from utils (type-only to avoid runtime deps)
  export type { ApiResponse } from '../utils/responses';




--------------------------------------------------------------------------------
FILE: backend\ai-service\src\jobs\analysisJob.ts
--------------------------------------------------------------------------------
// src/jobs/analysisJob.ts
import { db } from '@/config/database';
import { redis } from '@/config/redis';
import { JobPriority, JobStatus } from '@/interfaces';
import { AnalysisService } from '@/services/AnalysisService';
import { APIError } from '@/utils/errors';
import { logger } from '@/utils/logger';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

type AnalysisKind = 'schema' | 'data_quality' | 'compliance' | 'performance';

export interface AnalysisJobData {
  analysisId: string;
  userId: string;
  dataSourceId: string;
  analysisType: AnalysisKind;
  options?: SchemaOptions | QualityOptions | ComplianceOptions | PerformanceOptions;
  priority: JobPriority;
  retryCount?: number;
  maxRetries?: number;
}

export interface AnalysisJobResult {
  analysisId: string;
  status: JobStatus;
  result?: SchemaResult | QualityResult | ComplianceResult | PerformanceResult;
  error?: string;
  duration: number;
  completedAt: Date;
}

/** Per-type options */
export interface SchemaOptions {
  schemas?: string[];
  includeSystem?: boolean;
}
export interface QualityOptions {
  sampleSize?: number; // rows per column/table
}
export interface ComplianceOptions {
  frameworks?: Array<'GDPR' | 'HIPAA' | 'PCI-DSS' | 'SOX' | 'CCPA' | 'ISO27001' | 'NIST' | 'SOC2'>;
}
export interface PerformanceOptions {
  timeWindowMinutes?: number;
}

/** Public result contracts (mutable arrays) */
export interface SchemaResult {
  name: string;
  tables: Array<{
    schema: string;
    name: string;
    columns: Array<{ name: string; type: string; nullable: boolean }>;
  }>;
}
export interface QualityResult {
  issues: Array<{ columnName: string; type: 'format' | 'range' | 'nulls'; count: number }>;
  scores: Record<string, number>;
}
export interface ComplianceResult {
  passed: boolean;
  violations: Array<{ id: string; framework: string; description: string }>;
}
export interface PerformanceResult {
  windowMinutes: number;
  queryPerformance: {
    avgQueryTime: number;
    slowQueries: string[];
    queryPatterns: string[];
    resourceUtilization: {
      cpuUsage: number;
      memoryUsage: number;
      ioWait: number;
      connectionCount: number;
    };
  };
  recommendations: Array<{
    type: string;
    description: string;
    impact: 'Low' | 'Medium' | 'High';
    effort: 'Low' | 'Medium' | 'High';
    implementation?: string;
  }>;
}

/** DataSource rows we actually use */
interface DataSource {
  id: string;
  name: string;
  type?: string;
  config?: unknown;
}

/* Shapes coming back from services (loose, then normalized) */
type SchemaAnalysisResult = {
  name?: unknown;
  tables?: ReadonlyArray<{
    schema?: unknown;
    name?: unknown;
    columns?: ReadonlyArray<{
      name?: unknown;
      type?: unknown;
      nullable?: unknown;
    }>;
  }>;
};

type AnalyzeDataSampleResponse = {
  qualityIssues?: ReadonlyArray<{ columnName?: unknown; type?: unknown; count?: unknown }>;
  analysis?: Record<string, unknown> | ReadonlyArray<Record<string, unknown>>;
};

type QualityCheckResult = {
  results?: ReadonlyArray<{
    ruleId?: unknown;
    ruleName?: unknown;
    status?: unknown;
  }>;
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Config
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

const DEFAULT_MAX_RETRIES = 3;
const BASE_RETRY_DELAY_MS = 5_000; // 5s
const MAX_RETRY_DELAY_MS = 60_000; // 60s cap
const REDIS_STATUS_TTL_SEC = 300; // 5m

/** Where we check for a cancel flag (optional) */
const CANCEL_KEY = (analysisId: string) => `analysis:cancel:${analysisId}`;
const STATUS_KEY = (analysisId: string) => `analysis:status:${analysisId}`;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Utility helpers
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

function assertNever(x: never): never {
  throw new APIError(`Unsupported analysis type: ${String(x)}`, 400);
}

const backoffWithJitter = (attempt: number) => {
  const exp = Math.min(BASE_RETRY_DELAY_MS * Math.pow(2, attempt - 1), MAX_RETRY_DELAY_MS);
  const jitter = Math.floor(Math.random() * Math.min(1000, Math.floor(exp * 0.1))); // up to 10% jitter, max 1s
  return exp + jitter;
};

/** Keep log payloads small to avoid huge log lines */
const safeLogSize = (value: unknown, max = 4_096) => {
  try {
    const s = JSON.stringify(value);
    return s.length <= max ? s : s.slice(0, max) + `â€¦ (truncated ${s.length - max} chars)`;
  } catch {
    return '[unserializable]';
  }
};

/** Heuristic transient error classifier for retries */
const isTransientError = (err: unknown): boolean => {
  const anyErr = err as { message?: string; code?: string } | undefined;
  const msg = (anyErr?.message ?? '').toLowerCase();
  const code = anyErr?.code ?? '';
  return (
    code === 'ETIMEDOUT' ||
    code === 'ECONNRESET' ||
    code === 'ECONNREFUSED' ||
    msg.includes('timeout') ||
    msg.includes('deadlock') ||
    msg.includes('connection') ||
    msg.includes('too many connections') ||
    msg.includes('rate limit') ||
    msg.includes('temporarily') ||
    msg.includes('try again')
  );
};

/** Build a parameterized UPDATE statement dynamically and safely */
const buildUpdateQuery = (
  table: string,
  whereClause: string,
  whereParams: unknown[],
  data: Record<string, unknown>
) => {
  const keys = Object.keys(data);
  const setFragments = keys.map((k, i) => `${k} = $${i + whereParams.length + 1}`);
  const values = [...whereParams, ...keys.map((k) => data[k])];
  const text = `UPDATE ${table} SET ${setFragments.join(', ')} ${whereClause}`;
  return { text, values };
};

/** Deep clone a readonly schema array to a mutable one */
function cloneTablesToMutable(
  tables: ReadonlyArray<{
    schema?: unknown;
    name?: unknown;
    columns?: ReadonlyArray<{ name?: unknown; type?: unknown; nullable?: unknown }>;
  }>
): SchemaResult['tables'] {
  return tables.map((t) => ({
    schema: typeof t?.schema === 'string' ? t.schema : 'public',
    name: typeof t?.name === 'string' ? t.name : 'unknown',
    columns: Array.isArray(t?.columns)
      ? t.columns.map((c) => ({
          name: typeof c?.name === 'string' ? c.name : 'unknown',
          type: typeof c?.type === 'string' ? c.type : 'text',
          nullable: typeof c?.nullable === 'boolean' ? c.nullable : true
        }))
      : []
  }));
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Job executor
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export class AnalysisJob {
  private readonly analysisService: AnalysisService;
  private readonly maxRetries = DEFAULT_MAX_RETRIES;

  constructor() {
    this.analysisService = new AnalysisService();
  }

  public async execute(data: AnalysisJobData): Promise<AnalysisJobResult> {
    const start = Date.now();
    const { analysisId, userId, dataSourceId, analysisType, options } = data;

    try {
      logger.info('Analysis job: start', {
        analysisId,
        userId,
        dataSourceId,
        analysisType,
        priority: data.priority,
        retryCount: data.retryCount ?? 0
      });

      await this.updateJobStatus(analysisId, JobStatus.RUNNING);
      await this.validateJobData(data);

      if (await this.isCancelled(analysisId)) {
        throw new APIError('Job cancelled', 499);
      }

      let result: SchemaResult | QualityResult | ComplianceResult | PerformanceResult;

      switch (analysisType) {
        case 'schema':
          result = await this.executeSchemaAnalysis(
            dataSourceId,
            (options as SchemaOptions | undefined) ?? undefined,
            userId
          );
          break;
        case 'data_quality':
          result = await this.executeQualityAnalysis(
            dataSourceId,
            (options as QualityOptions | undefined) ?? undefined,
            userId
          );
          break;
        case 'compliance':
          result = await this.executeComplianceAnalysis(
            dataSourceId,
            (options as ComplianceOptions | undefined) ?? undefined,
            userId
          );
          break;
        case 'performance':
          result = await this.executePerformanceAnalysis(
            dataSourceId,
            (options as PerformanceOptions | undefined) ?? undefined,
            userId
          );
          break;
        default:
          return assertNever(analysisType as never);
      }

      await this.updateJobStatus(analysisId, JobStatus.COMPLETED, result);
      await this.storeAnalysisResult(analysisId, result);
      await this.sendCompletionNotification(userId, analysisId, analysisType, true);

      const duration = Date.now() - start;
      logger.info('Analysis job: completed', {
        analysisId,
        durationMs: duration,
        resultPreview: safeLogSize(result)
      });

      return { analysisId, status: JobStatus.COMPLETED, result, duration, completedAt: new Date() };
    } catch (err) {
      const anyErr = err as { message?: string } | undefined;
      const duration = Date.now() - start;

      logger.error('Analysis job: failed', {
        analysisId,
        durationMs: duration,
        error: anyErr?.message,
        retryCount: data.retryCount ?? 0
      });

      if (await this.shouldRetryJob(data, err)) {
        return this.scheduleRetry(data);
      }

      await this.updateJobStatus(analysisId, JobStatus.FAILED, undefined, anyErr?.message);
      await this.sendCompletionNotification(userId, analysisId, analysisType, false, anyErr?.message);

      return { analysisId, status: JobStatus.FAILED, error: anyErr?.message ?? 'failed', duration, completedAt: new Date() };
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Per-type handlers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async executeSchemaAnalysis(
    dataSourceId: string,
    _options: SchemaOptions | undefined,
    userId: string
  ): Promise<SchemaResult> {
    try {
      const dataSource = await this.getDataSource(dataSourceId);
      if (!dataSource) throw new APIError('Data source not found', 404);

      // Baseline candidate
      const schemaCandidate = {
        name: String(dataSource.name ?? 'unknown'),
        tables: [
          {
            schema: 'public',
            name: 'users',
            columns: [
              { name: 'id', type: 'integer', nullable: false },
              { name: 'email', type: 'varchar', nullable: false },
              { name: 'first_name', type: 'varchar', nullable: true },
              { name: 'last_name', type: 'varchar', nullable: true },
              { name: 'created_at', type: 'timestamp', nullable: false }
            ]
          }
        ] as const
      } as const;

      // Call service; cast via unknown first (TS suggestion) then narrow with our loose type
      const analyzed = (await this.analysisService.analyzeSchema(
        { name: schemaCandidate.name, tables: schemaCandidate.tables },
        userId
      )) as unknown as SchemaAnalysisResult;

      const name =
        typeof analyzed?.name === 'string' ? analyzed.name : schemaCandidate.name;

      let tables: SchemaResult['tables'];
      if (Array.isArray(analyzed?.tables)) {
        tables = cloneTablesToMutable(analyzed.tables);
      } else {
        // clone readonly candidate â†’ mutable
        tables = cloneTablesToMutable(schemaCandidate.tables);
      }

      return { name, tables };
    } catch (err) {
      logger.error('Schema analysis failed', {
        dataSourceId,
        error: (err as { message?: string } | undefined)?.message
      });
      throw err;
    }
  }

  private async executeQualityAnalysis(
    _dataSourceId: string,
    options: QualityOptions | undefined,
    userId: string
  ): Promise<QualityResult> {
    try {
      const sampleSize = Math.max(1, Math.min(options?.sampleSize ?? 100, 10_000));

      const dataSamples = [
        { columnName: 'email', values: ['user1@example.com', 'user2@example.com', 'invalid-email', null] },
        { columnName: 'age', values: [25, 30, -5, 150, null, 28] }
      ].map((c) => ({ ...c, values: c.values.slice(0, sampleSize) }));

      const serviceRes = (await this.analysisService.analyzeDataSample(
        dataSamples,
        userId
      )) as unknown as AnalyzeDataSampleResponse;

      const issues: QualityResult['issues'] = Array.isArray(serviceRes?.qualityIssues)
        ? serviceRes.qualityIssues.map((q) => ({
            columnName: typeof q?.columnName === 'string' ? q.columnName : 'unknown',
            type:
              q?.type === 'format' || q?.type === 'range' || q?.type === 'nulls'
                ? q.type
                : ('format' as const),
            count: Number.isFinite(q?.count as number) ? Number(q!.count) : 0
          }))
        : [];

      const scores: Record<string, number> = {};
      const a = serviceRes?.analysis;

      if (a && !Array.isArray(a)) {
        for (const [k, v] of Object.entries(a)) {
          scores[k] = typeof v === 'number' && Number.isFinite(v) ? v : 0;
        }
      } else if (Array.isArray(a)) {
        a.forEach((row, idx) => {
          for (const [k, v] of Object.entries(row)) {
            const key = `${k}#${idx}`;
            scores[key] = typeof v === 'number' && Number.isFinite(v) ? v : 0;
          }
        });
      }

      return { issues, scores };
    } catch (err) {
      logger.error('Quality analysis failed', { error: (err as { message?: string } | undefined)?.message });
      throw err;
    }
  }

  private async executeComplianceAnalysis(
    dataSourceId: string,
    options: ComplianceOptions | undefined,
    userId: string
  ): Promise<ComplianceResult> {
    try {
      const frameworks = (options?.frameworks?.length ? options.frameworks : ['GDPR', 'HIPAA']) as readonly string[];

      const rules = [
        { id: 'gdpr_1', name: 'PII Data Encryption', framework: 'GDPR' },
        { id: 'hipaa_1', name: 'PHI Access Controls', framework: 'HIPAA' }
      ].filter((r) => frameworks.includes(r.framework));

      const serviceRes = (await this.analysisService.performQualityCheck(
        dataSourceId,
        rules,
        userId
      )) as unknown as QualityCheckResult;

      const violations: ComplianceResult['violations'] = Array.isArray(serviceRes?.results)
        ? serviceRes.results
            .filter((r) => r?.status === 'failed')
            .map((r) => ({
              id: typeof r?.ruleId === 'string' ? r.ruleId : 'unknown',
              framework: String(rules.find((x) => x.id === r?.ruleId)?.framework ?? 'Unknown'),
              description: typeof r?.ruleName === 'string' ? r.ruleName : 'Violation detected'
            }))
        : [];

      const passed = violations.length === 0;
      return { passed, violations };
    } catch (err) {
      logger.error('Compliance analysis failed', {
        dataSourceId,
        error: (err as { message?: string } | undefined)?.message
      });
      throw err;
    }
  }

  private async executePerformanceAnalysis(
    _dataSourceId: string,
    options: PerformanceOptions | undefined,
    _userId: string
  ): Promise<PerformanceResult> {
    try {
      const windowMins = Math.max(1, Math.min(options?.timeWindowMinutes ?? 15, 1440));

      const result: PerformanceResult = {
        windowMinutes: windowMins,
        queryPerformance: {
          avgQueryTime: 250,
          slowQueries: [],
          queryPatterns: [],
          resourceUtilization: { cpuUsage: 45, memoryUsage: 60, ioWait: 5, connectionCount: 15 }
        },
        recommendations: [
          {
            type: 'Index',
            description: 'Add index on frequently queried columns',
            impact: 'High',
            effort: 'Low',
            implementation: 'CREATE INDEX idx_user_email ON users(email);'
          }
        ]
      };

      return result;
    } catch (err) {
      logger.error('Performance analysis failed', { error: (err as { message?: string } | undefined)?.message });
      throw err;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Validation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async validateJobData(d: AnalysisJobData): Promise<void> {
    if (!d.analysisId) throw new APIError('Analysis ID is required', 400);
    if (!d.userId) throw new APIError('User ID is required', 400);
    if (!d.dataSourceId) throw new APIError('Data source ID is required', 400);

    const validTypes: AnalysisKind[] = ['schema', 'data_quality', 'compliance', 'performance'];
    if (!validTypes.includes(d.analysisType)) throw new APIError('Invalid analysis type', 400);

    const ds = await this.getDataSource(d.dataSourceId);
    if (!ds) throw new APIError('Data source not found', 404);
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Persistence â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async updateJobStatus(
    analysisId: string,
    status: JobStatus,
    result?: unknown,
    error?: string
  ): Promise<void> {
    try {
      const data: Record<string, unknown> = { status, updated_at: new Date() };
      if (result !== undefined) data.results = JSON.stringify(result);
      if (error !== undefined) data.error = error;
      if (status === JobStatus.COMPLETED || status === JobStatus.FAILED) data.completed_at = new Date();

      const { text, values } = buildUpdateQuery('analysis_jobs', 'WHERE analysis_id = $1', [analysisId], data);
      await db.query(text, values);

      await (redis as any).set?.(
        STATUS_KEY(analysisId),
        JSON.stringify({ status, updated_at: Date.now() }),
        { EX: REDIS_STATUS_TTL_SEC }
      );
    } catch (err) {
      logger.error('Job status update failed', {
        analysisId,
        status,
        error: (err as { message?: string } | undefined)?.message
      });
    }
  }

  private async storeAnalysisResult(analysisId: string, result: unknown): Promise<void> {
    try {
      const resultStr = JSON.stringify(result);
      await db.query(
        `UPDATE analysis_jobs 
           SET results = $2, result_size = $3, completed_at = NOW()
         WHERE analysis_id = $1`,
        [analysisId, resultStr, resultStr.length]
      );

      await db.query(
        `INSERT INTO analysis_results (analysis_id, result_data, created_at)
         VALUES ($1, $2, NOW())
         ON CONFLICT (analysis_id) DO UPDATE SET
           result_data = EXCLUDED.result_data,
           updated_at = NOW()`,
        [analysisId, resultStr]
      );
    } catch (err) {
      logger.error('Persisting result failed', {
        analysisId,
        error: (err as { message?: string } | undefined)?.message
      });
      throw err;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Retry & Cancel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async shouldRetryJob(data: AnalysisJobData, err: unknown): Promise<boolean> {
    const retryCount = data.retryCount ?? 0;
    const maxRetries = data.maxRetries ?? this.maxRetries;

    if (err instanceof APIError && err.statusCode >= 400 && err.statusCode < 500) return false;

    const anyErr = err as { statusCode?: number } | undefined;
    if (anyErr?.statusCode === 499 || (await this.isCancelled(data.analysisId))) return false;

    if (retryCount >= maxRetries) return false;

    return isTransientError(err);
  }

  private async scheduleRetry(data: AnalysisJobData): Promise<AnalysisJobResult> {
    const retryCount = (data.retryCount ?? 0) + 1;
    const delay = backoffWithJitter(retryCount);

    logger.info('Analysis job: scheduling retry', {
      analysisId: data.analysisId,
      retryCount,
      delayMs: delay
    });

    const retryData: AnalysisJobData = { ...data, retryCount };

    setTimeout(async () => {
      try {
        if (await this.isCancelled(retryData.analysisId)) {
          await this.updateJobStatus(retryData.analysisId, JobStatus.FAILED, undefined, 'Job cancelled');
          return;
        }
        await this.execute(retryData);
      } catch (err) {
        logger.error('Retry execution failed', {
          analysisId: retryData.analysisId,
          error: (err as { message?: string } | undefined)?.message
        });
      }
    }, delay);

    return {
      analysisId: data.analysisId,
      status: JobStatus.PENDING,
      duration: 0,
      completedAt: new Date()
    };
  }

  private async isCancelled(analysisId: string): Promise<boolean> {
    try {
      const val = await (redis as any).get?.(CANCEL_KEY(analysisId));
      return val === '1' || val === 'true';
    } catch {
      return false;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Notifications â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async sendCompletionNotification(
    userId: string,
    analysisId: string,
    analysisType: string,
    success: boolean,
    error?: string
  ): Promise<void> {
    try {
      const metadata = { analysisId, analysisType, success };
      const type = success ? 'analysis_completed' : 'analysis_failed';
      const title = success ? 'Analysis Completed' : 'Analysis Failed';
      const message = success
        ? `Your ${analysisType} analysis has completed successfully.`
        : `Your ${analysisType} analysis failed: ${error ?? 'unknown error'}`;

      await db.query(
        `INSERT INTO notifications (user_id, type, title, message, metadata, created_at)
         VALUES ($1, $2, $3, $4, $5, NOW())`,
        [userId, type, title, message, JSON.stringify(metadata)]
      );
    } catch (err) {
      logger.error('Notification emit failed', {
        userId,
        analysisId,
        error: (err as { message?: string } | undefined)?.message
      });
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Lookups & Cleanup â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async getDataSource(dataSourceId: string): Promise<DataSource | null> {
    try {
      const result = await db.query(
        'SELECT id, name, type, config FROM data_sources WHERE id = $1',
        [dataSourceId]
      );
      const row = result.rows[0];
      if (!row) return null;

      // exactOptionalPropertyTypes-safe construction
      const dsBase: { id: string; name: string } = {
        id: String(row.id),
        name: String(row.name)
      };
      const ds: DataSource = {
        ...dsBase,
        ...(row.type !== undefined && row.type !== null ? { type: String(row.type) } : {}),
        ...(row.config !== undefined ? { config: row.config } : {})
      };

      return ds;
    } catch (err) {
      logger.error('Data source lookup failed', {
        dataSourceId,
        error: (err as { message?: string } | undefined)?.message
      });
      throw err;
    }
  }

  public async cleanup(analysisId: string): Promise<void> {
    try {
      await (redis as any).del?.(STATUS_KEY(analysisId));
      logger.debug('Job cleanup completed', { analysisId });
    } catch (err) {
      logger.error('Job cleanup failed', {
        analysisId,
        error: (err as { message?: string } | undefined)?.message
      });
    }
  }
}

/* Singleton export */
export const analysisJob = new AnalysisJob();



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\jobs\discoveryJob.ts
--------------------------------------------------------------------------------
import { db } from '@/config/database';
import { redis } from '@/config/redis';
import { DiscoveryStatus, JobPriority, JobStatus } from '@/interfaces';
import { APIError } from '@/utils/errors';
import { logger } from '@/utils/logger';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

type DiscoveryKind = 'full' | 'incremental' | 'targeted';

export interface DiscoveryJobData {
  sessionId: string;
  userId: string;
  dataSourceId: string;
  discoveryType: DiscoveryKind;
  options?: DiscoveryOptions;
  priority: JobPriority;
  retryCount?: number;
  maxRetries?: number;
}

export interface DiscoveryJobResult {
  sessionId: string;
  status: JobStatus;
  result?: DiscoveryResults;
  error?: string;
  duration: number;
  completedAt: Date;
}

/** Tighten options you actually use */
export interface DiscoveryOptions {
  includeSampleData?: boolean;
  sampleSize?: number;
  aiAnalysis?: boolean; // default true
  schemas?: string[];
  tables?: string[];
}

/** Minimal result shape; swap with your domain interfaces if you prefer */
export interface DiscoveryResults {
  metadata: any;         // replace with Discovery.DataSourceMetadata if wired
  classification: any;   // replace with Discovery.ClassificationResults
  aiInsights?: any;      // replace with Discovery.AIInsights
  summary: any;          // replace with Discovery.DiscoverySummary
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Config & Keys
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

const DEFAULT_MAX_RETRIES = 3;
const BASE_RETRY_DELAY_MS = 5_000;
const MAX_RETRY_DELAY_MS = 60_000;
const REDIS_STATUS_TTL_SEC = 300;

const STATUS_KEY = (sessionId: string) => `discovery:status:${sessionId}`;
const CANCEL_KEY = (sessionId: string) => `discovery:cancel:${sessionId}`;

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Utils
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

const backoffWithJitter = (attempt: number) => {
  const exp = Math.min(BASE_RETRY_DELAY_MS * Math.pow(2, attempt - 1), MAX_RETRY_DELAY_MS);
  const jitter = Math.floor(Math.random() * Math.min(1000, exp * 0.1));
  return exp + jitter;
};

const safeLogSize = (val: unknown, max = 4096) => {
  try {
    const s = JSON.stringify(val);
    return s.length <= max ? s : s.slice(0, max) + `â€¦ (truncated ${s.length - max} chars)`;
  } catch {
    return '[unserializable]';
  }
};

const isTransientError = (err: unknown): boolean => {
  const msg = (err as any)?.message?.toLowerCase?.() || '';
  const code = (err as any)?.code || '';
  return (
    code === 'ETIMEDOUT' ||
    code === 'ECONNRESET' ||
    code === 'ECONNREFUSED' ||
    msg.includes('timeout') ||
    msg.includes('connection') ||
    msg.includes('deadlock') ||
    msg.includes('too many connections') ||
    msg.includes('rate limit') ||
    msg.includes('temporarily') ||
    msg.includes('try again')
  );
};

/** Parameterized UPDATE builder to avoid index mistakes */
const buildUpdateQuery = (table: string, whereClause: string, whereParams: unknown[], data: Record<string, unknown>) => {
  const keys = Object.keys(data);
  const setFragments = keys.map((k, i) => `${k} = $${i + whereParams.length + 1}`);
  const values = [...whereParams, ...keys.map(k => data[k])];
  const text = `UPDATE ${table} SET ${setFragments.join(', ')} ${whereClause}`;
  return { text, values };
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Job
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export class DiscoveryJob {
  private maxRetries = DEFAULT_MAX_RETRIES;

  constructor() {}

  public async execute(data: DiscoveryJobData): Promise<DiscoveryJobResult> {
    const started = Date.now();
    const { sessionId, userId, dataSourceId, discoveryType, options } = data;

    try {
      logger.info('Discovery job: start', {
        sessionId, userId, dataSourceId, discoveryType, priority: data.priority, retryCount: data.retryCount ?? 0,
      });

      await this.updateJobStatus(sessionId, DiscoveryStatus.INITIALIZING, 0);

      await this.validateJobData(data);

      // Respect cancellation early
      if (await this.isCancelled(sessionId)) {
        throw new APIError('Job cancelled', 499);
      }

      const result = await this.executeDiscoveryPhases(data);

      await this.updateJobStatus(sessionId, DiscoveryStatus.COMPLETED, 100, result);

      await this.sendCompletionNotification(userId, sessionId, discoveryType, true);

      const duration = Date.now() - started;
      logger.info('Discovery job: completed', {
        sessionId,
        durationMs: duration,
        resultPreview: safeLogSize({
          summary: result?.summary,
          metadata: { totalTables: result?.metadata?.totalTables, totalColumns: result?.metadata?.totalColumns },
        })
      });

      return {
        sessionId,
        status: JobStatus.COMPLETED,
        result,
        duration,
        completedAt: new Date(),
      };
    } catch (err: any) {
      const duration = Date.now() - started;
      logger.error('Discovery job: failed', {
        sessionId,
        durationMs: duration,
        error: err?.message,
        retryCount: data.retryCount ?? 0,
      });

      if (await this.shouldRetryJob(data, err)) {
        return this.scheduleRetry(data);
      }

      await this.updateJobStatus(sessionId, DiscoveryStatus.FAILED, 0, undefined, err?.message);
      await this.sendCompletionNotification(userId, sessionId, discoveryType, false, err?.message);

      return {
        sessionId,
        status: JobStatus.FAILED,
        error: err?.message ?? 'failed',
        duration,
        completedAt: new Date(),
      };
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Phases â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async executeDiscoveryPhases(data: DiscoveryJobData): Promise<DiscoveryResults> {
    const { sessionId, dataSourceId, options } = data;
    let progress = 0;

    try {
      // Phase 1: metadata
      await this.updateJobStatus(sessionId, DiscoveryStatus.SCANNING_METADATA, 10);
      const metadata = await this.scanMetadata(dataSourceId, options);
      progress = 20;
      await this.updateJobStatus(sessionId, DiscoveryStatus.SCANNING_METADATA, progress);

      // Phase 2: sampling
      if (options?.includeSampleData) {
        await this.updateJobStatus(sessionId, DiscoveryStatus.SAMPLING_DATA, progress);
        const sampleData = await this.sampleData(dataSourceId, metadata, options);
        (metadata as any).sampleData = sampleData;
        progress = 40;
        await this.updateJobStatus(sessionId, DiscoveryStatus.SAMPLING_DATA, progress);
      }

      // Phase 3: classification
      await this.updateJobStatus(sessionId, DiscoveryStatus.CLASSIFYING, progress);
      const classification = await this.classifyData(metadata, options);
      progress = 60;
      await this.updateJobStatus(sessionId, DiscoveryStatus.CLASSIFYING, progress);

      // Phase 4: AI analysis (default on)
      let aiInsights: unknown | undefined;
      if (options?.aiAnalysis !== false) {
        await this.updateJobStatus(sessionId, DiscoveryStatus.AI_ANALYSIS, progress);
        aiInsights = await this.performAIAnalysis(metadata, classification);
        progress = 80;
        await this.updateJobStatus(sessionId, DiscoveryStatus.AI_ANALYSIS, progress);
      }

      const summary = this.generateSummary(metadata, classification, aiInsights);

      return { metadata, classification, aiInsights, summary };
    } catch (err) {
      logger.error('Discovery phases: error', { sessionId, progress, error: (err as any)?.message });
      throw err;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Implementations (mocked) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async scanMetadata(dataSourceId: string, _options?: DiscoveryOptions): Promise<any> {
    void _options;
    const dataSource = await this.getDataSource(dataSourceId);
    if (!dataSource) throw new APIError('Data source not found', 404);

    // Replace this mock with real extractor when ready
    const metadata = {
      dataSourceId,
      connectionInfo: {
        type: (dataSource as any).type,
        host: (dataSource as any).connectionConfig?.host,
        database: (dataSource as any).connectionConfig?.database,
        version: '14.5',
      },
      schemas: [
        {
          name: 'public',
          tables: [
            {
              schema: 'public',
              name: 'users',
              type: 'table',
              columns: [
                { name: 'id', dataType: 'integer', nullable: false, isPrimaryKey: true },
                { name: 'email', dataType: 'varchar', nullable: false },
                { name: 'first_name', dataType: 'varchar', nullable: true },
                { name: 'last_name', dataType: 'varchar', nullable: true },
                { name: 'phone', dataType: 'varchar', nullable: true },
                { name: 'date_of_birth', dataType: 'date', nullable: true },
                { name: 'created_at', dataType: 'timestamp', nullable: false },
              ],
              primaryKeys: ['id'],
              foreignKeys: [],
              indexes: [
                { name: 'users_pkey', columns: ['id'], unique: true },
                { name: 'users_email_idx', columns: ['email'], unique: true },
              ],
              rowCount: 15_000,
              sizeBytes: 2_048_000,
            },
            {
              schema: 'public',
              name: 'orders',
              type: 'table',
              columns: [
                { name: 'id', dataType: 'integer', nullable: false, isPrimaryKey: true },
                { name: 'user_id', dataType: 'integer', nullable: false, isForeignKey: true },
                { name: 'total_amount', dataType: 'decimal', nullable: false },
                { name: 'status', dataType: 'varchar', nullable: false },
                { name: 'created_at', dataType: 'timestamp', nullable: false },
              ],
              primaryKeys: ['id'],
              foreignKeys: [
                { name: 'fk_orders_user', columns: ['user_id'], referencedTable: 'users', referencedColumns: ['id'] },
              ],
              indexes: [
                { name: 'orders_pkey', columns: ['id'], unique: true },
                { name: 'orders_user_id_idx', columns: ['user_id'], unique: false },
              ],
              rowCount: 45_000,
              sizeBytes: 3_072_000,
            },
          ],
          views: [],
          procedures: [],
        },
      ],
      totalTables: 2,
      totalColumns: 12,
      totalRows: 60_000,
      dataSize: 5_120_000,
      lastUpdated: new Date(),
    };

    return metadata;
  }

  private async sampleData(_dataSourceId: string, _metadata: any, options?: DiscoveryOptions): Promise<any> {
    void _metadata;
    const size = Math.max(1, Math.min(options?.sampleSize ?? 100, 10_000));
    void size; // for now
    return {
      'public.users': [
        { id: 1, email: 'john.doe@example.com', first_name: 'John', last_name: 'Doe', phone: '+1-555-0123', date_of_birth: '1990-05-15' },
        { id: 2, email: 'jane.smith@example.com', first_name: 'Jane', last_name: 'Smith', phone: '+1-555-0124', date_of_birth: '1985-12-08' },
        { id: 3, email: 'invalid-email', first_name: 'Bob', last_name: 'Johnson', phone: '555-0125', date_of_birth: '1992-03-22' },
      ],
      'public.orders': [
        { id: 1, user_id: 1, total_amount: 99.99, status: 'completed', created_at: '2024-01-15T10:30:00Z' },
        { id: 2, user_id: 2, total_amount: 149.50, status: 'pending', created_at: '2024-01-16T14:20:00Z' },
        { id: 3, user_id: 1, total_amount: -10.00, status: 'refunded', created_at: '2024-01-17T09:15:00Z' },
      ],
    };
  }

  private async classifyData(metadata: any, _options?: DiscoveryOptions): Promise<any> {
    void _options;
    const fieldClassifications: any[] = [];
    const tableClassifications: any[] = [];

    const piiPatterns = ['email', 'phone', 'ssn', 'social_security', 'first_name', 'last_name', 'full_name'];
    const phiPatterns = ['medical', 'health', 'diagnosis', 'patient', 'dob', 'date_of_birth'];
    const finPatterns = ['credit_card', 'bank_account', 'salary', 'income', 'total_amount', 'price'];

    for (const schema of metadata.schemas) {
      for (const table of schema.tables) {
        let hasPII = false; let hasPHI = false; let hasFIN = false;

        for (const col of table.columns) {
          const name = String(col.name).toLowerCase();
          let classification = 'General';
          let sensitivity = 'Low';
          let confidence = 0.7;
          const patterns: string[] = [];
          const tags: string[] = [];
          const complianceFlags: any[] = [];

          if (piiPatterns.some(p => name.includes(p))) {
            classification = 'PII';
            sensitivity = name.includes('ssn') ? 'High' : 'Medium';
            confidence = 0.9;
            patterns.push('PII identifier pattern');
            tags.push('personal_data');
            complianceFlags.push({ framework: 'GDPR', requirement: 'Data subject rights', severity: 'Warning' });
            hasPII = true;
          } else if (phiPatterns.some(p => name.includes(p))) {
            classification = 'PHI';
            sensitivity = 'High';
            confidence = 0.9;
            patterns.push('PHI identifier pattern');
            tags.push('health_data');
            complianceFlags.push({ framework: 'HIPAA', requirement: 'PHI protection', severity: 'Error' });
            hasPHI = true;
          } else if (finPatterns.some(p => name.includes(p))) {
            classification = 'Financial';
            sensitivity = 'Medium';
            confidence = 0.8;
            patterns.push('Financial data pattern');
            tags.push('financial_data');
            complianceFlags.push({ framework: 'PCI-DSS', requirement: 'Payment data security', severity: 'Warning' });
            hasFIN = true;
          }

          fieldClassifications.push({
            schema: schema.name,
            table: table.name,
            column: col.name,
            dataType: col.dataType,
            classification,
            sensitivity,
            confidence,
            patterns,
            tags,
            complianceFlags,
          });
        }

        let overallClassification = 'General';
        let overallSensitivity = 'Low';
        if (hasPHI) { overallClassification = 'PHI'; overallSensitivity = 'High'; }
        else if (hasPII) { overallClassification = 'PII'; overallSensitivity = 'Medium'; }
        else if (hasFIN) { overallClassification = 'Financial'; overallSensitivity = 'Medium'; }

        tableClassifications.push({
          schema: schema.name,
          table: table.name,
          overallClassification,
          overallSensitivity,
          dataVolume: table.rowCount > 100_000 ? 'Large' : table.rowCount > 10_000 ? 'Medium' : 'Small',
          businessCriticality: 'Medium',
          accessFrequency: 'Regular',
          retentionCategory: 'Standard',
          complianceScope: this.getComplianceScope(overallClassification),
        });
      }
    }

    return {
      fieldClassifications,
      tableClassifications,
      sensitivityMap: this.createSensitivityMap(fieldClassifications),
      complianceMapping: this.createComplianceMapping(fieldClassifications),
      riskAssessment: this.assessRisk(fieldClassifications, tableClassifications),
    };
  }

  private async performAIAnalysis(metadata: any, classification: any): Promise<any> {
    // Stubbed AI; integrate your AIService usage once ready
    const aiInsights = {
      fieldRecommendations: [] as any[],
      schemaInsights: [] as any[],
      qualityPredictions: [] as any[],
      governanceRecommendations: [] as any[],
      anomalies: [] as any[],
    };

    for (const f of classification.fieldClassifications) {
      if (f.sensitivity === 'High' || f.classification !== 'General') {
        aiInsights.fieldRecommendations.push({
          schema: f.schema,
          table: f.table,
          column: f.column,
          recommendation: `Encrypt and restrict access to ${f.classification} field`,
          reasoning: `Contains ${f.classification} with ${f.sensitivity} sensitivity`,
          confidence: 0.9,
          impact: f.sensitivity === 'High' ? 'High' : 'Medium',
          category: 'Security',
        });
      }
    }

    aiInsights.schemaInsights.push({
      type: 'Pattern',
      insight: 'Detected user-order relationship; consider normalization/indexing',
      confidence: 0.8,
      tables: ['users', 'orders'],
      recommendation: 'Add FKs and composite indexes for key joins',
      priority: 'Medium',
    });

    aiInsights.qualityPredictions.push({
      table: 'users',
      column: 'email',
      qualityDimension: 'Validity',
      predictedScore: 85,
      confidence: 0.9,
      factors: ['Invalid format occurrences'],
      recommendations: ['Add email validation', 'Clean existing invalids'],
    });

    aiInsights.governanceRecommendations.push({
      scope: 'Table',
      target: 'users',
      recommendation: 'Adopt data retention for PII',
      category: 'Retention',
      priority: 'High',
      effort: 'Medium',
      benefit: 'Compliance & cost control',
    });

    aiInsights.anomalies.push({
      type: 'Quality',
      table: 'orders',
      column: 'total_amount',
      description: 'Negative amounts detected',
      severity: 'Warning',
      confidence: 0.95,
      suggestion: 'Review refund logic; add validation',
    });

    return aiInsights;
  }

  private generateSummary(metadata: any, classification: any, aiInsights?: any): any {
    const summary = {
      totalTablesAnalyzed: metadata.totalTables,
      totalColumnsAnalyzed: metadata.totalColumns,
      classificationsApplied: classification.fieldClassifications.length,
      sensitiveDataFound: classification.fieldClassifications.filter((f: any) => f.sensitivity !== 'Low').length,
      complianceFlags: classification.fieldClassifications.reduce((sum: number, f: any) => sum + f.complianceFlags.length, 0),
      qualityIssues: 0,
      aiRecommendations: 0,
      executionTime: 0,
      dataVolumeProcessed: metadata.totalRows || 0,
    };

    if (aiInsights) {
      summary.qualityIssues = aiInsights.anomalies.length;
      summary.aiRecommendations = aiInsights.fieldRecommendations.length + aiInsights.governanceRecommendations.length;
    }
    return summary;
  }

  private createSensitivityMap(fieldClassifications: any[]) {
    const bySensitivity: Record<string, any[]> = {
      Low: fieldClassifications.filter(f => f.sensitivity === 'Low'),
      Medium: fieldClassifications.filter(f => f.sensitivity === 'Medium'),
      High: fieldClassifications.filter(f => f.sensitivity === 'High'),
      Critical: fieldClassifications.filter(f => f.sensitivity === 'Critical'),
    };

    const byClassification: Record<string, any[]> = {
      General: fieldClassifications.filter(f => f.classification === 'General'),
      PII: fieldClassifications.filter(f => f.classification === 'PII'),
      PHI: fieldClassifications.filter(f => f.classification === 'PHI'),
      Financial: fieldClassifications.filter(f => f.classification === 'Financial'),
    };

    return {
      bySensitivity,
      byClassification,
      sensitiveTableCount: new Set(
        fieldClassifications.filter(f => f.sensitivity !== 'Low').map(f => `${f.schema}.${f.table}`)
      ).size,
      highRiskFields: fieldClassifications.filter(f => f.sensitivity === 'High' || f.sensitivity === 'Critical'),
    };
  }

  private createComplianceMapping(fieldClassifications: any[]) {
    const frameworkMap: Record<string, { applicableTables: Set<string>; applicableFields: any[]; requirements: Set<string>; riskLevel: 'Low' | 'Medium' | 'High' }> = {};

    fieldClassifications.forEach(field => {
      field.complianceFlags.forEach((flag: any) => {
        if (!frameworkMap[flag.framework]) {
          frameworkMap[flag.framework] = {
            applicableTables: new Set<string>(),
            applicableFields: [],
            requirements: new Set<string>(),
            riskLevel: 'Low',
          };
        }
        const f = frameworkMap[flag.framework];
        f.applicableTables.add(`${field.schema}.${field.table}`);
        f.applicableFields.push(field);
        f.requirements.add(flag.requirement);
        if (flag.severity === 'Error') f.riskLevel = 'High';
        else if (flag.severity === 'Warning' && f.riskLevel === 'Low') f.riskLevel = 'Medium';
      });
    });

    // Convert Sets
    const byFramework: Record<string, any> = {};
    for (const [fw, data] of Object.entries(frameworkMap)) {
      byFramework[fw] = {
        applicableTables: Array.from(data.applicableTables),
        applicableFields: data.applicableFields,
        requirements: Array.from(data.requirements),
        riskLevel: data.riskLevel,
      };
    }

    return {
      byFramework,
      overallComplexity: Object.keys(byFramework).length > 2 ? 'High' : Object.keys(byFramework).length > 1 ? 'Medium' : 'Low',
      requiredActions: this.generateComplianceActions(byFramework),
    };
  }

  private generateComplianceActions(byFramework: Record<string, any>) {
    const actions: any[] = [];
    for (const [framework, data] of Object.entries(byFramework)) {
      if (data.riskLevel === 'High') {
        actions.push({ framework, action: `Immediate ${framework} compliance review`, priority: 'High', timeline: '30 days', effort: 'High' });
      } else if (data.riskLevel === 'Medium') {
        actions.push({ framework, action: `${framework} compliance assessment`, priority: 'Medium', timeline: '90 days', effort: 'Medium' });
      }
    }
    return actions;
  }

  private assessRisk(fieldClassifications: any[], tableClassifications: any[]) {
    const highRiskFields = fieldClassifications.filter(f => f.sensitivity === 'High' || f.sensitivity === 'Critical');
    const sensitiveTableCount = tableClassifications.filter(t => t.overallSensitivity !== 'Low').length;

    let overallRisk: 'Low' | 'Medium' | 'High' = 'Low';
    if (highRiskFields.length > 10 || sensitiveTableCount > 5) overallRisk = 'High';
    else if (highRiskFields.length > 5 || sensitiveTableCount > 2) overallRisk = 'Medium';

    return {
      overallRisk,
      riskFactors: [
        {
          factor: 'High sensitivity data fields',
          level: highRiskFields.length > 10 ? 'High' : highRiskFields.length > 5 ? 'Medium' : 'Low',
          description: `${highRiskFields.length} fields contain highly sensitive data`,
          affectedTables: [...new Set(highRiskFields.map(f => `${f.schema}.${f.table}`))],
          mitigationStrategy: 'Implement encryption and access controls',
        },
      ],
      mitigationPriorities: [
        'Implement data classification policies',
        'Set up access controls for sensitive data',
        'Regular compliance audits',
      ],
      businessImpact: {
        reputational: overallRisk === 'High' ? 'High' : 'Medium',
        financial: overallRisk === 'High' ? 'High' : 'Low',
        operational: 'Medium',
        regulatory: overallRisk === 'High' ? 'Critical' : 'Medium',
      },
    };
  }

  private getComplianceScope(classification: string): string[] {
    switch (classification) {
      case 'PII': return ['GDPR', 'CCPA'];
      case 'PHI': return ['HIPAA'];
      case 'Financial': return ['PCI-DSS', 'SOX'];
      default: return [];
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Validation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async validateJobData(d: DiscoveryJobData): Promise<void> {
    if (!d.sessionId) throw new APIError('Session ID is required', 400);
    if (!d.userId) throw new APIError('User ID is required', 400);
    if (!d.dataSourceId) throw new APIError('Data source ID is required', 400);

    const valid: DiscoveryKind[] = ['full', 'incremental', 'targeted'];
    if (!valid.includes(d.discoveryType)) throw new APIError('Invalid discovery type', 400);

    // basic existence
    const ds = await this.getDataSource(d.dataSourceId);
    if (!ds) throw new APIError('Data source not found', 404);

    // Targeted must include at least one target
    if (d.discoveryType === 'targeted') {
      const hasTargets = Boolean(d.options?.schemas?.length || d.options?.tables?.length);
      if (!hasTargets) throw new APIError('Targeted discovery requires schemas or tables', 400);
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Persistence & Status â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async updateJobStatus(
    sessionId: string,
    status: DiscoveryStatus,
    progress?: number,
    result?: unknown,
    error?: string
  ): Promise<void> {
    try {
      const patch: Record<string, unknown> = {
        status,
        updated_at: new Date(),
      };
      if (progress !== undefined) patch.progress = progress;
      if (result !== undefined) patch.results = JSON.stringify(result);
      if (error !== undefined) patch.error = error;
      if (status === DiscoveryStatus.COMPLETED || status === DiscoveryStatus.FAILED || status === DiscoveryStatus.CANCELLED) {
        patch.completed_at = new Date();
      }

      const { text, values } = buildUpdateQuery('discovery_sessions', 'WHERE session_id = $1', [sessionId], patch);
      await db.query(text, values);

      await (redis as any).set?.(
        STATUS_KEY(sessionId),
        JSON.stringify({ status, progress: progress ?? null, updated_at: Date.now() }),
        { EX: REDIS_STATUS_TTL_SEC }
      );
    } catch (err) {
      logger.error('Discovery status update failed', { sessionId, status, error: (err as any)?.message });
      // non-fatal
    }
  }

  private async getDataSource(dataSourceId: string): Promise<any> {
    try {
      const result = await db.query('SELECT * FROM data_sources WHERE id = $1', [dataSourceId]);
      return result.rows[0] ?? null;
    } catch (err) {
      logger.error('Discovery data source lookup failed', { dataSourceId, error: (err as any)?.message });
      throw err;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Retry & Cancel â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async shouldRetryJob(d: DiscoveryJobData, err: unknown): Promise<boolean> {
    const retryCount = d.retryCount ?? 0;
    const maxRetries = d.maxRetries ?? this.maxRetries;

    if (err instanceof APIError && err.statusCode >= 400 && err.statusCode < 500) return false;
    if ((err as any)?.statusCode === 499) return false; // cancelled
    if (await this.isCancelled(d.sessionId)) return false;
    if (retryCount >= maxRetries) return false;

    return isTransientError(err);
  }

  private async scheduleRetry(d: DiscoveryJobData): Promise<DiscoveryJobResult> {
    const retryCount = (d.retryCount ?? 0) + 1;
    const delay = backoffWithJitter(retryCount);

    logger.info('Discovery job: scheduling retry', { sessionId: d.sessionId, retryCount, delayMs: delay });

    const retryData: DiscoveryJobData = { ...d, retryCount };

    setTimeout(async () => {
      try {
        if (await this.isCancelled(retryData.sessionId)) {
          await this.updateJobStatus(retryData.sessionId, DiscoveryStatus.FAILED, 0, undefined, 'Job cancelled');
          return;
        }
        await this.execute(retryData);
      } catch (err) {
        logger.error('Discovery retry execution failed', { sessionId: retryData.sessionId, error: (err as any)?.message });
      }
    }, delay);

    return {
      sessionId: d.sessionId,
      status: JobStatus.PENDING,
      duration: 0,
      completedAt: new Date(),
    };
  }

  private async isCancelled(sessionId: string): Promise<boolean> {
    try {
      const val = await (redis as any).get?.(CANCEL_KEY(sessionId));
      return val === '1' || val === 'true';
    } catch {
      return false;
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Notifications â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async sendCompletionNotification(
    userId: string,
    sessionId: string,
    discoveryType: string,
    success: boolean,
    error?: string
  ): Promise<void> {
    try {
      const type = success ? 'discovery_completed' : 'discovery_failed';
      const title = success ? 'Discovery Completed' : 'Discovery Failed';
      const message = success
        ? `Your ${discoveryType} discovery completed successfully.`
        : `Your ${discoveryType} discovery failed: ${error ?? 'unknown error'}`;
      const metadata = { sessionId, discoveryType, success };

      await db.query(
        `INSERT INTO notifications (user_id, type, title, message, metadata, created_at)
         VALUES ($1, $2, $3, $4, $5, NOW())`,
        [userId, type, title, message, JSON.stringify(metadata)]
      );
      // push via websocket/event bus as needed
    } catch (err) {
      logger.error('Discovery notification failed', { userId, sessionId, error: (err as any)?.message });
      // swallow
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ Lifecycle helpers â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  public async cleanup(sessionId: string): Promise<void> {
    try {
      await (redis as any).del?.(STATUS_KEY(sessionId));
      logger.debug('Discovery cleanup completed', { sessionId });
    } catch (err) {
      logger.error('Discovery cleanup failed', { sessionId, error: (err as any)?.message });
    }
  }

  public async cancel(sessionId: string): Promise<void> {
    try {
      // A controller can also set CANCEL_KEY(sessionId) in Redis, if you want
      await this.updateJobStatus(sessionId, DiscoveryStatus.CANCELLED, 0);
      await this.cleanup(sessionId);
      logger.info('Discovery job cancelled', { sessionId });
    } catch (err) {
      logger.error('Discovery cancel failed', { sessionId, error: (err as any)?.message });
      throw err;
    }
  }

  public async getProgress(sessionId: string): Promise<any> {
    try {
      const cached = await (redis as any).get?.(STATUS_KEY(sessionId));
      if (cached) {
        try { return JSON.parse(cached); } catch { /* fall through */ }
      }

      const result = await db.query(
        'SELECT status, progress, updated_at FROM discovery_sessions WHERE session_id = $1',
        [sessionId]
      );
      if (result.rows.length === 0) throw new APIError('Discovery session not found', 404);

      return {
        status: result.rows[0].status,
        progress: result.rows[0].progress,
        updated_at: result.rows[0].updated_at,
      };
    } catch (err) {
      logger.error('Discovery progress fetch failed', { sessionId, error: (err as any)?.message });
      throw err;
    }
  }
}

/** Singleton */
export const discoveryJob = new DiscoveryJob();



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\middleware\auth.ts
--------------------------------------------------------------------------------
// src/middleware/auth.ts
import { APIError } from '@/utils/errors';
import { logger } from '@/utils/logger';
import { NextFunction, Request, Response } from 'express';
import jwt, { JwtPayload, VerifyOptions } from 'jsonwebtoken';

/** Extend Express Request with an authenticated user */
export interface AuthenticatedRequest extends Request {
  user?: {
    id: string;
    email: string;
    role: string;
    permissions?: string[];
    sub?: string;
    iat?: number;
    exp?: number;
  };
}

/** The JWT claims your system issues/accepts */
interface AppJwtPayload extends JwtPayload {
  id: string;
  email: string;
  role: string;
  permissions?: string[];
}

/* ---------------------------- Helpers & Config ---------------------------- */

const readEnv = () => {
  const {
    JWT_SECRET,
    JWT_ISSUER,
    JWT_AUDIENCE,
    JWT_ALLOWED_ALGS,
    JWT_ALG = 'HS256',
    JWT_CLOCK_TOLERANCE_SEC = '60',
    AUTH_COOKIE = 'auth_token',
  } = process.env;

  if (!JWT_SECRET) {
    // fail closed; this is a deployment/config error
    throw new Error('JWT_SECRET is not configured');
  }

  const allowedAlgs = (JWT_ALLOWED_ALGS?.split(',').map(s => s.trim()).filter(Boolean)) || [JWT_ALG];

  const verifyOptions: VerifyOptions = {
    algorithms: allowedAlgs as jwt.Algorithm[],
    issuer: JWT_ISSUER || undefined,
    audience: JWT_AUDIENCE || undefined,
    clockTolerance: Number.isFinite(+JWT_CLOCK_TOLERANCE_SEC) ? Number(JWT_CLOCK_TOLERANCE_SEC) : 60,
  };

  return { JWT_SECRET, verifyOptions, AUTH_COOKIE };
};

/** Safely extract a token from Authorization header, x-access-token, or a cookie */
const extractToken = (req: Request, cookieName: string): string | null => {
  const hdr = req.headers.authorization || '';
  if (hdr) {
    const [scheme, token] = hdr.split(' ');
    if (scheme?.toLowerCase() === 'bearer' && token) return token.trim();
  }
  const alt = (req.headers['x-access-token'] as string) || '';
  if (alt) return alt.trim();

  // minimal cookie parse (avoid extra deps)
  const cookieHeader = req.headers.cookie || '';
  if (cookieHeader && cookieName) {
    const parts = cookieHeader.split(';').map(c => c.trim());
    for (const p of parts) {
      const [k, v] = p.split('=');
      if (k === cookieName && v) return decodeURIComponent(v);
    }
  }
  return null;
};

/** Central token verification (HMAC secret) */
const verifyToken = (token: string): AppJwtPayload => {
  const { JWT_SECRET, verifyOptions } = readEnv();
  const decoded = jwt.verify(token, JWT_SECRET, verifyOptions);
  if (typeof decoded === 'string') {
    throw new APIError('Invalid token payload', 401);
  }
  const payload = decoded as AppJwtPayload;
  if (!payload.id || !payload.email || !payload.role) {
    throw new APIError('Token missing required claims', 401);
  }
  return payload;
};

/** include optional field only if defined (for exactOptionalPropertyTypes) */
type Defined<T> = Exclude<T, undefined>;
const includeIfDefined = <K extends string, V>(key: K, value: V | undefined) =>
  (value !== undefined ? { [key]: value } as Record<K, Defined<V>> : {});

/** normalize string or string[] input */
const toArray = <T>(v: T | T[]) => (Array.isArray(v) ? v : [v]);

/* -------------------------------- Middlewares ----------------------------- */

/** Strict authentication. Requires a valid token and attaches user to req. */
export const authenticateToken = async (
  req: AuthenticatedRequest,
  _res: Response,
  next: NextFunction
): Promise<void> => {
  try {
    const { AUTH_COOKIE } = readEnv();
    const token = extractToken(req, AUTH_COOKIE);
    if (!token) throw new APIError('Access token required', 401);

    const payload = verifyToken(token);

    // only include optional fields if they exist
    req.user = {
      id: payload.id,
      email: payload.email,
      role: payload.role,
      permissions: payload.permissions ?? [],
      ...includeIfDefined('sub', payload.sub),
      ...includeIfDefined('iat', payload.iat),
      ...includeIfDefined('exp', payload.exp),
    };

    logger.debug('Auth: user authenticated', { userId: payload.id, role: payload.role });
    next();
  } catch (err: any) {
    if (err instanceof APIError) return next(err);
    if (err instanceof jwt.TokenExpiredError) return next(new APIError('Token expired', 401));
    if (err instanceof jwt.NotBeforeError) return next(new APIError('Token not active yet', 401));
    if (err instanceof jwt.JsonWebTokenError) return next(new APIError('Invalid token', 401));
    logger.warn('Auth: unexpected verification error', { message: err?.message });
    next(new APIError('Authentication failed', 401));
  }
};

/** Optional auth. If a valid token is present, attaches user; never blocks. */
export const optionalAuth = async (
  req: AuthenticatedRequest,
  _res: Response,
  next: NextFunction
): Promise<void> => {
  try {
    const { AUTH_COOKIE } = readEnv();
    const token = extractToken(req, AUTH_COOKIE);
    if (!token) return next();

    try {
      const payload = verifyToken(token);
      req.user = {
        id: payload.id,
        email: payload.email,
        role: payload.role,
        permissions: payload.permissions ?? [],
        ...includeIfDefined('sub', payload.sub),
        ...includeIfDefined('iat', payload.iat),
        ...includeIfDefined('exp', payload.exp),
      };
      logger.debug('Auth: optional user attached', { userId: payload.id, role: payload.role });
    } catch (e: any) {
      // Do not block optional routes; just log at debug
      logger.debug('Auth: optional token rejected', { reason: e?.message });
    }
    next();
  } catch {
    next();
  }
};

/** Require one of the given roles. */
export const requireRole = (roles: string[] | string) => {
  const required = new Set(toArray(roles).map(r => r.toLowerCase()));
  return (req: AuthenticatedRequest, _res: Response, next: NextFunction): void => {
    try {
      if (!req.user) throw new APIError('Authentication required', 401);
      const userRole = (req.user.role || '').toLowerCase();
      if (!required.has(userRole)) throw new APIError('Insufficient permissions', 403);
      next();
    } catch (err) {
      next(err);
    }
  };
};

/** Require a specific permission (exact match). */
export const requirePermission = (permission: string) => {
  return (req: AuthenticatedRequest, _res: Response, next: NextFunction): void => {
    try {
      if (!req.user) throw new APIError('Authentication required', 401);
      const perms = new Set(req.user.permissions || []);
      if (!perms.has(permission)) throw new APIError('Insufficient permissions', 403);
      next();
    } catch (err) {
      next(err);
    }
  };
};



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\middleware\errorHandler.ts
--------------------------------------------------------------------------------
import { APIError } from '@/utils/errors';
import { logger } from '@/utils/logger';
import { NextFunction, Request, Response } from 'express';

// Extended Error interface for database and system errors
interface ExtendedError extends Error {
  code?: string;
  errno?: number;
  sqlState?: string;
  sqlMessage?: string;
  statusCode?: number;
}

export const errorHandler = (
  error: ExtendedError,
  req: Request,
  res: Response,
  next: NextFunction
): void => {
  void next; // keep Express signature, silence TS unused

  // Log the error with full context
  logger.error('Request error:', {
    error: error.message,
    stack: error.stack,
    code: error.code,
    statusCode: error.statusCode,
    url: req.url,
    method: req.method,
    ip: req.ip,
    userAgent: req.get('User-Agent'),
    requestId: (req as any).id,
    body: req.method !== 'GET' ? req.body : undefined,
    query: req.query,
    params: req.params
  });

  // Handle API errors (our custom errors)
  if (error instanceof APIError) {
    res.status(error.statusCode).json({
      success: false,
      error: {
        message: error.message,
        code: error.statusCode,
        type: 'APIError',
        ...(error.details && { details: error.details }),
        ...(process.env.NODE_ENV === 'development' && { stack: error.stack })
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle Joi validation errors
  if (error.name === 'ValidationError') {
    res.status(400).json({
      success: false,
      error: {
        message: 'Validation failed',
        code: 400,
        type: 'ValidationError',
        details: error.message
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle JWT errors
  if (error.name === 'JsonWebTokenError') {
    res.status(401).json({
      success: false,
      error: {
        message: 'Invalid token',
        code: 401,
        type: 'AuthenticationError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  if (error.name === 'TokenExpiredError') {
    res.status(401).json({
      success: false,
      error: {
        message: 'Token expired',
        code: 401,
        type: 'AuthenticationError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle database connection errors
  if (error.message?.includes('connect ECONNREFUSED') || 
      error.code === 'ECONNREFUSED' ||
      error.code === 'ENOTFOUND' ||
      error.code === 'ETIMEDOUT') {
    res.status(503).json({
      success: false,
      error: {
        message: 'Database connection failed',
        code: 503,
        type: 'DatabaseConnectionError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle PostgreSQL specific errors
  if (error.code?.startsWith('23')) { // PostgreSQL constraint violations
    let message = 'Database constraint violation';
    let statusCode = 400;

    switch (error.code) {
      case '23505': // unique_violation
        message = 'Duplicate entry - record already exists';
        break;
      case '23503': // foreign_key_violation
        message = 'Referenced record does not exist';
        break;
      case '23502': // not_null_violation
        message = 'Required field cannot be empty';
        break;
      case '23514': // check_violation
        message = 'Data does not meet validation requirements';
        break;
    }

    res.status(statusCode).json({
      success: false,
      error: {
        message,
        code: statusCode,
        type: 'DatabaseConstraintError',
        dbCode: error.code,
        ...(process.env.NODE_ENV === 'development' && { 
          sqlMessage: (error as any).sqlMessage || error.message 
        })
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle Redis connection errors
  if (error.message?.includes('Redis') || error.code === 'ECONNRESET') {
    res.status(503).json({
      success: false,
      error: {
        message: 'Cache service temporarily unavailable',
        code: 503,
        type: 'CacheConnectionError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle OpenAI API errors
  if (error.message?.includes('OpenAI') || error.message?.includes('AI service')) {
    res.status(503).json({
      success: false,
      error: {
        message: 'AI service temporarily unavailable',
        code: 503,
        type: 'AIServiceError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle rate limiting errors
  if ((error.message?.includes('rate limit') || (error as any).statusCode === 429)) {
    res.status(429).json({
      success: false,
      error: {
        message: 'Too many requests - please try again later',
        code: 429,
        type: 'RateLimitError',
        retryAfter: '15 minutes'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle file upload errors
  if ((error as any).code === 'LIMIT_FILE_SIZE') {
    res.status(413).json({
      success: false,
      error: {
        message: 'File too large',
        code: 413,
        type: 'FileUploadError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  if ((error as any).code === 'LIMIT_UNEXPECTED_FILE') {
    res.status(400).json({
      success: false,
      error: {
        message: 'Invalid file upload',
        code: 400,
        type: 'FileUploadError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle syntax errors (malformed JSON, etc.)
  if (error instanceof SyntaxError) {
    res.status(400).json({
      success: false,
      error: {
        message: 'Invalid request format',
        code: 400,
        type: 'SyntaxError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle timeout errors
  if (error.message?.includes('timeout') || error.code === 'ETIMEDOUT') {
    res.status(408).json({
      success: false,
      error: {
        message: 'Request timeout',
        code: 408,
        type: 'TimeoutError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle permission errors
  if (error.code === 'EACCES' || error.code === 'EPERM') {
    res.status(403).json({
      success: false,
      error: {
        message: 'Access denied',
        code: 403,
        type: 'PermissionError'
      },
      requestId: (req as any).id,
      timestamp: new Date().toISOString()
    });
    return;
  }

  // Handle default errors
  const isDevelopment = process.env.NODE_ENV === 'development';
  const statusCode = (error as any).statusCode || 500;

  res.status(statusCode).json({
    success: false,
    error: {
      message: isDevelopment ? error.message : 'Internal server error',
      code: statusCode,
      type: 'InternalServerError',
      ...(isDevelopment && { 
        stack: error.stack,
        originalError: {
          name: error.name,
          message: error.message,
          code: error.code
        }
      })
    },
    requestId: (req as any).id,
    timestamp: new Date().toISOString()
  });
};

export const notFoundHandler = (req: Request, res: Response): void => {
  const error = {
    success: false,
    error: {
      message: `Route ${req.method} ${req.path} not found`,
      code: 404,
      type: 'NotFoundError',
      availableRoutes: [
        'GET /api/health',
        'GET /api/docs',
        'POST /api/discovery',
        'POST /api/analysis/schema'
      ]
    },
    requestId: (req as any).id,
    timestamp: new Date().toISOString()
  };

  logger.warn('Route not found', {
    method: req.method,
    path: req.path,
    ip: req.ip,
    userAgent: req.get('User-Agent')
  });

  res.status(404).json(error);
};

// Async error wrapper utility
export const asyncHandler = (
  fn: (req: Request, res: Response, next: NextFunction) => Promise<any>
) => {
  return (req: Request, res: Response, next: NextFunction): void => {
    Promise.resolve(fn(req, res, next)).catch(next);
  };
};

// Global unhandled error handlers
export const setupGlobalErrorHandlers = (): void => {
  // Handle uncaught exceptions
  process.on('uncaughtException', (error: Error) => {
    logger.error('Uncaught Exception - Server shutting down:', {
      error: error.message,
      stack: error.stack,
      pid: process.pid
    });
    process.exit(1);
  });

  // Handle unhandled promise rejections
  process.on('unhandledRejection', (reason: any, promise: Promise<any>) => {
    logger.error('Unhandled Promise Rejection:', {
      reason: reason?.message || reason,
      stack: reason?.stack,
      promise: promise.toString()
    });
    process.exit(1);
  });

  // Handle SIGTERM (graceful shutdown)
  process.on('SIGTERM', () => {
    logger.info('SIGTERM received - starting graceful shutdown');
    process.exit(0);
  });

  // Handle SIGINT (Ctrl+C)
  process.on('SIGINT', () => {
    logger.info('SIGINT received - starting graceful shutdown');
    process.exit(0);
  });
};

// Error types for better error handling
export enum ErrorTypes {
  API_ERROR = 'APIError',
  VALIDATION_ERROR = 'ValidationError',
  AUTHENTICATION_ERROR = 'AuthenticationError',
  AUTHORIZATION_ERROR = 'AuthorizationError',
  DATABASE_ERROR = 'DatabaseError',
  CACHE_ERROR = 'CacheError',
  AI_SERVICE_ERROR = 'AIServiceError',
  RATE_LIMIT_ERROR = 'RateLimitError',
  FILE_UPLOAD_ERROR = 'FileUploadError',
  TIMEOUT_ERROR = 'TimeoutError',
  NOT_FOUND_ERROR = 'NotFoundError',
  INTERNAL_SERVER_ERROR = 'InternalServerError'
}

// Helper function to create standardized error responses
export const createErrorResponse = (
  message: string,
  code: number,
  type: ErrorTypes,
  details?: any,
  requestId?: string
) => {
  return {
    success: false,
    error: {
      message,
      code,
      type,
      ...(details && { details })
    },
    requestId: requestId || 'unknown',
    timestamp: new Date().toISOString()
  };
};



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\middleware\rateLimit.ts
--------------------------------------------------------------------------------
// src/middleware/rateLimit.ts
import { redis } from '@/config/redis';
import type { NextFunction, Request, RequestHandler, Response } from 'express';
import rateLimit, {
  type ClientRateLimitInfo,
  type RateLimitRequestHandler,
  type Store as RateLimitStore,
} from 'express-rate-limit';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Central config (can move to config/env)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const RATE_LIMIT_CONFIG = {
  ai: { windowMs: 15 * 60 * 1000, max: 10, prefix: 'rl:ai:' },         // 10 per 15m
  discovery: { windowMs: 5 * 60 * 1000, max: 3, prefix: 'rl:disc:' },   // 3 per 5m
  api: { windowMs: 15 * 60 * 1000, max: 100, prefix: 'rl:api:' },       // 100 per 15m
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Minimal request shape (avoid importing Express Request types here)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
type MaybeAuthed = {
  user?: { id?: string | null | undefined; role?: string | null | undefined };
  ip?: string;
  originalUrl?: string;
};

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Redis-backed store for express-rate-limit v7
 * (Do NOT `implements Store` to avoid cross-package type conflicts)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
class RateLimitRedisStore {
  private readonly _prefix: string;
  private readonly _windowMs: number;

  constructor(windowMs: number, prefix = 'rl:') {
    this._prefix = prefix;
    this._windowMs = windowMs;
  }

  async increment(key: string): Promise<ClientRateLimitInfo> {
    const redisKey = `${this._prefix}${key}`;
    try {
      const client = redis.getClient();
      const totalHits = await client.incr(redisKey);

      // set expiry on first hit
      if (totalHits === 1) {
        await client.expire(redisKey, Math.ceil(this._windowMs / 1000));
      }

      const ttlSec = await client.ttl(redisKey);
      // resetTime is REQUIRED by ClientRateLimitInfo
      const resetTime =
        ttlSec > 0
          ? new Date(Date.now() + ttlSec * 1000)
          : new Date(Date.now() + this._windowMs);

      return { totalHits, resetTime };
    } catch {
      // If Redis is unavailable, be permissive but still provide a resetTime
      return { totalHits: 1, resetTime: new Date(Date.now() + this._windowMs) };
    }
  }

  async decrement(key: string): Promise<void> {
    try {
      await redis.getClient().decr(`${this._prefix}${key}`);
    } catch {
      // swallow
    }
  }

  async resetKey(key: string): Promise<void> {
    try {
      await redis.getClient().del(`${this._prefix}${key}`);
    } catch {
      // swallow
    }
  }

  // Optional: some versions may call resetAll; implement as no-op
  async resetAll(): Promise<void> {
    // Implement SCAN/DEL by prefix if you need global resets
  }
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Factory (uses `unknown` to avoid type-forks between @types/express trees)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export function createRateLimiter(options: {
  windowMs: number;
  max: number | ((req: unknown) => number);
  message?: string;
  skipSuccessfulRequests?: boolean;
  keyGenerator?: (req: unknown, res: unknown) => string;
  prefix?: string;
}): RateLimitRequestHandler {
  const {
    windowMs,
    max,
    message = 'Too many requests',
    skipSuccessfulRequests = false,
    keyGenerator,
    prefix = 'rl:',
  } = options;

  return rateLimit({
    windowMs,

    // ValueDeterminingMiddleware<number> compatible
    max: (req: unknown) => {
      // functional max support
      if (typeof max === 'function') {
        try {
          return max(req);
        } catch {
          return 100;
        }
      }
      // super_admin bypass (unlimited)
      const r = req as MaybeAuthed;
      if (r?.user?.role === 'super_admin') return Number.MAX_SAFE_INTEGER;
      return max;
    },

    standardHeaders: true,
    legacyHeaders: false,

    // Cast through unknown to satisfy possible distinct type trees
    store: new RateLimitRedisStore(windowMs, prefix) as unknown as RateLimitStore,

    keyGenerator: (req: unknown, res: unknown): string => {
      if (keyGenerator) {
        const k = keyGenerator(req, res);
        // Must always return a string
        return (k ?? '').toString() || (req as MaybeAuthed).ip || 'unknown';
      }
      const r = req as MaybeAuthed;
      const id = (r?.user?.id ?? '').toString().trim();
      return id || r?.ip || 'unknown';
    },

    skipSuccessfulRequests,

    handler: (req: unknown, res: unknown): void => {
      const _res = res as {
        setHeader: (k: string, v: string) => void;
        status: (c: number) => { json?: (b: unknown) => void };
      };
      const _req = req as MaybeAuthed;

      _res.setHeader('Retry-After', Math.ceil(windowMs / 1000).toString());
      _res
        .status(429)
        .json?.({
          success: false,
          error: { code: 'RATE_LIMIT_EXCEEDED', message },
          meta: { timestamp: new Date().toISOString(), path: _req?.originalUrl || '' },
        });
    },
  });
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Preconfigured limiters (raw RateLimitRequestHandler)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
export const aiRateLimit: RateLimitRequestHandler = createRateLimiter({
  ...RATE_LIMIT_CONFIG.ai,
  message: 'AI request limit exceeded',
  prefix: RATE_LIMIT_CONFIG.ai.prefix,
  // Admins can do more AI calls
  max: (req) => ((req as MaybeAuthed).user?.role === 'admin' ? 50 : RATE_LIMIT_CONFIG.ai.max),
  keyGenerator: (req) => {
    const r = req as MaybeAuthed;
    const id = (r?.user?.id ?? '').toString().trim();
    return id || r?.ip || 'unknown';
  },
});

export const discoveryRateLimit: RateLimitRequestHandler = createRateLimiter({
  ...RATE_LIMIT_CONFIG.discovery,
  message: 'Discovery request limit exceeded',
  prefix: RATE_LIMIT_CONFIG.discovery.prefix,
  keyGenerator: (req) => {
    const r = req as MaybeAuthed;
    const id = (r?.user?.id ?? '').toString().trim();
    return id || r?.ip || 'unknown';
  },
});

export const apiRateLimit: RateLimitRequestHandler = createRateLimiter({
  ...RATE_LIMIT_CONFIG.api,
  message: 'API request limit exceeded',
  prefix: RATE_LIMIT_CONFIG.api.prefix,
  skipSuccessfulRequests: true,
  keyGenerator: (req) => {
    const r = req as MaybeAuthed;
    const id = (r?.user?.id ?? '').toString().trim();
    return id || r?.ip || 'unknown';
  },
});

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Wrappers to plain Express RequestHandler (fix type tree mismatches)
 * Use these in your routers: aiRateLimitMw/discoveryRateLimitMw/apiRateLimitMw
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
const asMiddleware = (rl: RateLimitRequestHandler): RequestHandler =>
  (req: Request, res: Response, next: NextFunction) =>
    (rl as unknown as (req: Request, res: Response, next: NextFunction) => void)(req, res, next);

export const aiRateLimitMw: RequestHandler = asMiddleware(aiRateLimit);
export const discoveryRateLimitMw: RequestHandler = asMiddleware(discoveryRateLimit);
export const apiRateLimitMw: RequestHandler = asMiddleware(apiRateLimit);



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\middleware\validation.ts
--------------------------------------------------------------------------------
import { APIError } from '@/utils/errors';
import { NextFunction, Request, Response } from 'express';
import Joi from 'joi';

const discoveryRequestSchema = Joi.object({
  dataSourceId: Joi.string().uuid().required(),
  schemas: Joi.array().items(Joi.string()).optional(),
  tables: Joi.array().items(Joi.string()).optional(),
  options: Joi.object({
    sampleSize: Joi.number().min(10).max(10000).default(100),
    includeData: Joi.boolean().default(true),
    analysisDepth: Joi.string().valid('basic', 'detailed', 'comprehensive').default('detailed')
  }).optional()
});

const nlQuerySchema = Joi.object({
  query: Joi.string().min(3).max(500).required(),
  context: Joi.object({
    schemas: Joi.array().items(Joi.string()).optional(),
    tables: Joi.array().items(Joi.string()).optional(),
    fields: Joi.array().items(Joi.string()).optional()
  }).optional()
});

const analysisRequestSchema = Joi.object({
  schema: Joi.object({
    name: Joi.string().required(),
    tables: Joi.array().items(Joi.object({
      schema: Joi.string().required(),
      name: Joi.string().required(),
      columns: Joi.array().items(Joi.object({
        name: Joi.string().required(),
        type: Joi.string().required(),
        nullable: Joi.boolean().required(),
        description: Joi.string().optional()
      })).required()
    })).required()
  }).required()
});

export const validateDiscoveryRequest = (req: Request, res: Response, next: NextFunction): void => {
  void res;
  const { error } = discoveryRequestSchema.validate(req.body);
  if (error) {
    next(new APIError(`Validation error: ${error.details[0].message}`, 400));
    return;
  }
  next();
};

export const validateNLQuery = (req: Request, res: Response, next: NextFunction): void => {
  void res;
  const { error } = nlQuerySchema.validate(req.body);
  if (error) {
    next(new APIError(`Validation error: ${error.details[0].message}`, 400));
    return;
  }
  next();
};

export const validateAnalysisRequest = (req: Request, res: Response, next: NextFunction): void => {
  void res;
  const { error } = analysisRequestSchema.validate(req.body);
  if (error) {
    next(new APIError(`Validation error: ${error.details[0].message}`, 400));
    return;
  }
  next();
};



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\models\Analysis.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\models\DataField.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\models\Discovery.ts
--------------------------------------------------------------------------------
// src/models/Discovery.ts
import { db } from '@/config/database';
import { logger } from '@/utils/logger';

/** Domain model */
export interface DiscoverySession {
  sessionId: string;
  userId: string;
  dataSourceId: string;
  status: 'pending' | 'processing' | 'completed' | 'failed';
  progress: number;
  results?: unknown; // if present, must not be undefined (exactOptionalPropertyTypes)
  error?: string;    // if present, must not be undefined
  createdAt: Date;
  updatedAt: Date;
}

/** Shape returned by Postgres (snake_case) */
interface DbDiscoveryRow {
  session_id: string;
  user_id: string;
  data_source_id: string;
  status: 'pending' | 'processing' | 'completed' | 'failed';
  progress: number;
  results: unknown | null;
  error: string | null;
  created_at: Date;
  updated_at: Date;
}

export class DiscoveryModel {
  static async create(session: Partial<DiscoverySession>): Promise<DiscoverySession> {
    try {
      const result = await db.query(
        `INSERT INTO discovery_sessions 
           (session_id, user_id, data_source_id, status, progress, created_at, updated_at)
         VALUES ($1,        $2,     $3,            $4,    $5,      NOW(),     NOW())
         RETURNING *`,
        [
          session.sessionId,
          session.userId,
          session.dataSourceId,
          session.status,
          session.progress,
        ]
      );

      const row = (result.rows as unknown as DbDiscoveryRow[])[0];
      return this.mapFromDb(row);
    } catch (error) {
      logger.error('Failed to create discovery session:', error);
      throw error;
    }
  }

  static async findById(sessionId: string): Promise<DiscoverySession | null> {
    try {
      const result = await db.query(
        'SELECT * FROM discovery_sessions WHERE session_id = $1',
        [sessionId]
      );

      const rows = result.rows as unknown as DbDiscoveryRow[];
      if (rows.length === 0) return null;
      return this.mapFromDb(rows[0]);
    } catch (error) {
      logger.error('Failed to find discovery session:', error);
      throw error;
    }
  }

  static async findByUserId(
    userId: string,
    limit = 20,
    offset = 0
  ): Promise<DiscoverySession[]> {
    try {
      const result = await db.query(
        `SELECT * FROM discovery_sessions
          WHERE user_id = $1
          ORDER BY created_at DESC
          LIMIT $2 OFFSET $3`,
        [userId, limit, offset]
      );

      const rows = result.rows as unknown as DbDiscoveryRow[];
      return rows.map((row) => this.mapFromDb(row));
    } catch (error) {
      logger.error('Failed to find discovery sessions by user:', error);
      throw error;
    }
  }

  static async update(
    sessionId: string,
    updates: Partial<DiscoverySession>
  ): Promise<DiscoverySession | null> {
    try {
      const setClause: string[] = [];
      const values: unknown[] = [];
      let paramIndex = 1;

      // Build dynamic SET list (convert camelCase -> snake_case)
      for (const [key, value] of Object.entries(updates)) {
        if (key === 'sessionId') continue; // never update PK here
        const dbKey = key.replace(/[A-Z]/g, (ltr) => `_${ltr.toLowerCase()}`);
        setClause.push(`${dbKey} = $${paramIndex}`);
        values.push(value);
        paramIndex++;
      }

      if (setClause.length === 0) return null;

      // always set updated_at
      setClause.push(`updated_at = NOW()`);

      // WHERE param
      values.push(sessionId);

      const result = await db.query(
        `UPDATE discovery_sessions
            SET ${setClause.join(', ')}
          WHERE session_id = $${paramIndex}
          RETURNING *`,
        values
      );

      const rows = result.rows as unknown as DbDiscoveryRow[];
      if (rows.length === 0) return null;
      return this.mapFromDb(rows[0]);
    } catch (error) {
      logger.error('Failed to update discovery session:', error);
      throw error;
    }
  }

  static async delete(sessionId: string, userId: string): Promise<boolean> {
    try {
      const result = await db.query(
        'DELETE FROM discovery_sessions WHERE session_id = $1 AND user_id = $2',
        [sessionId, userId]
      );
      return result.rowCount > 0;
    } catch (error) {
      logger.error('Failed to delete discovery session:', error);
      throw error;
    }
  }

  /** Map DB row -> domain object, respecting exactOptionalPropertyTypes */
  private static mapFromDb(row: DbDiscoveryRow): DiscoverySession {
    const base: DiscoverySession = {
      sessionId: row.session_id,
      userId: row.user_id,
      dataSourceId: row.data_source_id,
      status: row.status,
      progress: row.progress,
      createdAt: row.created_at,
      updatedAt: row.updated_at,
    };

    // Only assign optional fields if they are non-null/defined
    if (row.results !== null && row.results !== undefined) {
      (base as { results: unknown }).results = row.results;
    }
    if (row.error !== null && row.error !== undefined) {
      (base as { error: string }).error = row.error;
    }

    return base;
  }
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\processors\DataProcessor.ts
--------------------------------------------------------------------------------
// src/processors/DataProcessor.ts
import type {
  DataSample,
  IDataProcessor,
  QualityIssue,
} from '@/services/AnalysisService';

export class DataProcessor implements IDataProcessor {
  async analyzeSampleData(
    samples: DataSample[],
  ): Promise<{ analysis: Record<string, unknown>[]; qualityIssues: QualityIssue[] }> {
    const analysis: Record<string, unknown>[] = [];
    const qualityIssues: QualityIssue[] = [];

    for (const s of samples) {
      const values = Array.isArray(s.values) ? s.values : [];
      const nonNull = values.filter((v) => v !== null && v !== undefined);
      const nulls = values.length - nonNull.length;

      const uniqueCount = new Set(nonNull.map((v) => JSON.stringify(v))).size;

      analysis.push({
        column: s.columnName,
        count: values.length,
        nulls,
        nullRate: values.length ? +(nulls / values.length * 100).toFixed(2) : 0,
        uniqueCount,
        sample: nonNull.slice(0, 5),
      });

      if (nulls > 0) {
        qualityIssues.push({
          column: s.columnName,
          type: 'null_values',
          severity: nulls / (values.length || 1) > 0.2 ? 'High' : 'Low',
          count: nulls,
          message: 'Column contains null/undefined values',
          sample: values.slice(0, 5),
        });
      }

      const lower = s.columnName.toLowerCase();

      if (lower.includes('email')) {
        const bad = nonNull.filter(
          (v) => typeof v === 'string' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v),
        );
        if (bad.length) {
          qualityIssues.push({
            column: s.columnName,
            type: 'format_inconsistency',
            severity: bad.length / (nonNull.length || 1) > 0.05 ? 'Medium' : 'Low',
            count: bad.length,
            message: 'Invalid email addresses detected',
            sample: bad.slice(0, 5),
          });
        }
      }

      if (lower.includes('phone')) {
        const bad = nonNull.filter(
          (v) => typeof v === 'string' && !/^\+?[0-9().\- ]{7,}$/.test(v),
        );
        if (bad.length) {
          qualityIssues.push({
            column: s.columnName,
            type: 'format_inconsistency',
            severity: bad.length / (nonNull.length || 1) > 0.05 ? 'Medium' : 'Low',
            count: bad.length,
            message: 'Invalid phone numbers detected',
            sample: bad.slice(0, 5),
          });
        }
      }
    }

    return { analysis, qualityIssues };
  }
}

export default DataProcessor;



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\processors\FieldProcessor.ts
--------------------------------------------------------------------------------
// src/processors/FieldProcessor.ts
export interface FieldInfo {
  name: string;
  type: string;
  nullable: boolean;
  description?: string;
}

export type Classification = 'PII' | 'PHI' | 'Financial' | 'General';
export type Sensitivity = 'Low' | 'Medium' | 'High';

export interface ProcessedField extends FieldInfo {
  classification: Classification;
  sensitivity: Sensitivity;
  patterns: string[];
}

/** Very lightweight field classifier used by SchemaProcessor */
export class FieldProcessor {
  processFields(fields: FieldInfo[]): ProcessedField[] {
    return fields.map((f) => {
      const classification = this.classify(f);
      const sensitivity = this.sensitivityFromClass(classification);
      const patterns = this.detectPatterns(f);

      return { ...f, classification, sensitivity, patterns };
    });
  }

  private classify(f: FieldInfo): Classification {
    const n = f.name.toLowerCase();
    if (/(email|first_?name|last_?name|phone|ssn|address)/.test(n)) return 'PII';
    if (/(health|medical|patient|diagnosis)/.test(n)) return 'PHI';
    if (/(payment|amount|price|card|invoice|billing)/.test(n)) return 'Financial';
    return 'General';
    }

  private sensitivityFromClass(c: Classification): Sensitivity {
    if (c === 'PHI') return 'High';
    if (c === 'PII' || c === 'Financial') return 'Medium';
    return 'Low';
  }

  private detectPatterns(f: FieldInfo): string[] {
    const out: string[] = [];
    const n = f.name.toLowerCase();
    if (n.includes('email')) out.push('email');
    if (n.includes('phone')) out.push('phone');
    if (/(date|timestamp)/.test(f.type.toLowerCase())) out.push('date');
    return out;
  }
}

export default FieldProcessor;



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\processors\SchemaProcessor.ts
--------------------------------------------------------------------------------
// src/processors/SchemaProcessor.ts
import { logger } from '@utils/logger';
import FieldProcessor, { FieldInfo } from './FieldProcessor';

export interface SchemaInfo {
  name: string;
  tables: TableInfo[];
}

export interface TableInfo {
  schema: string;
  name: string;
  columns: FieldInfo[];
  rowCount?: number;
  relationships?: RelationshipInfo[];
}

export interface RelationshipInfo {
  type: 'foreign_key' | 'one_to_many' | 'many_to_many';
  targetTable: string;
  targetColumn: string;
  sourceColumn: string;
}

export interface ProcessedTable extends TableInfo {
  processedColumns: Array<
    FieldInfo & { classification: string; sensitivity: string; patterns: string[] }
  >;
  governance: {
    classification: string;
    sensitivity: string;
    complianceFrameworks: string[];
    suggestedPolicies: string[];
  };
}

export interface SchemaSummary {
  totalTables: number;
  totalColumns: number;
  sensitiveDataTables: number;
  complianceRequirements: string[];
  recommendations: string[];
}

export interface ProcessedSchema {
  name: string;
  tables: ProcessedTable[];
  summary: SchemaSummary;
}

export class SchemaProcessor {
  private readonly fieldProcessor: FieldProcessor;

  constructor() {
    this.fieldProcessor = new FieldProcessor();
  }

  public async processSchema(schema: SchemaInfo): Promise<ProcessedSchema> {
    try {
      logger.info('Processing schema', { schema: schema.name, tables: schema.tables.length });

      const processedTables = await Promise.all(
        schema.tables.map((table) => this.processTable(table))
      );

      const summary = this.generateSchemaSummary(processedTables);

      return { name: schema.name, tables: processedTables, summary };
    } catch (error) {
      logger.error('Schema processing failed:', error);
      throw error;
    }
  }

  private async processTable(table: TableInfo): Promise<ProcessedTable> {
    try {
      const processedColumns = this.fieldProcessor.processFields(table.columns);
      const governance = this.generateTableGovernance(processedColumns);

      return { ...table, processedColumns, governance };
    } catch (error) {
      logger.error('Table processing failed:', { table: table.name, error });
      throw error;
    }
  }

  private generateTableGovernance(
    processedColumns: ProcessedTable['processedColumns']
  ): ProcessedTable['governance'] {
    const classifications = processedColumns.map((c) => c.classification);
    const sensitivities = processedColumns.map((c) => c.sensitivity);

    const hasPhiData = classifications.includes('PHI');
    const hasPiiData = classifications.includes('PII');
    const hasFinancialData = classifications.includes('Financial');

    let classification = 'General';
    if (hasPhiData) classification = 'PHI';
    else if (hasPiiData) classification = 'PII';
    else if (hasFinancialData) classification = 'Financial';

    let sensitivity = 'Low';
    if (sensitivities.includes('High')) sensitivity = 'High';
    else if (sensitivities.includes('Medium')) sensitivity = 'Medium';

    const complianceFrameworks: string[] = [];
    if (hasPhiData) complianceFrameworks.push('HIPAA');
    if (hasPiiData) complianceFrameworks.push('GDPR', 'CCPA');
    if (hasFinancialData) complianceFrameworks.push('SOX', 'PCI-DSS');

    const suggestedPolicies: string[] = [];
    if (sensitivity === 'High') {
      suggestedPolicies.push('Data encryption required', 'Access approval required', 'Regular access reviews');
    }
    if (hasPiiData || hasPhiData) {
      suggestedPolicies.push('Data retention policy', 'Right to be forgotten procedures');
    }

    return { classification, sensitivity, complianceFrameworks, suggestedPolicies };
  }

  private generateSchemaSummary(tables: ProcessedTable[]): SchemaSummary {
    const totalTables = tables.length;
    const totalColumns = tables.reduce((sum, t) => sum + t.columns.length, 0);
    const sensitiveDataTables = tables.filter(
      (t) => t.governance.sensitivity === 'High' || t.governance.sensitivity === 'Medium'
    ).length;

    const complianceSet = new Set<string>();
    for (const t of tables) {
      for (const f of t.governance.complianceFrameworks) complianceSet.add(f);
    }

    const recommendations: string[] = [
      `${sensitiveDataTables} of ${totalTables} tables contain sensitive data`,
      'Implement role-based access controls',
      'Regular compliance audits recommended',
      'Consider data classification labels',
    ];
    if (complianceSet.has('GDPR')) recommendations.push('GDPR compliance review required');
    if (complianceSet.has('HIPAA')) recommendations.push('HIPAA security controls needed');

    return {
      totalTables,
      totalColumns,
      sensitiveDataTables,
      complianceRequirements: Array.from(complianceSet),
      recommendations,
    };
  }
}

// export both ways so AnalysisService can `new (mod.SchemaProcessor ?? mod.default)()`
export default SchemaProcessor;



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\prompts\fieldDiscovery.ts
--------------------------------------------------------------------------------
// src/prompts/fieldDiscovery.ts

/* eslint-disable max-lines */
type Sensitivity =
  | 'Low'
  | 'Medium'
  | 'High'
  | 'Critical';

type Classification =
  | 'General'
  | 'PII'
  | 'PHI'
  | 'Financial';

export interface FieldDiscoveryColumn {
  name: string;
  type: string;
  nullable: boolean;
  description?: string | null | undefined;
  /** Optional small set of example values for extra context */
  exampleValues?: readonly unknown[] | null | undefined;
}

export interface FieldDiscoveryResultField {
  name: string;
  type: string;
  classification: Classification;
  sensitivity: Sensitivity;
  description: string;
  suggestedRules: string[];
  dataPatterns: string[];
  businessContext: string;
}

export interface FieldDiscoveryRequest {
  schema: string;
  tableName: string;
  /** Optional business context of the table */
  context?: string | null | undefined;
  /** Table columns */
  columns: readonly FieldDiscoveryColumn[];
  /** Optional sample data (records/rows) */
  sampleData?: readonly Record<string, unknown>[] | null | undefined;
  /** Optional region for compliance nuance */
  region?: 'US' | 'EU' | 'Global';
  /** Optional hint for how deep the analysis should go */
  aiAnalysisDepth?: 'basic' | 'detailed' | 'comprehensive';
}

export const FIELD_DISCOVERY_SYSTEM_PROMPT = `
You are an expert data governance analyst specializing in:
- Field classification and data sensitivity analysis
- Compliance requirements (GDPR, HIPAA, CCPA, SOX, PCI-DSS)
- Data quality and governance best practices
- Business context understanding

GENERAL PRINCIPLES
- Be precise, practical, and implementation-oriented.
- Prefer least-privilege and data minimization.
- Recommend enforceable validation and indexing strategies when useful.

RESPONSE FORMAT (STRICT)
- Respond with STRICT JSON only. Do NOT include markdown, prose, or comments.
- Use these enums exactly:
  classification: "General" | "PII" | "PHI" | "Financial"
  sensitivity: "Low" | "Medium" | "High" | "Critical"
- Confidence is 0..1 (number).
- Recommendations arrays must be concise and actionable.
`.trim();

/**
 * Build a robust user prompt for field discovery.
 * - Strong typing (no implicit any)
 * - Sanitizes and truncates inputs to control token size
 * - Adds light heuristics to give the model helpful hints
 */
export function buildFieldDiscoveryPrompt(
  request: FieldDiscoveryRequest,
  opts?: {
    maxSampleRows?: number;
    maxCharsPerValue?: number;
    maxColumns?: number;
  }
): string {
  const maxSampleRows = Number.isFinite(opts?.maxSampleRows) ? Math.max(0, Number(opts?.maxSampleRows)) : 5;
  const maxCharsPerValue = Number.isFinite(opts?.maxCharsPerValue) ? Math.max(16, Number(opts?.maxCharsPerValue)) : 120;
  const maxColumns = Number.isFinite(opts?.maxColumns) ? Math.max(1, Number(opts?.maxColumns)) : 200;

  const cleanContext = sanitizeText(request.context);
  const cleanRegion = request.region ?? 'Global';
  const depth = request.aiAnalysisDepth ?? 'detailed';

  const columns = (request.columns ?? []).slice(0, maxColumns).map(safeColumn);
  const hints = buildHeuristicHints(columns);

  const sample = pruneSampleData(request.sampleData ?? [], maxSampleRows, maxCharsPerValue);

  const columnsBlock = columns
    .map((col) => {
      const nullable = col.nullable ? 'NULLABLE' : 'NOT NULL';
      const desc = col.description ? ` - ${sanitizeInline(col.description)}` : '';
      const examples = (col.exampleValues && col.exampleValues.length)
        ? ` (examples: ${stringifyInline(col.exampleValues.slice(0, 3), maxCharsPerValue)})`
        : '';
      return `- ${col.name} (${col.type}) ${nullable}${desc}${examples}`;
    })
    .join('\n');

  const sampleBlock = sample.length
    ? `Sample Data (first ${sample.length} rows):
${JSON.stringify(sample, null, 2)}`
    : '';

  const hintsBlock = hints.length
    ? `Heuristic Hints:
${hints.map((h) => `- ${h}`).join('\n')}`
    : '';

  // Final strict instructions to shape output for downstream services
  const strictJsonContract = `
RETURN STRICT JSON ONLY (no markdown, no comments) with this structure:
{
  "fields": [
    {
      "name": "field_name",
      "type": "data_type",
      "classification": "PII|PHI|Financial|General",
      "sensitivity": "High|Medium|Low|Critical",
      "description": "clear business meaning and purpose",
      "suggestedRules": ["specific quality rule 1", "specific quality rule 2"],
      "dataPatterns": ["observed pattern 1", "observed pattern 2"],
      "businessContext": "business context and usage"
    }
  ],
  "recommendations": {
    "governance": ["actionable governance recommendation 1", "recommendation 2"],
    "quality": ["actionable quality recommendation 1", "recommendation 2"],
    "compliance": ["specific compliance requirement 1", "requirement 2"]
  },
  "confidence": 0.0-1.0
}

CONSTRAINTS
- Keep arrays concise (max 5 items each) and prioritize high impact actions.
- Prefer column-specific recommendations over generic advice.
- Match enum values exactly as specified.
- If uncertain about a field, mark classification "General" with lower confidence.
`.trim();

  const userPrompt = `
Analyze the following database table and provide comprehensive field classification.

Context:
- Schema: ${sanitizeInline(request.schema)}
- Table: ${sanitizeInline(request.tableName)}
- Region: ${cleanRegion}
- Depth: ${depth}
${cleanContext ? `- Business Context: ${sanitizeInline(cleanContext)}` : ''}

Columns:
${columnsBlock}

${sampleBlock ? `\n${sampleBlock}\n` : ''}

${hintsBlock ? `\n${hintsBlock}\n` : ''}

${strictJsonContract}

FOCUS AREAS
1) Accurate classification based on names, types, and sample data.
2) Practical quality rules (validation, uniqueness, ranges, referential integrity).
3) Specific compliance requirements (GDPR/HIPAA/PCI-DSS/CCPA/SOX) relevant to the region.
4) Clear business value and usage context for each field.
5) Actionable, high-impact recommendations.
`.trim();

  return userPrompt;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Helpers
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

function sanitizeText(input?: string | null | undefined): string | undefined {
  if (!input) return undefined;
  const trimmed = input.trim();
  if (!trimmed) return undefined;
  // very light sanitization to cut obvious prompt-injection vectors
  return trimmed.replace(/[<>]/g, '');
}

function sanitizeInline(input: string): string {
  return sanitizeText(input) ?? '';
}

function safeColumn(col: FieldDiscoveryColumn): FieldDiscoveryColumn {
  return {
    name: String(col.name).trim(),
    type: String(col.type).trim(),
    nullable: Boolean(col.nullable),
    description: col.description ?? undefined,
    exampleValues: col.exampleValues ?? undefined,
  };
}

function stringifyInline(values: readonly unknown[], maxCharsPerValue: number): string {
  return values
    .map((v) => compactValue(v, maxCharsPerValue))
    .join(', ');
}

function compactValue(v: unknown, maxCharsPerValue: number): string {
  try {
    const s = typeof v === 'string' ? v : JSON.stringify(v);
    const trimmed = (s ?? '').toString();
    if (trimmed.length <= maxCharsPerValue) return trimmed;
    return trimmed.slice(0, maxCharsPerValue) + 'â€¦';
  } catch {
    return '[unserializable]';
  }
}

function pruneSampleData(
  rows: readonly Record<string, unknown>[],
  maxRows: number,
  maxCharsPerValue: number
): Record<string, unknown>[] {
  const limited = rows.slice(0, Math.max(0, maxRows));
  return limited.map((row) => {
    const out: Record<string, unknown> = {};
    for (const [k, v] of Object.entries(row)) {
      if (v === null || v === undefined) {
        out[k] = v as null | undefined;
        continue;
      }
      if (typeof v === 'string') {
        out[k] = redactString(v, maxCharsPerValue);
      } else if (typeof v === 'number' || typeof v === 'boolean') {
        out[k] = v;
      } else if (v instanceof Date) {
        out[k] = v.toISOString();
      } else {
        // stringify and truncate complex values
        out[k] = compactValue(v, maxCharsPerValue);
      }
    }
    return out;
  });
}

function redactString(s: string, maxChars: number): string {
  // simple redactions for PII-ish patterns
  const emailRx = /([A-Z0-9._%+-]+)@([A-Z0-9.-]+\.[A-Z]{2,})/gi;
  const phoneRx = /\+?\d{1,3}[-.\s]?\(?\d{2,4}\)?[-.\s]?\d{2,4}[-.\s]?\d{2,6}/g;
  const ssnRx = /\b\d{3}-?\d{2}-?\d{4}\b/g;

  let out = s.replace(emailRx, (_, user, host) => `${user[0]}***@${host}`);
  out = out.replace(phoneRx, (m) => m.slice(0, 3) + '***' + m.slice(-2));
  out = out.replace(ssnRx, '***-**-****');

  if (out.length <= maxChars) return out;
  return out.slice(0, maxChars) + 'â€¦';
}

function buildHeuristicHints(columns: readonly FieldDiscoveryColumn[]): string[] {
  const hints: string[] = [];

  for (const col of columns) {
    const name = col.name.toLowerCase();
    const type = col.type.toLowerCase();

    if (/email/.test(name)) {
      hints.push(`Column "${col.name}" likely contains email addresses â†’ consider "PII" with Medium sensitivity and format validation.`);
    }
    if (/(phone|mobile|cell)/.test(name)) {
      hints.push(`Column "${col.name}" likely contains phone numbers â†’ consider "PII"; recommend E.164 normalization and validation.`);
    }
    if (/(ssn|social[_-]?security)/.test(name)) {
      hints.push(`Column "${col.name}" may be SSN â†’ consider "PII" with High sensitivity; encryption at rest, restricted access.`);
    }
    if (/(dob|date[_-]?of[_-]?birth|birth[_-]?date)/.test(name) || (type.includes('date') && /birth/.test(name))) {
      hints.push(`Column "${col.name}" looks like date of birth â†’ "PII" with Medium/High sensitivity depending on jurisdiction.`);
    }
    if (/(card|cc|credit[_-]?card)/.test(name)) {
      hints.push(`Column "${col.name}" may be card data â†’ classify "Financial" with High sensitivity; tokenize or avoid storing PAN.`);
    }
    if (/(amount|price|salary|income|revenue)/.test(name)) {
      hints.push(`Column "${col.name}" is financial metric â†’ classify "Financial" (usually Medium sensitivity), enforce numeric ranges.`);
    }
    if (/(patient|diagnosis|medical|icd|phi)/.test(name)) {
      hints.push(`Column "${col.name}" suggests PHI â†’ classify "PHI" with High/Critical sensitivity and HIPAA safeguards.`);
    }
    if (/(ip[_-]?address|ipv4|ipv6)/.test(name)) {
      hints.push(`Column "${col.name}" may store IPs â†’ treat as "PII" in some frameworks; consider anonymization/retention policy.`);
    }
    if (/password|secret|token|api[_-]?key/.test(name)) {
      hints.push(`Column "${col.name}" looks like a credential/secret â†’ do not store raw; hash/tokenize and restrict access.`);
    }
  }

  return Array.from(new Set(hints)).slice(0, 12); // cap to keep the prompt lean
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\prompts\naturalLanguage.ts
--------------------------------------------------------------------------------
export const NATURAL_LANGUAGE_SYSTEM_PROMPT = `You are an expert SQL analyst and data translator specializing in:
- Converting natural language to SQL queries
- Database schema understanding
- Query optimization and safety
- Business intelligence and analytics

Convert user queries into safe, efficient SQL statements with detailed explanations.`;

export const buildNaturalLanguagePrompt = (query: any): string => {
  const contextInfo = query.context ? `
Available Database Context:
- Schemas: ${query.context.schemas?.join(', ') || 'None specified'}
- Tables: ${query.context.tables?.join(', ') || 'None specified'}  
- Key Fields: ${query.context.fields?.join(', ') || 'None specified'}
` : '';

  return `Convert this natural language query to SQL:

User Query: "${query.query}"

${contextInfo}

Please provide a comprehensive JSON response:
{
  "sql": "Complete SELECT statement with proper formatting",
  "explanation": "Detailed step-by-step explanation of the query logic",
  "tables": ["table1", "table2"],
  "fields": ["field1", "field2", "field3"],
  "joinTypes": ["INNER", "LEFT", "RIGHT"],
  "aggregations": ["COUNT", "SUM", "AVG"],
  "filters": ["WHERE conditions applied"],
  "orderBy": ["Sorting criteria"],
  "confidence": 0.95,
  "warnings": ["Potential performance issues", "Security considerations"],
  "suggestions": ["Query optimization tips", "Alternative approaches"],
  "estimatedComplexity": "Simple|Medium|Complex",
  "estimatedExecutionTime": "Fast|Medium|Slow"
}

Important considerations:
1. Generate safe, read-only queries (SELECT only)
2. Include proper WHERE clauses to limit results
3. Use appropriate JOINs based on relationships
4. Consider performance implications
5. Flag potential security risks
6. Provide clear explanations for business users
7. Suggest LIMIT clauses for large datasets`;
};


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\prompts\qualityRules.ts
--------------------------------------------------------------------------------
export const QUALITY_RULES_SYSTEM_PROMPT = `You are a data quality expert specializing in:
- Data validation and quality rules
- Business rule implementation
- Data profiling and anomaly detection
- Quality metrics and monitoring

Generate specific, measurable, and implementable data quality rules.`;

export const buildQualityRulesPrompt = (fieldInfo: any): string => {
  return `Generate specific data quality rules for the following field:

Field Information:
- Name: ${fieldInfo.name}
- Data Type: ${fieldInfo.type}
- Classification: ${fieldInfo.classification}
- Sensitivity: ${fieldInfo.sensitivity}
- Business Context: ${fieldInfo.businessContext}
- Observed Patterns: ${JSON.stringify(fieldInfo.dataPatterns || [])}
- Sample Data: ${JSON.stringify(fieldInfo.sampleData || [])}

Please provide a JSON response with specific, actionable quality rules:
{
  "rules": [
    {
      "name": "Descriptive rule name",
      "type": "validation|format|range|completeness|uniqueness|consistency",
      "description": "Detailed description of what the rule checks",
      "implementation": "Specific implementation details or SQL/logic",
      "severity": "Critical|High|Medium|Low",
      "automated": true|false,
      "frequency": "Real-time|Daily|Weekly|Monthly"
    }
  ]
}

Focus on:
1. Specific, measurable criteria
2. Clear implementation guidance
3. Appropriate severity levels
4. Automation feasibility
5. Business impact consideration`;
};


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\routes\analysis.ts
--------------------------------------------------------------------------------
import { AnalysisController } from '@/controllers/AnalysisController';
import { authenticateToken } from '@/middleware/auth';
import { validateAnalysisRequest } from '@/middleware/validation';
import { Router } from 'express';

const router = Router();
const analysisController = new AnalysisController();

// All analysis routes require authentication
router.use(authenticateToken);

// Analysis endpoints
router.post('/schema', validateAnalysisRequest, analysisController.analyzeSchema);
router.post('/data-sample', analysisController.analyzeDataSample);
router.post('/quality-check', analysisController.performQualityCheck);

export default router;


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\routes\discovery.ts
--------------------------------------------------------------------------------
import { DiscoveryController } from '@/controllers/DiscoveryController';
import { authenticateToken } from '@/middleware/auth';
import { aiRateLimitMw, discoveryRateLimitMw } from '@/middleware/rateLimit';
import { validateDiscoveryRequest, validateNLQuery } from '@/middleware/validation';
import { NextFunction, Request, Response, Router } from 'express';

const router = Router();
const controller = new DiscoveryController();

const asyncHandler =
  <T extends (req: Request, res: Response, next: NextFunction) => Promise<any>>(fn: T) =>
  (req: Request, res: Response, next: NextFunction) =>
    Promise.resolve(fn.call(controller, req, res, next)).catch(next);

// In dev weâ€™ll allow requests without a token; see auth middleware below
router.use(authenticateToken);

router.post('/', discoveryRateLimitMw, validateDiscoveryRequest, asyncHandler(controller.startDiscovery));
router.post('/query', aiRateLimitMw, validateNLQuery, asyncHandler(controller.processNaturalLanguageQuery));
router.post('/quality-rules', aiRateLimitMw, asyncHandler(controller.generateQualityRules));
router.post('/explain-violation', aiRateLimitMw, asyncHandler(controller.explainViolation));

router.get('/', asyncHandler(controller.listDiscoverySessions));
router.get('/:sessionId', asyncHandler(controller.getDiscoveryStatus));
router.delete('/:sessionId', asyncHandler(controller.deleteDiscoverySession));

export default router;



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\routes\index.ts
--------------------------------------------------------------------------------
import { HealthController } from '@/controllers/HealthController';
import { Router } from 'express';
import analysisRoutes from './analysis';
import discoveryRoutes from './discovery';

const router = Router();
const healthController = new HealthController();

// Health check routes
router.get('/health', healthController.checkHealth);
router.get('/health/ready', healthController.checkReadiness);
router.get('/health/live', healthController.checkLiveness);

// Feature routes
router.use('/discovery', discoveryRoutes);
router.use('/analysis', analysisRoutes);

// API documentation endpoint
router.get('/docs', (req, res) => {
  void req;
  res.json({
    service: 'CWIC AI Service',
    version: process.env.APP_VERSION || '1.0.0',
    description: 'AI-powered data discovery and governance service',
    endpoints: {
      discovery: {
        'POST /api/discovery': 'Start field discovery session',
        'GET /api/discovery/:sessionId': 'Get discovery status and results',
        'GET /api/discovery': 'List discovery sessions',
        'DELETE /api/discovery/:sessionId': 'Delete discovery session',
        'POST /api/discovery/query': 'Process natural language query',
        'POST /api/discovery/quality-rules': 'Generate quality rules',
        'POST /api/discovery/explain-violation': 'Explain data quality violation'
      },
      analysis: {
        'POST /api/analysis/schema': 'Analyze database schema',
        'POST /api/analysis/data-sample': 'Analyze data samples',
        'POST /api/analysis/quality-check': 'Perform quality analysis'
      },
      health: {
        'GET /api/health': 'Service health status',
        'GET /api/health/ready': 'Readiness check',
        'GET /api/health/live': 'Liveness check'
      }
    }
  });
});

export default router;



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\scripts\cleanup.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\scripts\migrate.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\scripts\seed.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\server.ts
--------------------------------------------------------------------------------
// src/server.ts
import { logger } from '@utils/logger';
import App from './app';

const PORT = Number(process.env.PORT ?? 3003);     // << default 3003, not 8003
const HOST = process.env.HOST || '0.0.0.0';

function start() {
  try {
    const expressApp = new App().getApp();

    // Ensure a simple health endpoint exists here (even if App already has one)
    expressApp.get('/health', (_req, res) => {
      res.json({ ok: true, service: 'ai-service', pid: process.pid });
    });

    const server = expressApp.listen(PORT, HOST, () => {
      logger.info(`ðŸš€ AI Service listening on http://${HOST}:${PORT}`);
      logger.info(`ðŸ“ Health: http://${HOST}:${PORT}/health`);
      logger.info(`ðŸ§­ Docs:   http://${HOST}:${PORT}/api/docs`);
      logger.info(`ðŸŒ± NODE_ENV=${process.env.NODE_ENV || 'development'}`);
    });

    server.on('error', (err: any) => {
      logger.error('HTTP server error:', {
        message: err?.message,
        code: err?.code,
        stack: err?.stack,
      });
    });

    const shutdown = (signal: string) => {
      logger.warn(`Received ${signal}. Shutting down...`);
      server.close(() => {
        logger.info('HTTP server closed');
        process.exit(0);
      });
      setTimeout(() => process.exit(1), 5000).unref();
    };

    process.on('SIGINT', () => shutdown('SIGINT'));
    process.on('SIGTERM', () => shutdown('SIGTERM'));

    process.on('uncaughtException', (err) => {
      logger.error('Uncaught exception:', { message: err.message, stack: err.stack });
    });
    process.on('unhandledRejection', (reason: any) => {
      logger.error('Unhandled rejection:', { reason: reason?.message || String(reason), stack: reason?.stack });
    });
  } catch (err: any) {
    logger.error('Fatal startup error:', { message: err.message, stack: err.stack });
  }
}

start();



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\services\AIService.ts
--------------------------------------------------------------------------------
import { openai } from '@config/openai';
import { logger } from '@utils/logger';
import { CacheService } from './CacheService';

export interface FieldDiscoveryRequest {
  schema: string;
  tableName: string;
  columns: Array<{
    name: string;
    type: string;
    nullable: boolean;
    description?: string;
  }>;
  sampleData?: any[];
  context?: string;
}

export interface FieldDiscoveryResponse {
  fields: Array<{
    name: string;
    type: string;
    classification: 'PII' | 'PHI' | 'Financial' | 'General';
    sensitivity: 'High' | 'Medium' | 'Low';
    description: string;
    suggestedRules: string[];
    dataPatterns: string[];
    businessContext: string;
  }>;
  recommendations: {
    governance: string[];
    quality: string[];
    compliance: string[];
  };
  confidence: number;
  isAiGenerated: boolean; // Track if this came from AI or fallback
}

export interface NaturalLanguageQuery {
  query: string;
  context?: {
    schemas: string[];
    tables: string[];
    fields: string[];
  };
}

export interface QueryResult {
  sql: string;
  explanation: string;
  tables: string[];
  fields: string[];
  confidence: number;
  warnings: string[];
  isAiGenerated: boolean;
}

export class AIService {
  private cacheService: CacheService;

  constructor() {
    this.cacheService = new CacheService();
  }

  public async discoverFields(request: FieldDiscoveryRequest): Promise<FieldDiscoveryResponse> {
    try {
      const cacheKey = `field_discovery:${JSON.stringify(request)}`;
      const cached = await this.cacheService.get(cacheKey);
      
      if (cached) {
        logger.info('Returning cached field discovery result');
        return JSON.parse(cached);
      }

      // Check if OpenAI is available
      if (!openai.isAvailable()) {
        logger.warn('OpenAI not available - using fallback field discovery');
        return this.fallbackFieldDiscovery(request);
      }

      const prompt = this.buildFieldDiscoveryPrompt(request);
      
      const response = await openai.createChatCompletion({
        model: process.env.OPENAI_MODEL || 'gpt-4',
        messages: [
          {
            role: 'system',
            content: `You are an expert data governance analyst specializing in field classification, 
                     data sensitivity analysis, and compliance requirements. Analyze database fields 
                     and provide comprehensive governance recommendations.`
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        max_tokens: parseInt(process.env.OPENAI_MAX_TOKENS || '4000'),
        temperature: parseFloat(process.env.OPENAI_TEMPERATURE || '0.1'),
        response_format: { type: 'json_object' }
      });

      if (!response || !response.choices[0]?.message?.content) {
        logger.warn('No response from OpenAI - using fallback');
        return this.fallbackFieldDiscovery(request);
      }

      const result = JSON.parse(response.choices[0].message.content) as FieldDiscoveryResponse;
      result.isAiGenerated = true;
      
      // Cache the result for 1 hour
      await this.cacheService.set(cacheKey, JSON.stringify(result), 3600);
      
      logger.info('Field discovery completed successfully with AI', {
        schema: request.schema,
        table: request.tableName,
        fieldsAnalyzed: request.columns.length
      });

      return result;

    } catch (error) {
      logger.error('AI field discovery failed, using fallback:', error);
      return this.fallbackFieldDiscovery(request);
    }
  }

  public async processNaturalLanguageQuery(query: NaturalLanguageQuery): Promise<QueryResult> {
    try {
      const cacheKey = `nlq:${JSON.stringify(query)}`;
      const cached = await this.cacheService.get(cacheKey);
      
      if (cached) {
        logger.info('Returning cached natural language query result');
        return JSON.parse(cached);
      }

      // Check if OpenAI is available
      if (!openai.isAvailable()) {
        logger.warn('OpenAI not available - using fallback query processing');
        return this.fallbackNaturalLanguageQuery(query);
      }

      const prompt = this.buildNLQueryPrompt(query);
      
      const response = await openai.createChatCompletion({
        model: process.env.OPENAI_MODEL || 'gpt-4',
        messages: [
          {
            role: 'system',
            content: `You are an expert SQL analyst. Convert natural language queries into 
                     SQL statements with detailed explanations and safety warnings.`
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        max_tokens: parseInt(process.env.OPENAI_MAX_TOKENS || '4000'),
        temperature: parseFloat(process.env.OPENAI_TEMPERATURE || '0.1'),
        response_format: { type: 'json_object' }
      });

      if (!response || !response.choices[0]?.message?.content) {
        logger.warn('No response from OpenAI - using fallback');
        return this.fallbackNaturalLanguageQuery(query);
      }

      const result = JSON.parse(response.choices[0].message.content) as QueryResult;
      result.isAiGenerated = true;
      
      // Cache the result for 30 minutes
      await this.cacheService.set(cacheKey, JSON.stringify(result), 1800);
      
      logger.info('Natural language query processed successfully with AI');
      return result;

    } catch (error) {
      logger.error('AI query processing failed, using fallback:', error);
      return this.fallbackNaturalLanguageQuery(query);
    }
  }

  public async generateQualityRules(fieldInfo: any): Promise<string[]> {
    try {
      if (!openai.isAvailable()) {
        logger.warn('OpenAI not available - using fallback quality rules');
        return this.fallbackQualityRules(fieldInfo);
      }

      const prompt = `Generate data quality rules for the following field:
        Field Name: ${fieldInfo.name}
        Data Type: ${fieldInfo.type}
        Classification: ${fieldInfo.classification}
        Sample Data: ${JSON.stringify(fieldInfo.sampleData || [])}
        
        Return a JSON array of specific, actionable quality rules.`;

      const response = await openai.createChatCompletion({
        model: process.env.OPENAI_MODEL || 'gpt-4',
        messages: [
          {
            role: 'system',
            content: 'You are a data quality expert. Generate specific, measurable quality rules.'
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        max_tokens: 1000,
        temperature: 0.1,
        response_format: { type: 'json_object' }
      });

      if (!response || !response.choices[0]?.message?.content) {
        return this.fallbackQualityRules(fieldInfo);
      }

      const result = JSON.parse(response.choices[0].message.content);
      return result.rules || this.fallbackQualityRules(fieldInfo);

    } catch (error) {
      logger.error('AI quality rule generation failed, using fallback:', error);
      return this.fallbackQualityRules(fieldInfo);
    }
  }

  public async explainViolation(violation: any): Promise<string> {
    try {
      if (!openai.isAvailable()) {
        return this.fallbackViolationExplanation(violation);
      }

      const prompt = `Explain this data quality violation in simple terms:
        Rule: ${violation.rule}
        Field: ${violation.field}
        Value: ${violation.value}
        Error: ${violation.error}
        
        Provide a clear explanation and suggested fix.`;

      const response = await openai.createChatCompletion({
        model: process.env.OPENAI_MODEL || 'gpt-4',
        messages: [
          {
            role: 'system',
            content: 'You are a helpful data analyst explaining quality issues.'
          },
          {
            role: 'user',
            content: prompt
          }
        ],
        max_tokens: 500,
        temperature: 0.3
      });

      if (!response || !response.choices[0]?.message?.content) {
        return this.fallbackViolationExplanation(violation);
      }

      return response.choices[0].message.content;

    } catch (error) {
      logger.error('AI violation explanation failed, using fallback:', error);
      return this.fallbackViolationExplanation(violation);
    }
  }

  // Fallback methods for when AI is not available
  private fallbackFieldDiscovery(request: FieldDiscoveryRequest): FieldDiscoveryResponse {
    const fields = request.columns.map(col => {
      const classification = this.classifyFieldBasic(col.name, col.type);
      const sensitivity = this.determineSensitivityBasic(classification);
      
      return {
        name: col.name,
        type: col.type,
        classification,
        sensitivity,
        description: `${col.type} field containing ${classification.toLowerCase()} data`,
        suggestedRules: this.getBasicQualityRules(col.type, classification),
        dataPatterns: this.detectBasicPatterns(col.name, col.type),
        businessContext: `Data field in ${request.tableName} table`
      };
    });

    return {
      fields,
      recommendations: {
        governance: ['Implement data classification policy', 'Set up access controls'],
        quality: ['Add data validation rules', 'Monitor data quality metrics'],
        compliance: ['Review compliance requirements', 'Implement audit logging']
      },
      confidence: 0.7, // Lower confidence for rule-based classification
      isAiGenerated: false
    };
  }

  private fallbackNaturalLanguageQuery(query: NaturalLanguageQuery): QueryResult {
    // Simple keyword-based SQL generation
    const lowerQuery = query.query.toLowerCase();
    let sql = 'SELECT ';
    
    if (lowerQuery.includes('count') || lowerQuery.includes('how many')) {
      sql += 'COUNT(*) ';
    } else {
      sql += '* ';
    }
    
    sql += 'FROM ';
    
    // Try to detect table names from context or query
    if (query.context?.tables && query.context.tables.length > 0) {
      sql += query.context.tables[0];
    } else if (lowerQuery.includes('user')) {
      sql += 'users';
    } else if (lowerQuery.includes('order')) {
      sql += 'orders';
    } else {
      sql += 'table_name';
    }

    return {
      sql,
      explanation: 'Basic SQL query generated using keyword matching (AI not available)',
      tables: query.context?.tables || ['table_name'],
      fields: query.context?.fields || ['*'],
      confidence: 0.3, // Low confidence for keyword-based generation
      warnings: ['AI service not available - this is a basic keyword-based query'],
      isAiGenerated: false
    };
  }

  private fallbackQualityRules(fieldInfo: any): string[] {
    const rules = [];
    
    if (fieldInfo.type?.includes('varchar') || fieldInfo.type?.includes('text')) {
      rules.push('Validate string length');
      rules.push('Check for null values');
    }
    
    if (fieldInfo.type?.includes('int') || fieldInfo.type?.includes('number')) {
      rules.push('Validate numeric range');
      rules.push('Check for negative values');
    }
    
    if (fieldInfo.name?.toLowerCase().includes('email')) {
      rules.push('Validate email format');
    }
    
    if (fieldInfo.name?.toLowerCase().includes('phone')) {
      rules.push('Validate phone number format');
    }
    
    return rules.length > 0 ? rules : ['Basic data validation required'];
  }

  private fallbackViolationExplanation(violation: any): string {
    return `Data quality issue detected in field "${violation.field}". The rule "${violation.rule}" failed because: ${violation.error}. Please review the data and apply appropriate corrections.`;
  }

  // Helper methods for basic classification
  private classifyFieldBasic(name: string, type: string): 'PII' | 'PHI' | 'Financial' | 'General' {
    const lowerName = name.toLowerCase();
    
    if (lowerName.includes('email') || lowerName.includes('phone') || lowerName.includes('name')) {
      return 'PII';
    }
    if (lowerName.includes('medical') || lowerName.includes('health')) {
      return 'PHI';
    }
    if (lowerName.includes('payment') || lowerName.includes('amount') || lowerName.includes('price')) {
      return 'Financial';
    }
    
    return 'General';
  }

  private determineSensitivityBasic(classification: string): 'High' | 'Medium' | 'Low' {
    switch (classification) {
      case 'PHI': return 'High';
      case 'PII': case 'Financial': return 'Medium';
      default: return 'Low';
    }
  }

  private getBasicQualityRules(type: string, classification: string): string[] {
    const rules = ['Not null validation'];
    
    if (type.includes('varchar')) {
      rules.push('String length validation');
    }
    
    if (classification === 'PII' || classification === 'PHI') {
      rules.push('Data encryption required');
    }
    
    return rules;
  }

  private detectBasicPatterns(name: string, type: string): string[] {
    const patterns = [];
    
    if (name.toLowerCase().includes('email')) {
      patterns.push('Email format');
    }
    if (name.toLowerCase().includes('phone')) {
      patterns.push('Phone number format');
    }
    if (type.includes('date') || type.includes('timestamp')) {
      patterns.push('Date format');
    }
    
    return patterns;
  }

  // Existing helper methods...
  private buildFieldDiscoveryPrompt(request: FieldDiscoveryRequest): string {
    return `Analyze the following database table and provide comprehensive field classification:

Schema: ${request.schema}
Table: ${request.tableName}
Context: ${request.context || 'Not provided'}

Columns:
${request.columns.map(col => 
  `- ${col.name} (${col.type}) ${col.nullable ? 'NULLABLE' : 'NOT NULL'} ${col.description ? '- ' + col.description : ''}`
).join('\n')}

${request.sampleData ? `Sample Data (first 5 rows):
${JSON.stringify(request.sampleData.slice(0, 5), null, 2)}` : ''}

Please provide a JSON response with comprehensive field analysis.`;
  }

  private buildNLQueryPrompt(query: NaturalLanguageQuery): string {
    const contextInfo = query.context ? `
Available Context:
- Schemas: ${query.context.schemas?.join(', ') || 'None'}
- Tables: ${query.context.tables?.join(', ') || 'None'}
- Fields: ${query.context.fields?.join(', ') || 'None'}
` : '';

    return `Convert this natural language query to SQL:
"${query.query}"

${contextInfo}

Please provide a JSON response with SQL and explanation.`;
  }
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\services\AnalysisService.ts
--------------------------------------------------------------------------------
// src/services/AnalysisService.ts
import { APIError } from '@/utils/errors';
import { logger } from '@/utils/logger';

// Import concrete classes but DO NOT rely on their exported types
// (your current module doesn't export DataProcessor/DataSample types)
import * as DataProcessorMod from '@/processors/DataProcessor';
import * as SchemaProcessorMod from '@/processors/SchemaProcessor';
import { AIService } from './AIService';

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Minimal contracts (kept small to avoid coupling & missing exports)
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export type Severity = 'Low' | 'Medium' | 'High' | 'Critical';
export type RuleStatus = 'passed' | 'warning' | 'failed';

export interface DataSample {
  columnName: string;
  values: unknown[];
}

export interface QualityIssue {
  column: string;
  type:
    | 'null_values'
    | 'format_inconsistency'
    | 'out_of_range'
    | 'uniqueness'
    | 'referential'
    | 'custom';
  severity: Severity;
  count: number;
  sample?: unknown[];
  message?: string;
}

export interface IDataProcessor {
  analyzeSampleData(
    samples: DataSample[],
  ): Promise<{ analysis: Record<string, unknown>[]; qualityIssues: QualityIssue[] }>;
}

export interface SchemaInfo {
  name: string;
  // optional extra fields your processor might use
  [k: string]: unknown;
}

export interface ISchemaProcessor {
  processSchema(schema: SchemaInfo): Promise<unknown>;
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Result types
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export interface QualityRuleResult {
  ruleId: string;
  ruleName: string;
  status: RuleStatus;
  testedRecords: number;
  passedRecords: number;
  failedRecords: number;
  successRate: number; // 0..100
  aiExplanation?: string;
  recommendations?: string[];
}

export interface AnalysisSummary {
  totalColumns: number;
  qualityIssues: number;
  highSeverityIssues: number;
}

export interface DataSampleAnalysisResult {
  analysis: ReadonlyArray<Record<string, unknown>>;
  qualityIssues: ReadonlyArray<QualityIssue>;
  recommendations: ReadonlyArray<string>;
  summary: AnalysisSummary;
  analysisMetadata: {
    analyzedAt: string;
    analyzedBy: string;
    version: string;
  };
}

export interface SchemaAIInsights {
  overallAssessment: string;
  riskAreas: string[];
  complianceGaps: string[];
  optimizationOpportunities: string[];
}

export interface SchemaAnalysisResult {
  processed: unknown;
  aiInsights: SchemaAIInsights;
  analysisMetadata: {
    analyzedAt: string;
    analyzedBy: string;
    version: string;
  };
}

export interface QualityCheckResult {
  dataSourceId: string;
  results: ReadonlyArray<QualityRuleResult>;
  summary: {
    totalRules: number;
    passed: number;
    failed: number;
    warnings: number;
  };
  analysisMetadata: {
    analyzedAt: string;
    analyzedBy: string;
    version: string;
  };
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Utils
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

const SERVICE_VERSION = '1.0';

function asApiError(err: unknown, fallback: string, status = 500): APIError {
  if (err instanceof APIError) return err;
  const msg = err instanceof Error ? err.message : fallback;
  return new APIError(msg, status, err);
}

async function withTimeout<T>(p: Promise<T>, ms: number, label: string): Promise<T> {
  let t: NodeJS.Timeout | undefined;
  try {
    const timeout = new Promise<never>((_, rej) =>
      (t = setTimeout(() => rej(new APIError(`${label} timed out after ${ms}ms`, 504)), ms)),
    );
    return await Promise.race([p, timeout]);
  } finally {
    if (t) clearTimeout(t);
  }
}

function isHigh(sev: Severity): boolean {
  return sev === 'High' || sev === 'Critical';
}

/* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
 * Service
 * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

export class AnalysisService {
  private readonly schemaProcessor: ISchemaProcessor;
  private readonly dataProcessor: IDataProcessor;
  private readonly ai: AIService;
  private readonly aiTimeoutMs: number;

  constructor(deps?: {
    schemaProcessor?: ISchemaProcessor;
    dataProcessor?: IDataProcessor;
    aiService?: AIService;
    aiTimeoutMs?: number;
  }) {
    // Instantiate from modules if not injected
    const DefaultSchemaProcessor =
    ( SchemaProcessorMod as any).SchemaProcessor ?? (SchemaProcessorMod as any).default;
    const DefaultDataProcessor =
    (DataProcessorMod as any).DataProcessor ?? (DataProcessorMod as any).default;


    this.schemaProcessor = deps?.schemaProcessor ?? new DefaultSchemaProcessor();
    this.dataProcessor = deps?.dataProcessor ?? new DefaultDataProcessor();
    this.ai = deps?.aiService ?? new AIService();
    this.aiTimeoutMs = deps?.aiTimeoutMs ?? Number(process.env.AI_TIMEOUT_MS ?? 8000);
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Schema Analysis â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  public async analyzeSchema(schema: SchemaInfo, userId: string): Promise<SchemaAnalysisResult> {
    try {
      this.assertUser(userId);
      this.assertSchema(schema);

      logger.info('AnalysisService: schema analysis start', { userId, schema: schema.name });
      const processed = await this.schemaProcessor.processSchema(schema);

      const aiInsights = await this.safeSchemaInsights(processed);

      const res: SchemaAnalysisResult = {
        processed,
        aiInsights,
        analysisMetadata: {
          analyzedAt: new Date().toISOString(),
          analyzedBy: userId,
          version: SERVICE_VERSION,
        },
      };

      logger.info('AnalysisService: schema analysis complete', { userId, schema: schema.name });
      return res;
    } catch (err) {
      logger.error('AnalysisService: schema analysis error', { error: err });
      throw asApiError(err, 'Schema analysis failed', 500);
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Data Sample Analysis â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  public async analyzeDataSample(samples: DataSample[], userId: string): Promise<DataSampleAnalysisResult> {
    try {
      this.assertUser(userId);
      this.assertSamples(samples);

      logger.info('AnalysisService: data sample analysis start', { userId, samples: samples.length });

      const { analysis, qualityIssues } = await this.dataProcessor.analyzeSampleData(samples);

      const recommendations = await this.buildDataRecommendations(analysis, qualityIssues);

      const res: DataSampleAnalysisResult = {
        analysis,
        qualityIssues,
        recommendations,
        summary: {
          totalColumns: samples.length,
          qualityIssues: qualityIssues.length,
          highSeverityIssues: qualityIssues.filter((q) => isHigh(q.severity)).length,
        },
        analysisMetadata: {
          analyzedAt: new Date().toISOString(),
          analyzedBy: userId,
          version: SERVICE_VERSION,
        },
      };

      logger.info('AnalysisService: data sample analysis complete', {
        userId,
        samplesAnalyzed: samples.length,
        issuesFound: qualityIssues.length,
      });
      return res;
    } catch (err) {
      logger.error('AnalysisService: data sample analysis error', { error: err });
      throw asApiError(err, 'Data sample analysis failed', 500);
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Quality Check (mocked engine) â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  public async performQualityCheck(
    dataSourceId: string,
    rules: ReadonlyArray<Record<string, unknown>> | undefined,
    userId: string,
  ): Promise<QualityCheckResult> {
    try {
      this.assertUser(userId);
      if (!dataSourceId) throw new APIError('dataSourceId is required', 400);

      logger.info('AnalysisService: quality check start', {
        userId,
        dataSourceId,
        rules: rules?.length ?? 0,
      });

      const base = this.mockQualityResults(rules ?? []);
      const enhanced = await this.enhanceRuleResults(base);

      const summary = {
        totalRules: rules?.length ?? 0,
        passed: enhanced.filter((r) => r.status === 'passed').length,
        failed: enhanced.filter((r) => r.status === 'failed').length,
        warnings: enhanced.filter((r) => r.status === 'warning').length,
      };

      const res: QualityCheckResult = {
        dataSourceId,
        results: enhanced,
        summary,
        analysisMetadata: {
          analyzedAt: new Date().toISOString(),
          analyzedBy: userId,
          version: SERVICE_VERSION,
        },
      };

      logger.info('AnalysisService: quality check complete', {
        userId,
        dataSourceId,
        rulesChecked: rules?.length ?? 0,
      });
      return res;
    } catch (err) {
      logger.error('AnalysisService: quality check error', { error: err });
      throw asApiError(err, 'Quality check failed', 500);
    }
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   * Private: AI insights for schema
   * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async safeSchemaInsights(processed: unknown): Promise<SchemaAIInsights> {
    type TableGov = {
      sensitivity?: Severity | string;
      classification?: 'General' | 'PII' | 'PHI' | 'Financial' | string;
      complianceFrameworks?: string[];
      suggestedPolicies?: string[];
    };
    type MinimalProcessed = { name?: string; tables?: { governance?: TableGov }[] };

    const schema = (processed as MinimalProcessed) ?? {};
    const tables: { governance?: TableGov }[] = Array.isArray(schema.tables) ? [...schema.tables] : [];

    // Safety: ensure mutable arrays (avoid readonly assignment issues)
    const snapshot = tables.slice(0, 100).map((t) => ({
      sensitivity: (t.governance?.sensitivity ?? 'Low').toString(),
      classification: (t.governance?.classification ?? 'General').toString(),
      frameworks: Array.isArray(t.governance?.complianceFrameworks)
        ? [...t.governance!.complianceFrameworks!]
        : ([] as string[]),
      policyCount: Array.isArray(t.governance?.suggestedPolicies) ? t.governance!.suggestedPolicies!.length : 0,
    }));

    // If AI service exposes a summarization helper, call it. Otherwise, fall back.
    const hasSummarize =
      this.ai && (typeof (this.ai as any).safeSummarize === 'function' || typeof (this.ai as any).summarize === 'function');

    let overallAssessment = this.fallbackOverallAssessment(tables);
    if (hasSummarize) {
      try {
        const fn = (this.ai as any).safeSummarize ?? (this.ai as any).summarize;
        const out = await withTimeout(
          Promise.resolve(fn.call(this.ai, { topic: 'schema-assessment', payload: { tableCount: tables.length, snapshot } })),
          this.aiTimeoutMs,
          'AI schema assessment',
        );
        if (typeof out === 'string' && out.trim()) overallAssessment = out.trim();
      } catch {
        // keep fallback
      }
    }

    return {
      overallAssessment,
      riskAreas: this.deriveRiskAreas(tables),
      complianceGaps: this.deriveComplianceGaps(tables),
      optimizationOpportunities: this.deriveOptimizations(tables),
    };
  }

  private fallbackOverallAssessment(
    tables: ReadonlyArray<{ governance?: { sensitivity?: string; classification?: string; complianceFrameworks?: string[] } }>,
  ): string {
    const total = tables.length || 1;
    const sensitive = tables.filter((t) => (t.governance?.sensitivity ?? 'Low') !== 'Low').length;
    const frameworks = new Set<string>();
    for (const t of tables) {
      const list = t.governance?.complianceFrameworks ?? [];
      for (let i = 0; i < list.length; i++) frameworks.add(list[i] as string);
    }
    if (sensitive / total > 0.5) {
      return `High-risk schema: ${sensitive}/${total} tables contain non-low sensitivity data. ${frameworks.size} compliance frameworks detected. Prioritize governance.`;
    }
    if (sensitive > 0) {
      return `Moderate-risk schema: ${sensitive} sensitive tables. Frameworks: ${[...frameworks].join(', ') || 'None'}. Maintain standard governance.`;
    }
    return 'Low-risk schema: mostly general data. Basic governance practices are sufficient.';
  }

  private deriveRiskAreas(tables: ReadonlyArray<{ governance?: { sensitivity?: string; classification?: string } }>): string[] {
    const risks: string[] = [];
    const hi = tables.filter(
      (t) => (t.governance?.sensitivity ?? 'Low') === 'High' || (t.governance?.sensitivity ?? 'Low') === 'Critical',
    ).length;
    if (hi) risks.push(`${hi} table(s) contain highly sensitive data (strict access & encryption).`);

    const pii = tables.filter((t) => t.governance?.classification === 'PII').length;
    if (pii) risks.push(`${pii} table(s) contain PII; ensure privacy controls & minimization.`);

    const phi = tables.filter((t) => t.governance?.classification === 'PHI').length;
    if (phi) risks.push(`${phi} table(s) contain PHI; HIPAA safeguards required.`);

    return risks;
  }

  private deriveComplianceGaps(tables: ReadonlyArray<{ governance?: { complianceFrameworks?: string[] } }>): string[] {
    const frameworks = new Set<string>();
    for (const t of tables) {
      const list = t.governance?.complianceFrameworks ?? [];
      for (let i = 0; i < list.length; i++) frameworks.add(list[i] as string);
    }
    const gaps: string[] = [];
    if (frameworks.has('GDPR')) gaps.push('Validate GDPR data subject rights, retention, and DPIA for high-risk processing.');
    if (frameworks.has('HIPAA')) gaps.push('Perform HIPAA security risk analysis and enforce PHI audit controls.');
    if (frameworks.has('PCI-DSS')) gaps.push('Confirm segmentation & encryption for cardholder data.');
    return gaps;
  }

  private deriveOptimizations(
    tables: ReadonlyArray<{ governance?: { suggestedPolicies?: string[]; classification?: string } }>,
  ): string[] {
    const out: string[] = [];
    let noPolicy = 0;
    let general = 0;
    for (let i = 0; i < tables.length; i++) {
      const g = tables[i]?.governance;
      if (!g) continue;
      if (!Array.isArray(g.suggestedPolicies) || g.suggestedPolicies.length === 0) noPolicy++;
      if (g.classification === 'General') general++;
    }
    if (noPolicy) out.push(`${noPolicy} table(s) lack governance policies; define baseline classification and retention.`);
    if (tables.length && general / tables.length > 0.8) {
      out.push('Large share of tables classified as General; consider targeted reclassification review.');
    }
    out.push('Automate periodic discovery and policy drift detection.');
    out.push('Schedule quarterly compliance checks for sensitive domains.');
    return out;
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   * Private: Data recommendations
   * â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private async buildDataRecommendations(
    analysis: ReadonlyArray<Record<string, unknown>>,
    issues: ReadonlyArray<QualityIssue>,
  ): Promise<string[]> {
    const recs = new Set<string>();
    const hi = issues.filter((q) => isHigh(q.severity)).length;
    if (hi) recs.add(`Address ${hi} high/critical quality issues immediately.`);

    if (issues.some((q) => q.type === 'null_values')) recs.add('Add NOT NULL/CHECK constraints or upstream validation.');
    if (issues.some((q) => q.type === 'format_inconsistency')) recs.add('Standardize formats with validation/canonicalization.');

    // Optional AI tip if method exists
    const hasSummarize =
      this.ai && (typeof (this.ai as any).safeSummarize === 'function' || typeof (this.ai as any).summarize === 'function');
    if (hasSummarize) {
      try {
        const fn = (this.ai as any).safeSummarize ?? (this.ai as any).summarize;
        const maybe = await withTimeout(
          Promise.resolve(fn.call(this.ai, { topic: 'data-quality-highlights', payload: { issues: issues.slice(0, 50) } })),
          Math.min(this.aiTimeoutMs, 3000),
          'AI data tip',
        );
        if (typeof maybe === 'string' && maybe.trim()) recs.add(maybe.trim());
      } catch {
        // ignore AI failure
      }
    }

    recs.add('Enable continuous monitoring & alerting for key quality dimensions.');
    recs.add('Publish a data quality dashboard with issue backlog & owners.');

    return Array.from(recs);
  }

  private mockQualityResults(_rules: ReadonlyArray<Record<string, unknown>>): QualityRuleResult[] {
    return [
      {
        ruleId: 'email_format',
        ruleName: 'Email Format Validation',
        status: 'passed',
        testedRecords: 1000,
        passedRecords: 998,
        failedRecords: 2,
        successRate: 99.8,
      },
      {
        ruleId: 'phone_format',
        ruleName: 'Phone Number Format',
        status: 'warning',
        testedRecords: 1000,
        passedRecords: 950,
        failedRecords: 50,
        successRate: 95.0,
      },
      {
        ruleId: 'null_check',
        ruleName: 'Required Field Validation',
        status: 'failed',
        testedRecords: 1000,
        passedRecords: 800,
        failedRecords: 200,
        successRate: 80.0,
      },
    ];
  }

  private async enhanceRuleResults(results: ReadonlyArray<QualityRuleResult>): Promise<QualityRuleResult[]> {
    const out: QualityRuleResult[] = [];
    const hasSummarize =
      this.ai && (typeof (this.ai as any).safeSummarize === 'function' || typeof (this.ai as any).summarize === 'function');
    for (let i = 0; i < results.length; i++) {
      const r = results[i];
      const baseExp = this.baseRuleExplanation(r);
      const baseRecs = this.baseRuleRecommendations(r);

      let aiNote: string | undefined;
      if (hasSummarize) {
        try {
          const fn = (this.ai as any).safeSummarize ?? (this.ai as any).summarize;
          const maybe = await withTimeout(
            Promise.resolve(fn.call(this.ai, { topic: 'quality-rule-explanation', payload: { id: r.ruleId, status: r.status, rate: r.successRate } })),
            Math.min(this.aiTimeoutMs, 3000),
            `AI note for ${r.ruleId}`,
          );
          if (typeof maybe === 'string' && maybe.trim()) aiNote = maybe.trim();
        } catch {
          // ignore
        }
      }

      out.push({
        ...r,
        aiExplanation: aiNote ?? baseExp,
        recommendations: Array.from(new Set([...(r.recommendations ?? []), ...baseRecs])),
      });
    }
    return out;
  }

  private baseRuleExplanation(r: QualityRuleResult): string {
    if (r.status === 'passed') return `Rule "${r.ruleName}" performing well (${r.successRate}% success).`;
    if (r.status === 'warning')
      return `Rule "${r.ruleName}" shows moderate issues (${r.failedRecords} failures). Investigate upstream validation.`;
    return `Rule "${r.ruleName}" failing (${r.failedRecords} failures). Immediate remediation required.`;
  }

  private baseRuleRecommendations(r: QualityRuleResult): string[] {
    const recs: string[] = [];
    if (r.status === 'failed') {
      recs.push('Identify root cause and add upstream validation.');
      recs.push('Cleanse/backfill existing bad records.');
      recs.push('Add tests & monitoring to prevent regressions.');
    } else if (r.status === 'warning') {
      recs.push('Track trend; tighten validation where safe.');
      recs.push('Add sampling-based alerts.');
    }
    return recs;
  }

  /* â”€â”€â”€â”€â”€â”€â”€â”€â”€ Guards â”€â”€â”€â”€â”€â”€â”€â”€â”€ */

  private assertUser(userId: string): void {
    if (!userId || typeof userId !== 'string') throw new APIError('Invalid userId', 400);
  }

  private assertSchema(schema: unknown): asserts schema is SchemaInfo {
    if (!schema || typeof (schema as SchemaInfo).name !== 'string') {
      throw new APIError('Invalid schema payload', 400);
    }
  }

  private assertSamples(samples: unknown): asserts samples is DataSample[] {
    if (!Array.isArray(samples)) throw new APIError('samples must be an array', 400);
    if (samples.length === 0) throw new APIError('At least one sample is required', 400);
    for (let i = 0; i < samples.length; i++) {
      const s = samples[i] as Partial<DataSample>;
      if (!s || typeof s.columnName !== 'string' || !Array.isArray(s.values)) {
        throw new APIError(`Invalid sample at index ${i}`, 400);
      }
    }
  }
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\services\CacheService.ts
--------------------------------------------------------------------------------
// src/services/CacheService.ts
import { redis } from '@/config/redis';
import { logger } from '@/utils/logger';

function toSeconds(ms: number): number {
  return Math.max(1, Math.floor(ms / 1000));
}

export class CacheService {
  private readonly defaultTTLSeconds: number;

  constructor() {
    const raw = process.env.REDIS_TTL ?? '3600';
    const ttlNum = Number(raw);
    // If someone passed milliseconds (very large), normalize to seconds.
    this.defaultTTLSeconds = ttlNum > 7 * 24 * 3600 ? toSeconds(ttlNum) : (ttlNum || 3600);
  }

  /* ----------------------- Basic primitives ----------------------- */

  public async get(key: string): Promise<string | null> {
    try {
      return await redis.get(key);
    } catch (error) {
      logger.error('Cache GET error', { key, error });
      return null;
    }
  }

  public async getJSON<T = unknown>(key: string): Promise<T | null> {
    const v = await this.get(key);
    if (v == null) return null;
    try {
      return JSON.parse(v) as T;
    } catch {
      return null;
    }
  }

  /**
   * Set a value with TTL (seconds). Accepts string or any JSON-serializable value.
   * Works with both:
   *  - node-redis v4: client.set(key, value, { EX: ttl })
   *  - custom wrappers: redis.set(key, value, ttl)
   */
  public async set(key: string, value: unknown, ttlSeconds?: number): Promise<void> {
    const ttl = ttlSeconds ?? this.defaultTTLSeconds;
    const toStore = typeof value === 'string' ? value : JSON.stringify(value);

    try {
      // Prefer modern API via underlying client (node-redis v4)
      const client: any = redis.getClient?.() ?? null;
      if (client && typeof client.set === 'function') {
        try {
          await client.set(key, toStore, { EX: ttl });
          return;
        } catch {
          // fall through to wrapper style
        }
      }

      // Fallback to wrapper style: redis.set(key, value, ttl)
      const maybe = (redis as any).set;
      if (typeof maybe === 'function') {
        if (maybe.length >= 3) {
          await maybe.call(redis, key, toStore, ttl);
        } else {
          await maybe.call(redis, key, toStore);
          // If wrapper ignores TTL, try to set it via EXPIRE
          if (client && typeof client.expire === 'function') {
            await client.expire(key, ttl);
          }
        }
      }
    } catch (error) {
      logger.error('Cache SET error', { key, error });
      // don't throw â€” cache is best effort
    }
  }

  public async del(key: string): Promise<void> {
    try {
      await redis.del(key);
    } catch (error) {
      logger.error('Cache DEL error', { key, error });
    }
  }

  /**
   * Normalize EXISTS return to boolean whether itâ€™s number or boolean.
   */
  public async exists(key: string): Promise<boolean> {
    try {
      const raw = await (redis as any).exists?.(key);
      const n = typeof raw === 'number' ? raw : raw ? 1 : 0;
      return n > 0;
    } catch (error) {
      logger.error('Cache EXISTS error', { key, error });
      return false;
    }
  }

  /* ----------------------- Bulk helpers ----------------------- */

  /**
   * Flush keys by pattern safely. Uses scanIterator (node-redis v4),
   * falls back to SCAN or KEYS if needed.
   */
  public async flushPattern(pattern: string): Promise<void> {
    try {
      const client: any = redis.getClient?.() ?? null;
      if (!client) return;

      const batch: string[] = [];
      const flushBatch = async () => {
        if (batch.length) {
          await client.del(batch.splice(0, batch.length));
        }
      };

      if (typeof client.scanIterator === 'function') {
        // Best path: async iterator with MATCH/COUNT
        for await (const key of client.scanIterator({ MATCH: pattern, COUNT: 1000 })) {
          batch.push(key as string);
          if (batch.length >= 1000) await flushBatch();
        }
        await flushBatch();
        return;
      }

      if (typeof client.scan === 'function') {
        // Fallback: manual SCAN loop
        let cursor = '0';
        do {
          const [next, keys]: [string, string[]] = await client.scan(cursor, {
            MATCH: pattern,
            COUNT: 1000,
          });
          cursor = next;
          if (keys?.length) {
            batch.push(...keys);
            if (batch.length >= 1000) await flushBatch();
          }
        } while (cursor !== '0');
        await flushBatch();
        return;
      }

      if (typeof client.keys === 'function') {
        // Last resort: KEYS (blocking)
        const keys: string[] = await client.keys(pattern);
        if (keys.length) await client.del(keys);
      }
    } catch (error) {
      logger.error('Cache FLUSH PATTERN error', { pattern, error });
    }
  }

  /* ----------------------- Stats & diagnostics ----------------------- */

  public async getStats(): Promise<Record<string, string | number>> {
    try {
      const client: any = redis.getClient?.() ?? null;
      if (!client || typeof client.info !== 'function') return {};
      const info: string = await client.info('stats');
      return this.parseRedisInfo(info);
    } catch (error) {
      logger.error('Cache STATS error', { error });
      return {};
    }
  }

  private parseRedisInfo(info: string): Record<string, string | number> {
    const stats: Record<string, string | number> = {};
    const lines = info.split(/\r?\n/);

    for (const line of lines) {
      if (!line || line.startsWith('#')) continue; // skip comments / blanks
      const idx = line.indexOf(':');
      if (idx <= 0) continue;

      const key = line.slice(0, idx).trim();
      const raw = line.slice(idx + 1).trim();

      const n = Number(raw);
      stats[key] = Number.isFinite(n) && raw !== '' ? n : raw;
    }
    return stats;
    }
}

// Optional singleton export
export const cacheService = new CacheService();



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\services\DefaultDataProcessor.ts
--------------------------------------------------------------------------------
// src/services/DefaultDataProcessor.ts
import type { DataSample, IDataProcessor, QualityIssue } from '@/services/AnalysisService';

export class DefaultDataProcessor implements IDataProcessor {
  constructor(private readonly log: (msg: string, meta?: unknown) => void = () => {}) {}

  async analyzeSampleData(
    samples: DataSample[],
  ): Promise<{ analysis: Record<string, unknown>[]; qualityIssues: QualityIssue[] }> {
    this.log('DefaultDataProcessor.analyzeSampleData', { columns: samples.length });

    const analysis: Record<string, unknown>[] = [];
    const qualityIssues: QualityIssue[] = [];

    for (const s of samples) {
      const values = Array.isArray(s.values) ? s.values : [];
      const nonNull = values.filter(v => v !== null && v !== undefined);
      const nulls = values.length - nonNull.length;
      const uniqueCount = new Set(nonNull.map(v => JSON.stringify(v))).size;

      analysis.push({
        column: s.columnName,
        count: values.length,
        nulls,
        nullRate: values.length ? +(nulls / values.length * 100).toFixed(2) : 0,
        uniqueCount,
        sample: nonNull.slice(0, 5),
      });

      if (nulls > 0) {
        qualityIssues.push({
          column: s.columnName,
          type: 'null_values',
          severity: nulls / Math.max(values.length, 1) > 0.2 ? 'High' : 'Low',
          count: nulls,
          message: 'Column contains null/undefined values',
          sample: values.slice(0, 5),
        });
      }

      const lower = s.columnName.toLowerCase();
      if (lower.includes('email')) {
        const bad = nonNull.filter(v => typeof v === 'string' && !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(v));
        if (bad.length) {
          qualityIssues.push({
            column: s.columnName,
            type: 'format_inconsistency',
            severity: bad.length / Math.max(nonNull.length, 1) > 0.05 ? 'Medium' : 'Low',
            count: bad.length,
            message: 'Invalid email addresses detected',
            sample: bad.slice(0, 5),
          });
        }
      }
    }

    return { analysis, qualityIssues };
  }
}

export default DefaultDataProcessor;



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\services\DiscoveryService.ts
--------------------------------------------------------------------------------
// src/services/DiscoveryService.ts
import { db } from '@/config/database';
import { APIError } from '@/utils/errors';
import { logger } from '@/utils/logger';
import { v4 as uuidv4 } from 'uuid';
import { AIService, type FieldDiscoveryRequest } from './AIService';

export interface DiscoverySession {
  sessionId: string;
  userId: string;
  dataSourceId: string;
  status: 'pending' | 'processing' | 'completed' | 'failed';
  progress: number;
  results?: unknown;
  error?: string;
  createdAt: Date;
  updatedAt: Date;
}

export interface StartDiscoveryRequest {
  userId: string;
  dataSourceId: string;
  schemas?: string[];
  tables?: string[];
  options?: {
    sampleSize?: number;
    includeData?: boolean;
    analysisDepth?: 'basic' | 'detailed' | 'comprehensive';
  };
}

// shape as returned from DB
type DbSessionRow = {
  session_id: string;
  user_id: string;
  data_source_id: string;
  status: DiscoverySession['status'];
  progress: number;
  results: unknown | null;
  error: string | null;
  created_at: Date;
  updated_at: Date;
};

// local helper type for metadata
type ColumnDef = { name: string; type: string; nullable: boolean; description?: string };
type TableMeta = { schema: string; name: string; columns: ColumnDef[] };

export class DiscoveryService {
  private readonly aiService = new AIService();

  public async startDiscovery(request: StartDiscoveryRequest): Promise<DiscoverySession> {
    try {
      const sessionId = uuidv4();

      // Create discovery session
      const session = await this.createSession({
        sessionId,
        userId: request.userId,
        dataSourceId: request.dataSourceId,
        status: 'pending',
        progress: 0,
      });

      // Kick off async processing
      setImmediate(() =>
        this.processDiscovery(session, request).catch((err) => {
          const msg = err instanceof Error ? err.message : String(err);
          logger.error('Discovery background task fatal error', { sessionId, error: msg });
        })
      );

      logger.info('Discovery session started', { sessionId, dataSourceId: request.dataSourceId });
      return session;
    } catch (err: unknown) {
      const msg = err instanceof Error ? err.message : 'Unknown error';
      logger.error('Failed to start discovery', { error: msg });
      throw new APIError('Failed to start discovery', 500, err);
    }
  }

  public async getSession(sessionId: string): Promise<DiscoverySession | null> {
    try {
      const result = await db.query('SELECT * FROM discovery_sessions WHERE session_id = $1', [sessionId]);
      if (result.rows.length === 0) return null;
      return this.mapSessionFromDb(result.rows[0] as DbSessionRow);
    } catch (err: unknown) {
      const msg = err instanceof Error ? err.message : 'Unknown error';
      logger.error('Failed to get discovery session', { sessionId, error: msg });
      throw new APIError('Failed to get session', 500, err);
    }
  }

  public async listSessions(userId: string, limit = 20, offset = 0): Promise<DiscoverySession[]> {
    try {
      const result = await db.query(
        `SELECT * FROM discovery_sessions 
         WHERE user_id = $1 
         ORDER BY created_at DESC 
         LIMIT $2 OFFSET $3`,
        [userId, limit, offset]
      );

      return (result.rows as DbSessionRow[]).map((row) => this.mapSessionFromDb(row));
    } catch (err: unknown) {
      const msg = err instanceof Error ? err.message : 'Unknown error';
      logger.error('Failed to list discovery sessions', { userId, error: msg });
      throw new APIError('Failed to list sessions', 500, err);
    }
  }

  public async deleteSession(sessionId: string, userId: string): Promise<void> {
    try {
      const result = await db.query('DELETE FROM discovery_sessions WHERE session_id = $1 AND user_id = $2', [
        sessionId,
        userId,
      ]);

      if (result.rowCount === 0) {
        throw new APIError('Session not found', 404);
      }

      logger.info('Discovery session deleted', { sessionId });
    } catch (err: unknown) {
      const msg = err instanceof Error ? err.message : 'Unknown error';
      logger.error('Failed to delete discovery session', { sessionId, error: msg });
      throw err instanceof APIError ? err : new APIError('Failed to delete session', 500, err);
    }
  }

  /* --------------------------- Internals --------------------------- */

  private async createSession(session: Partial<DiscoverySession>): Promise<DiscoverySession> {
    const result = await db.query(
      `INSERT INTO discovery_sessions 
       (session_id, user_id, data_source_id, status, progress, created_at, updated_at)
       VALUES ($1, $2, $3, $4, $5, NOW(), NOW())
       RETURNING *`,
      [session.sessionId, session.userId, session.dataSourceId, session.status, session.progress]
    );
    return this.mapSessionFromDb(result.rows[0] as DbSessionRow);
  }

  private async updateSession(sessionId: string, updates: Partial<DiscoverySession>): Promise<void> {
    const setClause: string[] = [];
    const values: unknown[] = [];
    let i = 1;

    for (const [key, value] of Object.entries(updates)) {
      if (key === 'sessionId') continue;
      // convert camelCase to snake_case
      const dbKey = key.replace(/[A-Z]/g, (m) => `_${m.toLowerCase()}`);
      setClause.push(`${dbKey} = $${i++}`);
      values.push(value);
    }

    if (setClause.length === 0) return;

    setClause.push(`updated_at = NOW()`);
    values.push(sessionId);

    await db.query(`UPDATE discovery_sessions SET ${setClause.join(', ')} WHERE session_id = $${i}`, values);
  }

  private async processDiscovery(session: DiscoverySession, request: StartDiscoveryRequest): Promise<void> {
    try {
      await this.updateSession(session.sessionId, { status: 'processing', progress: 10 });

      const dataSource = await this.getDataSource(request.dataSourceId);
      if (!dataSource) throw new Error('Data source not found');

      await this.updateSession(session.sessionId, { progress: 20 });

      // Retrieve metadata
      const metadata = await this.getSchemaMetadata(dataSource, request.schemas, request.tables);
      await this.updateSession(session.sessionId, { progress: 40 });

      const results: Array<{ schema: string; table: string; analysis: unknown }> = [];
      const totalTables = metadata.length || 1;

      for (let idx = 0; idx < metadata.length; idx++) {
        const table = metadata[idx];

        // Optional sample data
        let sampleData: unknown[] = [];
        if (request.options?.includeData) {
          sampleData = await this.getSampleData(
            dataSource,
            table.schema,
            table.name,
            request.options.sampleSize ?? 100
          );
        }

        // IMPORTANT: make columns mutable (clone), not readonly
        const columns: ColumnDef[] = table.columns.map((c) => ({ ...c }));

        const discoveryRequest: FieldDiscoveryRequest = {
          schema: table.schema,
          tableName: table.name,
          columns,            // mutable array now
          sampleData,         // always an array
          context: `Discovery session for ${String(dataSource.name ?? dataSource.id)}`,
        };

        const analysis = await this.aiService.discoverFields(discoveryRequest);

        results.push({ schema: table.schema, table: table.name, analysis });

        // progress: 40 â†’ 90 during table loop
        const progress = 40 + Math.floor(((idx + 1) / totalTables) * 50);
        await this.updateSession(session.sessionId, { progress });
      }

      await this.updateSession(session.sessionId, {
        status: 'completed',
        progress: 100,
        results: { tables: results, summary: this.generateSummary(results) },
      });

      logger.info('Discovery completed successfully', {
        sessionId: session.sessionId,
        tablesProcessed: results.length,
      });
    } catch (err: unknown) {
      const msg = err instanceof Error ? err.message : 'Unknown error';
      logger.error('Discovery processing failed', { sessionId: session.sessionId, error: msg });

      await this.updateSession(session.sessionId, { status: 'failed', error: msg });
    }
  }

  private async getDataSource(dataSourceId: string): Promise<any | null> {
    const result = await db.query('SELECT * FROM data_sources WHERE id = $1', [dataSourceId]);
    return result.rows[0] ?? null;
  }

  // eslint-disable-next-line @typescript-eslint/no-unused-vars
  private async getSchemaMetadata(
    _dataSource: any,
    _schemas?: string[],
    _tables?: string[]
  ): Promise<TableMeta[]> {
    // TODO: replace with real connector fetch
    return [
      {
        schema: 'public',
        name: 'users',
        columns: [
          { name: 'id', type: 'integer', nullable: false },
          { name: 'email', type: 'varchar', nullable: false },
          { name: 'first_name', type: 'varchar', nullable: true },
          { name: 'last_name', type: 'varchar', nullable: true },
          { name: 'phone', type: 'varchar', nullable: true },
          { name: 'created_at', type: 'timestamp', nullable: false },
        ],
      },
    ];
  }

  private async getSampleData(
    _dataSource: any,
    _schema: string,
    _table: string,
    _limit: number
  ): Promise<unknown[]> {
    // TODO: replace with actual sampling query
    return [
      { id: 1, email: 'john@example.com', first_name: 'John', last_name: 'Doe', phone: '+1234567890' },
      { id: 2, email: 'jane@example.com', first_name: 'Jane', last_name: 'Smith', phone: '+1987654321' },
    ];
  }

  private generateSummary(results: ReadonlyArray<{ analysis: any }>): {
    totalTables: number;
    totalFields: number;
    classifications: Record<string, number>;
    sensitivities: Record<string, number>;
    recommendations: string[];
  } {
    let totalFields = 0;
    const classifications: Record<string, number> = Object.create(null);
    const sensitivities: Record<string, number> = Object.create(null);

    for (const t of results) {
      const fields: ReadonlyArray<any> = Array.isArray(t.analysis?.fields) ? t.analysis.fields : [];
      totalFields += fields.length;

      for (const f of fields) {
        const cls = String(f.classification ?? 'Unknown');
        const sen = String(f.sensitivity ?? 'Unknown');
        classifications[cls] = (classifications[cls] ?? 0) + 1;
        sensitivities[sen] = (sensitivities[sen] ?? 0) + 1;
      }
    }

    const recommendations = results
      .flatMap((t) => {
        const gov: unknown = t.analysis?.recommendations?.governance;
        return Array.isArray(gov) ? gov : [];
      })
      .slice(0, 10);

    return {
      totalTables: results.length,
      totalFields,
      classifications,
      sensitivities,
      recommendations,
    };
  }

  private mapSessionFromDb(row: DbSessionRow): DiscoverySession {
    // Build with conditional spreads to satisfy exactOptionalPropertyTypes:
    const base: Omit<DiscoverySession, 'results' | 'error'> = {
      sessionId: row.session_id,
      userId: row.user_id,
      dataSourceId: row.data_source_id,
      status: row.status,
      progress: row.progress,
      createdAt: row.created_at,
      updatedAt: row.updated_at,
    };

    return {
      ...base,
      ...(row.results !== null ? { results: row.results } : {}),
      ...(row.error !== null ? { error: row.error } : {}),
    };
  }
}



--------------------------------------------------------------------------------
FILE: backend\ai-service\src\utils\errors.ts
--------------------------------------------------------------------------------
export class APIError extends Error {
  public statusCode: number;
  public isOperational: boolean;
  public details?: any;

  constructor(message: string, statusCode = 500, details?: any) {
    super(message);
    this.name = 'APIError';
    this.statusCode = statusCode;
    this.isOperational = true;
    this.details = details;

    // Ensure proper prototype chain
    Object.setPrototypeOf(this, APIError.prototype);

    // Capture stack trace
    Error.captureStackTrace(this, this.constructor);
  }
}

export class ValidationError extends APIError {
  constructor(message: string, details?: any) {
    super(message, 400, details);
    this.name = 'ValidationError';
  }
}

export class AuthenticationError extends APIError {
  constructor(message = 'Authentication required') {
    super(message, 401);
    this.name = 'AuthenticationError';
  }
}

export class AuthorizationError extends APIError {
  constructor(message = 'Insufficient permissions') {
    super(message, 403);
    this.name = 'AuthorizationError';
  }
}

export class NotFoundError extends APIError {
  constructor(resource = 'Resource') {
    super(`${resource} not found`, 404);
    this.name = 'NotFoundError';
  }
}

export class ConflictError extends APIError {
  constructor(message = 'Resource conflict') {
    super(message, 409);
    this.name = 'ConflictError';
  }
}

export class RateLimitError extends APIError {
  constructor(message = 'Rate limit exceeded') {
    super(message, 429);
    this.name = 'RateLimitError';
  }
}

export class ExternalServiceError extends APIError {
  constructor(service: string, message?: string) {
    super(message || `External service ${service} is unavailable`, 503);
    this.name = 'ExternalServiceError';
  }
}


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\utils\gracefulShutdown.ts
--------------------------------------------------------------------------------
// src/utils/gracefulShutdown.ts
import { Server } from 'http';
import { logger } from './logger';

interface ShutdownOptions {
  timeout?: number; // Timeout in milliseconds
  signals?: string[]; // Signals to listen for
  forceExitDelay?: number; // Delay before force exit
}

/**
 * Production-ready graceful shutdown handler
 */
export class GracefulShutdown {
  private server: Server;
  private isShuttingDown: boolean = false;
  private connections: Set<any> = new Set();
  private options: Required<ShutdownOptions>;
  private shutdownTimeout: NodeJS.Timeout | null = null;
  private forceExitTimeout: NodeJS.Timeout | null = null;

  constructor(server: Server, options: ShutdownOptions = {}) {
    this.server = server;
    this.options = {
      timeout: options.timeout || 30000, // 30 seconds default
      signals: options.signals || ['SIGTERM', 'SIGINT', 'SIGUSR2'],
      forceExitDelay: options.forceExitDelay || 5000 // 5 seconds before force exit
    };

    this.setupConnectionTracking();
    this.setupSignalHandlers();
  }

  /**
   * Track active connections
   */
  private setupConnectionTracking(): void {
    this.server.on('connection', (connection) => {
      this.connections.add(connection);
      
      connection.on('close', () => {
        this.connections.delete(connection);
      });

      // Handle connection errors
      connection.on('error', (error) => {
        logger.warn('Connection error during shutdown:', error);
        this.connections.delete(connection);
      });
    });
  }

  /**
   * Setup signal handlers for graceful shutdown
   */
  private setupSignalHandlers(): void {
    this.options.signals.forEach((signal) => {
      process.on(signal, () => {
        logger.info(`Received ${signal} signal, starting graceful shutdown...`);
        this.initiateShutdown(signal);
      });
    });

    // Handle uncaught exceptions during shutdown
    process.on('uncaughtException', (error) => {
      logger.error('Uncaught exception during shutdown:', error);
      if (this.isShuttingDown) {
        this.forceExit(1);
      }
    });

    // Handle unhandled promise rejections during shutdown
    process.on('unhandledRejection', (reason, promise) => {
      logger.error('Unhandled promise rejection during shutdown:', { reason, promise });
      if (this.isShuttingDown) {
        this.forceExit(1);
      }
    });
  }

  /**
   * Initiate graceful shutdown process
   */
  private async initiateShutdown(signal: string): Promise<void> {
    if (this.isShuttingDown) {
      logger.warn('Shutdown already in progress, ignoring signal');
      return;
    }

    this.isShuttingDown = true;
    const startTime = Date.now();

    logger.info('Starting graceful shutdown process...', {
      signal,
      activeConnections: this.connections.size,
      timeout: this.options.timeout
    });

    // Set timeout for forced shutdown
    this.shutdownTimeout = setTimeout(() => {
      logger.warn('Graceful shutdown timeout reached, forcing shutdown');
      this.forceShutdown();
    }, this.options.timeout);

    // Set force exit timeout
    this.forceExitTimeout = setTimeout(() => {
      logger.error('Force exit timeout reached, terminating process');
      this.forceExit(1);
    }, this.options.timeout + this.options.forceExitDelay);

    try {
      // Step 1: Stop accepting new connections
      await this.stopAcceptingConnections();

      // Step 2: Close existing connections gracefully
      await this.closeExistingConnections();

      // Step 3: Cleanup resources
      await this.cleanupResources();

      // Step 4: Exit gracefully
      const duration = Date.now() - startTime;
      logger.info(`Graceful shutdown completed successfully in ${duration}ms`);
      
      this.clearTimeouts();
      process.exit(0);

    } catch (error) {
      logger.error('Error during graceful shutdown:', error);
      this.forceExit(1);
    }
  }

  /**
   * Stop accepting new connections
   */
  private async stopAcceptingConnections(): Promise<void> {
    return new Promise((resolve, reject) => {
      if (!this.server.listening) {
        logger.info('Server not listening, skipping connection stop');
        return resolve();
      }

      logger.info('Stopping server from accepting new connections...');
      
      this.server.close((error) => {
        if (error) {
          logger.error('Error stopping server:', error);
          return reject(error);
        }
        
        logger.info('Server stopped accepting new connections');
        resolve();
      });
    });
  }

  /**
   * Close existing connections gracefully
   */
  private async closeExistingConnections(): Promise<void> {
    if (this.connections.size === 0) {
      logger.info('No active connections to close');
      return;
    }

    logger.info(`Closing ${this.connections.size} active connections...`);

    // Give connections time to finish naturally
    await this.waitForConnectionsToClose(5000);

    // Force close remaining connections
    if (this.connections.size > 0) {
      logger.warn(`Force closing ${this.connections.size} remaining connections`);
      this.connections.forEach((connection) => {
        try {
          connection.destroy();
        } catch (error) {
          logger.warn('Error destroying connection:', error);
        }
      });
      this.connections.clear();
    }

    logger.info('All connections closed');
  }

  /**
   * Wait for connections to close naturally
   */
  private async waitForConnectionsToClose(timeout: number): Promise<void> {
    const startTime = Date.now();
    
    while (this.connections.size > 0 && (Date.now() - startTime) < timeout) {
      await new Promise(resolve => setTimeout(resolve, 100));
    }
  }

  /**
   * Cleanup application resources
   */
  private async cleanupResources(): Promise<void> {
    logger.info('Cleaning up application resources...');

    try {
      // Import and close database connections
      const { db } = await import('@/config/database');
      if (db && typeof db.close === 'function') {
        await db.close();
        logger.info('Database connections closed');
      }
    } catch (error) {
      logger.warn('Error closing database connections:', error);
    }

    try {
      // Import and close Redis connections
      const { redis } = await import('@/config/redis');
      if (redis && typeof redis.close === 'function') {
        await redis.close();
        logger.info('Redis connections closed');
      }
    } catch (error) {
      logger.warn('Error closing Redis connections:', error);
    }

    // Clear any intervals or timeouts
    this.clearApplicationTimers();

    logger.info('Resource cleanup completed');
  }

  /**
   * Clear application timers and intervals
   */
  private clearApplicationTimers(): void {
    // Clear any global intervals or timeouts
    // This is a placeholder - you can add specific timer cleanup here
    logger.debug('Application timers cleared');
  }

  /**
   * Force shutdown when graceful shutdown fails
   */
  private forceShutdown(): void {
    logger.warn('Forcing immediate shutdown...');

    // Destroy all connections immediately
    this.connections.forEach((connection) => {
      try {
        connection.destroy();
      } catch (error) {
        logger.warn('Error destroying connection during force shutdown:', error);
      }
    });

    this.connections.clear();
    
    // Force close server
    try {
      this.server.close();
    } catch (error) {
      logger.warn('Error force closing server:', error);
    }

    this.clearTimeouts();
    this.forceExit(1);
  }

  /**
   * Force exit the process
   */
  private forceExit(code: number): void {
    logger.error(`Force exiting with code ${code}`);
    this.clearTimeouts();
    process.exit(code);
  }

  /**
   * Clear shutdown timeouts
   */
  private clearTimeouts(): void {
    if (this.shutdownTimeout) {
      clearTimeout(this.shutdownTimeout);
      this.shutdownTimeout = null;
    }

    if (this.forceExitTimeout) {
      clearTimeout(this.forceExitTimeout);
      this.forceExitTimeout = null;
    }
  }

  /**
   * Get shutdown status
   */
  public isShutdownInProgress(): boolean {
    return this.isShuttingDown;
  }

  /**
   * Get active connections count
   */
  public getActiveConnectionsCount(): number {
    return this.connections.size;
  }
}

/**
 * Simple graceful shutdown function (backwards compatible)
 */
export function gracefulShutdown(server: Server, options?: ShutdownOptions): GracefulShutdown {
  return new GracefulShutdown(server, options);
}

/**
 * Enhanced graceful shutdown with custom cleanup
 */
export function createGracefulShutdown(
  server: Server, 
  options: ShutdownOptions = {},
  customCleanup?: () => Promise<void>
): GracefulShutdown {
  const shutdown = new GracefulShutdown(server, options);

  // Add custom cleanup if provided
  if (customCleanup) {
    const originalCleanup = (shutdown as any).cleanupResources;
    (shutdown as any).cleanupResources = async function() {
      await originalCleanup.call(this);
      try {
        await customCleanup();
        logger.info('Custom cleanup completed');
      } catch (error) {
        logger.error('Error in custom cleanup:', error);
      }
    };
  }

  return shutdown;
}

// Export default
export default gracefulShutdown;


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\utils\logger.ts
--------------------------------------------------------------------------------
import winston from 'winston';
import DailyRotateFile from 'winston-daily-rotate-file';

const logFormat = winston.format.combine(
  winston.format.timestamp(),
  winston.format.errors({ stack: true }),
  winston.format.json()
);

const consoleFormat = winston.format.combine(
  winston.format.colorize(),
  winston.format.timestamp({ format: 'YYYY-MM-DD HH:mm:ss' }),
  winston.format.printf(({ timestamp, level, message, ...meta }) => {
    return `${timestamp} [${level}]: ${message} ${Object.keys(meta).length ? JSON.stringify(meta, null, 2) : ''}`;
  })
);

// Create logger instance
export const logger = winston.createLogger({
  level: process.env.LOG_LEVEL || 'info',
  format: logFormat,
  defaultMeta: { 
    service: 'ai-service',
    version: process.env.APP_VERSION || '1.0.0'
  },
  transports: [
    // Console transport
    new winston.transports.Console({
      format: process.env.NODE_ENV === 'production' ? logFormat : consoleFormat
    }),

    // File transport for errors
    new DailyRotateFile({
      filename: 'logs/error-%DATE%.log',
      datePattern: 'YYYY-MM-DD',
      level: 'error',
      maxSize: process.env.LOG_FILE_MAX_SIZE || '20m',
      maxFiles: process.env.LOG_FILE_MAX_FILES || '14d',
      zippedArchive: true
    }),

    // File transport for all logs
    new DailyRotateFile({
      filename: 'logs/combined-%DATE%.log',
      datePattern: 'YYYY-MM-DD',
      maxSize: process.env.LOG_FILE_MAX_SIZE || '20m',
      maxFiles: process.env.LOG_FILE_MAX_FILES || '14d',
      zippedArchive: true
    })
  ],

  // Handle exceptions and rejections
  exceptionHandlers: [
    new winston.transports.File({ filename: 'logs/exceptions.log' })
  ],
  rejectionHandlers: [
    new winston.transports.File({ filename: 'logs/rejections.log' })
  ]
});

// Create child logger for specific modules
export const createChildLogger = (module: string) => {
  return logger.child({ module });
};


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\utils\responses.ts
--------------------------------------------------------------------------------
export interface ApiResponse<T = any> {
  success: boolean;
  data?: T;
  message?: string;
  pagination?: {
    page: number;
    limit: number;
    total: number;
    totalPages: number;
  };
  meta?: {
    requestId?: string;
    timestamp: string;
    version: string;
  };
}

export const successResponse = <T>(
  data: T,
  message = 'Success',
  pagination?: any
): ApiResponse<T> => {
  return {
    success: true,
    data,
    message,
    ...(pagination && { pagination }),
    meta: {
      timestamp: new Date().toISOString(),
      version: process.env.APP_VERSION || '1.0.0'
    }
  };
};

export const errorResponse = (
  message: string,
  code = 500,
  details?: any
): ApiResponse => {
  return {
    success: false,
    message,
    ...(details && { data: details }),
    meta: {
      timestamp: new Date().toISOString(),
      version: process.env.APP_VERSION || '1.0.0'
    }
  };
};

export const paginatedResponse = <T>(
  data: T[],
  page: number,
  limit: number,
  total: number,
  message = 'Success'
): ApiResponse<T[]> => {
  return {
    success: true,
    data,
    message,
    pagination: {
      page,
      limit,
      total,
      totalPages: Math.ceil(total / limit)
    },
    meta: {
      timestamp: new Date().toISOString(),
      version: process.env.APP_VERSION || '1.0.0'
    }
  };
};


--------------------------------------------------------------------------------
FILE: backend\ai-service\src\utils\validator.ts
--------------------------------------------------------------------------------
// src/utils/validator.ts
import type { RequestHandler } from 'express';
import Joi, { Schema, ValidationOptions } from 'joi';

/**
 * Common primitives
 */
const uuid = Joi.string().guid({ version: ['uuidv4', 'uuidv5'] });

const email = Joi.string()
  .email({ tlds: { allow: false } })
  .max(254);

const password = Joi.string()
  .min(8)
  // at least one lowercase, one uppercase, one digit, one special
  .pattern(/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[ !"#$%&'()*+,\-./:;<=>?@[\\\]^_`{|}~]).{8,}$/)
  .messages({
    'string.pattern.base':
      'Password must include upper & lower case letters, a number, and a special character.',
  });

/**
 * E.164-ish phone: optional leading +, then 7â€“15 digits (first digit cannot be 0)
 * If you want strictly E.164 (1â€“15 digits, no leading 0), use /^\+[1-9]\d{1,14}$/
 */
const phone = Joi.string()
  .pattern(/^\+?[1-9]\d{6,14}$/)
  .messages({
    'string.pattern.base': 'Phone must be a valid international number (e.g., +15551234567).',
  });

const nonEmptyString = Joi.string().trim().min(1);

const dateISO = Joi.date().iso();

/**
 * Reusable â€œfieldâ€ library
 */
export const Fields = {
  uuid,
  email,
  password,
  phone,
  nonEmptyString,
  dateISO,
  // add as needed:
  // intId: Joi.number().integer().positive(),
  // url: Joi.string().uri({ scheme: [/https?/] }),
};

/**
 * Example composed schemas you can import directly
 */
export const Schemas = {
  // Auth
  register: Joi.object({
    email: Fields.email.required(),
    password: Fields.password.required(),
    fullName: Fields.nonEmptyString.required(),
    phone: Fields.phone.optional(),
  }),

  login: Joi.object({
    email: Fields.email.required(),
    password: Joi.string().required(),
  }),

  // Users
  userCreate: Joi.object({
    email: Fields.email.required(),
    password: Fields.password.required(),
    firstName: Fields.nonEmptyString.required(),
    lastName: Fields.nonEmptyString.required(),
    phone: Fields.phone.optional(),
  }),

  userUpdate: Joi.object({
    email: Fields.email.optional(),
    firstName: Fields.nonEmptyString.optional(),
    lastName: Fields.nonEmptyString.optional(),
    phone: Fields.phone.optional(),
  }).min(1), // at least one field

  // Generic id param
  idParam: Joi.object({ id: Fields.uuid.required() }),

  // Pagination / filtering example
  paginationQuery: Joi.object({
    page: Joi.number().integer().min(1).default(1),
    pageSize: Joi.number().integer().min(1).max(200).default(25),
    search: Joi.string().trim().max(200).optional(),
    sortBy: Joi.string().trim().max(64).optional(),
    sortDir: Joi.string().valid('asc', 'desc').default('asc'),
  }),
} as const;

/**
 * Central validator helper (useful outside of Express too)
 */
export function validate<T>(
  value: unknown,
  schema: Schema,
  options: ValidationOptions = { abortEarly: false, stripUnknown: true }
): T {
  const { error, value: out } = schema.validate(value, options);
  if (error) {
    // Throw a structured error (you may map to your APIError)
    const details = error.details.map(d => d.message);
    throw new Error(`Validation failed: ${details.join('; ')}`);
  }
  return out as T;
}

/**
 * Express middlewares for validation
 */
type MiddlewareBuilder = (schema: Schema, options?: ValidationOptions) => RequestHandler;

export const validateBody: MiddlewareBuilder = (schema, options = { abortEarly: false, stripUnknown: true }) =>
  (req, _res, next) => {
    try {
      req.body = validate(req.body, schema, options);
      next();
    } catch (e) {
      next(e);
    }
  };

export const validateQuery: MiddlewareBuilder = (schema, options = { abortEarly: false, stripUnknown: true }) =>
  (req, _res, next) => {
    try {
      req.query = validate(req.query, schema, options);
      next();
    } catch (e) {
      next(e);
    }
  };

export const validateParams: MiddlewareBuilder = (schema, options = { abortEarly: false, stripUnknown: true }) =>
  (req, _res, next) => {
    try {
      req.params = validate(req.params, schema, options);
      next();
    } catch (e) {
      next(e);
    }
  };



--------------------------------------------------------------------------------
FILE: backend\ai-service\tests\analysis.test.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\tests\discovery.test.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\tests\health.test.ts
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\ai-service\tsconfig.json
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "commonjs",
    "lib": ["ES2020"],
    "outDir": "./dist",
    "rootDir": "./src",

    "strict": true,
    "strictNullChecks": true,
    "noImplicitAny": true,
    "noImplicitReturns": true,
    "noUnusedLocals": true,
    "noUnusedParameters": true,
    "noImplicitThis": true,
    "alwaysStrict": true,
    "noImplicitOverride": true,

    "moduleResolution": "node",
    "baseUrl": ".",
    "paths": {
      "@/*": ["src/*"],
      "@config/*": ["src/config/*"],
      "@controllers/*": ["src/controllers/*"],
      "@services/*": ["src/services/*"],
      "@models/*": ["src/models/*"],
      "@middleware/*": ["src/middleware/*"],
      "@utils/*": ["src/utils/*"],
      "@types/*": ["src/types/*"]
    },

    "skipLibCheck": true,
    "exactOptionalPropertyTypes": false,

    "esModuleInterop": true,
    "allowSyntheticDefaultImports": true,
    "resolveJsonModule": true,

    "declaration": true,
    "declarationMap": true,
    "sourceMap": true,
    "removeComments": true,

    "experimentalDecorators": true,
    "emitDecoratorMetadata": true
  },
  "ts-node": { "require": ["tsconfig-paths/register"] },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist", "tests"]
}



========================================================================================================================
  BACKEND SERVICE: PIPELINE-SERVICE
========================================================================================================================


--------------------------------------------------------------------------------
FILE: backend\pipeline-service\.env
--------------------------------------------------------------------------------
SERVICE_NAME=pipeline-service
PORT=3004
CORS_ORIGIN=http://localhost:5173



--------------------------------------------------------------------------------
FILE: backend\pipeline-service\Dockerfile
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\pipeline-service\Dockerfile.dev
--------------------------------------------------------------------------------
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD [ "npm", "run", "dev" ]



--------------------------------------------------------------------------------
FILE: backend\pipeline-service\package.json
--------------------------------------------------------------------------------
{
    "name":  "cwic-pipeline-service",
    "version":  "1.0.0",
    "type":  "module",
    "main":  "dist/server.js",
    "scripts":  {
                    "dev":  "nodemon --watch src --ext ts --exec \"npx tsx src/server.ts\"",
                    "build":  "tsc",
                    "start":  "node dist/server.js",
                    "typecheck":  "tsc --noEmit"
                },
    "engines":  {
                    "node":  "\u003e=18"
                },
    "dependencies":  {
                         "cors":  "^2.8.5",
                         "dotenv":  "^16.4.5",
                         "express":  "^4.19.2",
                         "helmet":  "^7.1.0",
                         "morgan":  "^1.10.0"
                     },
    "devDependencies":  {
                            "@types/express":  "^4.17.21",
                            "@types/node":  "^20.12.7",
                            "nodemon":  "^3.1.0",
                            "ts-node":  "^10.9.2",
                            "typescript":  "^5.4.5"
                        }
}



--------------------------------------------------------------------------------
FILE: backend\pipeline-service\src\app.ts
--------------------------------------------------------------------------------
import cors from 'cors';
import 'dotenv/config';
import express from 'express';
import helmet from 'helmet';
import morgan from 'morgan';

export const app = express();

const corsOrigin = process.env.CORS_ORIGIN || 'http://localhost:5173';
app.use(helmet());
app.use(cors({ origin: corsOrigin }));
app.use(express.json());
app.use(morgan('dev'));

app.get('/health', (_req, res) => {
  res.json({ service: process.env.SERVICE_NAME || 'pipeline-service', status: 'ok' });
});

app.get('/', (_req, res) => {
  res.json({ service: process.env.SERVICE_NAME || 'pipeline-service', message: 'Service up and running' });
});



--------------------------------------------------------------------------------
FILE: backend\pipeline-service\src\server.ts
--------------------------------------------------------------------------------
import { app } from './app.js';

const fallback = Number(process.env.FALLBACK_PORT || 3004);
const port = Number(process.env.PORT || fallback);

app.listen(port, () => {
  console.log(`[${process.env.SERVICE_NAME || 'pipeline-service'}] listening on :${port}`);
});



--------------------------------------------------------------------------------
FILE: backend\pipeline-service\tsconfig.json
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "esModuleInterop": true,
    "strict": true,
    "resolveJsonModule": true,
    "outDir": "dist",
    "skipLibCheck": true
  },
  "include": ["src"]
}



========================================================================================================================
  BACKEND SERVICE: NOTIFICATION-SERVICE
========================================================================================================================


--------------------------------------------------------------------------------
FILE: backend\notification-service\.env
--------------------------------------------------------------------------------
SERVICE_NAME=notification-service
PORT=3007
CORS_ORIGIN=http://localhost:5173



--------------------------------------------------------------------------------
FILE: backend\notification-service\Dockerfile
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\notification-service\Dockerfile.dev
--------------------------------------------------------------------------------
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD [ "npm", "run", "dev" ]



--------------------------------------------------------------------------------
FILE: backend\notification-service\package.json
--------------------------------------------------------------------------------
{
    "name":  "cwic-notification-service",
    "version":  "1.0.0",
    "type":  "module",
    "main":  "dist/server.js",
    "scripts":  {
                    "dev":  "nodemon --watch src --ext ts --exec \"npx tsx src/server.ts\"",
                    "build":  "tsc",
                    "start":  "node dist/server.js",
                    "typecheck":  "tsc --noEmit"
                },
    "engines":  {
                    "node":  "\u003e=18"
                },
    "dependencies":  {
                         "cors":  "^2.8.5",
                         "dotenv":  "^16.4.5",
                         "express":  "^4.19.2",
                         "helmet":  "^7.1.0",
                         "morgan":  "^1.10.0"
                     },
    "devDependencies":  {
                            "@types/express":  "^4.17.21",
                            "@types/node":  "^20.12.7",
                            "nodemon":  "^3.1.0",
                            "ts-node":  "^10.9.2",
                            "typescript":  "^5.4.5"
                        }
}



--------------------------------------------------------------------------------
FILE: backend\notification-service\src\app.ts
--------------------------------------------------------------------------------
import cors from 'cors';
import 'dotenv/config';
import express from 'express';
import helmet from 'helmet';
import morgan from 'morgan';

export const app = express();

const corsOrigin = process.env.CORS_ORIGIN || 'http://localhost:5173';
app.use(helmet());
app.use(cors({ origin: corsOrigin }));
app.use(express.json());
app.use(morgan('dev'));

app.get('/health', (_req, res) => {
  res.json({ service: process.env.SERVICE_NAME || 'notification-service', status: 'ok' });
});

app.get('/', (_req, res) => {
  res.json({ service: process.env.SERVICE_NAME || 'notification-service', message: 'Service up and running' });
});



--------------------------------------------------------------------------------
FILE: backend\notification-service\src\server.ts
--------------------------------------------------------------------------------
import { app } from './app.js';

const fallback = Number(process.env.FALLBACK_PORT || 3007);
const port = Number(process.env.PORT || fallback);

app.listen(port, () => {
  console.log(`[${process.env.SERVICE_NAME || 'notification-service'}] listening on :${port}`);
});



--------------------------------------------------------------------------------
FILE: backend\notification-service\tsconfig.json
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "esModuleInterop": true,
    "strict": true,
    "resolveJsonModule": true,
    "outDir": "dist",
    "skipLibCheck": true
  },
  "include": ["src"]
}



========================================================================================================================
  BACKEND SERVICE: INTEGRATION-SERVICE
========================================================================================================================


--------------------------------------------------------------------------------
FILE: backend\integration-service\.env
--------------------------------------------------------------------------------
SERVICE_NAME=integration-service
PORT=3006
CORS_ORIGIN=http://localhost:5173



--------------------------------------------------------------------------------
FILE: backend\integration-service\Dockerfile
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: backend\integration-service\Dockerfile.dev
--------------------------------------------------------------------------------
FROM node:18-alpine
WORKDIR /app
COPY package*.json ./
RUN npm install
COPY . .
EXPOSE 3000
CMD [ "npm", "run", "dev" ]



--------------------------------------------------------------------------------
FILE: backend\integration-service\package.json
--------------------------------------------------------------------------------
{
    "name":  "cwic-integration-service",
    "version":  "1.0.0",
    "type":  "module",
    "main":  "dist/server.js",
    "scripts":  {
                    "dev":  "nodemon --watch src --ext ts --exec \"npx tsx src/server.ts\"",
                    "build":  "tsc",
                    "start":  "node dist/server.js",
                    "typecheck":  "tsc --noEmit"
                },
    "engines":  {
                    "node":  "\u003e=18"
                },
    "dependencies":  {
                         "cors":  "^2.8.5",
                         "dotenv":  "^16.4.5",
                         "express":  "^4.19.2",
                         "helmet":  "^7.1.0",
                         "morgan":  "^1.10.0"
                     },
    "devDependencies":  {
                            "@types/express":  "^4.17.21",
                            "@types/node":  "^20.12.7",
                            "nodemon":  "^3.1.0",
                            "ts-node":  "^10.9.2",
                            "typescript":  "^5.4.5"
                        }
}



--------------------------------------------------------------------------------
FILE: backend\integration-service\src\app.ts
--------------------------------------------------------------------------------
import cors from 'cors';
import 'dotenv/config';
import express from 'express';
import helmet from 'helmet';
import morgan from 'morgan';

export const app = express();

const corsOrigin = process.env.CORS_ORIGIN || 'http://localhost:5173';
app.use(helmet());
app.use(cors({ origin: corsOrigin }));
app.use(express.json());
app.use(morgan('dev'));

app.get('/health', (_req, res) => {
  res.json({ service: process.env.SERVICE_NAME || 'integration-service', status: 'ok' });
});

app.get('/', (_req, res) => {
  res.json({ service: process.env.SERVICE_NAME || 'integration-service', message: 'Service up and running' });
});



--------------------------------------------------------------------------------
FILE: backend\integration-service\src\server.ts
--------------------------------------------------------------------------------
import { app } from './app.js';

const fallback = Number(process.env.FALLBACK_PORT || 3006);
const port = Number(process.env.PORT || fallback);

app.listen(port, () => {
  console.log(`[${process.env.SERVICE_NAME || 'integration-service'}] listening on :${port}`);
});



--------------------------------------------------------------------------------
FILE: backend\integration-service\tsconfig.json
--------------------------------------------------------------------------------
{
  "compilerOptions": {
    "target": "ES2020",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "esModuleInterop": true,
    "strict": true,
    "resolveJsonModule": true,
    "outDir": "dist",
    "skipLibCheck": true
  },
  "include": ["src"]
}



========================================================================================================================
  DATABASE SCRIPTS
========================================================================================================================


--------------------------------------------------------------------------------
FILE: database\init\02-auth.sql
--------------------------------------------------------------------------------
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

CREATE TABLE IF NOT EXISTS users (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  email CITEXT UNIQUE NOT NULL,
  password_hash TEXT NOT NULL,
  display_name TEXT NOT NULL,
  roles TEXT[] NOT NULL DEFAULT ARRAY['user'],
  is_verified BOOLEAN NOT NULL DEFAULT false,
  created_at TIMESTAMPTZ NOT NULL DEFAULT now(),
  updated_at TIMESTAMPTZ NOT NULL DEFAULT now()
);

CREATE UNIQUE INDEX IF NOT EXISTS idx_users_email ON users (email);



--------------------------------------------------------------------------------
FILE: database\migrations\001_initial_schema.sql
--------------------------------------------------------------------------------
-- -- initial schema



--------------------------------------------------------------------------------
FILE: database\migrations\002_add_data_sources.sql
--------------------------------------------------------------------------------
-- -- add data sources



--------------------------------------------------------------------------------
FILE: database\migrations\003_add_quality_rules.sql
--------------------------------------------------------------------------------
-- -- add quality rules



--------------------------------------------------------------------------------
FILE: database\migrations\004_add_pipelines.sql
--------------------------------------------------------------------------------
-- -- add pipelines



--------------------------------------------------------------------------------
FILE: database\schemas\audit.sql
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: database\schemas\auth.sql
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: database\schemas\data_catalog.sql
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: database\schemas\pipelines.sql
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: database\schemas\quality.sql
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: database\seeds\data_sources.sql
--------------------------------------------------------------------------------
-- -- seed data sources



--------------------------------------------------------------------------------
FILE: database\seeds\pipelines.sql
--------------------------------------------------------------------------------
# Empty file


--------------------------------------------------------------------------------
FILE: database\seeds\quality_rules.sql
--------------------------------------------------------------------------------
-- -- seed quality rules



--------------------------------------------------------------------------------
FILE: database\seeds\users.sql
--------------------------------------------------------------------------------
-- -- seed users



========================================================================================================================
  BACKEND INFRASTRUCTURE
========================================================================================================================


--------------------------------------------------------------------------------
FILE: infrastructure\docker-compose\docker-compose.dev.yml
--------------------------------------------------------------------------------

version: '3.8'

services:
  # Frontend Development Server
  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
      - /app/node_modules
    environment:
      - VITE_API_URL=http://localhost:8000
      - VITE_WS_URL=ws://localhost:8000
    depends_on:
      - api-gateway

  # API Gateway
  api-gateway:
    build:
      context: ./backend/api-gateway
      dockerfile: Dockerfile.dev
    ports:
      - "8000:8000"
    volumes:
      - ./backend/api-gateway:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
      - PORT=8000
      - AUTH_SERVICE_URL=http://auth-service:3001
      - DATA_SERVICE_URL=http://data-service:3002
      - AI_SERVICE_URL=http://ai-service:3003
      - PIPELINE_SERVICE_URL=http://pipeline-service:3004
    depends_on:
      - auth-service
      - data-service
      - ai-service
      - pipeline-service

  # Authentication Service
  auth-service:
    build:
      context: ./backend/auth-service
      dockerfile: Dockerfile.dev
    ports:
      - "3001:3001"
    volumes:
      - ./backend/auth-service:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
      - PORT=3001
      - DATABASE_URL=postgresql://postgres:password@postgres:5432/cwic_auth
      - JWT_SECRET=your-super-secret-jwt-key
      - JWT_EXPIRES_IN=24h
    depends_on:
      - postgres
      - redis

  # Data Service
  data-service:
    build:
      context: ./backend/data-service
      dockerfile: Dockerfile.dev
    ports:
      - "3002:3002"
    volumes:
      - ./backend/data-service:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
      - PORT=3002
      - DATABASE_URL=postgresql://postgres:password@postgres:5432/cwic_data
      - REDIS_URL=redis://redis:6379
    depends_on:
      - postgres
      - redis

  # AI Service
  ai-service:
    build:
      context: ./backend/ai-service
      dockerfile: Dockerfile.dev
    ports:
      - "3003:3003"
    volumes:
      - ./backend/ai-service:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
      - PORT=3003
      - OPENAI_API_KEY=${OPENAI_API_KEY}
      - AZURE_OPENAI_ENDPOINT=${AZURE_OPENAI_ENDPOINT}
      - AZURE_OPENAI_API_KEY=${AZURE_OPENAI_API_KEY}
    depends_on:
      - redis

  # Pipeline Service
  pipeline-service:
    build:
      context: ./backend/pipeline-service
      dockerfile: Dockerfile.dev
    ports:
      - "3004:3004"
    volumes:
      - ./backend/pipeline-service:/app
      - /app/node_modules
    environment:
      - NODE_ENV=development
      - PORT=3004
      - DATABASE_URL=postgresql://postgres:password@postgres:5432/cwic_pipelines
      - GITHUB_TOKEN=${GITHUB_TOKEN}
      - AZURE_DEVOPS_TOKEN=${AZURE_DEVOPS_TOKEN}
    depends_on:
      - postgres

  # PostgreSQL Database
  postgres:
    image: postgres:15-alpine
    restart: unless-stopped
    ports:
      - "5432:5432"
    environment:
      - POSTGRES_USER=postgres
      - POSTGRES_PASSWORD=password
      - POSTGRES_MULTIPLE_DATABASES=cwic_auth,cwic_data,cwic_pipelines,cwic_notifications
    volumes:
      - postgres_data:/var/lib/postgresql/data
      - ./database/scripts/create-multiple-databases.sh:/docker-entrypoint-initdb.d/create-multiple-databases.sh
      - ./database/migrations:/docker-entrypoint-initdb.d/migrations

  # Redis Cache
  redis:
    image: redis:7-alpine
    restart: unless-stopped
    ports:
      - "6379:6379"
    volumes:
      - redis_data:/data
    command: redis-server --appendonly yes

  # MinIO for Object Storage (S3 Compatible)
  minio:
    image: minio/minio:latest
    restart: unless-stopped
    ports:
      - "9000:9000"
      - "9001:9001"
    environment:
      - MINIO_ROOT_USER=minioadmin
      - MINIO_ROOT_PASSWORD=minioadmin123
    volumes:
      - minio_data:/data
    command: server /data --console-address ":9001"

  # Elasticsearch for Search
  elasticsearch:
    image: docker.elastic.co/elasticsearch/elasticsearch:8.9.0
    restart: unless-stopped
    ports:
      - "9200:9200"
    environment:
      - discovery.type=single-node
      - xpack.security.enabled=false
      - "ES_JAVA_OPTS=-Xms512m -Xmx512m"
    volumes:
      - elasticsearch_data:/usr/share/elasticsearch/data

  # Kafka for Event Streaming
  kafka:
    image: confluentinc/cp-kafka:latest
    restart: unless-stopped
    ports:
      - "9092:9092"
    environment:
      - KAFKA_BROKER_ID=1
      - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181
      - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://localhost:9092
      - KAFKA_OFFSETS_TOPIC_REPLICATION_FACTOR=1
    depends_on:
      - zookeeper

  # Zookeeper for Kafka
  zookeeper:
    image: confluentinc/cp-zookeeper:latest
    restart: unless-stopped
    ports:
      - "2181:2181"
    environment:
      - ZOOKEEPER_CLIENT_PORT=2181
      - ZOOKEEPER_TICK_TIME=2000

volumes:
  postgres_data:
  redis_data:
  minio_data:
  elasticsearch_data:


--------------------------------------------------------------------------------
FILE: infrastructure\docker-compose\docker-compose.override.yml
--------------------------------------------------------------------------------




--------------------------------------------------------------------------------
FILE: infrastructure\docker-compose\docker-compose.prod.yml
--------------------------------------------------------------------------------




--------------------------------------------------------------------------------
FILE: infrastructure\docker-compose\docker-compose.staging.yml
--------------------------------------------------------------------------------




--------------------------------------------------------------------------------
FILE: infrastructure\helm-charts\cwic-platform\Chart.yaml
--------------------------------------------------------------------------------
apiVersion: v2
name: cwic-platform
version: 0.1.0
type: application



--------------------------------------------------------------------------------
FILE: infrastructure\helm-charts\cwic-platform\values.yaml
--------------------------------------------------------------------------------
# values placeholder



========================================================================================================================
  BACKEND DIRECTORY STRUCTURE
========================================================================================================================

BACKEND SERVICES STRUCTURE:
  [DIR] backend\ai-service
  [DIR] backend\ai-service\src
  [DIR] backend\ai-service\src\config
  [DIR] backend\ai-service\src\controllers
  [DIR] backend\ai-service\src\interfaces
  [DIR] backend\ai-service\src\jobs
  [DIR] backend\ai-service\src\middleware
  [DIR] backend\ai-service\src\models
  [DIR] backend\ai-service\src\processors
  [DIR] backend\ai-service\src\prompts
  [DIR] backend\ai-service\src\routes
  [DIR] backend\ai-service\src\scripts
  [DIR] backend\ai-service\src\services
  [DIR] backend\ai-service\src\utils
  [DIR] backend\ai-service\tests
  [DIR] backend\api-gateway
  [DIR] backend\api-gateway\src
  [DIR] backend\api-gateway\src\config
  [DIR] backend\api-gateway\src\controllers
  [DIR] backend\api-gateway\src\middleware
  [DIR] backend\api-gateway\src\models
  [DIR] backend\api-gateway\src\proxy
  [DIR] backend\api-gateway\src\routes
  [DIR] backend\api-gateway\src\services
  [DIR] backend\api-gateway\src\utils
  [DIR] backend\api-gateway\tests
  [DIR] backend\auth-service
  [DIR] backend\auth-service\src
  [DIR] backend\auth-service\src\config
  [DIR] backend\auth-service\src\controllers
  [DIR] backend\auth-service\src\middleware
  [DIR] backend\auth-service\src\models
  [DIR] backend\auth-service\src\routes
  [DIR] backend\auth-service\src\services
  [DIR] backend\auth-service\src\utils
  [DIR] backend\auth-service\tests
  [DIR] backend\data-service
  [DIR] backend\data-service\migrations
  [DIR] backend\data-service\openapi
  [DIR] backend\data-service\src
  [DIR] backend\data-service\src\config
  [DIR] backend\data-service\src\controllers
  [DIR] backend\data-service\src\db
  [DIR] backend\data-service\src\middleware
  [DIR] backend\data-service\src\models
  [DIR] backend\data-service\src\queue
  [DIR] backend\data-service\src\repositories
  [DIR] backend\data-service\src\routes
  [DIR] backend\data-service\src\services
  [DIR] backend\data-service\src\services\connectors
  [DIR] backend\data-service\src\utils
  [DIR] backend\data-service\tests
  [DIR] backend\integration-service
  [DIR] backend\integration-service\src
  [DIR] backend\integration-service\src\adapters
  [DIR] backend\integration-service\src\adapters\azure-devops
  [DIR] backend\integration-service\src\adapters\git
  [DIR] backend\integration-service\src\adapters\jira
  [DIR] backend\integration-service\src\adapters\servicenow
  [DIR] backend\integration-service\src\config
  [DIR] backend\integration-service\src\controllers
  [DIR] backend\integration-service\src\middleware
  [DIR] backend\integration-service\src\models
  [DIR] backend\integration-service\src\routes
  [DIR] backend\integration-service\src\services
  [DIR] backend\integration-service\src\utils
  [DIR] backend\integration-service\tests
  [DIR] backend\notification-service
  [DIR] backend\notification-service\src
  [DIR] backend\notification-service\src\config
  [DIR] backend\notification-service\src\controllers
  [DIR] backend\notification-service\src\middleware
  [DIR] backend\notification-service\src\models
  [DIR] backend\notification-service\src\routes
  [DIR] backend\notification-service\src\services
  [DIR] backend\notification-service\src\utils
  [DIR] backend\notification-service\tests
  [DIR] backend\pipeline-service
  [DIR] backend\pipeline-service\src
  [DIR] backend\pipeline-service\src\config
  [DIR] backend\pipeline-service\src\controllers
  [DIR] backend\pipeline-service\src\middleware
  [DIR] backend\pipeline-service\src\models
  [DIR] backend\pipeline-service\src\routes
  [DIR] backend\pipeline-service\src\services
  [DIR] backend\pipeline-service\src\utils
  [DIR] backend\pipeline-service\tests
  [DIR] backend\shared
  [DIR] backend\shared\config
  [DIR] backend\shared\constants
  [DIR] backend\shared\middleware
  [DIR] backend\shared\types
  [DIR] backend\shared\utils

BACKEND FILE TYPES INCLUDED:
  - *.ts
  - *.js
  - *.json
  - *.env*
  - *.md
  - *.txt
  - Dockerfile*
  - *.yml
  - *.yaml

EXCLUDED DIRECTORIES:
  - node_modules
  - .git
  - dist
  - build
  - coverage
  - .nyc_output
  - logs
  - tmp
  - temp
